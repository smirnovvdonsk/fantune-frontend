var DM=Object.defineProperty,$M=Object.defineProperties;var OM=Object.getOwnPropertyDescriptors;var $v=Object.getOwnPropertySymbols;var NM=Object.prototype.hasOwnProperty,FM=Object.prototype.propertyIsEnumerable;var Ov=(t,e,n)=>e in t?DM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Et=(t,e)=>{for(var n in e||(e={}))NM.call(e,n)&&Ov(t,n,e[n]);if($v)for(var n of $v(e))FM.call(e,n)&&Ov(t,n,e[n]);return t},Uc=(t,e)=>$M(t,OM(e));function z0(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const PM="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",RM=z0(PM);function Nv(t){return!!t||t===""}function Uo(t){if(dt(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=Me(i)?BM(i):Uo(i);if(r)for(const s in r)e[s]=r[s]}return e}else{if(Me(t))return t;if(re(t))return t}}const LM=/;(?![^(]*\))/g,IM=/:(.+)/;function BM(t){const e={};return t.split(LM).forEach(n=>{if(n){const i=n.split(IM);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function jo(t){let e="";if(Me(t))e=t;else if(dt(t))for(let n=0;n<t.length;n++){const i=jo(t[n]);i&&(e+=i+" ")}else if(re(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function zM(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=dl(t[i],e[i]);return n}function dl(t,e){if(t===e)return!0;let n=Pv(t),i=Pv(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=dt(t),i=dt(e),n||i)return n&&i?zM(t,e):!1;if(n=re(t),i=re(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,s=Object.keys(e).length;if(r!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!dl(t[o],e[o]))return!1}}return String(t)===String(e)}function U0(t,e){return t.findIndex(n=>dl(n,e))}const xt=t=>t==null?"":dt(t)||re(t)&&(t.toString===Lv||!Ct(t.toString))?JSON.stringify(t,Fv,2):String(t),Fv=(t,e)=>e&&e.__v_isRef?Fv(t,e.value):Ho(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:Wo(e)?{[`Set(${e.size})`]:[...e.values()]}:re(e)&&!dt(e)&&!Iv(e)?String(e):e,Kt={},qo=[],fi=()=>{},UM=()=>!1,jM=/^on[^a-z]/,jc=t=>jM.test(t),j0=t=>t.startsWith("onUpdate:"),Ce=Object.assign,q0=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},qM=Object.prototype.hasOwnProperty,Rt=(t,e)=>qM.call(t,e),dt=Array.isArray,Ho=t=>qc(t)==="[object Map]",Wo=t=>qc(t)==="[object Set]",Pv=t=>t instanceof Date,Ct=t=>typeof t=="function",Me=t=>typeof t=="string",H0=t=>typeof t=="symbol",re=t=>t!==null&&typeof t=="object",Rv=t=>re(t)&&Ct(t.then)&&Ct(t.catch),Lv=Object.prototype.toString,qc=t=>Lv.call(t),HM=t=>qc(t).slice(8,-1),Iv=t=>qc(t)==="[object Object]",W0=t=>Me(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Hc=z0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},WM=/-(\w)/g,Di=Wc(t=>t.replace(WM,(e,n)=>n?n.toUpperCase():"")),VM=/\B([A-Z])/g,Vo=Wc(t=>t.replace(VM,"-$1").toLowerCase()),Vc=Wc(t=>t.charAt(0).toUpperCase()+t.slice(1)),V0=Wc(t=>t?`on${Vc(t)}`:""),Yc=(t,e)=>!Object.is(t,e),Gc=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Kc=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},pl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Bv;const YM=()=>Bv||(Bv=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Es;const Xc=[];class GM{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&Es&&(this.parent=Es,this.index=(Es.scopes||(Es.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}}on(){this.active&&(Xc.push(this),Es=this)}off(){this.active&&(Xc.pop(),Es=Xc[Xc.length-1])}stop(e){if(this.active){if(this.effects.forEach(n=>n.stop()),this.cleanups.forEach(n=>n()),this.scopes&&this.scopes.forEach(n=>n.stop(!0)),this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function KM(t,e){e=e||Es,e&&e.active&&e.effects.push(t)}const Y0=t=>{const e=new Set(t);return e.w=0,e.n=0,e},zv=t=>(t.w&$r)>0,Uv=t=>(t.n&$r)>0,XM=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=$r},QM=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];zv(r)&&!Uv(r)?r.delete(t):e[n++]=r,r.w&=~$r,r.n&=~$r}e.length=n}},G0=new WeakMap;let gl=0,$r=1;const K0=30,Yo=[];let ks;const As=Symbol(""),X0=Symbol("");class Q0{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],KM(this,i)}run(){if(!this.active)return this.fn();if(!Yo.length||!Yo.includes(this))try{return Yo.push(ks=this),ZM(),$r=1<<++gl,gl<=K0?XM(this):jv(this),this.fn()}finally{gl<=K0&&QM(this),$r=1<<--gl,Cs(),Yo.pop();const e=Yo.length;ks=e>0?Yo[e-1]:void 0}}stop(){this.active&&(jv(this),this.onStop&&this.onStop(),this.active=!1)}}function jv(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let Go=!0;const Z0=[];function Ko(){Z0.push(Go),Go=!1}function ZM(){Z0.push(Go),Go=!0}function Cs(){const t=Z0.pop();Go=t===void 0?!0:t}function Tn(t,e,n){if(!qv())return;let i=G0.get(t);i||G0.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=Y0()),Hv(r)}function qv(){return Go&&ks!==void 0}function Hv(t,e){let n=!1;gl<=K0?Uv(t)||(t.n|=$r,n=!zv(t)):n=!t.has(ks),n&&(t.add(ks),ks.deps.push(t))}function sr(t,e,n,i,r,s){const o=G0.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&dt(t))o.forEach((l,u)=>{(u==="length"||u>=i)&&a.push(l)});else switch(n!==void 0&&a.push(o.get(n)),e){case"add":dt(t)?W0(n)&&a.push(o.get("length")):(a.push(o.get(As)),Ho(t)&&a.push(o.get(X0)));break;case"delete":dt(t)||(a.push(o.get(As)),Ho(t)&&a.push(o.get(X0)));break;case"set":Ho(t)&&a.push(o.get(As));break}if(a.length===1)a[0]&&J0(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);J0(Y0(l))}}function J0(t,e){for(const n of dt(t)?t:[...t])(n!==ks||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const JM=z0("__proto__,__v_isRef,__isVue"),Wv=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(H0)),tS=tp(),eS=tp(!1,!0),nS=tp(!0),Vv=iS();function iS(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=Ht(this);for(let s=0,o=this.length;s<o;s++)Tn(i,"get",s+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(Ht)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Ko();const i=Ht(this)[e].apply(this,n);return Cs(),i}}),t}function tp(t=!1,e=!1){return function(i,r,s){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(t?e?vS:ex:e?tx:Jv).get(i))return i;const o=dt(i);if(!t&&o&&Rt(Vv,r))return Reflect.get(Vv,r,s);const a=Reflect.get(i,r,s);return(H0(r)?Wv.has(r):JM(r))||(t||Tn(i,"get",r),e)?a:je(a)?!o||!W0(r)?a.value:a:re(a)?t?nx(a):ip(a):a}}const rS=Yv(),sS=Yv(!0);function Yv(t=!1){return function(n,i,r,s){let o=n[i];if(ml(o)&&je(o))return!1;if(!t&&!ml(r)&&(ix(r)||(r=Ht(r),o=Ht(o)),!dt(n)&&je(o)&&!je(r)))return o.value=r,!0;const a=dt(n)&&W0(i)?Number(i)<n.length:Rt(n,i),l=Reflect.set(n,i,r,s);return n===Ht(s)&&(a?Yc(r,o)&&sr(n,"set",i,r):sr(n,"add",i,r)),l}}function oS(t,e){const n=Rt(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&sr(t,"delete",e,void 0),i}function aS(t,e){const n=Reflect.has(t,e);return(!H0(e)||!Wv.has(e))&&Tn(t,"has",e),n}function lS(t){return Tn(t,"iterate",dt(t)?"length":As),Reflect.ownKeys(t)}const Gv={get:tS,set:rS,deleteProperty:oS,has:aS,ownKeys:lS},uS={get:nS,set(t,e){return!0},deleteProperty(t,e){return!0}},cS=Ce({},Gv,{get:eS,set:sS}),ep=t=>t,Qc=t=>Reflect.getPrototypeOf(t);function Zc(t,e,n=!1,i=!1){t=t.__v_raw;const r=Ht(t),s=Ht(e);e!==s&&!n&&Tn(r,"get",e),!n&&Tn(r,"get",s);const{has:o}=Qc(r),a=i?ep:n?op:sp;if(o.call(r,e))return a(t.get(e));if(o.call(r,s))return a(t.get(s));t!==r&&t.get(e)}function Jc(t,e=!1){const n=this.__v_raw,i=Ht(n),r=Ht(t);return t!==r&&!e&&Tn(i,"has",t),!e&&Tn(i,"has",r),t===r?n.has(t):n.has(t)||n.has(r)}function tf(t,e=!1){return t=t.__v_raw,!e&&Tn(Ht(t),"iterate",As),Reflect.get(t,"size",t)}function Kv(t){t=Ht(t);const e=Ht(this);return Qc(e).has.call(e,t)||(e.add(t),sr(e,"add",t,t)),this}function Xv(t,e){e=Ht(e);const n=Ht(this),{has:i,get:r}=Qc(n);let s=i.call(n,t);s||(t=Ht(t),s=i.call(n,t));const o=r.call(n,t);return n.set(t,e),s?Yc(e,o)&&sr(n,"set",t,e):sr(n,"add",t,e),this}function Qv(t){const e=Ht(this),{has:n,get:i}=Qc(e);let r=n.call(e,t);r||(t=Ht(t),r=n.call(e,t)),i&&i.call(e,t);const s=e.delete(t);return r&&sr(e,"delete",t,void 0),s}function Zv(){const t=Ht(this),e=t.size!==0,n=t.clear();return e&&sr(t,"clear",void 0,void 0),n}function ef(t,e){return function(i,r){const s=this,o=s.__v_raw,a=Ht(o),l=e?ep:t?op:sp;return!t&&Tn(a,"iterate",As),o.forEach((u,c)=>i.call(r,l(u),l(c),s))}}function nf(t,e,n){return function(...i){const r=this.__v_raw,s=Ht(r),o=Ho(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...i),c=n?ep:e?op:sp;return!e&&Tn(s,"iterate",l?X0:As),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Or(t){return function(...e){return t==="delete"?!1:this}}function fS(){const t={get(s){return Zc(this,s)},get size(){return tf(this)},has:Jc,add:Kv,set:Xv,delete:Qv,clear:Zv,forEach:ef(!1,!1)},e={get(s){return Zc(this,s,!1,!0)},get size(){return tf(this)},has:Jc,add:Kv,set:Xv,delete:Qv,clear:Zv,forEach:ef(!1,!0)},n={get(s){return Zc(this,s,!0)},get size(){return tf(this,!0)},has(s){return Jc.call(this,s,!0)},add:Or("add"),set:Or("set"),delete:Or("delete"),clear:Or("clear"),forEach:ef(!0,!1)},i={get(s){return Zc(this,s,!0,!0)},get size(){return tf(this,!0)},has(s){return Jc.call(this,s,!0)},add:Or("add"),set:Or("set"),delete:Or("delete"),clear:Or("clear"),forEach:ef(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=nf(s,!1,!1),n[s]=nf(s,!0,!1),e[s]=nf(s,!1,!0),i[s]=nf(s,!0,!0)}),[t,n,e,i]}const[hS,dS,pS,gS]=fS();function np(t,e){const n=e?t?gS:pS:t?dS:hS;return(i,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get(Rt(n,r)&&r in i?n:i,r,s)}const mS={get:np(!1,!1)},yS={get:np(!1,!0)},_S={get:np(!0,!1)},Jv=new WeakMap,tx=new WeakMap,ex=new WeakMap,vS=new WeakMap;function xS(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bS(t){return t.__v_skip||!Object.isExtensible(t)?0:xS(HM(t))}function ip(t){return ml(t)?t:rp(t,!1,Gv,mS,Jv)}function wS(t){return rp(t,!1,cS,yS,tx)}function nx(t){return rp(t,!0,uS,_S,ex)}function rp(t,e,n,i,r){if(!re(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=r.get(t);if(s)return s;const o=bS(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return r.set(t,a),a}function Xo(t){return ml(t)?Xo(t.__v_raw):!!(t&&t.__v_isReactive)}function ml(t){return!!(t&&t.__v_isReadonly)}function ix(t){return!!(t&&t.__v_isShallow)}function rx(t){return Xo(t)||ml(t)}function Ht(t){const e=t&&t.__v_raw;return e?Ht(e):t}function sx(t){return Kc(t,"__v_skip",!0),t}const sp=t=>re(t)?ip(t):t,op=t=>re(t)?nx(t):t;function ES(t){qv()&&(t=Ht(t),t.dep||(t.dep=Y0()),Hv(t.dep))}function kS(t,e){t=Ht(t),t.dep&&J0(t.dep)}function je(t){return Boolean(t&&t.__v_isRef===!0)}function AS(t){return je(t)?t.value:t}const CS={get:(t,e,n)=>AS(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return je(r)&&!je(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function ox(t){return Xo(t)?t:new Proxy(t,CS)}class MS{constructor(e,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Q0(e,()=>{this._dirty||(this._dirty=!0,kS(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=Ht(this);return ES(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function SS(t,e,n=!1){let i,r;const s=Ct(t);return s?(i=t,r=fi):(i=t.get,r=t.set),new MS(i,r,s||!r,n)}Promise.resolve();function Nr(t,e,n,i){let r;try{r=i?t(...i):t()}catch(s){rf(s,e,n)}return r}function Vn(t,e,n,i){if(Ct(t)){const s=Nr(t,e,n,i);return s&&Rv(s)&&s.catch(o=>{rf(o,e,n)}),s}const r=[];for(let s=0;s<t.length;s++)r.push(Vn(t[s],e,n,i));return r}function rf(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Nr(l,null,10,[t,o,a]);return}}TS(t,n,r,i)}function TS(t,e,n,i=!0){console.error(t)}let sf=!1,ap=!1;const Dn=[];let or=0;const yl=[];let _l=null,Qo=0;const vl=[];let Fr=null,Zo=0;const ax=Promise.resolve();let lp=null,up=null;function DS(t){const e=lp||ax;return t?e.then(this?t.bind(this):t):e}function $S(t){let e=or+1,n=Dn.length;for(;e<n;){const i=e+n>>>1;xl(Dn[i])<t?e=i+1:n=i}return e}function lx(t){(!Dn.length||!Dn.includes(t,sf&&t.allowRecurse?or+1:or))&&t!==up&&(t.id==null?Dn.push(t):Dn.splice($S(t.id),0,t),ux())}function ux(){!sf&&!ap&&(ap=!0,lp=ax.then(hx))}function OS(t){const e=Dn.indexOf(t);e>or&&Dn.splice(e,1)}function cx(t,e,n,i){dt(t)?n.push(...t):(!e||!e.includes(t,t.allowRecurse?i+1:i))&&n.push(t),ux()}function NS(t){cx(t,_l,yl,Qo)}function FS(t){cx(t,Fr,vl,Zo)}function cp(t,e=null){if(yl.length){for(up=e,_l=[...new Set(yl)],yl.length=0,Qo=0;Qo<_l.length;Qo++)_l[Qo]();_l=null,Qo=0,up=null,cp(t,e)}}function fx(t){if(vl.length){const e=[...new Set(vl)];if(vl.length=0,Fr){Fr.push(...e);return}for(Fr=e,Fr.sort((n,i)=>xl(n)-xl(i)),Zo=0;Zo<Fr.length;Zo++)Fr[Zo]();Fr=null,Zo=0}}const xl=t=>t.id==null?1/0:t.id;function hx(t){ap=!1,sf=!0,cp(t),Dn.sort((n,i)=>xl(n)-xl(i));const e=fi;try{for(or=0;or<Dn.length;or++){const n=Dn[or];n&&n.active!==!1&&Nr(n,null,14)}}finally{or=0,Dn.length=0,fx(),sf=!1,lp=null,(Dn.length||yl.length||vl.length)&&hx(t)}}function PS(t,e,...n){const i=t.vnode.props||Kt;let r=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=i[c]||Kt;h?r=n.map(d=>d.trim()):f&&(r=n.map(pl))}let a,l=i[a=V0(e)]||i[a=V0(Di(e))];!l&&s&&(l=i[a=V0(Vo(e))]),l&&Vn(l,t,6,r);const u=i[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vn(u,t,6,r)}}function dx(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(r!==void 0)return r;const s=t.emits;let o={},a=!1;if(!Ct(t)){const l=u=>{const c=dx(u,e,!0);c&&(a=!0,Ce(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(i.set(t,null),null):(dt(s)?s.forEach(l=>o[l]=null):Ce(o,s),i.set(t,o),o)}function fp(t,e){return!t||!jc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Rt(t,e[0].toLowerCase()+e.slice(1))||Rt(t,Vo(e))||Rt(t,e))}let $n=null,of=null;function af(t){const e=$n;return $n=t,of=t&&t.type.__scopeId||null,e}function RS(t){of=t}function LS(){of=null}function ae(t,e=$n,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&qx(-1);const s=af(e),o=t(...r);return af(s),i._d&&qx(1),o};return i._n=!0,i._c=!0,i._d=!0,i}function hp(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:g}=t;let m,y;const _=af(t);try{if(n.shapeFlag&4){const x=r||i;m=Ni(c.call(x,x,f,s,d,h,p)),y=l}else{const x=e;m=Ni(x.length>1?x(s,{attrs:l,slots:a,emit:u}):x(s,null)),y=e.props?l:IS(l)}}catch(x){bl.length=0,rf(x,t,1),m=kt(hi)}let v=m;if(y&&g!==!1){const x=Object.keys(y),{shapeFlag:w}=v;x.length&&w&(1|6)&&(o&&x.some(j0)&&(y=BS(y,o)),v=ta(v,y))}return n.dirs&&(v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&(v.transition=n.transition),m=v,af(_),m}const IS=t=>{let e;for(const n in t)(n==="class"||n==="style"||jc(n))&&((e||(e={}))[n]=t[n]);return e},BS=(t,e)=>{const n={};for(const i in t)(!j0(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function zS(t,e,n){const{props:i,children:r,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?px(i,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(o[h]!==i[h]&&!fp(u,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?px(i,o,u):!0:!!o;return!1}function px(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==t[s]&&!fp(n,s))return!0}return!1}function US({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const jS=t=>t.__isSuspense;function qS(t,e){e&&e.pendingBranch?dt(t)?e.effects.push(...t):e.effects.push(t):FS(t)}function HS(t,e){if(me){let n=me.provides;const i=me.parent&&me.parent.provides;i===n&&(n=me.provides=Object.create(i)),n[t]=e}}function dp(t,e,n=!1){const i=me||$n;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ct(e)?e.call(i.proxy):e}}const gx={};function pp(t,e,n){return mx(t,e,n)}function mx(t,e,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=Kt){const a=me;let l,u=!1,c=!1;if(je(t)?(l=()=>t.value,u=ix(t)):Xo(t)?(l=()=>t,i=!0):dt(t)?(c=!0,u=t.some(Xo),l=()=>t.map(y=>{if(je(y))return y.value;if(Xo(y))return Ms(y);if(Ct(y))return Nr(y,a,2)})):Ct(t)?e?l=()=>Nr(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),Vn(t,a,3,[h])}:l=fi,e&&i){const y=l;l=()=>Ms(y())}let f,h=y=>{f=m.onStop=()=>{Nr(y,a,4)}};if(wl)return h=fi,e?n&&Vn(e,a,3,[l(),c?[]:void 0,h]):l(),fi;let d=c?[]:gx;const p=()=>{if(!!m.active)if(e){const y=m.run();(i||u||(c?y.some((_,v)=>Yc(_,d[v])):Yc(y,d)))&&(f&&f(),Vn(e,a,3,[y,d===gx?void 0:d,h]),d=y)}else m.run()};p.allowRecurse=!!e;let g;r==="sync"?g=p:r==="post"?g=()=>cn(p,a&&a.suspense):g=()=>{!a||a.isMounted?NS(p):p()};const m=new Q0(l,g);return e?n?p():d=m.run():r==="post"?cn(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&q0(a.scope.effects,m)}}function WS(t,e,n){const i=this.proxy,r=Me(t)?t.includes(".")?yx(i,t):()=>i[t]:t.bind(i,i);let s;Ct(e)?s=e:(s=e.handler,n=e);const o=me;ea(this);const a=mx(r,s.bind(i),n);return o?ea(o):Ns(),a}function yx(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function Ms(t,e){if(!re(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),je(t))Ms(t.value,e);else if(dt(t))for(let n=0;n<t.length;n++)Ms(t[n],e);else if(Wo(t)||Ho(t))t.forEach(n=>{Ms(n,e)});else if(Iv(t))for(const n in t)Ms(t[n],e);return t}function VS(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ex(()=>{t.isMounted=!0}),kx(()=>{t.isUnmounting=!0}),t}const Yn=[Function,Array],YS={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yn,onEnter:Yn,onAfterEnter:Yn,onEnterCancelled:Yn,onBeforeLeave:Yn,onLeave:Yn,onAfterLeave:Yn,onLeaveCancelled:Yn,onBeforeAppear:Yn,onAppear:Yn,onAfterAppear:Yn,onAppearCancelled:Yn},setup(t,{slots:e}){const n=DT(),i=VS();let r;return()=>{const s=e.default&&bx(e.default(),!0);if(!s||!s.length)return;const o=Ht(t),{mode:a}=o,l=s[0];if(i.isLeaving)return mp(l);const u=xx(l);if(!u)return mp(l);const c=gp(u,o,i,n);yp(u,c);const f=n.subTree,h=f&&xx(f);let d=!1;const{getTransitionKey:p}=u.type;if(p){const g=p();r===void 0?r=g:g!==r&&(r=g,d=!0)}if(h&&h.type!==hi&&(!Os(u,h)||d)){const g=gp(h,o,i,n);if(yp(h,g),a==="out-in")return i.isLeaving=!0,g.afterLeave=()=>{i.isLeaving=!1,n.update()},mp(l);a==="in-out"&&u.type!==hi&&(g.delayLeave=(m,y,_)=>{const v=vx(i,h);v[String(h.key)]=h,m._leaveCb=()=>{y(),m._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=_})}return l}}},_x=YS;function vx(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function gp(t,e,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:y,onAppearCancelled:_}=e,v=String(t.key),x=vx(n,t),w=(b,C)=>{b&&Vn(b,i,9,C)},k={mode:s,persisted:o,beforeEnter(b){let C=a;if(!n.isMounted)if(r)C=g||a;else return;b._leaveCb&&b._leaveCb(!0);const T=x[v];T&&Os(t,T)&&T.el._leaveCb&&T.el._leaveCb(),w(C,[b])},enter(b){let C=l,T=u,M=c;if(!n.isMounted)if(r)C=m||l,T=y||u,M=_||c;else return;let S=!1;const $=b._enterCb=O=>{S||(S=!0,O?w(M,[b]):w(T,[b]),k.delayedLeave&&k.delayedLeave(),b._enterCb=void 0)};C?(C(b,$),C.length<=1&&$()):$()},leave(b,C){const T=String(t.key);if(b._enterCb&&b._enterCb(!0),n.isUnmounting)return C();w(f,[b]);let M=!1;const S=b._leaveCb=$=>{M||(M=!0,C(),$?w(p,[b]):w(d,[b]),b._leaveCb=void 0,x[T]===t&&delete x[T])};x[T]=t,h?(h(b,S),h.length<=1&&S()):S()},clone(b){return gp(b,e,n,i)}};return k}function mp(t){if(lf(t))return t=ta(t),t.children=null,t}function xx(t){return lf(t)?t.children?t.children[0]:void 0:t}function yp(t,e){t.shapeFlag&6&&t.component?yp(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function bx(t,e=!1){let n=[],i=0;for(let r=0;r<t.length;r++){const s=t[r];s.type===Bt?(s.patchFlag&128&&i++,n=n.concat(bx(s.children,e))):(e||s.type!==hi)&&n.push(s)}if(i>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}const _p=t=>!!t.type.__asyncLoader,lf=t=>t.type.__isKeepAlive;function GS(t,e){wx(t,"a",e)}function KS(t,e){wx(t,"da",e)}function wx(t,e,n=me){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(uf(e,i,n),n){let r=n.parent;for(;r&&r.parent;)lf(r.parent.vnode)&&XS(i,e,n,r),r=r.parent}}function XS(t,e,n,i){const r=uf(e,t,i,!0);Ax(()=>{q0(i[e],r)},n)}function uf(t,e,n=me,i=!1){if(n){const r=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Ko(),ea(n);const a=Vn(e,n,t,o);return Ns(),Cs(),a});return i?r.unshift(s):r.push(s),s}}const ar=t=>(e,n=me)=>(!wl||t==="sp")&&uf(t,e,n),QS=ar("bm"),Ex=ar("m"),ZS=ar("bu"),JS=ar("u"),kx=ar("bum"),Ax=ar("um"),tT=ar("sp"),eT=ar("rtg"),nT=ar("rtc");function iT(t,e=me){uf("ec",t,e)}let vp=!0;function rT(t){const e=Sx(t),n=t.proxy,i=t.ctx;vp=!1,e.beforeCreate&&Cx(e.beforeCreate,t,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:_,destroyed:v,unmounted:x,render:w,renderTracked:k,renderTriggered:b,errorCaptured:C,serverPrefetch:T,expose:M,inheritAttrs:S,components:$,directives:O,filters:U}=e;if(u&&sT(u,i,null,t.appContext.config.unwrapInjectedRef),o)for(const z in o){const q=o[z];Ct(q)&&(i[z]=q.bind(n))}if(r){const z=r.call(n,n);re(z)&&(t.data=ip(z))}if(vp=!0,s)for(const z in s){const q=s[z],J=Ct(q)?q.bind(n,n):Ct(q.get)?q.get.bind(n,n):fi,yt=!Ct(q)&&Ct(q.set)?q.set.bind(n):fi,Ot=LT({get:J,set:yt});Object.defineProperty(i,z,{enumerable:!0,configurable:!0,get:()=>Ot.value,set:Dt=>Ot.value=Dt})}if(a)for(const z in a)Mx(a[z],i,n,z);if(l){const z=Ct(l)?l.call(n):l;Reflect.ownKeys(z).forEach(q=>{HS(q,z[q])})}c&&Cx(c,t,"c");function R(z,q){dt(q)?q.forEach(J=>z(J.bind(n))):q&&z(q.bind(n))}if(R(QS,f),R(Ex,h),R(ZS,d),R(JS,p),R(GS,g),R(KS,m),R(iT,C),R(nT,k),R(eT,b),R(kx,_),R(Ax,x),R(tT,T),dt(M))if(M.length){const z=t.exposed||(t.exposed={});M.forEach(q=>{Object.defineProperty(z,q,{get:()=>n[q],set:J=>n[q]=J})})}else t.exposed||(t.exposed={});w&&t.render===fi&&(t.render=w),S!=null&&(t.inheritAttrs=S),$&&(t.components=$),O&&(t.directives=O)}function sT(t,e,n=fi,i=!1){dt(t)&&(t=xp(t));for(const r in t){const s=t[r];let o;re(s)?"default"in s?o=dp(s.from||r,s.default,!0):o=dp(s.from||r):o=dp(s),je(o)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Cx(t,e,n){Vn(dt(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function Mx(t,e,n,i){const r=i.includes(".")?yx(n,i):()=>n[i];if(Me(t)){const s=e[t];Ct(s)&&pp(r,s)}else if(Ct(t))pp(r,t.bind(n));else if(re(t))if(dt(t))t.forEach(s=>Mx(s,e,n,i));else{const s=Ct(t.handler)?t.handler.bind(n):e[t.handler];Ct(s)&&pp(r,s,t)}}function Sx(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!n&&!i?l=e:(l={},r.length&&r.forEach(u=>cf(l,u,o,!0)),cf(l,e,o)),s.set(e,l),l}function cf(t,e,n,i=!1){const{mixins:r,extends:s}=e;s&&cf(t,s,n,!0),r&&r.forEach(o=>cf(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=oT[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const oT={data:Tx,props:Ss,emits:Ss,methods:Ss,computed:Ss,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:Ss,directives:Ss,watch:lT,provide:Tx,inject:aT};function Tx(t,e){return e?t?function(){return Ce(Ct(t)?t.call(this,this):t,Ct(e)?e.call(this,this):e)}:e:t}function aT(t,e){return Ss(xp(t),xp(e))}function xp(t){if(dt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function qe(t,e){return t?[...new Set([].concat(t,e))]:e}function Ss(t,e){return t?Ce(Ce(Object.create(null),t),e):e}function lT(t,e){if(!t)return e;if(!e)return t;const n=Ce(Object.create(null),t);for(const i in e)n[i]=qe(t[i],e[i]);return n}function uT(t,e,n,i=!1){const r={},s={};Kc(s,df,1),t.propsDefaults=Object.create(null),Dx(t,e,r,s);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=i?r:wS(r):t.type.props?t.props=r:t.props=s,t.attrs=s}function cT(t,e,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=t,a=Ht(r),[l]=t.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];const d=e[h];if(l)if(Rt(s,h))d!==s[h]&&(s[h]=d,u=!0);else{const p=Di(h);r[p]=bp(l,a,p,d,t,!1)}else d!==s[h]&&(s[h]=d,u=!0)}}}else{Dx(t,e,r,s)&&(u=!0);let c;for(const f in a)(!e||!Rt(e,f)&&((c=Vo(f))===f||!Rt(e,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(r[f]=bp(l,a,f,void 0,t,!0)):delete r[f]);if(s!==a)for(const f in s)(!e||!Rt(e,f)&&!0)&&(delete s[f],u=!0)}u&&sr(t,"set","$attrs")}function Dx(t,e,n,i){const[r,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Hc(l))continue;const u=e[l];let c;r&&Rt(r,c=Di(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:fp(t.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(s){const l=Ht(n),u=a||Kt;for(let c=0;c<s.length;c++){const f=s[c];n[f]=bp(r,l,f,u[f],t,!Rt(u,f))}}return o}function bp(t,e,n,i,r,s){const o=t[n];if(o!=null){const a=Rt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&Ct(l)){const{propsDefaults:u}=r;n in u?i=u[n]:(ea(r),i=u[n]=l.call(null,e),Ns())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===Vo(n))&&(i=!0))}return i}function $x(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const s=t.props,o={},a=[];let l=!1;if(!Ct(t)){const c=f=>{l=!0;const[h,d]=$x(f,e,!0);Ce(o,h),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return i.set(t,qo),qo;if(dt(s))for(let c=0;c<s.length;c++){const f=Di(s[c]);Ox(f)&&(o[f]=Kt)}else if(s)for(const c in s){const f=Di(c);if(Ox(f)){const h=s[c],d=o[f]=dt(h)||Ct(h)?{type:h}:h;if(d){const p=Px(Boolean,d.type),g=Px(String,d.type);d[0]=p>-1,d[1]=g<0||p<g,(p>-1||Rt(d,"default"))&&a.push(f)}}}const u=[o,a];return i.set(t,u),u}function Ox(t){return t[0]!=="$"}function Nx(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function Fx(t,e){return Nx(t)===Nx(e)}function Px(t,e){return dt(e)?e.findIndex(n=>Fx(n,t)):Ct(e)&&Fx(e,t)?0:-1}const Rx=t=>t[0]==="_"||t==="$stable",wp=t=>dt(t)?t.map(Ni):[Ni(t)],fT=(t,e,n)=>{const i=ae((...r)=>wp(e(...r)),n);return i._c=!1,i},Lx=(t,e,n)=>{const i=t._ctx;for(const r in t){if(Rx(r))continue;const s=t[r];if(Ct(s))e[r]=fT(r,s,i);else if(s!=null){const o=wp(s);e[r]=()=>o}}},Ix=(t,e)=>{const n=wp(e);t.slots.default=()=>n},hT=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ht(e),Kc(e,"_",n)):Lx(e,t.slots={})}else t.slots={},e&&Ix(t,e);Kc(t.slots,df,1)},dT=(t,e,n)=>{const{vnode:i,slots:r}=t;let s=!0,o=Kt;if(i.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Ce(r,e),!n&&a===1&&delete r._):(s=!e.$stable,Lx(e,r)),o=e}else e&&(Ix(t,e),o={default:1});if(s)for(const a in r)!Rx(a)&&!(a in o)&&delete r[a]};function Jo(t,e){const n=$n;if(n===null)return t;const i=n.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,u=Kt]=e[s];Ct(o)&&(o={mounted:o,updated:o}),o.deep&&Ms(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:u})}return t}function Ts(t,e,n,i){const r=t.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Ko(),Vn(l,n,8,[t.el,a,t,e]),Cs())}}function Bx(){return{app:null,config:{isNativeTag:UM,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pT=0;function gT(t,e){return function(i,r=null){r!=null&&!re(r)&&(r=null);const s=Bx(),o=new Set;let a=!1;const l=s.app={_uid:pT++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:BT,get config(){return s.config},set config(u){},use(u,...c){return o.has(u)||(u&&Ct(u.install)?(o.add(u),u.install(l,...c)):Ct(u)&&(o.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,f){if(!a){const h=kt(i,r);return h.appContext=s,c&&e?e(h,u):t(h,u,f),a=!0,l._container=u,u.__vue_app__=l,Tp(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l}};return l}}function Ep(t,e,n,i,r=!1){if(dt(t)){t.forEach((h,d)=>Ep(h,e&&(dt(e)?e[d]:e),n,i,r));return}if(_p(i)&&!r)return;const s=i.shapeFlag&4?Tp(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=t,u=e&&e.r,c=a.refs===Kt?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(Me(u)?(c[u]=null,Rt(f,u)&&(f[u]=null)):je(u)&&(u.value=null)),Ct(l))Nr(l,a,12,[o,c]);else{const h=Me(l),d=je(l);if(h||d){const p=()=>{if(t.f){const g=h?c[l]:l.value;r?dt(g)&&q0(g,s):dt(g)?g.includes(s)||g.push(s):h?c[l]=[s]:(l.value=[s],t.k&&(c[t.k]=l.value))}else h?(c[l]=o,Rt(f,l)&&(f[l]=o)):je(l)&&(l.value=o,t.k&&(c[t.k]=o))};o?(p.id=-1,cn(p,n)):p()}}}const cn=qS;function mT(t){return yT(t)}function yT(t,e){const n=YM();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=fi,cloneNode:p,insertStaticContent:g}=t,m=(A,D,F,B=null,j=null,K=null,Z=!1,Y=null,X=!!D.dynamicChildren)=>{if(A===D)return;A&&!Os(A,D)&&(B=ge(A),qt(A,j,K,!0),A=null),D.patchFlag===-2&&(X=!1,D.dynamicChildren=null);const{type:V,ref:rt,shapeFlag:et}=D;switch(V){case kp:y(A,D,F,B);break;case hi:_(A,D,F,B);break;case Ap:A==null&&v(D,F,B,Z);break;case Bt:O(A,D,F,B,j,K,Z,Y,X);break;default:et&1?k(A,D,F,B,j,K,Z,Y,X):et&6?U(A,D,F,B,j,K,Z,Y,X):(et&64||et&128)&&V.process(A,D,F,B,j,K,Z,Y,X,mt)}rt!=null&&j&&Ep(rt,A&&A.ref,K,D||A,!D)},y=(A,D,F,B)=>{if(A==null)i(D.el=a(D.children),F,B);else{const j=D.el=A.el;D.children!==A.children&&u(j,D.children)}},_=(A,D,F,B)=>{A==null?i(D.el=l(D.children||""),F,B):D.el=A.el},v=(A,D,F,B)=>{[A.el,A.anchor]=g(A.children,D,F,B,A.el,A.anchor)},x=({el:A,anchor:D},F,B)=>{let j;for(;A&&A!==D;)j=h(A),i(A,F,B),A=j;i(D,F,B)},w=({el:A,anchor:D})=>{let F;for(;A&&A!==D;)F=h(A),r(A),A=F;r(D)},k=(A,D,F,B,j,K,Z,Y,X)=>{Z=Z||D.type==="svg",A==null?b(D,F,B,j,K,Z,Y,X):M(A,D,j,K,Z,Y,X)},b=(A,D,F,B,j,K,Z,Y)=>{let X,V;const{type:rt,props:et,shapeFlag:st,transition:_t,patchFlag:$t,dirs:Yt}=A;if(A.el&&p!==void 0&&$t===-1)X=A.el=p(A.el);else{if(X=A.el=o(A.type,K,et&&et.is,et),st&8?c(X,A.children):st&16&&T(A.children,X,null,B,j,K&&rt!=="foreignObject",Z,Y),Yt&&Ts(A,null,B,"created"),et){for(const Zt in et)Zt!=="value"&&!Hc(Zt)&&s(X,Zt,null,et[Zt],K,A.children,B,j,ce);"value"in et&&s(X,"value",null,et.value),(V=et.onVnodeBeforeMount)&&Fi(V,B,A)}C(X,A,A.scopeId,Z,B)}Yt&&Ts(A,null,B,"beforeMount");const Gt=(!j||j&&!j.pendingBranch)&&_t&&!_t.persisted;Gt&&_t.beforeEnter(X),i(X,D,F),((V=et&&et.onVnodeMounted)||Gt||Yt)&&cn(()=>{V&&Fi(V,B,A),Gt&&_t.enter(X),Yt&&Ts(A,null,B,"mounted")},j)},C=(A,D,F,B,j)=>{if(F&&d(A,F),B)for(let K=0;K<B.length;K++)d(A,B[K]);if(j){let K=j.subTree;if(D===K){const Z=j.vnode;C(A,Z,Z.scopeId,Z.slotScopeIds,j.parent)}}},T=(A,D,F,B,j,K,Z,Y,X=0)=>{for(let V=X;V<A.length;V++){const rt=A[V]=Y?Pr(A[V]):Ni(A[V]);m(null,rt,D,F,B,j,K,Z,Y)}},M=(A,D,F,B,j,K,Z)=>{const Y=D.el=A.el;let{patchFlag:X,dynamicChildren:V,dirs:rt}=D;X|=A.patchFlag&16;const et=A.props||Kt,st=D.props||Kt;let _t;F&&Ds(F,!1),(_t=st.onVnodeBeforeUpdate)&&Fi(_t,F,D,A),rt&&Ts(D,A,F,"beforeUpdate"),F&&Ds(F,!0);const $t=j&&D.type!=="foreignObject";if(V?S(A.dynamicChildren,V,Y,F,B,$t,K):Z||J(A,D,Y,null,F,B,$t,K,!1),X>0){if(X&16)$(Y,D,et,st,F,B,j);else if(X&2&&et.class!==st.class&&s(Y,"class",null,st.class,j),X&4&&s(Y,"style",et.style,st.style,j),X&8){const Yt=D.dynamicProps;for(let Gt=0;Gt<Yt.length;Gt++){const Zt=Yt[Gt],ci=et[Zt],zo=st[Zt];(zo!==ci||Zt==="value")&&s(Y,Zt,ci,zo,j,A.children,F,B,ce)}}X&1&&A.children!==D.children&&c(Y,D.children)}else!Z&&V==null&&$(Y,D,et,st,F,B,j);((_t=st.onVnodeUpdated)||rt)&&cn(()=>{_t&&Fi(_t,F,D,A),rt&&Ts(D,A,F,"updated")},B)},S=(A,D,F,B,j,K,Z)=>{for(let Y=0;Y<D.length;Y++){const X=A[Y],V=D[Y],rt=X.el&&(X.type===Bt||!Os(X,V)||X.shapeFlag&(6|64))?f(X.el):F;m(X,V,rt,null,B,j,K,Z,!0)}},$=(A,D,F,B,j,K,Z)=>{if(F!==B){for(const Y in B){if(Hc(Y))continue;const X=B[Y],V=F[Y];X!==V&&Y!=="value"&&s(A,Y,V,X,Z,D.children,j,K,ce)}if(F!==Kt)for(const Y in F)!Hc(Y)&&!(Y in B)&&s(A,Y,F[Y],null,Z,D.children,j,K,ce);"value"in B&&s(A,"value",F.value,B.value)}},O=(A,D,F,B,j,K,Z,Y,X)=>{const V=D.el=A?A.el:a(""),rt=D.anchor=A?A.anchor:a("");let{patchFlag:et,dynamicChildren:st,slotScopeIds:_t}=D;_t&&(Y=Y?Y.concat(_t):_t),A==null?(i(V,F,B),i(rt,F,B),T(D.children,F,rt,j,K,Z,Y,X)):et>0&&et&64&&st&&A.dynamicChildren?(S(A.dynamicChildren,st,F,j,K,Z,Y),(D.key!=null||j&&D===j.subTree)&&zx(A,D,!0)):J(A,D,F,rt,j,K,Z,Y,X)},U=(A,D,F,B,j,K,Z,Y,X)=>{D.slotScopeIds=Y,A==null?D.shapeFlag&512?j.ctx.activate(D,F,B,Z,X):N(D,F,B,j,K,Z,X):R(A,D,X)},N=(A,D,F,B,j,K,Z)=>{const Y=A.component=TT(A,B,j);if(lf(A)&&(Y.ctx.renderer=mt),$T(Y),Y.asyncDep){if(j&&j.registerDep(Y,z),!A.el){const X=Y.subTree=kt(hi);_(null,X,D,F)}return}z(Y,A,D,F,j,K,Z)},R=(A,D,F)=>{const B=D.component=A.component;if(zS(A,D,F))if(B.asyncDep&&!B.asyncResolved){q(B,D,F);return}else B.next=D,OS(B.update),B.update();else D.component=A.component,D.el=A.el,B.vnode=D},z=(A,D,F,B,j,K,Z)=>{const Y=()=>{if(A.isMounted){let{next:rt,bu:et,u:st,parent:_t,vnode:$t}=A,Yt=rt,Gt;Ds(A,!1),rt?(rt.el=$t.el,q(A,rt,Z)):rt=$t,et&&Gc(et),(Gt=rt.props&&rt.props.onVnodeBeforeUpdate)&&Fi(Gt,_t,rt,$t),Ds(A,!0);const Zt=hp(A),ci=A.subTree;A.subTree=Zt,m(ci,Zt,f(ci.el),ge(ci),A,j,K),rt.el=Zt.el,Yt===null&&US(A,Zt.el),st&&cn(st,j),(Gt=rt.props&&rt.props.onVnodeUpdated)&&cn(()=>Fi(Gt,_t,rt,$t),j)}else{let rt;const{el:et,props:st}=D,{bm:_t,m:$t,parent:Yt}=A,Gt=_p(D);if(Ds(A,!1),_t&&Gc(_t),!Gt&&(rt=st&&st.onVnodeBeforeMount)&&Fi(rt,Yt,D),Ds(A,!0),et&&W){const Zt=()=>{A.subTree=hp(A),W(et,A.subTree,A,j,null)};Gt?D.type.__asyncLoader().then(()=>!A.isUnmounted&&Zt()):Zt()}else{const Zt=A.subTree=hp(A);m(null,Zt,F,B,A,j,K),D.el=Zt.el}if($t&&cn($t,j),!Gt&&(rt=st&&st.onVnodeMounted)){const Zt=D;cn(()=>Fi(rt,Yt,Zt),j)}D.shapeFlag&256&&A.a&&cn(A.a,j),A.isMounted=!0,D=F=B=null}},X=A.effect=new Q0(Y,()=>lx(A.update),A.scope),V=A.update=X.run.bind(X);V.id=A.uid,Ds(A,!0),V()},q=(A,D,F)=>{D.component=A;const B=A.vnode.props;A.vnode=D,A.next=null,cT(A,D.props,B,F),dT(A,D.children,F),Ko(),cp(void 0,A.update),Cs()},J=(A,D,F,B,j,K,Z,Y,X=!1)=>{const V=A&&A.children,rt=A?A.shapeFlag:0,et=D.children,{patchFlag:st,shapeFlag:_t}=D;if(st>0){if(st&128){Ot(V,et,F,B,j,K,Z,Y,X);return}else if(st&256){yt(V,et,F,B,j,K,Z,Y,X);return}}_t&8?(rt&16&&ce(V,j,K),et!==V&&c(F,et)):rt&16?_t&16?Ot(V,et,F,B,j,K,Z,Y,X):ce(V,j,K,!0):(rt&8&&c(F,""),_t&16&&T(et,F,B,j,K,Z,Y,X))},yt=(A,D,F,B,j,K,Z,Y,X)=>{A=A||qo,D=D||qo;const V=A.length,rt=D.length,et=Math.min(V,rt);let st;for(st=0;st<et;st++){const _t=D[st]=X?Pr(D[st]):Ni(D[st]);m(A[st],_t,F,null,j,K,Z,Y,X)}V>rt?ce(A,j,K,!0,!1,et):T(D,F,B,j,K,Z,Y,X,et)},Ot=(A,D,F,B,j,K,Z,Y,X)=>{let V=0;const rt=D.length;let et=A.length-1,st=rt-1;for(;V<=et&&V<=st;){const _t=A[V],$t=D[V]=X?Pr(D[V]):Ni(D[V]);if(Os(_t,$t))m(_t,$t,F,null,j,K,Z,Y,X);else break;V++}for(;V<=et&&V<=st;){const _t=A[et],$t=D[st]=X?Pr(D[st]):Ni(D[st]);if(Os(_t,$t))m(_t,$t,F,null,j,K,Z,Y,X);else break;et--,st--}if(V>et){if(V<=st){const _t=st+1,$t=_t<rt?D[_t].el:B;for(;V<=st;)m(null,D[V]=X?Pr(D[V]):Ni(D[V]),F,$t,j,K,Z,Y,X),V++}}else if(V>st)for(;V<=et;)qt(A[V],j,K,!0),V++;else{const _t=V,$t=V,Yt=new Map;for(V=$t;V<=st;V++){const Sn=D[V]=X?Pr(D[V]):Ni(D[V]);Sn.key!=null&&Yt.set(Sn.key,V)}let Gt,Zt=0;const ci=st-$t+1;let zo=!1,Sv=0;const hl=new Array(ci);for(V=0;V<ci;V++)hl[V]=0;for(V=_t;V<=et;V++){const Sn=A[V];if(Zt>=ci){qt(Sn,j,K,!0);continue}let Ti;if(Sn.key!=null)Ti=Yt.get(Sn.key);else for(Gt=$t;Gt<=st;Gt++)if(hl[Gt-$t]===0&&Os(Sn,D[Gt])){Ti=Gt;break}Ti===void 0?qt(Sn,j,K,!0):(hl[Ti-$t]=V+1,Ti>=Sv?Sv=Ti:zo=!0,m(Sn,D[Ti],F,null,j,K,Z,Y,X),Zt++)}const Tv=zo?_T(hl):qo;for(Gt=Tv.length-1,V=ci-1;V>=0;V--){const Sn=$t+V,Ti=D[Sn],Dv=Sn+1<rt?D[Sn+1].el:B;hl[V]===0?m(null,Ti,F,Dv,j,K,Z,Y,X):zo&&(Gt<0||V!==Tv[Gt]?Dt(Ti,F,Dv,2):Gt--)}}},Dt=(A,D,F,B,j=null)=>{const{el:K,type:Z,transition:Y,children:X,shapeFlag:V}=A;if(V&6){Dt(A.component.subTree,D,F,B);return}if(V&128){A.suspense.move(D,F,B);return}if(V&64){Z.move(A,D,F,mt);return}if(Z===Bt){i(K,D,F);for(let et=0;et<X.length;et++)Dt(X[et],D,F,B);i(A.anchor,D,F);return}if(Z===Ap){x(A,D,F);return}if(B!==2&&V&1&&Y)if(B===0)Y.beforeEnter(K),i(K,D,F),cn(()=>Y.enter(K),j);else{const{leave:et,delayLeave:st,afterLeave:_t}=Y,$t=()=>i(K,D,F),Yt=()=>{et(K,()=>{$t(),_t&&_t()})};st?st(K,$t,Yt):Yt()}else i(K,D,F)},qt=(A,D,F,B=!1,j=!1)=>{const{type:K,props:Z,ref:Y,children:X,dynamicChildren:V,shapeFlag:rt,patchFlag:et,dirs:st}=A;if(Y!=null&&Ep(Y,null,F,A,!0),rt&256){D.ctx.deactivate(A);return}const _t=rt&1&&st,$t=!_p(A);let Yt;if($t&&(Yt=Z&&Z.onVnodeBeforeUnmount)&&Fi(Yt,D,A),rt&6)Mn(A.component,F,B);else{if(rt&128){A.suspense.unmount(F,B);return}_t&&Ts(A,null,D,"beforeUnmount"),rt&64?A.type.remove(A,D,F,j,mt,B):V&&(K!==Bt||et>0&&et&64)?ce(V,D,F,!1,!0):(K===Bt&&et&(128|256)||!j&&rt&16)&&ce(X,D,F),B&&Xt(A)}($t&&(Yt=Z&&Z.onVnodeUnmounted)||_t)&&cn(()=>{Yt&&Fi(Yt,D,A),_t&&Ts(A,null,D,"unmounted")},F)},Xt=A=>{const{type:D,el:F,anchor:B,transition:j}=A;if(D===Bt){ne(F,B);return}if(D===Ap){w(A);return}const K=()=>{r(F),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(A.shapeFlag&1&&j&&!j.persisted){const{leave:Z,delayLeave:Y}=j,X=()=>Z(F,K);Y?Y(A.el,K,X):X()}else K()},ne=(A,D)=>{let F;for(;A!==D;)F=h(A),r(A),A=F;r(D)},Mn=(A,D,F)=>{const{bum:B,scope:j,update:K,subTree:Z,um:Y}=A;B&&Gc(B),j.stop(),K&&(K.active=!1,qt(Z,A,D,F)),Y&&cn(Y,D),cn(()=>{A.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},ce=(A,D,F,B=!1,j=!1,K=0)=>{for(let Z=K;Z<A.length;Z++)qt(A[Z],D,F,B,j)},ge=A=>A.shapeFlag&6?ge(A.component.subTree):A.shapeFlag&128?A.suspense.next():h(A.anchor||A.el),Q=(A,D,F)=>{A==null?D._vnode&&qt(D._vnode,null,null,!0):m(D._vnode||null,A,D,null,null,null,F),fx(),D._vnode=A},mt={p:m,um:qt,m:Dt,r:Xt,mt:N,mc:T,pc:J,pbc:S,n:ge,o:t};let wt,W;return e&&([wt,W]=e(mt)),{render:Q,hydrate:wt,createApp:gT(Q,wt)}}function Ds({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function zx(t,e,n=!1){const i=t.children,r=e.children;if(dt(i)&&dt(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=Pr(r[s]),a.el=o.el),n||zx(o,a))}}function _T(t){const e=t.slice(),n=[0];let i,r,s,o,a;const l=t.length;for(i=0;i<l;i++){const u=t[i];if(u!==0){if(r=n[n.length-1],t[r]<u){e[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const vT=t=>t.__isTeleport,Ux="components";function fn(t,e){return bT(Ux,t,!0,e)||t}const xT=Symbol();function bT(t,e,n=!0,i=!1){const r=$n||me;if(r){const s=r.type;if(t===Ux){const a=PT(s);if(a&&(a===e||a===Di(e)||a===Vc(Di(e))))return s}const o=jx(r[t]||s[t],e)||jx(r.appContext[t],e);return!o&&i?s:o}}function jx(t,e){return t&&(t[e]||t[Di(e)]||t[Vc(Di(e))])}const Bt=Symbol(void 0),kp=Symbol(void 0),hi=Symbol(void 0),Ap=Symbol(void 0),bl=[];let $s=null;function tt(t=!1){bl.push($s=t?null:[])}function wT(){bl.pop(),$s=bl[bl.length-1]||null}let ff=1;function qx(t){ff+=t}function Hx(t){return t.dynamicChildren=ff>0?$s||qo:null,wT(),ff>0&&$s&&$s.push(t),t}function it(t,e,n,i,r,s){return Hx(E(t,e,n,i,r,s,!0))}function $i(t,e,n,i,r){return Hx(kt(t,e,n,i,r,!0))}function hf(t){return t?t.__v_isVNode===!0:!1}function Os(t,e){return t.type===e.type&&t.key===e.key}const df="__vInternal",Wx=({key:t})=>t!=null?t:null,pf=({ref:t,ref_key:e,ref_for:n})=>t!=null?Me(t)||je(t)||Ct(t)?{i:$n,r:t,k:e,f:!!n}:t:null;function E(t,e=null,n=null,i=0,r=null,s=t===Bt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Wx(e),ref:e&&pf(e),scopeId:of,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(Cp(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Me(n)?8:16),ff>0&&!o&&$s&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&$s.push(l),l}const kt=ET;function ET(t,e=null,n=null,i=0,r=null,s=!1){if((!t||t===xT)&&(t=hi),hf(t)){const a=ta(t,e,!0);return n&&Cp(a,n),a}if(RT(t)&&(t=t.__vccOpts),e){e=kT(e);let{class:a,style:l}=e;a&&!Me(a)&&(e.class=jo(a)),re(l)&&(rx(l)&&!dt(l)&&(l=Ce({},l)),e.style=Uo(l))}const o=Me(t)?1:jS(t)?128:vT(t)?64:re(t)?4:Ct(t)?2:0;return E(t,e,n,i,r,o,s,!0)}function kT(t){return t?rx(t)||df in t?Ce({},t):t:null}function ta(t,e,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=t,a=e?AT(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Wx(a),ref:e&&e.ref?n&&r?dt(r)?r.concat(pf(e)):[r,pf(e)]:pf(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Bt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ta(t.ssContent),ssFallback:t.ssFallback&&ta(t.ssFallback),el:t.el,anchor:t.anchor}}function Oi(t=" ",e=0){return kt(kp,null,t,e)}function hn(t="",e=!1){return e?(tt(),$i(hi,null,t)):kt(hi,null,t)}function Ni(t){return t==null||typeof t=="boolean"?kt(hi):dt(t)?kt(Bt,null,t.slice()):typeof t=="object"?Pr(t):kt(kp,null,String(t))}function Pr(t){return t.el===null||t.memo?t:ta(t)}function Cp(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(dt(e))n=16;else if(typeof e=="object")if(i&(1|64)){const r=e.default;r&&(r._c&&(r._d=!1),Cp(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(df in e)?e._ctx=$n:r===3&&$n&&($n.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ct(e)?(e={default:e,_ctx:$n},n=32):(e=String(e),i&64?(n=16,e=[Oi(e)]):n=8);t.children=e,t.shapeFlag|=n}function AT(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=jo([e.class,i.class]));else if(r==="style")e.style=Uo([e.style,i.style]);else if(jc(r)){const s=e[r],o=i[r];o&&s!==o&&!(dt(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function Fi(t,e,n,i=null){Vn(t,e,7,[n,i])}function Fe(t,e,n,i){let r;const s=n&&n[i];if(dt(t)||Me(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(re(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];r[a]=e(t[u],u,a,s&&s[a])}}else r=[];return n&&(n[i]=r),r}function Mp(t,e,n={},i,r){if($n.isCE)return kt("slot",e==="default"?null:{name:e},i&&i());let s=t[e];s&&s._c&&(s._d=!1),tt();const o=s&&Vx(s(n)),a=$i(Bt,{key:n.key||`_${e}`},o||(i?i():[]),o&&t._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Vx(t){return t.some(e=>hf(e)?!(e.type===hi||e.type===Bt&&!Vx(e.children)):!0)?t:null}const Sp=t=>t?Yx(t)?Tp(t)||t.proxy:Sp(t.parent):null,gf=Ce(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Sp(t.parent),$root:t=>Sp(t.root),$emit:t=>t.emit,$options:t=>Sx(t),$forceUpdate:t=>()=>lx(t.update),$nextTick:t=>DS.bind(t.proxy),$watch:t=>WS.bind(t)}),CT={get({_:t},e){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return s[e]}else{if(i!==Kt&&Rt(i,e))return o[e]=1,i[e];if(r!==Kt&&Rt(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&Rt(u,e))return o[e]=3,s[e];if(n!==Kt&&Rt(n,e))return o[e]=4,n[e];vp&&(o[e]=0)}}const c=gf[e];let f,h;if(c)return e==="$attrs"&&Tn(t,"get",e),c(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Kt&&Rt(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Rt(h,e))return h[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:s}=t;if(r!==Kt&&Rt(r,e))r[e]=n;else if(i!==Kt&&Rt(i,e))i[e]=n;else if(Rt(t.props,e))return!1;return e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||t!==Kt&&Rt(t,o)||e!==Kt&&Rt(e,o)||(a=s[0])&&Rt(a,o)||Rt(i,o)||Rt(gf,o)||Rt(r.config.globalProperties,o)}},MT=Bx();let ST=0;function TT(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||MT,s={uid:ST++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new GM(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$x(i,r),emitsOptions:dx(i,r),emit:null,emitted:null,propsDefaults:Kt,inheritAttrs:i.inheritAttrs,ctx:Kt,data:Kt,props:Kt,attrs:Kt,slots:Kt,refs:Kt,setupState:Kt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=PS.bind(null,s),t.ce&&t.ce(s),s}let me=null;const DT=()=>me||$n,ea=t=>{me=t,t.scope.on()},Ns=()=>{me&&me.scope.off(),me=null};function Yx(t){return t.vnode.shapeFlag&4}let wl=!1;function $T(t,e=!1){wl=e;const{props:n,children:i}=t.vnode,r=Yx(t);uT(t,n,r,e),hT(t,i);const s=r?OT(t,e):void 0;return wl=!1,s}function OT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=sx(new Proxy(t.ctx,CT));const{setup:i}=n;if(i){const r=t.setupContext=i.length>1?FT(t):null;ea(t),Ko();const s=Nr(i,t,0,[t.props,r]);if(Cs(),Ns(),Rv(s)){if(s.then(Ns,Ns),e)return s.then(o=>{Gx(t,o,e)}).catch(o=>{rf(o,t,0)});t.asyncDep=s}else Gx(t,s,e)}else Xx(t,e)}function Gx(t,e,n){Ct(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:re(e)&&(t.setupState=ox(e)),Xx(t,n)}let Kx;function Xx(t,e,n){const i=t.type;if(!t.render){if(!e&&Kx&&!i.render){const r=i.template;if(r){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Ce(Ce({isCustomElement:s,delimiters:a},o),l);i.render=Kx(r,u)}}t.render=i.render||fi}ea(t),Ko(),rT(t),Cs(),Ns()}function NT(t){return new Proxy(t.attrs,{get(e,n){return Tn(t,"get","$attrs"),e[n]}})}function FT(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=NT(t))},slots:t.slots,emit:t.emit,expose:e}}function Tp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ox(sx(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in gf)return gf[n](t)}}))}function PT(t){return Ct(t)&&t.displayName||t.name}function RT(t){return Ct(t)&&"__vccOpts"in t}const LT=(t,e)=>SS(t,e,wl);function IT(t,e,n){const i=arguments.length;return i===2?re(e)&&!dt(e)?hf(e)?kt(t,null,[e]):kt(t,e):kt(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&hf(n)&&(n=[n]),kt(t,e,n))}const BT="3.2.28",zT="http://www.w3.org/2000/svg",Fs=typeof document!="undefined"?document:null,Qx=Fs&&Fs.createElement("template"),UT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?Fs.createElementNS(zT,t):Fs.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>Fs.createTextNode(t),createComment:t=>Fs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,i,r,s){const o=n?n.previousSibling:e.lastChild;if(r&&s)for(;e.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Qx.innerHTML=i?`<svg>${t}</svg>`:t;const a=Qx.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function jT(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function qT(t,e,n){const i=t.style,r=Me(n);if(n&&!r){for(const s in n)Dp(i,s,n[s]);if(e&&!Me(e))for(const s in e)n[s]==null&&Dp(i,s,"")}else{const s=i.display;r?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=s)}}const Zx=/\s*!important$/;function Dp(t,e,n){if(dt(n))n.forEach(i=>Dp(t,e,i));else if(e.startsWith("--"))t.setProperty(e,n);else{const i=HT(t,e);Zx.test(n)?t.setProperty(Vo(i),n.replace(Zx,""),"important"):t[i]=n}}const Jx=["Webkit","Moz","ms"],$p={};function HT(t,e){const n=$p[e];if(n)return n;let i=Di(e);if(i!=="filter"&&i in t)return $p[e]=i;i=Vc(i);for(let r=0;r<Jx.length;r++){const s=Jx[r]+i;if(s in t)return $p[e]=s}return e}const tb="http://www.w3.org/1999/xlink";function WT(t,e,n,i,r){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(tb,e.slice(6,e.length)):t.setAttributeNS(tb,e,n);else{const s=RM(e);n==null||s&&!Nv(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function VT(t,e,n,i,r,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,r,s),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const a=n==null?"":n;(t.value!==a||t.tagName==="OPTION")&&(t.value=a),n==null&&t.removeAttribute(e);return}if(n===""||n==null){const a=typeof t[e];if(a==="boolean"){t[e]=Nv(n);return}else if(n==null&&a==="string"){t[e]="",t.removeAttribute(e);return}else if(a==="number"){try{t[e]=0}catch{}t.removeAttribute(e);return}}try{t[e]=n}catch{}}let mf=Date.now,eb=!1;if(typeof window!="undefined"){mf()>document.createEvent("Event").timeStamp&&(mf=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);eb=!!(t&&Number(t[1])<=53)}let Op=0;const YT=Promise.resolve(),GT=()=>{Op=0},KT=()=>Op||(YT.then(GT),Op=mf());function Rr(t,e,n,i){t.addEventListener(e,n,i)}function XT(t,e,n,i){t.removeEventListener(e,n,i)}function QT(t,e,n,i,r=null){const s=t._vei||(t._vei={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=ZT(e);if(i){const u=s[e]=JT(i,r);Rr(t,a,u,l)}else o&&(XT(t,a,o,l),s[e]=void 0)}}const nb=/(?:Once|Passive|Capture)$/;function ZT(t){let e;if(nb.test(t)){e={};let n;for(;n=t.match(nb);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[Vo(t.slice(2)),e]}function JT(t,e){const n=i=>{const r=i.timeStamp||mf();(eb||r>=n.attached-1)&&Vn(tD(i,n.value),e,5,[i])};return n.value=t,n.attached=KT(),n}function tD(t,e){if(dt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const ib=/^on[a-z]/,eD=(t,e,n,i,r=!1,s,o,a,l)=>{e==="class"?jT(t,i,r):e==="style"?qT(t,n,i):jc(e)?j0(e)||QT(t,e,n,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):nD(t,e,i,r))?VT(t,e,i,s,o,a,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),WT(t,e,i,r))};function nD(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&ib.test(e)&&Ct(n)):e==="spellcheck"||e==="draggable"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||ib.test(e)&&Me(n)?!1:e in t}const Lr="transition",El="animation",dn=(t,{slots:e})=>IT(_x,iD(t),e);dn.displayName="Transition";const rb={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};dn.props=Ce({},_x.props,rb);const Ps=(t,e=[])=>{dt(t)?t.forEach(n=>n(...e)):t&&t(...e)},sb=t=>t?dt(t)?t.some(e=>e.length>1):t.length>1:!1;function iD(t){const e={};for(const $ in t)$ in rb||(e[$]=t[$]);if(t.css===!1)return e;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,p=rD(r),g=p&&p[0],m=p&&p[1],{onBeforeEnter:y,onEnter:_,onEnterCancelled:v,onLeave:x,onLeaveCancelled:w,onBeforeAppear:k=y,onAppear:b=_,onAppearCancelled:C=v}=e,T=($,O,U)=>{na($,O?c:a),na($,O?u:o),U&&U()},M=($,O)=>{na($,d),na($,h),O&&O()},S=$=>(O,U)=>{const N=$?b:_,R=()=>T(O,$,U);Ps(N,[O,R]),ob(()=>{na(O,$?l:s),Ir(O,$?c:a),sb(N)||ab(O,i,g,R)})};return Ce(e,{onBeforeEnter($){Ps(y,[$]),Ir($,s),Ir($,o)},onBeforeAppear($){Ps(k,[$]),Ir($,l),Ir($,u)},onEnter:S(!1),onAppear:S(!0),onLeave($,O){const U=()=>M($,O);Ir($,f),aD(),Ir($,h),ob(()=>{na($,f),Ir($,d),sb(x)||ab($,i,m,U)}),Ps(x,[$,U])},onEnterCancelled($){T($,!1),Ps(v,[$])},onAppearCancelled($){T($,!0),Ps(C,[$])},onLeaveCancelled($){M($),Ps(w,[$])}})}function rD(t){if(t==null)return null;if(re(t))return[Np(t.enter),Np(t.leave)];{const e=Np(t);return[e,e]}}function Np(t){return pl(t)}function Ir(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function na(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function ob(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let sD=0;function ab(t,e,n,i){const r=t._endId=++sD,s=()=>{r===t._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=oD(t,e);if(!o)return i();const u=o+"end";let c=0;const f=()=>{t.removeEventListener(u,h),s()},h=d=>{d.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),t.addEventListener(u,h)}function oD(t,e){const n=window.getComputedStyle(t),i=p=>(n[p]||"").split(", "),r=i(Lr+"Delay"),s=i(Lr+"Duration"),o=lb(r,s),a=i(El+"Delay"),l=i(El+"Duration"),u=lb(a,l);let c=null,f=0,h=0;e===Lr?o>0&&(c=Lr,f=o,h=s.length):e===El?u>0&&(c=El,f=u,h=l.length):(f=Math.max(o,u),c=f>0?o>u?Lr:El:null,h=c?c===Lr?s.length:l.length:0);const d=c===Lr&&/\b(transform|all)(,|$)/.test(n[Lr+"Property"]);return{type:c,timeout:f,propCount:h,hasTransform:d}}function lb(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>ub(n)+ub(t[i])))}function ub(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function aD(){return document.body.offsetHeight}const ia=t=>{const e=t.props["onUpdate:modelValue"];return dt(e)?n=>Gc(e,n):e};function lD(t){t.target.composing=!0}function cb(t){const e=t.target;e.composing&&(e.composing=!1,uD(e,"input"))}function uD(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}const fb={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t._assign=ia(r);const s=i||r.props&&r.props.type==="number";Rr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n?a=a.trim():s&&(a=pl(a)),t._assign(a)}),n&&Rr(t,"change",()=>{t.value=t.value.trim()}),e||(Rr(t,"compositionstart",lD),Rr(t,"compositionend",cb),Rr(t,"change",cb))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},s){if(t._assign=ia(s),t.composing||document.activeElement===t&&(n||i&&t.value.trim()===e||(r||t.type==="number")&&pl(t.value)===e))return;const o=e==null?"":e;t.value!==o&&(t.value=o)}},cD={deep:!0,created(t,e,n){t._assign=ia(n),Rr(t,"change",()=>{const i=t._modelValue,r=kl(t),s=t.checked,o=t._assign;if(dt(i)){const a=U0(i,r),l=a!==-1;if(s&&!l)o(i.concat(r));else if(!s&&l){const u=[...i];u.splice(a,1),o(u)}}else if(Wo(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(pb(t,s))})},mounted:hb,beforeUpdate(t,e,n){t._assign=ia(n),hb(t,e,n)}};function hb(t,{value:e,oldValue:n},i){t._modelValue=e,dt(e)?t.checked=U0(e,i.props.value)>-1:Wo(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=dl(e,pb(t,!0)))}const fD={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const r=Wo(e);Rr(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?pl(kl(o)):kl(o));t._assign(t.multiple?r?new Set(s):s:s[0])}),t._assign=ia(i)},mounted(t,{value:e}){db(t,e)},beforeUpdate(t,e,n){t._assign=ia(n)},updated(t,{value:e}){db(t,e)}};function db(t,e){const n=t.multiple;if(!(n&&!dt(e)&&!Wo(e))){for(let i=0,r=t.options.length;i<r;i++){const s=t.options[i],o=kl(s);if(n)dt(e)?s.selected=U0(e,o)>-1:s.selected=e.has(o);else if(dl(kl(s),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function kl(t){return"_value"in t?t._value:t.value}function pb(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const gb={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Al(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),Al(t,!0),i.enter(t)):i.leave(t,()=>{Al(t,!1)}):Al(t,e))},beforeUnmount(t,{value:e}){Al(t,e)}};function Al(t,e){t.style.display=e?t._vod:"none"}const hD=Ce({patchProp:eD},UT);let mb;function dD(){return mb||(mb=mT(hD))}const fct=(...t)=>{const e=dD().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=pD(i);if(!r)return;const s=e._component;!Ct(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function pD(t){return Me(t)?document.querySelector(t):t}var On=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n};const gD={name:"PageCard",props:{header:String,edit_mode:Object},computed:{headerClass(){return this.edit_mode&&this.edit_mode.enabled?["fantune-card-header-edit"]:["fantune-card-header-normal"]}}},mD={class:"fantune-card"},yD=["innerHTML"],_D={class:"card-body p-2"};function vD(t,e,n,i,r,s){return tt(),it("div",mD,[n.header?(tt(),it("div",{key:0,class:jo(s.headerClass)},[E("strong",null,[E("span",{innerHTML:n.header},null,8,yD)])],2)):hn("",!0),E("div",_D,[Mp(t.$slots,"default")])])}var xD=On(gD,[["render",vD]]);const yb=[1,1.015,1.03,1.045,1.06,1.075,1.09,1.105,1.12,1.135,1.15,1.165,1.18,1.19,1.22,1.23,1.25,1.265,1.28,1.3,1.32,1.34,1.36,1.38,1.4,1.425,1.45,1.475,1.5,1.525,1.55,1.575,1.6,1.675,1.7,1.725,1.75,1.775,1.8,1.825,1.85,1.875,1.9,1.925,2,2.03,2.06,2.09,2.12,2.15,2.18,2.21,2.24,2.27,2.3,2.33,2.36,2.395,2.43,2.465,2.5,2.54,2.58,2.615,2.65,2.685,2.72,2.76,2.8,2.85,2.9,2.95,3,3.035,3.07,3.11,3.15,3.2,3.25,3.3,3.35,3.4,3.45,3.5,3.55,3.6,3.65,3.7,3.75,3.81,3.87,3.935,4,4.06,4.12,4.185,4.25,4.315,4.37,4.44,4.5,4.56,4.62,4.685,4.75,4.815,4.87,4.93,5,5.075,5.15,5.225,5.3,5.375,5.45,5.525,5.6,5.7,5.8,5.9,6,6.075,6.15,6.225,6.3,6.4,6.5,6.6,6.7,6.8,6.9,7,7.1,7.2,7.3,7.4,7.5,7.625,7.75,7.875,8,8.125,8.25,8.375,8.5,8.625,8.75,8.875,9,9.125,9.25,9.375,9.5,9.625,9.75,9.875];function _b(t){let e=t.toExponential(),n=e.indexOf("e"),i=e.slice(0,n),r=e.slice(n+1);return[+i,+r]}function vb(t,e){if(t==0)return t+1;if(t<0)return-xb(-t,e);let n=_b(t),i=e.filter(r=>r<=n[0]).length;return i==e.length?e[0]*Math.pow(10,n[1]+1):e[i]*Math.pow(10,n[1])}function xb(t,e){if(t==0)return t-1;if(t<0)return-vb(-t,e);let n=_b(t),i=e.filter(r=>r<n[0]).length-1;return i<0?e[e.length-1]*Math.pow(10,n[1]-1):e[i]*Math.pow(10,n[1])}let bb=t=>vb(t,yb),bD=t=>xb(t,yb);var Br={TOLERANCE:1e-12,\u03C10:1.2,G:9.81,M:.029,RM:8.3145,PATM:101325,T0:-273.15,FREQS:[63,125,250,500,1e3,2e3,4e3,8e3]},He="top",Nn="bottom",Fn="right",We="left",yf="auto",ra=[He,Nn,Fn,We],Rs="start",sa="end",wb="clippingParents",Fp="viewport",oa="popper",Eb="reference",Pp=ra.reduce(function(t,e){return t.concat([e+"-"+Rs,e+"-"+sa])},[]),Rp=[].concat(ra,[yf]).reduce(function(t,e){return t.concat([e,e+"-"+Rs,e+"-"+sa])},[]),kb="beforeRead",Ab="read",Cb="afterRead",Mb="beforeMain",Sb="main",Tb="afterMain",Db="beforeWrite",$b="write",Ob="afterWrite",Nb=[kb,Ab,Cb,Mb,Sb,Tb,Db,$b,Ob];function Pi(t){return t?(t.nodeName||"").toLowerCase():null}function di(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function aa(t){var e=di(t).Element;return t instanceof e||t instanceof Element}function Gn(t){var e=di(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Fb(t){if(typeof ShadowRoot=="undefined")return!1;var e=di(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function wD(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Gn(s)||!Pi(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function ED(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!Gn(r)||!Pi(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var Lp={name:"applyStyles",enabled:!0,phase:"write",fn:wD,effect:ED,requires:["computeStyles"]};function Ri(t){return t.split("-")[0]}var Ls=Math.max,_f=Math.min,la=Math.round;function ua(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),i=1,r=1;if(Gn(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(i=la(n.width)/o||1),s>0&&(r=la(n.height)/s||1)}return{width:n.width/i,height:n.height/r,top:n.top/r,right:n.right/i,bottom:n.bottom/r,left:n.left/i,x:n.left/i,y:n.top/r}}function Ip(t){var e=ua(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Pb(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Fb(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function lr(t){return di(t).getComputedStyle(t)}function kD(t){return["table","td","th"].indexOf(Pi(t))>=0}function zr(t){return((aa(t)?t.ownerDocument:t.document)||window.document).documentElement}function vf(t){return Pi(t)==="html"?t:t.assignedSlot||t.parentNode||(Fb(t)?t.host:null)||zr(t)}function Rb(t){return!Gn(t)||lr(t).position==="fixed"?null:t.offsetParent}function AD(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Gn(t)){var i=lr(t);if(i.position==="fixed")return null}for(var r=vf(t);Gn(r)&&["html","body"].indexOf(Pi(r))<0;){var s=lr(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Cl(t){for(var e=di(t),n=Rb(t);n&&kD(n)&&lr(n).position==="static";)n=Rb(n);return n&&(Pi(n)==="html"||Pi(n)==="body"&&lr(n).position==="static")?e:n||AD(t)||e}function Bp(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ml(t,e,n){return Ls(t,_f(e,n))}function CD(t,e,n){var i=Ml(t,e,n);return i>n?n:i}function Lb(){return{top:0,right:0,bottom:0,left:0}}function Ib(t){return Object.assign({},Lb(),t)}function Bb(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var MD=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Ib(typeof e!="number"?e:Bb(e,ra))};function SD(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ri(n.placement),l=Bp(a),u=[We,Fn].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var f=MD(r.padding,n),h=Ip(s),d=l==="y"?He:We,p=l==="y"?Nn:Fn,g=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],m=o[l]-n.rects.reference[l],y=Cl(s),_=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,v=g/2-m/2,x=f[d],w=_-h[c]-f[p],k=_/2-h[c]/2+v,b=Ml(x,k,w),C=l;n.modifiersData[i]=(e={},e[C]=b,e.centerOffset=b-k,e)}}function TD(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||!Pb(e.elements.popper,r)||(e.elements.arrow=r))}var zb={name:"arrow",enabled:!0,phase:"main",fn:SD,effect:TD,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ca(t){return t.split("-")[1]}var DD={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $D(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:la(e*r)/r||0,y:la(n*r)/r||0}}function Ub(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,f=t.isFixed,h=o.x,d=h===void 0?0:h,p=o.y,g=p===void 0?0:p,m=typeof c=="function"?c({x:d,y:g}):{x:d,y:g};d=m.x,g=m.y;var y=o.hasOwnProperty("x"),_=o.hasOwnProperty("y"),v=We,x=He,w=window;if(u){var k=Cl(n),b="clientHeight",C="clientWidth";if(k===di(n)&&(k=zr(n),lr(k).position!=="static"&&a==="absolute"&&(b="scrollHeight",C="scrollWidth")),k=k,r===He||(r===We||r===Fn)&&s===sa){x=Nn;var T=f&&w.visualViewport?w.visualViewport.height:k[b];g-=T-i.height,g*=l?1:-1}if(r===We||(r===He||r===Nn)&&s===sa){v=Fn;var M=f&&w.visualViewport?w.visualViewport.width:k[C];d-=M-i.width,d*=l?1:-1}}var S=Object.assign({position:a},u&&DD),$=c===!0?$D({x:d,y:g}):{x:d,y:g};if(d=$.x,g=$.y,l){var O;return Object.assign({},S,(O={},O[x]=_?"0":"",O[v]=y?"0":"",O.transform=(w.devicePixelRatio||1)<=1?"translate("+d+"px, "+g+"px)":"translate3d("+d+"px, "+g+"px, 0)",O))}return Object.assign({},S,(e={},e[x]=_?g+"px":"",e[v]=y?d+"px":"",e.transform="",e))}function OD(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Ri(e.placement),variation:ca(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ub(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ub(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var zp={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:OD,data:{}},xf={passive:!0};function ND(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=di(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,xf)}),a&&l.addEventListener("resize",n.update,xf),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,xf)}),a&&l.removeEventListener("resize",n.update,xf)}}var Up={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ND,data:{}},FD={left:"right",right:"left",bottom:"top",top:"bottom"};function bf(t){return t.replace(/left|right|bottom|top/g,function(e){return FD[e]})}var PD={start:"end",end:"start"};function jb(t){return t.replace(/start|end/g,function(e){return PD[e]})}function jp(t){var e=di(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function qp(t){return ua(zr(t)).left+jp(t).scrollLeft}function RD(t){var e=di(t),n=zr(t),i=e.visualViewport,r=n.clientWidth,s=n.clientHeight,o=0,a=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:r,height:s,x:o+qp(t),y:a}}function LD(t){var e,n=zr(t),i=jp(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=Ls(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Ls(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+qp(t),l=-i.scrollTop;return lr(r||n).direction==="rtl"&&(a+=Ls(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Hp(t){var e=lr(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function qb(t){return["html","body","#document"].indexOf(Pi(t))>=0?t.ownerDocument.body:Gn(t)&&Hp(t)?t:qb(vf(t))}function Sl(t,e){var n;e===void 0&&(e=[]);var i=qb(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=di(i),o=r?[s].concat(s.visualViewport||[],Hp(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Sl(vf(o)))}function Wp(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ID(t){var e=ua(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function Hb(t,e){return e===Fp?Wp(RD(t)):aa(e)?ID(e):Wp(LD(zr(t)))}function BD(t){var e=Sl(vf(t)),n=["absolute","fixed"].indexOf(lr(t).position)>=0,i=n&&Gn(t)?Cl(t):t;return aa(i)?e.filter(function(r){return aa(r)&&Pb(r,i)&&Pi(r)!=="body"}):[]}function zD(t,e,n){var i=e==="clippingParents"?BD(t):[].concat(e),r=[].concat(i,[n]),s=r[0],o=r.reduce(function(a,l){var u=Hb(t,l);return a.top=Ls(u.top,a.top),a.right=_f(u.right,a.right),a.bottom=_f(u.bottom,a.bottom),a.left=Ls(u.left,a.left),a},Hb(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Wb(t){var e=t.reference,n=t.element,i=t.placement,r=i?Ri(i):null,s=i?ca(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case He:l={x:o,y:e.y-n.height};break;case Nn:l={x:o,y:e.y+e.height};break;case Fn:l={x:e.x+e.width,y:a};break;case We:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=r?Bp(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case Rs:l[u]=l[u]-(e[c]/2-n[c]/2);break;case sa:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function fa(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.boundary,o=s===void 0?wb:s,a=n.rootBoundary,l=a===void 0?Fp:a,u=n.elementContext,c=u===void 0?oa:u,f=n.altBoundary,h=f===void 0?!1:f,d=n.padding,p=d===void 0?0:d,g=Ib(typeof p!="number"?p:Bb(p,ra)),m=c===oa?Eb:oa,y=t.rects.popper,_=t.elements[h?m:c],v=zD(aa(_)?_:_.contextElement||zr(t.elements.popper),o,l),x=ua(t.elements.reference),w=Wb({reference:x,element:y,strategy:"absolute",placement:r}),k=Wp(Object.assign({},y,w)),b=c===oa?k:x,C={top:v.top-b.top+g.top,bottom:b.bottom-v.bottom+g.bottom,left:v.left-b.left+g.left,right:b.right-v.right+g.right},T=t.modifiersData.offset;if(c===oa&&T){var M=T[r];Object.keys(C).forEach(function(S){var $=[Fn,Nn].indexOf(S)>=0?1:-1,O=[He,Nn].indexOf(S)>=0?"y":"x";C[S]+=M[O]*$})}return C}function UD(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Rp:l,c=ca(i),f=c?a?Pp:Pp.filter(function(p){return ca(p)===c}):ra,h=f.filter(function(p){return u.indexOf(p)>=0});h.length===0&&(h=f);var d=h.reduce(function(p,g){return p[g]=fa(t,{placement:g,boundary:r,rootBoundary:s,padding:o})[Ri(g)],p},{});return Object.keys(d).sort(function(p,g){return d[p]-d[g]})}function jD(t){if(Ri(t)===yf)return[];var e=bf(t);return[jb(t),e,jb(e)]}function qD(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,g=n.allowedAutoPlacements,m=e.options.placement,y=Ri(m),_=y===m,v=l||(_||!p?[bf(m)]:jD(m)),x=[m].concat(v).reduce(function(Xt,ne){return Xt.concat(Ri(ne)===yf?UD(e,{placement:ne,boundary:c,rootBoundary:f,padding:u,flipVariations:p,allowedAutoPlacements:g}):ne)},[]),w=e.rects.reference,k=e.rects.popper,b=new Map,C=!0,T=x[0],M=0;M<x.length;M++){var S=x[M],$=Ri(S),O=ca(S)===Rs,U=[He,Nn].indexOf($)>=0,N=U?"width":"height",R=fa(e,{placement:S,boundary:c,rootBoundary:f,altBoundary:h,padding:u}),z=U?O?Fn:We:O?Nn:He;w[N]>k[N]&&(z=bf(z));var q=bf(z),J=[];if(s&&J.push(R[$]<=0),a&&J.push(R[z]<=0,R[q]<=0),J.every(function(Xt){return Xt})){T=S,C=!1;break}b.set(S,J)}if(C)for(var yt=p?3:1,Ot=function(ne){var Mn=x.find(function(ce){var ge=b.get(ce);if(ge)return ge.slice(0,ne).every(function(Q){return Q})});if(Mn)return T=Mn,"break"},Dt=yt;Dt>0;Dt--){var qt=Ot(Dt);if(qt==="break")break}e.placement!==T&&(e.modifiersData[i]._skip=!0,e.placement=T,e.reset=!0)}}var Vb={name:"flip",enabled:!0,phase:"main",fn:qD,requiresIfExists:["offset"],data:{_skip:!1}};function Yb(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Gb(t){return[He,Fn,Nn,We].some(function(e){return t[e]>=0})}function HD(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=fa(e,{elementContext:"reference"}),a=fa(e,{altBoundary:!0}),l=Yb(o,i),u=Yb(a,r,s),c=Gb(l),f=Gb(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":f})}var Kb={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:HD};function WD(t,e,n){var i=Ri(t),r=[We,He].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[We,Fn].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function VD(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=Rp.reduce(function(c,f){return c[f]=WD(f,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=o}var Xb={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:VD};function YD(t){var e=t.state,n=t.name;e.modifiersData[n]=Wb({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Vp={name:"popperOffsets",enabled:!0,phase:"read",fn:YD,data:{}};function GD(t){return t==="x"?"y":"x"}function KD(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,f=n.padding,h=n.tether,d=h===void 0?!0:h,p=n.tetherOffset,g=p===void 0?0:p,m=fa(e,{boundary:l,rootBoundary:u,padding:f,altBoundary:c}),y=Ri(e.placement),_=ca(e.placement),v=!_,x=Bp(y),w=GD(x),k=e.modifiersData.popperOffsets,b=e.rects.reference,C=e.rects.popper,T=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,M=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),S=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(!!k){if(s){var O,U=x==="y"?He:We,N=x==="y"?Nn:Fn,R=x==="y"?"height":"width",z=k[x],q=z+m[U],J=z-m[N],yt=d?-C[R]/2:0,Ot=_===Rs?b[R]:C[R],Dt=_===Rs?-C[R]:-b[R],qt=e.elements.arrow,Xt=d&&qt?Ip(qt):{width:0,height:0},ne=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Lb(),Mn=ne[U],ce=ne[N],ge=Ml(0,b[R],Xt[R]),Q=v?b[R]/2-yt-ge-Mn-M.mainAxis:Ot-ge-Mn-M.mainAxis,mt=v?-b[R]/2+yt+ge+ce+M.mainAxis:Dt+ge+ce+M.mainAxis,wt=e.elements.arrow&&Cl(e.elements.arrow),W=wt?x==="y"?wt.clientTop||0:wt.clientLeft||0:0,A=(O=S==null?void 0:S[x])!=null?O:0,D=z+Q-A-W,F=z+mt-A,B=Ml(d?_f(q,D):q,z,d?Ls(J,F):J);k[x]=B,$[x]=B-z}if(a){var j,K=x==="x"?He:We,Z=x==="x"?Nn:Fn,Y=k[w],X=w==="y"?"height":"width",V=Y+m[K],rt=Y-m[Z],et=[He,We].indexOf(y)!==-1,st=(j=S==null?void 0:S[w])!=null?j:0,_t=et?V:Y-b[X]-C[X]-st+M.altAxis,$t=et?Y+b[X]+C[X]-st-M.altAxis:rt,Yt=d&&et?CD(_t,Y,$t):Ml(d?_t:V,Y,d?$t:rt);k[w]=Yt,$[w]=Yt-Y}e.modifiersData[i]=$}}var Qb={name:"preventOverflow",enabled:!0,phase:"main",fn:KD,requiresIfExists:["offset"]};function XD(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function QD(t){return t===di(t)||!Gn(t)?jp(t):XD(t)}function ZD(t){var e=t.getBoundingClientRect(),n=la(e.width)/t.offsetWidth||1,i=la(e.height)/t.offsetHeight||1;return n!==1||i!==1}function JD(t,e,n){n===void 0&&(n=!1);var i=Gn(e),r=Gn(e)&&ZD(e),s=zr(e),o=ua(t,r),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Pi(e)!=="body"||Hp(s))&&(a=QD(e)),Gn(e)?(l=ua(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=qp(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function t$(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function e$(t){var e=t$(t);return Nb.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function n$(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function i$(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Zb={placement:"bottom",modifiers:[],strategy:"absolute"};function Jb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function wf(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?Zb:r;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zb,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],h=!1,d={state:c,setOptions:function(y){var _=typeof y=="function"?y(c.options):y;g(),c.options=Object.assign({},s,c.options,_),c.scrollParents={reference:aa(a)?Sl(a):a.contextElement?Sl(a.contextElement):[],popper:Sl(l)};var v=e$(i$([].concat(i,c.options.modifiers)));return c.orderedModifiers=v.filter(function(x){return x.enabled}),p(),d.update()},forceUpdate:function(){if(!h){var y=c.elements,_=y.reference,v=y.popper;if(!!Jb(_,v)){c.rects={reference:JD(_,Cl(v),c.options.strategy==="fixed"),popper:Ip(v)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(M){return c.modifiersData[M.name]=Object.assign({},M.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var w=c.orderedModifiers[x],k=w.fn,b=w.options,C=b===void 0?{}:b,T=w.name;typeof k=="function"&&(c=k({state:c,options:C,name:T,instance:d})||c)}}}},update:n$(function(){return new Promise(function(m){d.forceUpdate(),m(c)})}),destroy:function(){g(),h=!0}};if(!Jb(a,l))return d;d.setOptions(u).then(function(m){!h&&u.onFirstUpdate&&u.onFirstUpdate(m)});function p(){c.orderedModifiers.forEach(function(m){var y=m.name,_=m.options,v=_===void 0?{}:_,x=m.effect;if(typeof x=="function"){var w=x({state:c,name:y,instance:d,options:v}),k=function(){};f.push(w||k)}})}function g(){f.forEach(function(m){return m()}),f=[]}return d}}var r$=wf(),s$=[Up,Vp,zp,Lp],o$=wf({defaultModifiers:s$}),a$=[Up,Vp,zp,Lp,Xb,Vb,Qb,zb,Kb],Yp=wf({defaultModifiers:a$}),tw=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",popperGenerator:wf,detectOverflow:fa,createPopperBase:r$,createPopper:Yp,createPopperLite:o$,top:He,bottom:Nn,right:Fn,left:We,auto:yf,basePlacements:ra,start:Rs,end:sa,clippingParents:wb,viewport:Fp,popper:oa,reference:Eb,variationPlacements:Pp,placements:Rp,beforeRead:kb,read:Ab,afterRead:Cb,beforeMain:Mb,main:Sb,afterMain:Tb,beforeWrite:Db,write:$b,afterWrite:Ob,modifierPhases:Nb,applyStyles:Lp,arrow:zb,computeStyles:zp,eventListeners:Up,flip:Vb,hide:Kb,offset:Xb,popperOffsets:Vp,preventOverflow:Qb});/*!
  * Bootstrap v5.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const l$=1e6,u$=1e3,Gp="transitionend",c$=t=>t==null?`${t}`:{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),f$=t=>{do t+=Math.floor(Math.random()*l$);while(document.getElementById(t));return t},ew=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return e},Kp=t=>{const e=ew(t);return e&&document.querySelector(e)?e:null},Ur=t=>{const e=ew(t);return e?document.querySelector(e):null},h$=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return!i&&!r?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*u$)},nw=t=>{t.dispatchEvent(new Event(Gp))},Is=t=>!t||typeof t!="object"?!1:(typeof t.jquery!="undefined"&&(t=t[0]),typeof t.nodeType!="undefined"),jr=t=>Is(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(t):null,Li=(t,e,n)=>{Object.keys(n).forEach(i=>{const r=n[i],s=e[i],o=s&&Is(s)?"element":c$(s);if(!new RegExp(r).test(o))throw new TypeError(`${t.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${r}".`)})},Tl=t=>!Is(t)||t.getClientRects().length===0?!1:getComputedStyle(t).getPropertyValue("visibility")==="visible",Bs=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled!="undefined"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",iw=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?iw(t.parentNode):null},Ef=()=>{},ha=t=>{t.offsetHeight},rw=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute("data-bs-no-jquery")?t:null},Xp=[],d$=t=>{document.readyState==="loading"?(Xp.length||document.addEventListener("DOMContentLoaded",()=>{Xp.forEach(e=>e())}),Xp.push(t)):t()},pn=()=>document.documentElement.dir==="rtl",Kn=t=>{d$(()=>{const e=rw();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}})},zs=t=>{typeof t=="function"&&t()},sw=(t,e,n=!0)=>{if(!n){zs(t);return}const i=5,r=h$(e)+i;let s=!1;const o=({target:a})=>{a===e&&(s=!0,e.removeEventListener(Gp,o),zs(t))};e.addEventListener(Gp,o),setTimeout(()=>{s||nw(e)},r)},ow=(t,e,n,i)=>{let r=t.indexOf(e);if(r===-1)return t[!n&&i?t.length-1:0];const s=t.length;return r+=n?1:-1,i&&(r=(r+s)%s),t[Math.max(0,Math.min(r,s-1))]},p$=/[^.]*(?=\..*)\.|.*/,g$=/\..*/,m$=/::\d+$/,Qp={};let aw=1;const y$={mouseenter:"mouseover",mouseleave:"mouseout"},_$=/^(mouseenter|mouseleave)/i,lw=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function uw(t,e){return e&&`${e}::${aw++}`||t.uidEvent||aw++}function cw(t){const e=uw(t);return t.uidEvent=e,Qp[e]=Qp[e]||{},Qp[e]}function v$(t,e){return function n(i){return i.delegateTarget=t,n.oneOff&&H.off(t,i.type,e),e.apply(t,[i])}}function x$(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(let a=s.length;a--;)if(s[a]===o)return r.delegateTarget=o,i.oneOff&&H.off(t,r.type,e,n),n.apply(o,[r]);return null}}function fw(t,e,n=null){const i=Object.keys(t);for(let r=0,s=i.length;r<s;r++){const o=t[i[r]];if(o.originalHandler===e&&o.delegationSelector===n)return o}return null}function hw(t,e,n){const i=typeof e=="string",r=i?n:e;let s=pw(t);return lw.has(s)||(s=t),[i,r,s]}function dw(t,e,n,i,r){if(typeof e!="string"||!t)return;if(n||(n=i,i=null),_$.test(e)){const d=p=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return p.call(this,g)};i?i=d(i):n=d(n)}const[s,o,a]=hw(e,n,i),l=cw(t),u=l[a]||(l[a]={}),c=fw(u,o,s?n:null);if(c){c.oneOff=c.oneOff&&r;return}const f=uw(o,e.replace(p$,"")),h=s?x$(t,n,i):v$(t,n);h.delegationSelector=s?n:null,h.originalHandler=o,h.oneOff=r,h.uidEvent=f,u[f]=h,t.addEventListener(a,h,s)}function Zp(t,e,n,i,r){const s=fw(e[n],i,r);!s||(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function b$(t,e,n,i){const r=e[n]||{};Object.keys(r).forEach(s=>{if(s.includes(i)){const o=r[s];Zp(t,e,n,o.originalHandler,o.delegationSelector)}})}function pw(t){return t=t.replace(g$,""),y$[t]||t}const H={on(t,e,n,i){dw(t,e,n,i,!1)},one(t,e,n,i){dw(t,e,n,i,!0)},off(t,e,n,i){if(typeof e!="string"||!t)return;const[r,s,o]=hw(e,n,i),a=o!==e,l=cw(t),u=e.startsWith(".");if(typeof s!="undefined"){if(!l||!l[o])return;Zp(t,l,o,s,r?n:null);return}u&&Object.keys(l).forEach(f=>{b$(t,l,f,e.slice(1))});const c=l[o]||{};Object.keys(c).forEach(f=>{const h=f.replace(m$,"");if(!a||e.includes(h)){const d=c[f];Zp(t,l,o,d.originalHandler,d.delegationSelector)}})},trigger(t,e,n){if(typeof e!="string"||!t)return null;const i=rw(),r=pw(e),s=e!==r,o=lw.has(r);let a,l=!0,u=!0,c=!1,f=null;return s&&i&&(a=i.Event(e,n),i(t).trigger(a),l=!a.isPropagationStopped(),u=!a.isImmediatePropagationStopped(),c=a.isDefaultPrevented()),o?(f=document.createEvent("HTMLEvents"),f.initEvent(r,l,!0)):f=new CustomEvent(e,{bubbles:l,cancelable:!0}),typeof n!="undefined"&&Object.keys(n).forEach(h=>{Object.defineProperty(f,h,{get(){return n[h]}})}),c&&f.preventDefault(),u&&t.dispatchEvent(f),f.defaultPrevented&&typeof a!="undefined"&&a.preventDefault(),f}},qr=new Map,Dl={set(t,e,n){qr.has(t)||qr.set(t,new Map);const i=qr.get(t);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,n)},get(t,e){return qr.has(t)&&qr.get(t).get(e)||null},remove(t,e){if(!qr.has(t))return;const n=qr.get(t);n.delete(e),n.size===0&&qr.delete(t)}},w$="5.1.3";class pi{constructor(e){e=jr(e),!!e&&(this._element=e,Dl.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Dl.remove(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach(e=>{this[e]=null})}_queueCallback(e,n,i=!0){sw(e,n,i)}static getInstance(e){return Dl.get(jr(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return w$}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const kf=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;H.on(document,n,`[data-bs-dismiss="${i}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Bs(this))return;const s=Ur(this)||this.closest(`.${i}`);t.getOrCreateInstance(s)[e]()})},E$="alert",k$="bs.alert",gw=`.${k$}`,A$=`close${gw}`,C$=`closed${gw}`,M$="fade",S$="show";class Af extends pi{static get NAME(){return E$}close(){if(H.trigger(this._element,A$).defaultPrevented)return;this._element.classList.remove(S$);const n=this._element.classList.contains(M$);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),H.trigger(this._element,C$),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Af.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}kf(Af,"close");Kn(Af);const T$="button",D$="bs.button",$$=`.${D$}`,O$=".data-api",N$="active",mw='[data-bs-toggle="button"]',F$=`click${$$}${O$}`;class Cf extends pi{static get NAME(){return T$}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(N$))}static jQueryInterface(e){return this.each(function(){const n=Cf.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}H.on(document,F$,mw,t=>{t.preventDefault();const e=t.target.closest(mw);Cf.getOrCreateInstance(e).toggle()});Kn(Cf);function yw(t){return t==="true"?!0:t==="false"?!1:t===Number(t).toString()?Number(t):t===""||t==="null"?null:t}function Jp(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Se={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${Jp(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Jp(e)}`)},getDataAttributes(t){if(!t)return{};const e={};return Object.keys(t.dataset).filter(n=>n.startsWith("bs")).forEach(n=>{let i=n.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=yw(t.dataset[n])}),e},getDataAttribute(t,e){return yw(t.getAttribute(`data-bs-${Jp(e)}`))},offset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position(t){return{top:t.offsetTop,left:t.offsetLeft}}},P$=3,vt={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let i=t.parentNode;for(;i&&i.nodeType===Node.ELEMENT_NODE&&i.nodeType!==P$;)i.matches(e)&&n.push(i),i=i.parentNode;return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(", ");return this.find(e,t).filter(n=>!Bs(n)&&Tl(n))}},_w="carousel",R$="bs.carousel",Pn=`.${R$}`,vw=".data-api",L$="ArrowLeft",I$="ArrowRight",B$=500,z$=40,xw={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},U$={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Us="next",js="prev",qs="left",$l="right",j$={[L$]:$l,[I$]:qs},q$=`slide${Pn}`,bw=`slid${Pn}`,H$=`keydown${Pn}`,W$=`mouseenter${Pn}`,V$=`mouseleave${Pn}`,Y$=`touchstart${Pn}`,G$=`touchmove${Pn}`,K$=`touchend${Pn}`,X$=`pointerdown${Pn}`,Q$=`pointerup${Pn}`,Z$=`dragstart${Pn}`,J$=`load${Pn}${vw}`,tO=`click${Pn}${vw}`,eO="carousel",Hs="active",nO="slide",iO="carousel-item-end",rO="carousel-item-start",sO="carousel-item-next",oO="carousel-item-prev",aO="pointer-event",lO=".active",Mf=".active.carousel-item",uO=".carousel-item",cO=".carousel-item img",fO=".carousel-item-next, .carousel-item-prev",hO=".carousel-indicators",dO="[data-bs-target]",pO="[data-bs-slide], [data-bs-slide-to]",gO='[data-bs-ride="carousel"]',mO="touch",yO="pen";class ur extends pi{constructor(e,n){super(e);this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(n),this._indicatorsElement=vt.findOne(hO,this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return xw}static get NAME(){return _w}next(){this._slide(Us)}nextWhenVisible(){!document.hidden&&Tl(this._element)&&this.next()}prev(){this._slide(js)}pause(e){e||(this._isPaused=!0),vt.findOne(fO,this._element)&&(nw(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=vt.findOne(Mf,this._element);const n=this._getItemIndex(this._activeElement);if(e>this._items.length-1||e<0)return;if(this._isSliding){H.one(this._element,bw,()=>this.to(e));return}if(n===e){this.pause(),this.cycle();return}const i=e>n?Us:js;this._slide(i,this._items[e])}_getConfig(e){return e=Et(Et(Et({},xw),Se.getDataAttributes(this._element)),typeof e=="object"?e:{}),Li(_w,e,U$),e}_handleSwipe(){const e=Math.abs(this.touchDeltaX);if(e<=z$)return;const n=e/this.touchDeltaX;this.touchDeltaX=0,!!n&&this._slide(n>0?$l:qs)}_addEventListeners(){this._config.keyboard&&H.on(this._element,H$,e=>this._keydown(e)),this._config.pause==="hover"&&(H.on(this._element,W$,e=>this.pause(e)),H.on(this._element,V$,e=>this.cycle(e))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const e=s=>this._pointerEvent&&(s.pointerType===yO||s.pointerType===mO),n=s=>{e(s)?this.touchStartX=s.clientX:this._pointerEvent||(this.touchStartX=s.touches[0].clientX)},i=s=>{this.touchDeltaX=s.touches&&s.touches.length>1?0:s.touches[0].clientX-this.touchStartX},r=s=>{e(s)&&(this.touchDeltaX=s.clientX-this.touchStartX),this._handleSwipe(),this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(o=>this.cycle(o),B$+this._config.interval))};vt.find(cO,this._element).forEach(s=>{H.on(s,Z$,o=>o.preventDefault())}),this._pointerEvent?(H.on(this._element,X$,s=>n(s)),H.on(this._element,Q$,s=>r(s)),this._element.classList.add(aO)):(H.on(this._element,Y$,s=>n(s)),H.on(this._element,G$,s=>i(s)),H.on(this._element,K$,s=>r(s)))}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=j$[e.key];n&&(e.preventDefault(),this._slide(n))}_getItemIndex(e){return this._items=e&&e.parentNode?vt.find(uO,e.parentNode):[],this._items.indexOf(e)}_getItemByOrder(e,n){const i=e===Us;return ow(this._items,n,i,this._config.wrap)}_triggerSlideEvent(e,n){const i=this._getItemIndex(e),r=this._getItemIndex(vt.findOne(Mf,this._element));return H.trigger(this._element,q$,{relatedTarget:e,direction:n,from:r,to:i})}_setActiveIndicatorElement(e){if(this._indicatorsElement){const n=vt.findOne(lO,this._indicatorsElement);n.classList.remove(Hs),n.removeAttribute("aria-current");const i=vt.find(dO,this._indicatorsElement);for(let r=0;r<i.length;r++)if(Number.parseInt(i[r].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(e)){i[r].classList.add(Hs),i[r].setAttribute("aria-current","true");break}}}_updateInterval(){const e=this._activeElement||vt.findOne(Mf,this._element);if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);n?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=n):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(e,n){const i=this._directionToOrder(e),r=vt.findOne(Mf,this._element),s=this._getItemIndex(r),o=n||this._getItemByOrder(i,r),a=this._getItemIndex(o),l=Boolean(this._interval),u=i===Us,c=u?rO:iO,f=u?sO:oO,h=this._orderToDirection(i);if(o&&o.classList.contains(Hs)){this._isSliding=!1;return}if(this._isSliding||this._triggerSlideEvent(o,h).defaultPrevented||!r||!o)return;this._isSliding=!0,l&&this.pause(),this._setActiveIndicatorElement(o),this._activeElement=o;const p=()=>{H.trigger(this._element,bw,{relatedTarget:o,direction:h,from:s,to:a})};if(this._element.classList.contains(nO)){o.classList.add(f),ha(o),r.classList.add(c),o.classList.add(c);const g=()=>{o.classList.remove(c,f),o.classList.add(Hs),r.classList.remove(Hs,f,c),this._isSliding=!1,setTimeout(p,0)};this._queueCallback(g,r,!0)}else r.classList.remove(Hs),o.classList.add(Hs),this._isSliding=!1,p();l&&this.cycle()}_directionToOrder(e){return[$l,qs].includes(e)?pn()?e===qs?js:Us:e===qs?Us:js:e}_orderToDirection(e){return[Us,js].includes(e)?pn()?e===js?qs:$l:e===js?$l:qs:e}static carouselInterface(e,n){const i=ur.getOrCreateInstance(e,n);let{_config:r}=i;typeof n=="object"&&(r=Et(Et({},r),n));const s=typeof n=="string"?n:r.slide;if(typeof n=="number")i.to(n);else if(typeof s=="string"){if(typeof i[s]=="undefined")throw new TypeError(`No method named "${s}"`);i[s]()}else r.interval&&r.ride&&(i.pause(),i.cycle())}static jQueryInterface(e){return this.each(function(){ur.carouselInterface(this,e)})}static dataApiClickHandler(e){const n=Ur(this);if(!n||!n.classList.contains(eO))return;const i=Et(Et({},Se.getDataAttributes(n)),Se.getDataAttributes(this)),r=this.getAttribute("data-bs-slide-to");r&&(i.interval=!1),ur.carouselInterface(n,i),r&&ur.getInstance(n).to(r),e.preventDefault()}}H.on(document,tO,pO,ur.dataApiClickHandler);H.on(window,J$,()=>{const t=vt.find(gO);for(let e=0,n=t.length;e<n;e++)ur.carouselInterface(t[e],ur.getInstance(t[e]))});Kn(ur);const ww="collapse",Ew="bs.collapse",Ol=`.${Ew}`,_O=".data-api",kw={toggle:!0,parent:null},vO={toggle:"boolean",parent:"(null|element)"},xO=`show${Ol}`,bO=`shown${Ol}`,wO=`hide${Ol}`,EO=`hidden${Ol}`,kO=`click${Ol}${_O}`,tg="show",da="collapse",Sf="collapsing",Aw="collapsed",Cw=`:scope .${da} .${da}`,AO="collapse-horizontal",CO="width",MO="height",SO=".collapse.show, .collapse.collapsing",eg='[data-bs-toggle="collapse"]';class pa extends pi{constructor(e,n){super(e);this._isTransitioning=!1,this._config=this._getConfig(n),this._triggerArray=[];const i=vt.find(eg);for(let r=0,s=i.length;r<s;r++){const o=i[r],a=Kp(o),l=vt.find(a).filter(u=>u===this._element);a!==null&&l.length&&(this._selector=a,this._triggerArray.push(o))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return kw}static get NAME(){return ww}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[],n;if(this._config.parent){const u=vt.find(Cw,this._config.parent);e=vt.find(SO,this._config.parent).filter(c=>!u.includes(c))}const i=vt.findOne(this._selector);if(e.length){const u=e.find(c=>i!==c);if(n=u?pa.getInstance(u):null,n&&n._isTransitioning)return}if(H.trigger(this._element,xO).defaultPrevented)return;e.forEach(u=>{i!==u&&pa.getOrCreateInstance(u,{toggle:!1}).hide(),n||Dl.set(u,Ew,null)});const s=this._getDimension();this._element.classList.remove(da),this._element.classList.add(Sf),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const o=()=>{this._isTransitioning=!1,this._element.classList.remove(Sf),this._element.classList.add(da,tg),this._element.style[s]="",H.trigger(this._element,bO)},l=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[s]=`${this._element[l]}px`}hide(){if(this._isTransitioning||!this._isShown()||H.trigger(this._element,wO).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,ha(this._element),this._element.classList.add(Sf),this._element.classList.remove(da,tg);const i=this._triggerArray.length;for(let s=0;s<i;s++){const o=this._triggerArray[s],a=Ur(o);a&&!this._isShown(a)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(Sf),this._element.classList.add(da),H.trigger(this._element,EO)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(tg)}_getConfig(e){return e=Et(Et(Et({},kw),Se.getDataAttributes(this._element)),e),e.toggle=Boolean(e.toggle),e.parent=jr(e.parent),Li(ww,e,vO),e}_getDimension(){return this._element.classList.contains(AO)?CO:MO}_initializeChildren(){if(!this._config.parent)return;const e=vt.find(Cw,this._config.parent);vt.find(eg,this._config.parent).filter(n=>!e.includes(n)).forEach(n=>{const i=Ur(n);i&&this._addAriaAndCollapsedClass([n],this._isShown(i))})}_addAriaAndCollapsedClass(e,n){!e.length||e.forEach(i=>{n?i.classList.remove(Aw):i.classList.add(Aw),i.setAttribute("aria-expanded",n)})}static jQueryInterface(e){return this.each(function(){const n={};typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1);const i=pa.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof i[e]=="undefined")throw new TypeError(`No method named "${e}"`);i[e]()}})}}H.on(document,kO,eg,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();const e=Kp(this);vt.find(e).forEach(i=>{pa.getOrCreateInstance(i,{toggle:!1}).toggle()})});Kn(pa);const ng="dropdown",TO="bs.dropdown",Ws=`.${TO}`,ig=".data-api",Tf="Escape",Mw="Space",Sw="Tab",rg="ArrowUp",Df="ArrowDown",DO=2,$O=new RegExp(`${rg}|${Df}|${Tf}`),OO=`hide${Ws}`,NO=`hidden${Ws}`,FO=`show${Ws}`,PO=`shown${Ws}`,Tw=`click${Ws}${ig}`,Dw=`keydown${Ws}${ig}`,RO=`keyup${Ws}${ig}`,ga="show",LO="dropup",IO="dropend",BO="dropstart",zO="navbar",Nl='[data-bs-toggle="dropdown"]',sg=".dropdown-menu",UO=".navbar-nav",jO=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",qO=pn()?"top-end":"top-start",HO=pn()?"top-start":"top-end",WO=pn()?"bottom-end":"bottom-start",VO=pn()?"bottom-start":"bottom-end",YO=pn()?"left-start":"right-start",GO=pn()?"right-start":"left-start",KO={offset:[0,2],boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null,autoClose:!0},XO={offset:"(array|string|function)",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)",autoClose:"(boolean|string)"};class Xn extends pi{constructor(e,n){super(e);this._popper=null,this._config=this._getConfig(n),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return KO}static get DefaultType(){return XO}static get NAME(){return ng}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Bs(this._element)||this._isShown(this._menu))return;const e={relatedTarget:this._element};if(H.trigger(this._element,FO,e).defaultPrevented)return;const i=Xn.getParentFromElement(this._element);this._inNavbar?Se.setDataAttribute(this._menu,"popper","none"):this._createPopper(i),"ontouchstart"in document.documentElement&&!i.closest(UO)&&[].concat(...document.body.children).forEach(r=>H.on(r,"mouseover",Ef)),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ga),this._element.classList.add(ga),H.trigger(this._element,PO,e)}hide(){if(Bs(this._element)||!this._isShown(this._menu))return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){H.trigger(this._element,OO,e).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(i=>H.off(i,"mouseover",Ef)),this._popper&&this._popper.destroy(),this._menu.classList.remove(ga),this._element.classList.remove(ga),this._element.setAttribute("aria-expanded","false"),Se.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,NO,e))}_getConfig(e){if(e=Et(Et(Et({},this.constructor.Default),Se.getDataAttributes(this._element)),e),Li(ng,e,this.constructor.DefaultType),typeof e.reference=="object"&&!Is(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${ng.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(e){if(typeof tw=="undefined")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let n=this._element;this._config.reference==="parent"?n=e:Is(this._config.reference)?n=jr(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const i=this._getPopperConfig(),r=i.modifiers.find(s=>s.name==="applyStyles"&&s.enabled===!1);this._popper=Yp(n,this._menu,i),r&&Se.setDataAttribute(this._menu,"popper","static")}_isShown(e=this._element){return e.classList.contains(ga)}_getMenuElement(){return vt.next(this._element,sg)[0]}_getPlacement(){const e=this._element.parentNode;if(e.classList.contains(IO))return YO;if(e.classList.contains(BO))return GO;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(LO)?n?HO:qO:n?VO:WO}_detectNavbar(){return this._element.closest(`.${zO}`)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return this._config.display==="static"&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),Et(Et({},e),typeof this._config.popperConfig=="function"?this._config.popperConfig(e):this._config.popperConfig)}_selectMenuItem({key:e,target:n}){const i=vt.find(jO,this._menu).filter(Tl);!i.length||ow(i,n,e===Df,!i.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Xn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]=="undefined")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e&&(e.button===DO||e.type==="keyup"&&e.key!==Sw))return;const n=vt.find(Nl);for(let i=0,r=n.length;i<r;i++){const s=Xn.getInstance(n[i]);if(!s||s._config.autoClose===!1||!s._isShown())continue;const o={relatedTarget:s._element};if(e){const a=e.composedPath(),l=a.includes(s._menu);if(a.includes(s._element)||s._config.autoClose==="inside"&&!l||s._config.autoClose==="outside"&&l||s._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Sw||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;e.type==="click"&&(o.clickEvent=e)}s._completeHide(o)}}static getParentFromElement(e){return Ur(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?e.key===Mw||e.key!==Tf&&(e.key!==Df&&e.key!==rg||e.target.closest(sg)):!$O.test(e.key))return;const n=this.classList.contains(ga);if(!n&&e.key===Tf||(e.preventDefault(),e.stopPropagation(),Bs(this)))return;const i=this.matches(Nl)?this:vt.prev(this,Nl)[0],r=Xn.getOrCreateInstance(i);if(e.key===Tf){r.hide();return}if(e.key===rg||e.key===Df){n||r.show(),r._selectMenuItem(e);return}(!n||e.key===Mw)&&Xn.clearMenus()}}H.on(document,Dw,Nl,Xn.dataApiKeydownHandler);H.on(document,Dw,sg,Xn.dataApiKeydownHandler);H.on(document,Tw,Xn.clearMenus);H.on(document,RO,Xn.clearMenus);H.on(document,Tw,Nl,function(t){t.preventDefault(),Xn.getOrCreateInstance(this).toggle()});Kn(Xn);const $w=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ow=".sticky-top";class og{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,"paddingRight",n=>n+e),this._setElementAttributes($w,"paddingRight",n=>n+e),this._setElementAttributes(Ow,"marginRight",n=>n-e)}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,i){const r=this.getWidth(),s=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+r)return;this._saveInitialAttribute(o,n);const a=window.getComputedStyle(o)[n];o.style[n]=`${i(Number.parseFloat(a))}px`};this._applyManipulationCallback(e,s)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,"paddingRight"),this._resetElementAttributes($w,"paddingRight"),this._resetElementAttributes(Ow,"marginRight")}_saveInitialAttribute(e,n){const i=e.style[n];i&&Se.setDataAttribute(e,n,i)}_resetElementAttributes(e,n){const i=r=>{const s=Se.getDataAttribute(r,n);typeof s=="undefined"?r.style.removeProperty(n):(Se.removeDataAttribute(r,n),r.style[n]=s)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,n){Is(e)?n(e):vt.find(e,this._element).forEach(n)}isOverflowing(){return this.getWidth()>0}}const QO={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},ZO={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"},Nw="backdrop",JO="fade",Fw="show",Pw=`mousedown.bs.${Nw}`;class Rw{constructor(e){this._config=this._getConfig(e),this._isAppended=!1,this._element=null}show(e){if(!this._config.isVisible){zs(e);return}this._append(),this._config.isAnimated&&ha(this._getElement()),this._getElement().classList.add(Fw),this._emulateAnimation(()=>{zs(e)})}hide(e){if(!this._config.isVisible){zs(e);return}this._getElement().classList.remove(Fw),this._emulateAnimation(()=>{this.dispose(),zs(e)})}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(JO),this._element=e}return this._element}_getConfig(e){return e=Et(Et({},QO),typeof e=="object"?e:{}),e.rootElement=jr(e.rootElement),Li(Nw,e,ZO),e}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),H.on(this._getElement(),Pw,()=>{zs(this._config.clickCallback)}),this._isAppended=!0)}dispose(){!this._isAppended||(H.off(this._element,Pw),this._element.remove(),this._isAppended=!1)}_emulateAnimation(e){sw(e,this._getElement(),this._config.isAnimated)}}const tN={trapElement:null,autofocus:!0},eN={trapElement:"element",autofocus:"boolean"},nN="focustrap",iN="bs.focustrap",$f=`.${iN}`,rN=`focusin${$f}`,sN=`keydown.tab${$f}`,oN="Tab",aN="forward",Lw="backward";class Iw{constructor(e){this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:e,autofocus:n}=this._config;this._isActive||(n&&e.focus(),H.off(document,$f),H.on(document,rN,i=>this._handleFocusin(i)),H.on(document,sN,i=>this._handleKeydown(i)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,H.off(document,$f))}_handleFocusin(e){const{target:n}=e,{trapElement:i}=this._config;if(n===document||n===i||i.contains(n))return;const r=vt.focusableChildren(i);r.length===0?i.focus():this._lastTabNavDirection===Lw?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===oN&&(this._lastTabNavDirection=e.shiftKey?Lw:aN)}_getConfig(e){return e=Et(Et({},tN),typeof e=="object"?e:{}),Li(nN,e,eN),e}}const Bw="modal",lN="bs.modal",Qn=`.${lN}`,uN=".data-api",zw="Escape",Uw={backdrop:!0,keyboard:!0,focus:!0},cN={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},fN=`hide${Qn}`,hN=`hidePrevented${Qn}`,jw=`hidden${Qn}`,qw=`show${Qn}`,dN=`shown${Qn}`,Hw=`resize${Qn}`,Ww=`click.dismiss${Qn}`,Vw=`keydown.dismiss${Qn}`,pN=`mouseup.dismiss${Qn}`,Yw=`mousedown.dismiss${Qn}`,gN=`click${Qn}${uN}`,Gw="modal-open",mN="fade",Kw="show",ag="modal-static",yN=".modal.show",_N=".modal-dialog",vN=".modal-body",xN='[data-bs-toggle="modal"]';class ma extends pi{constructor(e,n){super(e);this._config=this._getConfig(n),this._dialog=vt.findOne(_N,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new og}static get Default(){return Uw}static get NAME(){return Bw}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||H.trigger(this._element,qw,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(Gw),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),H.on(this._dialog,Yw,()=>{H.one(this._element,pN,i=>{i.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(e)))}hide(){if(!this._isShown||this._isTransitioning||H.trigger(this._element,fN).defaultPrevented)return;this._isShown=!1;const n=this._isAnimated();n&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(Kw),H.off(this._element,Ww),H.off(this._dialog,Yw),this._queueCallback(()=>this._hideModal(),this._element,n)}dispose(){[window,this._dialog].forEach(e=>H.off(e,Qn)),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Rw({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Iw({trapElement:this._element})}_getConfig(e){return e=Et(Et(Et({},Uw),Se.getDataAttributes(this._element)),typeof e=="object"?e:{}),Li(Bw,e,cN),e}_showElement(e){const n=this._isAnimated(),i=vt.findOne(vN,this._dialog);(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE)&&document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,i&&(i.scrollTop=0),n&&ha(this._element),this._element.classList.add(Kw);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,H.trigger(this._element,dN,{relatedTarget:e})};this._queueCallback(r,this._dialog,n)}_setEscapeEvent(){this._isShown?H.on(this._element,Vw,e=>{this._config.keyboard&&e.key===zw?(e.preventDefault(),this.hide()):!this._config.keyboard&&e.key===zw&&this._triggerBackdropTransition()}):H.off(this._element,Vw)}_setResizeEvent(){this._isShown?H.on(window,Hw,()=>this._adjustDialog()):H.off(window,Hw)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Gw),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,jw)})}_showBackdrop(e){H.on(this._element,Ww,n=>{if(this._ignoreBackdropClick){this._ignoreBackdropClick=!1;return}n.target===n.currentTarget&&(this._config.backdrop===!0?this.hide():this._config.backdrop==="static"&&this._triggerBackdropTransition())}),this._backdrop.show(e)}_isAnimated(){return this._element.classList.contains(mN)}_triggerBackdropTransition(){if(H.trigger(this._element,hN).defaultPrevented)return;const{classList:n,scrollHeight:i,style:r}=this._element,s=i>document.documentElement.clientHeight;!s&&r.overflowY==="hidden"||n.contains(ag)||(s||(r.overflowY="hidden"),n.add(ag),this._queueCallback(()=>{n.remove(ag),s||this._queueCallback(()=>{r.overflowY=""},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),i=n>0;(!i&&e&&!pn()||i&&!e&&pn())&&(this._element.style.paddingLeft=`${n}px`),(i&&!e&&!pn()||!i&&e&&pn())&&(this._element.style.paddingRight=`${n}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const i=ma.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]=="undefined")throw new TypeError(`No method named "${e}"`);i[e](n)}})}}H.on(document,gN,xN,function(t){const e=Ur(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),H.one(e,qw,r=>{r.defaultPrevented||H.one(e,jw,()=>{Tl(this)&&this.focus()})});const n=vt.findOne(yN);n&&ma.getInstance(n).hide(),ma.getOrCreateInstance(e).toggle(this)});kf(ma);Kn(ma);const Xw="offcanvas",bN="bs.offcanvas",Vs=`.${bN}`,Qw=".data-api",wN=`load${Vs}${Qw}`,EN="Escape",Zw={backdrop:!0,keyboard:!0,scroll:!1},kN={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"},Jw="show",AN="offcanvas-backdrop",t3=".offcanvas.show",CN=`show${Vs}`,MN=`shown${Vs}`,SN=`hide${Vs}`,e3=`hidden${Vs}`,TN=`click${Vs}${Qw}`,DN=`keydown.dismiss${Vs}`,$N='[data-bs-toggle="offcanvas"]';class Ys extends pi{constructor(e,n){super(e);this._config=this._getConfig(n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return Xw}static get Default(){return Zw}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||H.trigger(this._element,CN,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._element.style.visibility="visible",this._backdrop.show(),this._config.scroll||new og().hide(),this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Jw);const i=()=>{this._config.scroll||this._focustrap.activate(),H.trigger(this._element,MN,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||H.trigger(this._element,SN).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(Jw),this._backdrop.hide();const n=()=>{this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._element.style.visibility="hidden",this._config.scroll||new og().reset(),H.trigger(this._element,e3)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(e){return e=Et(Et(Et({},Zw),Se.getDataAttributes(this._element)),typeof e=="object"?e:{}),Li(Xw,e,kN),e}_initializeBackDrop(){return new Rw({className:AN,isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new Iw({trapElement:this._element})}_addEventListeners(){H.on(this._element,DN,e=>{this._config.keyboard&&e.key===EN&&this.hide()})}static jQueryInterface(e){return this.each(function(){const n=Ys.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}H.on(document,TN,$N,function(t){const e=Ur(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Bs(this))return;H.one(e,e3,()=>{Tl(this)&&this.focus()});const n=vt.findOne(t3);n&&n!==e&&Ys.getInstance(n).hide(),Ys.getOrCreateInstance(e).toggle(this)});H.on(window,wN,()=>vt.find(t3).forEach(t=>Ys.getOrCreateInstance(t).show()));kf(Ys);Kn(Ys);const ON=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),NN=/^aria-[\w-]*$/i,FN=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,PN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,RN=(t,e)=>{const n=t.nodeName.toLowerCase();if(e.includes(n))return ON.has(n)?Boolean(FN.test(t.nodeValue)||PN.test(t.nodeValue)):!0;const i=e.filter(r=>r instanceof RegExp);for(let r=0,s=i.length;r<s;r++)if(i[r].test(n))return!0;return!1},LN={"*":["class","dir","id","lang","role",NN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function n3(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const r=new window.DOMParser().parseFromString(t,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(let o=0,a=s.length;o<a;o++){const l=s[o],u=l.nodeName.toLowerCase();if(!Object.keys(e).includes(u)){l.remove();continue}const c=[].concat(...l.attributes),f=[].concat(e["*"]||[],e[u]||[]);c.forEach(h=>{RN(h,f)||l.removeAttribute(h.nodeName)})}return r.body.innerHTML}const i3="tooltip",IN="bs.tooltip",Ii=`.${IN}`,BN="bs-tooltip",zN=new Set(["sanitize","allowList","sanitizeFn"]),UN={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},jN={AUTO:"auto",TOP:"top",RIGHT:pn()?"left":"right",BOTTOM:"bottom",LEFT:pn()?"right":"left"},qN={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:LN,popperConfig:null},HN={HIDE:`hide${Ii}`,HIDDEN:`hidden${Ii}`,SHOW:`show${Ii}`,SHOWN:`shown${Ii}`,INSERTED:`inserted${Ii}`,CLICK:`click${Ii}`,FOCUSIN:`focusin${Ii}`,FOCUSOUT:`focusout${Ii}`,MOUSEENTER:`mouseenter${Ii}`,MOUSELEAVE:`mouseleave${Ii}`},Of="fade",WN="modal",Fl="show",Pl="show",lg="out",r3=".tooltip-inner",s3=`.${WN}`,o3="hide.bs.modal",Rl="hover",ug="focus",VN="click",YN="manual";class Hr extends pi{constructor(e,n){if(typeof tw=="undefined")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e);this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(n),this.tip=null,this._setListeners()}static get Default(){return qN}static get NAME(){return i3}static get Event(){return HN}static get DefaultType(){return UN}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(e){if(!!this._isEnabled)if(e){const n=this._initializeOnDelegatedTarget(e);n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(this.getTipElement().classList.contains(Fl)){this._leave(null,this);return}this._enter(null,this)}}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(s3),o3,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this.isWithContent()&&this._isEnabled))return;const e=H.trigger(this._element,this.constructor.Event.SHOW),n=iw(this._element),i=n===null?this._element.ownerDocument.documentElement.contains(this._element):n.contains(this._element);if(e.defaultPrevented||!i)return;this.constructor.NAME==="tooltip"&&this.tip&&this.getTitle()!==this.tip.querySelector(r3).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const r=this.getTipElement(),s=f$(this.constructor.NAME);r.setAttribute("id",s),this._element.setAttribute("aria-describedby",s),this._config.animation&&r.classList.add(Of);const o=typeof this._config.placement=="function"?this._config.placement.call(this,r,this._element):this._config.placement,a=this._getAttachment(o);this._addAttachmentClass(a);const{container:l}=this._config;Dl.set(r,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(l.append(r),H.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Yp(this._element,r,this._getPopperConfig(a)),r.classList.add(Fl);const u=this._resolvePossibleFunction(this._config.customClass);u&&r.classList.add(...u.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(h=>{H.on(h,"mouseover",Ef)});const c=()=>{const h=this._hoverState;this._hoverState=null,H.trigger(this._element,this.constructor.Event.SHOWN),h===lg&&this._leave(null,this)},f=this.tip.classList.contains(Of);this._queueCallback(c,this.tip,f)}hide(){if(!this._popper)return;const e=this.getTipElement(),n=()=>{this._isWithActiveTrigger()||(this._hoverState!==Pl&&e.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())};if(H.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;e.classList.remove(Fl),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach(s=>H.off(s,"mouseover",Ef)),this._activeTrigger[VN]=!1,this._activeTrigger[ug]=!1,this._activeTrigger[Rl]=!1;const r=this.tip.classList.contains(Of);this._queueCallback(n,this.tip,r),this._hoverState=""}update(){this._popper!==null&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const e=document.createElement("div");e.innerHTML=this._config.template;const n=e.children[0];return this.setContent(n),n.classList.remove(Of,Fl),this.tip=n,this.tip}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),r3)}_sanitizeAndSetContent(e,n,i){const r=vt.findOne(i,e);if(!n&&r){r.remove();return}this.setElementContent(r,n)}setElementContent(e,n){if(e!==null){if(Is(n)){n=jr(n),this._config.html?n.parentNode!==e&&(e.innerHTML="",e.append(n)):e.textContent=n.textContent;return}this._config.html?(this._config.sanitize&&(n=n3(n,this._config.allowList,this._config.sanitizeFn)),e.innerHTML=n):e.textContent=n}}getTitle(){const e=this._element.getAttribute("data-bs-original-title")||this._config.title;return this._resolvePossibleFunction(e)}updateAttachment(e){return e==="right"?"end":e==="left"?"start":e}_initializeOnDelegatedTarget(e,n){return n||this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return typeof e=="function"?e.call(this._element):e}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:i=>this._handlePopperPlacementChange(i)}],onFirstUpdate:i=>{i.options.placement!==i.placement&&this._handlePopperPlacementChange(i)}};return Et(Et({},n),typeof this._config.popperConfig=="function"?this._config.popperConfig(n):this._config.popperConfig)}_addAttachmentClass(e){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(e)}`)}_getAttachment(e){return jN[e.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach(n=>{if(n==="click")H.on(this._element,this.constructor.Event.CLICK,this._config.selector,i=>this.toggle(i));else if(n!==YN){const i=n===Rl?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,r=n===Rl?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;H.on(this._element,i,this._config.selector,s=>this._enter(s)),H.on(this._element,r,this._config.selector,s=>this._leave(s))}}),this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(s3),o3,this._hideModalHandler),this._config.selector?this._config=Uc(Et({},this._config),{trigger:"manual",selector:""}):this._fixTitle()}_fixTitle(){const e=this._element.getAttribute("title"),n=typeof this._element.getAttribute("data-bs-original-title");(e||n!=="string")&&(this._element.setAttribute("data-bs-original-title",e||""),e&&!this._element.getAttribute("aria-label")&&!this._element.textContent&&this._element.setAttribute("aria-label",e),this._element.setAttribute("title",""))}_enter(e,n){if(n=this._initializeOnDelegatedTarget(e,n),e&&(n._activeTrigger[e.type==="focusin"?ug:Rl]=!0),n.getTipElement().classList.contains(Fl)||n._hoverState===Pl){n._hoverState=Pl;return}if(clearTimeout(n._timeout),n._hoverState=Pl,!n._config.delay||!n._config.delay.show){n.show();return}n._timeout=setTimeout(()=>{n._hoverState===Pl&&n.show()},n._config.delay.show)}_leave(e,n){if(n=this._initializeOnDelegatedTarget(e,n),e&&(n._activeTrigger[e.type==="focusout"?ug:Rl]=n._element.contains(e.relatedTarget)),!n._isWithActiveTrigger()){if(clearTimeout(n._timeout),n._hoverState=lg,!n._config.delay||!n._config.delay.hide){n.hide();return}n._timeout=setTimeout(()=>{n._hoverState===lg&&n.hide()},n._config.delay.hide)}}_isWithActiveTrigger(){for(const e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1}_getConfig(e){const n=Se.getDataAttributes(this._element);return Object.keys(n).forEach(i=>{zN.has(i)&&delete n[i]}),e=Et(Et(Et({},this.constructor.Default),n),typeof e=="object"&&e?e:{}),e.container=e.container===!1?document.body:jr(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),Li(i3,e,this.constructor.DefaultType),e.sanitize&&(e.template=n3(e.template,e.allowList,e.sanitizeFn)),e}_getDelegateConfig(){const e={};for(const n in this._config)this.constructor.Default[n]!==this._config[n]&&(e[n]=this._config[n]);return e}_cleanTipClass(){const e=this.getTipElement(),n=new RegExp(`(^|\\s)${this._getBasicClassPrefix()}\\S+`,"g"),i=e.getAttribute("class").match(n);i!==null&&i.length>0&&i.map(r=>r.trim()).forEach(r=>e.classList.remove(r))}_getBasicClassPrefix(){return BN}_handlePopperPlacementChange(e){const{state:n}=e;!n||(this.tip=n.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(n.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(e){return this.each(function(){const n=Hr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]=="undefined")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Kn(Hr);const GN="popover",KN="bs.popover",Bi=`.${KN}`,XN="bs-popover",QN=Uc(Et({},Hr.Default),{placement:"right",offset:[0,8],trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),ZN=Uc(Et({},Hr.DefaultType),{content:"(string|element|function)"}),JN={HIDE:`hide${Bi}`,HIDDEN:`hidden${Bi}`,SHOW:`show${Bi}`,SHOWN:`shown${Bi}`,INSERTED:`inserted${Bi}`,CLICK:`click${Bi}`,FOCUSIN:`focusin${Bi}`,FOCUSOUT:`focusout${Bi}`,MOUSEENTER:`mouseenter${Bi}`,MOUSELEAVE:`mouseleave${Bi}`},tF=".popover-header",eF=".popover-body";class cg extends Hr{static get Default(){return QN}static get NAME(){return GN}static get Event(){return JN}static get DefaultType(){return ZN}isWithContent(){return this.getTitle()||this._getContent()}setContent(e){this._sanitizeAndSetContent(e,this.getTitle(),tF),this._sanitizeAndSetContent(e,this._getContent(),eF)}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return XN}static jQueryInterface(e){return this.each(function(){const n=cg.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]=="undefined")throw new TypeError(`No method named "${e}"`);n[e]()}})}}Kn(cg);const a3="scrollspy",nF="bs.scrollspy",Nf=`.${nF}`,iF=".data-api",l3={offset:10,method:"auto",target:""},rF={offset:"number",method:"string",target:"(string|element)"},sF=`activate${Nf}`,oF=`scroll${Nf}`,aF=`load${Nf}${iF}`,u3="dropdown-item",ya="active",lF='[data-bs-spy="scroll"]',uF=".nav, .list-group",fg=".nav-link",cF=".nav-item",c3=".list-group-item",hg=`${fg}, ${c3}, .${u3}`,fF=".dropdown",hF=".dropdown-toggle",dF="offset",f3="position";class Ff extends pi{constructor(e,n){super(e);this._scrollElement=this._element.tagName==="BODY"?window:this._element,this._config=this._getConfig(n),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,H.on(this._scrollElement,oF,()=>this._process()),this.refresh(),this._process()}static get Default(){return l3}static get NAME(){return a3}refresh(){const e=this._scrollElement===this._scrollElement.window?dF:f3,n=this._config.method==="auto"?e:this._config.method,i=n===f3?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),vt.find(hg,this._config.target).map(s=>{const o=Kp(s),a=o?vt.findOne(o):null;if(a){const l=a.getBoundingClientRect();if(l.width||l.height)return[Se[n](a).top+i,o]}return null}).filter(s=>s).sort((s,o)=>s[0]-o[0]).forEach(s=>{this._offsets.push(s[0]),this._targets.push(s[1])})}dispose(){H.off(this._scrollElement,Nf),super.dispose()}_getConfig(e){return e=Et(Et(Et({},l3),Se.getDataAttributes(this._element)),typeof e=="object"&&e?e:{}),e.target=jr(e.target)||document.documentElement,Li(a3,e,rF),e}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const e=this._getScrollTop()+this._config.offset,n=this._getScrollHeight(),i=this._config.offset+n-this._getOffsetHeight();if(this._scrollHeight!==n&&this.refresh(),e>=i){const r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r);return}if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null,this._clear();return}for(let r=this._offsets.length;r--;)this._activeTarget!==this._targets[r]&&e>=this._offsets[r]&&(typeof this._offsets[r+1]=="undefined"||e<this._offsets[r+1])&&this._activate(this._targets[r])}_activate(e){this._activeTarget=e,this._clear();const n=hg.split(",").map(r=>`${r}[data-bs-target="${e}"],${r}[href="${e}"]`),i=vt.findOne(n.join(","),this._config.target);i.classList.add(ya),i.classList.contains(u3)?vt.findOne(hF,i.closest(fF)).classList.add(ya):vt.parents(i,uF).forEach(r=>{vt.prev(r,`${fg}, ${c3}`).forEach(s=>s.classList.add(ya)),vt.prev(r,cF).forEach(s=>{vt.children(s,fg).forEach(o=>o.classList.add(ya))})}),H.trigger(this._scrollElement,sF,{relatedTarget:e})}_clear(){vt.find(hg,this._config.target).filter(e=>e.classList.contains(ya)).forEach(e=>e.classList.remove(ya))}static jQueryInterface(e){return this.each(function(){const n=Ff.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]=="undefined")throw new TypeError(`No method named "${e}"`);n[e]()}})}}H.on(window,aF,()=>{vt.find(lF).forEach(t=>new Ff(t))});Kn(Ff);const pF="tab",gF="bs.tab",Ll=`.${gF}`,mF=".data-api",yF=`hide${Ll}`,_F=`hidden${Ll}`,vF=`show${Ll}`,xF=`shown${Ll}`,bF=`click${Ll}${mF}`,wF="dropdown-menu",Il="active",h3="fade",d3="show",EF=".dropdown",kF=".nav, .list-group",p3=".active",g3=":scope > li > .active",AF='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',CF=".dropdown-toggle",MF=":scope > .dropdown-menu .active";class Pf extends pi{static get NAME(){return pF}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Il))return;let e;const n=Ur(this._element),i=this._element.closest(kF);if(i){const a=i.nodeName==="UL"||i.nodeName==="OL"?g3:p3;e=vt.find(a,i),e=e[e.length-1]}const r=e?H.trigger(e,yF,{relatedTarget:this._element}):null;if(H.trigger(this._element,vF,{relatedTarget:e}).defaultPrevented||r!==null&&r.defaultPrevented)return;this._activate(this._element,i);const o=()=>{H.trigger(e,_F,{relatedTarget:this._element}),H.trigger(this._element,xF,{relatedTarget:e})};n?this._activate(n,n.parentNode,o):o()}_activate(e,n,i){const s=(n&&(n.nodeName==="UL"||n.nodeName==="OL")?vt.find(g3,n):vt.children(n,p3))[0],o=i&&s&&s.classList.contains(h3),a=()=>this._transitionComplete(e,s,i);s&&o?(s.classList.remove(d3),this._queueCallback(a,e,!0)):a()}_transitionComplete(e,n,i){if(n){n.classList.remove(Il);const s=vt.findOne(MF,n.parentNode);s&&s.classList.remove(Il),n.getAttribute("role")==="tab"&&n.setAttribute("aria-selected",!1)}e.classList.add(Il),e.getAttribute("role")==="tab"&&e.setAttribute("aria-selected",!0),ha(e),e.classList.contains(h3)&&e.classList.add(d3);let r=e.parentNode;if(r&&r.nodeName==="LI"&&(r=r.parentNode),r&&r.classList.contains(wF)){const s=e.closest(EF);s&&vt.find(CF,s).forEach(o=>o.classList.add(Il)),e.setAttribute("aria-expanded",!0)}i&&i()}static jQueryInterface(e){return this.each(function(){const n=Pf.getOrCreateInstance(this);if(typeof e=="string"){if(typeof n[e]=="undefined")throw new TypeError(`No method named "${e}"`);n[e]()}})}}H.on(document,bF,AF,function(t){if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Bs(this))return;Pf.getOrCreateInstance(this).show()});Kn(Pf);const m3="toast",SF="bs.toast",Wr=`.${SF}`,TF=`mouseover${Wr}`,DF=`mouseout${Wr}`,$F=`focusin${Wr}`,OF=`focusout${Wr}`,NF=`hide${Wr}`,FF=`hidden${Wr}`,PF=`show${Wr}`,RF=`shown${Wr}`,LF="fade",y3="hide",Bl="show",Rf="showing",IF={animation:"boolean",autohide:"boolean",delay:"number"},_3={animation:!0,autohide:!0,delay:5e3};class Lf extends pi{constructor(e,n){super(e);this._config=this._getConfig(n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return IF}static get Default(){return _3}static get NAME(){return m3}show(){if(H.trigger(this._element,PF).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(LF);const n=()=>{this._element.classList.remove(Rf),H.trigger(this._element,RF),this._maybeScheduleHide()};this._element.classList.remove(y3),ha(this._element),this._element.classList.add(Bl),this._element.classList.add(Rf),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this._element.classList.contains(Bl)||H.trigger(this._element,NF).defaultPrevented)return;const n=()=>{this._element.classList.add(y3),this._element.classList.remove(Rf),this._element.classList.remove(Bl),H.trigger(this._element,FF)};this._element.classList.add(Rf),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this._element.classList.contains(Bl)&&this._element.classList.remove(Bl),super.dispose()}_getConfig(e){return e=Et(Et(Et({},_3),Se.getDataAttributes(this._element)),typeof e=="object"&&e?e:{}),Li(m3,e,this.constructor.DefaultType),e}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":this._hasMouseInteraction=n;break;case"focusin":case"focusout":this._hasKeyboardInteraction=n;break}if(n){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){H.on(this._element,TF,e=>this._onInteraction(e,!0)),H.on(this._element,DF,e=>this._onInteraction(e,!1)),H.on(this._element,$F,e=>this._onInteraction(e,!0)),H.on(this._element,OF,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Lf.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]=="undefined")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}kf(Lf);Kn(Lf);const BF={name:"PhysInput",props:{obj:Object,valuename:String,prepend:String,append:String,tooltip:String,tofixed:{type:Number,default:12},cookie:{type:String,default:""}},mounted(){this.bootstrap_tooltip=["tooltipobj1","tooltipobj2","tooltipobj3"].map(t=>new Hr(this.$refs[t])),this.loadCookie()},updated(){this.saveCookie(),this.$emit("change")},computed:{text:{set(t){if(t==="-"){this.valueNumber=-Br.TOLERANCE;return}this.toNumber(t)!==this.toNumber(this._oldText)&&(this._oldText=t,this.valueNumber=this.toNumber(t))},get(){return+this.valueNumber==-Br.TOLERANCE?"-":this.toString(+this.valueNumber.toFixed(this.tofixed))}},valueNumber:{get(){return this.obj[this.valuename]},set(t){this.obj[this.valuename]=t}},isInvalid(){return isNaN(this.valueNumber)},isValid(){return!this.isInvalid},cookieIsExist(){return typeof this.cookie=="string"&&this.cookie!==""}},methods:{saveCookie(){this.isValid?localStorage.setItem(this.cookie,this.valueNumber):localStorage.removeItem(this.cookie)},loadCookie(){if(this.cookieIsExist){let t=localStorage.getItem(this.cookie);this.text=t}this._oldText=this.text},toString(t){return t===void 0||isNaN(t)?"":t.toString().replace(".",",")},toNumber(t){return t===void 0||typeof t!="string"?NaN:+t.replace(",",".")},nextR160(){let t=+this.valueNumber,e=bb(t),n=+e.toFixed(this.tofixed)==+t.toFixed(this.tofixed);(+t.toFixed(this.tofixed)==0||n)&&(e+=Math.pow(10,-this.tofixed)),this.valueNumber=e},prevR160(){let t=+this.valueNumber,e=bD(t),n=+e.toFixed(this.tofixed)==+t.toFixed(this.tofixed);(+t.toFixed(this.tofixed)==0||n)&&(e-=Math.pow(10,-this.tofixed)),this.valueNumber=e}},emits:["change"]},zF=["title"],UF=["title"],jF=["innerHTML"],qF=E("span",null,"\xA0=",-1),HF=["title"],WF=["innerHTML","title"];function VF(t,e,n,i,r,s){return n.obj?(tt(),it("div",{key:0,class:"input-group my-1 py-0",title:n.tooltip},[E("span",{class:"input-group-text px-2 py-1",ref:"tooltipobj1",title:n.tooltip},[E("span",{innerHTML:n.prepend},null,8,jF),qF],8,UF),Jo(E("input",{class:jo(["form-control px-2 py-1",{"is-invalid":s.isInvalid}]),"onUpdate:modelValue":e[0]||(e[0]=o=>s.text=o),ref:"tooltipobj2",title:n.tooltip},null,10,HF),[[fb,s.text]]),E("button",{class:"btn btn-outline-secondary d-print-none px-2 py-1",onClick:e[1]||(e[1]=(...o)=>s.prevR160&&s.prevR160(...o))}," - "),E("button",{class:"btn btn-outline-secondary d-print-none px-2 py-1",onClick:e[2]||(e[2]=(...o)=>s.nextR160&&s.nextR160(...o))}," + "),E("span",{class:"input-group-text px-2 py-1",innerHTML:n.append,ref:"tooltipobj3",title:n.tooltip},null,8,WF)],8,zF)):hn("",!0)}var dg=On(BF,[["render",VF]]);const YF={name:"PhysOutput",props:{obj:Object,valuename:String,prepend:String,append:String,tooltip:String,tofixed:{type:Number,default:5}},mounted(){this.bootstrap_tooltip=new Hr(this.$refs.tooltipobject)},computed:{defined(){return this.obj&&this.obj[this.valuename]!==void 0&&this.obj[this.valuename]!==null},text:{get(){if(!this.defined||isNaN(+this.valueNumber))return"";let t=this.toString(+this.valueNumber.toFixed(this.tofixed));return t==="Infinity"?"\u221E":t}},valueNumber:{get(){return this.obj[this.valuename]}}},methods:{toString(t){return t===void 0||isNaN(t)?"":t.toString().replace(".",",")},toNumber(t){return t===void 0||typeof t!="string"?NaN:+t.replace(",",".")}}},GF=["title"],KF=["innerHTML"],XF=E("span",null,"\xA0=\xA0",-1),QF={key:0},ZF=E("span",null,"\xA0",-1),JF=["innerHTML"],tP={key:1,class:"spinner-border spinner-border-sm text-info",role:"status"};function eP(t,e,n,i,r,s){return tt(),it("div",null,[E("span",{ref:"tooltipobject",title:n.tooltip},[E("span",{innerHTML:n.prepend},null,8,KF),XF,kt(dn,{appear:"",name:"fade-scale",mode:"out-in"},{default:ae(()=>[s.defined?(tt(),it("span",QF,[E("span",null,xt(s.text),1),ZF,E("span",{innerHTML:s.text==="\u221E"?"":n.append},null,8,JF)])):(tt(),it("div",tP))]),_:1})],8,GF)])}var pg=On(YF,[["render",eP]]);const nP={name:"QueryForm",props:{query:Object,result:Object,cookiePrefix:String},computed:{twinSide:{get(){return this.query.depth>1},set(t){t?this.query.depth=2:this.query.depth=1}},cookiePrefix_twinSide(){return`${this.cookiePrefix}twinside`}},methods:{change(){this.saveCookie_twinSide(),this.$emit("change")},saveCookie_twinSide(){localStorage.setItem(this.cookiePrefix_twinSide,this.twinSide)},loadCookie_twinSide(){let t=localStorage.getItem(this.cookiePrefix_twinSide);t!==null&&(this.twinSide=t&&t=="true")}},mounted(){this.loadCookie_twinSide()},components:{PhysInput:dg,PhysOutput:pg},emits:["change"]},iP={class:"form-check"},rP=E("label",{class:"form-check-label",for:"fantune-twin-side-checkbox"},"\u0414\u0432\u0443\u0441\u0442\u043E\u0440\u043E\u043D\u043D\u0438\u0439 \u0432\u0441\u0430\u0441",-1),sP={class:"row"};function oP(t,e,n,i,r,s){const o=fn("PhysInput"),a=fn("PhysOutput");return tt(),it("div",null,[(tt(),it(Bt,null,Fe([["n","n","\u043C\u0438\u043D<sup>-1</sup>","\u0427\u0430\u0441\u0442\u043E\u0442\u0430 \u0432\u0440\u0430\u0449\u0435\u043D\u0438\u044F",0],["t","t","\xB0C","\u0422\u0435\u043C\u043F\u0435\u0440\u0430\u0442\u0443\u0440\u0430",1],["Q","Q","\u043C<sup>3</sup>/\u0447","\u041F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",0],["Pv","P<sub>v</sub>","\u041F\u0430","\u041F\u043E\u043B\u043D\u043E\u0435 \u0434\u0430\u0432\u043B\u0435\u043D\u0438\u0435",0]],l=>kt(o,{obj:n.query,valuename:l[0],prepend:l[1],append:l[2],tooltip:l[3],tofixed:l[4],key:l[0],cookie:`${n.cookiePrefix}${l[0]}`,onChange:s.change},null,8,["obj","valuename","prepend","append","tooltip","tofixed","cookie","onChange"])),64)),E("div",iP,[Jo(E("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.twinSide=l),type:"checkbox",class:"form-check-input",id:"fantune-twin-side-checkbox",onChange:e[1]||(e[1]=(...l)=>s.change&&s.change(...l))},null,544),[[cD,s.twinSide]]),rP]),E("div",sP,[(tt(),it(Bt,null,Fe([["ny","n<sub>y</sub>","","\u0422\u0440\u0435\u0431\u0443\u0435\u043C\u0430\u044F \u0431\u044B\u0441\u0442\u0440\u043E\u0445\u043E\u0434\u043D\u043E\u0441\u0442\u044C",1],["\u03C1","\u03C1","\u043A\u0433/\u043C<sup>3</sup>","\u041F\u043B\u043E\u0442\u043D\u043E\u0441\u0442\u044C",2]],l=>E("div",{class:"col",key:l[0]},[kt(a,{obj:n.result,valuename:l[0],prepend:l[1],append:l[2],tooltip:l[3],tofixed:l[4]},null,8,["obj","valuename","prepend","append","tooltip","tofixed"])])),64))])])}var aP=On(nP,[["render",oP]]);const lP={name:"DimDraw",props:{obj:Object,tofixed:{type:Number,default:1}},computed:{dim(){return this.obj.dim.map(t=>this.toString(t))}},methods:{toString(t){let e="";return isNaN(+t)||(e=(+bb(+t).toFixed(this.tofixed)).toString().replace(".",",")),e},saveSVG(t){t.preventDefault();let e=new Blob([t.currentTarget.querySelector("svg").outerHTML],{type:"image/svg+xml"}),n=document.createElement("a");document.body.appendChild(n),n.style="display: none";let i=window.URL.createObjectURL(e);n.href=i,n.download=`${this.obj.scheme}_d${this.obj.Dmm.toFixed(0)}mm_${this.obj.depth==2?"TwinSide_":""}Dim.svg`,n.click(),window.URL.revokeObjectURL(i)}}},uP={key:0},cP={width:"206.88309",height:"281.73196",version:"1.1",viewBox:"0 0 191.58236 260.89554",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},fP=E("defs",null,[E("linearGradient",{id:"Metall"},[E("stop",{"stop-color":"#e3eefc",offset:"0"}),E("stop",{"stop-color":"#7eb2fc",offset:".9207831"}),E("stop",{"stop-color":"#7eb2fc",offset:"1"})]),E("linearGradient",{id:"linearGradient1006",x1:"237.7684",x2:"237.7684",y1:"-.16232871",y2:"70.812431",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1008",x1:"274.44098",x2:"274.44095",y1:"-7.1054274e-15",y2:"39.600681",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1010",x1:"268.39368",x2:"268.39368",y2:"32.223873",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1018",x1:"216.26332",x2:"216.26331",y1:"-4.5688802e-7",y2:"-60.844345",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1119",x1:"274.44098",x2:"274.44095",y1:"-7.1054274e-15",y2:"39.600681",gradientTransform:"translate(-88.729534)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1121",x1:"268.39368",x2:"268.39368",y2:"32.223873",gradientTransform:"translate(-88.729534)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1201",x1:"237.7684",x2:"237.7684",y1:"-.16232871",y2:"66.679474",gradientTransform:"rotate(90,44.364767,-44.364767)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1203",x1:"216.26332",x2:"216.26331",y1:"-4.5688802e-7",y2:"-60.844345",gradientTransform:"rotate(90,44.364767,-44.364767)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("radialGradient",{id:"radialGradient1636",cx:"52.129795",cy:"-15.527653",r:"73.624863",gradientTransform:"matrix(2.5807044 -.49873689 .41843765 2.1652084 -76.789198 30.370128)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("radialGradient",{id:"radialGradient1644",cx:"-3.0492399e-12",cy:"1.4158956e-12",r:"32.573872",gradientTransform:"scale(.04660458 .05018327)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1652",x1:"116.82076",x2:"535.17969",y1:"807.02734",y2:"807.02734",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"})],-1),hP={transform:"translate(90.313521,65.531117)"},dP=E("g",{stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round"},[E("g",{id:"ulitka-front","stroke-width":".7"},[E("path",{d:"m40.22013-60.844347h34.56744m-74.78757-1.74718c-47.81563 0-66.67966 38.795716-66.67966 62.591528 0 44.322095 34.26942 70.812212 66.69466 70.812212 50.46845 0 74.93029-43.517168 74.93029-70.812212v-60.844348h4.92477v-0.971h-44.74456v0.971h4.92477v15.780432c-10.33576-10.655756-24.30992-17.527612-40.05027-17.527612z",fill:"url(#radialGradient1636)"}),E("path",{d:"m-6.87539e-7 -39.600683a39.600478 39.600478 0 0 0-39.600689 39.600684 39.600478 39.600478 0 0 0 39.600689 39.600682 39.600478 39.600478 0 0 0 39.60069-39.600682 39.600478 39.600478 0 0 0-39.60069-39.600684zm-0.037200412 7.376811a32.223919 32.223919 0 0 1 0.037200412 0 32.223919 32.223919 0 0 1 32.223869 32.223873 32.223919 32.223919 0 0 1-32.223869 32.223871 32.223919 32.223919 0 0 1-32.223868-32.223871 32.223919 32.223919 0 0 1 32.186668-32.223873z",fill:"#d3e9f3"}),E("path",{d:"m -0.0372,-32.223872 a 32.223919,32.223919 0 0 1 0.0372,0 A 32.223919,32.223919 0 0 1 32.22387,1e-6 32.223919,32.223919 0 0 1 0,32.223872 32.223919,32.223919 0 0 1 -32.22387,1e-6 32.223919,32.223919 0 0 1 -0.0372,-32.223872 Z",fill:"url(#radialGradient1644)"})]),E("g",{id:"ulitka-left",transform:"translate(-100.5417)","stroke-width":".7"},[E("path",{d:"m216.26332-4.56888e-7 -1e-5 70.812618 46.53668-4.06e-4v-70.812212",fill:"url(#linearGradient1006)"}),E("rect",{x:"273.98737",y:"-39.600681",width:".90720266",height:"79.201363",rx:"0",ry:"0",fill:"url(#linearGradient1008)"}),E("rect",{x:"262.79999",y:"-32.223873",width:"11.187378",height:"64.447746",rx:"0",ry:"0",fill:"url(#linearGradient1010)"}),E("path",{d:"m262.79999 0v-60.844347h4.92477v-0.971h-56.38623v0.971h4.92477v60.844347m0.16986-60.844343h46.20911",fill:"url(#linearGradient1018)"})]),E("g",{id:"ulitka-above",transform:"translate(0,-11.641667)"},[E("g",{"stroke-width":".7"},[E("path",{d:"m4.56888e-7 127.53379-66.67966-1e-5 4.06e-4 46.53668h66.679254",fill:"url(#linearGradient1201)"}),E("rect",{transform:"rotate(90)",x:"185.25783",y:"-39.600681",width:".90720266",height:"79.201363",rx:"0",ry:"0",fill:"url(#linearGradient1119)"}),E("rect",{transform:"rotate(90)",x:"174.07045",y:"-32.223873",width:"11.187378",height:"64.447746",rx:"0",ry:"0",fill:"url(#linearGradient1121)"}),E("path",{d:"m 0,174.07046 35.125498,-0.0789 v -46.3729 L 0,127.53377",fill:"url(#linearGradient1203)"})]),E("path",{transform:"matrix(.26458333 0 0 .26458333 -66.811951 -62.723818)",d:"m385.27539 700.4707v213.11328h169.11328v-213.11328z",fill:"#d3e9f3","stroke-width":"2.64567"}),E("path",{transform:"matrix(.26458333 0 0 .26458333 -66.811951 -62.723818)",d:"m403.88867 719.08398h131.29102v175.88672h-131.29102z",fill:"url(#linearGradient1652)","stroke-width":"2.64567"})])],-1),pP=E("g",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},[E("g",{"stroke-dasharray":"1.2, 0.6, 0.3, 0.6"},[E("path",{id:"axes-ulitka-front",d:"m57.462597-64.455075v7.96541m-13.726252 56.489662h-87.472689m43.736344-43.736348v87.472697"}),E("path",{id:"axes-ulitka-above",d:"m0 158.56701v19.93908m80.921555-39.34557h-46.847558m23.423775-29.51817v59.03638"}),E("path",{id:"axes-ulitka-left",d:"m177.42844 0h-18.54874"})]),E("path",{d:"m0 194.28838v-15.78229"}),E("path",{d:"m57.497772 194.26955v-25.59082"}),E("path",{d:"m-8.6e-7 191.00455h57.497773"})],-1),gP=E("path",{id:"Arrow",d:"M 8.023534,193.06253 0,191.00455 8.023497,188.94657 Z",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),mP=E("use",{transform:"rotate(180,28.748884,191.00533)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),yP=E("text",{fill:"#000000","font-size":"14px","letter-spacing":"0px","word-spacing":"0px",style:{"line-height":"1.25","shape-inside":"url(#rect1378)","white-space":"pre"},"xml:space":"preserve"},null,-1),_P=E("path",{d:"m-23.272428 22.288372 53.813393-51.537901",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),vP=E("use",{transform:"rotate(-43.762656,-221.68138,135.62011)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),xP=E("use",{transform:"rotate(136.23734,54.467489,89.031578)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),bP=E("path",{d:"m30.540965-29.249529h41.408147",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),wP=E("path",{d:"m-0.02351338-62.591524-81.696942 0.0352",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),EP=E("use",{transform:"rotate(90,87.9082,25.351817)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),kP=E("use",{transform:"rotate(-90,-134.36715,134.38291)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),AP=E("path",{d:"m-43.736344-2.6840313e-6 -37.984111 0.017600004",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),CP=E("path",{d:"m-77.744815 0.01577732v-62.572078",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),MP=E("use",{transform:"rotate(90,174.42923,112.60675)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),SP=E("use",{transform:"rotate(-90,-47.494873,47.479149)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),TP=E("g",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},[E("path",{d:"m96.030836-0.01572331v-61.807112"}),E("path",{d:"m100.1928-61.824087-20.32274 0.0087"}),E("path",{d:"m100.1928-0.01697447-56.456455 0.016971786"})],-1),DP=E("use",{transform:"rotate(90,56.621211,56.638822)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),$P=E("use",{transform:"rotate(-90,-98.963036,169.78687)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),OP=E("g",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},[E("path",{d:"m0.98299048 70.806857-82.703445 0.0176"}),E("path",{d:"m-77.744815 70.823611v-70.805991"}),E("path",{d:"M 74.98046,90.876276 74.94529,1e-6"})],-1),NP=E("use",{transform:"rotate(180,37.488228,138.65416)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),FP=E("use",{transform:"translate(.01917239 -104.70174)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),PP=E("path",{d:"M 0.03517,90.907629 0,43.736346",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),RP=E("path",{d:"m0.001791 86.303033h74.974662",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),LP=E("use",{transform:"rotate(180,8.955e-4,138.65416)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),IP=E("use",{transform:"translate(-66.646179,-104.70173)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),BP=E("g",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},[E("path",{d:"m-66.646179 86.303033h66.64797"}),E("path",{d:"m-66.64449 90.447495-0.03517-86.303032"}),E("path",{d:"m-77.74481 174.53929v-73.8921"}),E("path",{d:"m34.073997 139.16052-114.80826 0.017"}),E("path",{d:"m-39.600681 174.52339-40.794678 0.017"})],-1),zP=E("use",{transform:"rotate(-90,-47.105206,221.64465)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),UP=E("use",{transform:"rotate(90,-12.958501,126.21869)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),jP=E("use",{transform:"rotate(90,85.579289,201.4566)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),qP=E("use",{transform:"rotate(-90,33.719878,128.69405)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),HP=E("g",{fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},[E("path",{d:"m96.030843 162.41381v-85.127745"}),E("path",{d:"m98.767558 115.87521-23.979884 0.017"}),E("path",{d:"m98.767564 162.41187-23.97989 0.017"}),E("path",{d:"m0.0851394 103.23186h74.67453"}),E("path",{d:"m74.787674 115.89221-0.03517-15.899513"}),E("path",{d:"m40.050258 115.89218-0.03517-15.899513"})],-1),WP=E("use",{transform:"translate(40.022253,-87.77269)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),VP=E("use",{transform:"rotate(180,37.379836,147.11811)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),YP={fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","word-spacing":"0px"},GP={x:"41.119556",y:"-31.574169",style:{"line-height":"1.25"},"xml:space":"preserve"},KP={x:"41.119556",y:"-31.574169","font-size":"14px","stroke-width":".926042"},XP={"text-anchor":"middle"},QP={x:"-33.196793",y:"83.91066","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},ZP={x:"-33.196793",y:"83.91066","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},JP={x:"28.729593",y:"188.55545","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},tR={x:"28.729593",y:"188.55545","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},eR={transform:"rotate(-90)",x:"-96.286751",y:"93.843246","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},nR={x:"-96.286751",y:"93.843246","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},iR={x:"19.404688",y:"100.74961","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},rR={x:"19.404688",y:"100.74961","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},sR={transform:"rotate(-90)",x:"30.028851",y:"93.20443","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},oR={x:"30.028851",y:"93.20443","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},aR={transform:"rotate(-90)",x:"-35.285568",y:"-80.223541","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},lR={x:"-35.285568",y:"-80.223541","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},uR={transform:"rotate(-90)",x:"31.40531",y:"-80.050827","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},cR={x:"31.40531",y:"-80.050827","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},fR={x:"37.614525",y:"83.767349","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},hR={x:"37.614525",y:"83.767349","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},dR={transform:"rotate(-90)",x:"-117.21371",y:"-79.921967","text-align":"center",style:{"line-height":"1.25"},"xml:space":"preserve"},pR={x:"-117.21371",y:"-79.921967","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},gR=E("text",{x:"30.781723",y:"-31.152269",style:{"line-height":"1.25"},"xml:space":"preserve"},[E("tspan",{x:"30.781723",y:"-31.152269","font-size":"14px","stroke-width":".926042"},"\xD8")],-1),mR={key:1},yR={width:"206.88309",height:"383.67853",version:"1.1",viewBox:"0 0 191.58236 355.30231",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},_R=E("defs",null,[E("linearGradient",{id:"Metall"},[E("stop",{"stop-color":"#e3eefc",offset:"0"}),E("stop",{"stop-color":"#7eb2fc",offset:".9207831"}),E("stop",{"stop-color":"#7eb2fc",offset:"1"})]),E("linearGradient",{id:"linearGradient1006",x1:"237.7684",x2:"237.7684",y1:"-.16232871",y2:"70.812431",gradientTransform:"translate(-11.641716)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1018",x1:"216.26332",x2:"216.26331",y1:"-4.5688802e-7",y2:"-60.844345",gradientTransform:"translate(-11.641716)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1201",x1:"237.7684",x2:"237.7684",y1:"-.16232871",y2:"66.679474",gradientTransform:"rotate(90,24.256441,-24.256441)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1203",x1:"216.26332",x2:"216.26331",y1:"-4.5688802e-7",y2:"-60.844345",gradientTransform:"rotate(90,24.256441,-24.256441)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("radialGradient",{id:"radialGradient1636",cx:"52.129795",cy:"-15.527653",r:"73.624863",gradientTransform:"matrix(2.5807044 -.49873689 .41843765 2.1652084 -76.789198 30.370128)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("radialGradient",{id:"radialGradient1644",cx:"-3.0492399e-12",cy:"1.4158956e-12",r:"32.573872",gradientTransform:"scale(.04660458 .05018327)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1652",x1:"116.82076",x2:"535.17969",y1:"807.02734",y2:"807.02734",gradientTransform:"matrix(.26458333 0 0 .26458333 -66.811951 -22.507158)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1018-0",x1:"270.09106",x2:"270.09106",y2:"32.223873",gradientTransform:"translate(-72.760444)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1018-0-7",x1:"270.09106",x2:"270.09106",y2:"32.223873",gradientTransform:"matrix(-1,0,0,1,529.12836,0)",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1010-6-0",x1:"268.39368",x2:"268.39368",y2:"32.223873",gradientTransform:"translate(-11.053673)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1364",x1:"268.39368",x2:"268.39368",y2:"32.223873",gradientTransform:"translate(-430.73727)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1366",x1:"267.72485",x2:"267.72485",y1:"-104.03693",y2:"-9.0700102",gradientTransform:"matrix(0,1,1,0,9.070007,-114.36953)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1372",x1:"268.39368",x2:"268.39368",y2:"32.223873",gradientTransform:"translate(-48.512874)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1374",x1:"267.72485",x2:"267.72485",y1:"-104.03693",y2:"-9.0700102",gradientTransform:"rotate(-90,252.83198,243.76197)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1665",x2:"1.638386",y1:"10.318456",y2:"-180.90915",gradientUnits:"userSpaceOnUse","xlink:href":"#Metall"}),E("linearGradient",{id:"linearGradient1667",x1:"268.39368",x2:"268.39368",y2:"32.223873",gradientTransform:"translate(-467.42159)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect","xlink:href":"#Metall"})],-1),vR={transform:"translate(90.313521,65.531117)"},xR=E("path",{d:"m52.745345 158.2801h-105.4907v-43.42165h105.4907z",fill:"#d3e9f3",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),bR=E("rect",{transform:"matrix(0,-1,-1,0,0,0)",x:"-167.93727",y:"-32.223869",width:"9.6571846",height:"64.447746",rx:"0",ry:"0",fill:"url(#linearGradient1364)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),wR=E("path",{d:"m47.820569 153.35533h-95.64115v-33.57211h95.64115z",fill:"url(#linearGradient1366)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),ER=E("rect",{transform:"scale(-1)",x:"-204.6216",y:"-32.223873",width:"14.581967",height:"64.447746",rx:"0",ry:"0",fill:"url(#linearGradient1667)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),kR=E("path",{d:"m190.03963 32.223873v-93.068219h4.92477v-0.971h-43.42165v0.971h4.92477l26.16377 93.068219zm-33.40225-93.068215h33.24453",fill:"url(#linearGradient1018-0)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),AR=E("rect",{transform:"scale(1,-1)",x:"251.74631",y:"-32.223873",width:"14.581967",height:"64.447746",rx:"0",ry:"0",fill:"url(#linearGradient1010-6-0)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),CR=E("path",{d:"m266.32828 32.223873v-93.068215h-4.92477v-0.971h43.42165v0.971h-4.92477l-26.16377 93.068215zm33.40225-93.068211h-33.24453",fill:"url(#linearGradient1018-0-7)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),MR=E("path",{d:"m40.22013-60.844347h34.56744m-74.78757-1.74718c-47.81563 0-66.67966 38.795716-66.67966 62.591528 0 44.322095 34.26942 70.812212 66.69466 70.812212 50.46845 0 74.93029-43.517168 74.93029-70.812212v-60.844348h4.92477v-0.971h-44.74456v0.971h4.92477v15.780432c-10.33576-10.655756-24.30992-17.527612-40.05027-17.527612z",fill:"url(#radialGradient1636)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),SR=E("path",{d:"m -0.0372,-32.223872 a 32.223919,32.223919 0 0 1 0.0372,0 A 32.223919,32.223919 0 0 1 32.22387,1e-6 32.223919,32.223919 0 0 1 0,32.223872 32.223919,32.223919 0 0 1 -32.22387,1e-6 32.223919,32.223919 0 0 1 -0.0372,-32.223872 Z",fill:"url(#radialGradient1644)",stroke:"#000","stroke-dasharray":"1.4, 1.4","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".35"},null,-1),TR=E("path",{d:"m4.56888e-7 167.75047-66.67966-1e-5 4.06e-4 46.53668h66.679254",fill:"url(#linearGradient1201)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),DR=E("path",{d:"m 0,214.28714 35.125498,-0.0789 v -46.3729 L 0,167.75045",fill:"url(#linearGradient1203)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),$R=E("path",{d:"m35.125495 162.82574v56.38622h44.744554v-56.38622z",fill:"#d3e9f3",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),OR=E("path",{d:"m40.050258 167.7505h34.737416v46.5367h-34.737416z",fill:"url(#linearGradient1652)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),NR=E("path",{id:"axes-ulitka-front",d:"m57.462597-64.455075v7.96541m-13.726252 56.489662h-87.472689m43.736344-64.08531v107.82166",fill:"none",stroke:"#000","stroke-dasharray":"1.2, 0.6, 0.3, 0.6","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),FR=E("path",{d:"m47.820569-60.844334h-95.64115m95.81101-4e-6h4.92478v-0.971h-105.83043v0.971h4.92478l14.662516 66.712953c2.689841 15.996223 16.567041 27.96642 33.327929 27.966446 16.686173-2.5e-5 30.551193-12.078787 33.328504-27.969729z",fill:"url(#linearGradient1665)",opacity:".829545",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),PR=E("path",{d:"m204.6216-4.56888e-7 -1e-5 70.812618 46.53668-4.06e-4v-70.812212",fill:"url(#linearGradient1006)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),RR=E("path",{d:"m251.15827 0v-60.844347h4.92477v-0.971h-56.38623v0.971h4.92477v60.844347m0.16986-60.844343h46.20911",fill:"url(#linearGradient1018)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),LR=E("path",{d:"m187.24157-1.715282e-6h20.75872",fill:"none",stroke:"#000","stroke-dasharray":"1.2, 0.6, 0.3, 0.6","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),IR=E("path",{id:"axes-ulitka-left",d:"m268.53826 0h-20.75872",fill:"none",stroke:"#000","stroke-dasharray":"1.2, 0.6, 0.3, 0.6","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),BR=E("path",{id:"Arrow",d:"M 8.023534,287.47865 0,285.42067 8.023497,283.36269 Z",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".35"},null,-1),zR=E("use",{transform:"rotate(180,28.748884,285.42145)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),UR=E("text",{fill:"#000000","font-size":"14px","letter-spacing":"0px","word-spacing":"0px",style:{"line-height":"1.25","shape-inside":"url(#rect1378)","white-space":"pre"},"xml:space":"preserve"},null,-1),jR=E("path",{d:"m-23.272428 22.288372 59.735218-57.209322",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),qR=E("use",{transform:"rotate(-43.762656,-339.22591,182.82817)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),HR=E("use",{transform:"rotate(136.23734,73.427184,136.23966)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),WR=E("path",{d:"m-20.704073-34.92095h57.166863",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),VR=E("path",{d:"m-0.02351338-62.591524-81.696942 0.0352",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),YR=E("use",{transform:"rotate(90,135.11629,72.559987)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),GR=E("use",{transform:"rotate(-90,-181.57521,181.59097)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),KR=E("path",{d:"m-43.736344-2.6840313e-6 -37.984111 0.017600004",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),XR=E("path",{d:"m-77.744815 0.01577732v-62.572078",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),QR=E("use",{transform:"rotate(90,221.63729,159.81481)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),ZR=E("use",{transform:"rotate(-90,-94.703038,94.687308)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),JR=E("path",{d:"m96.030836-0.01572331v-61.807112",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),tL=E("path",{d:"m100.1928-61.824087-20.32274 0.0087",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),eL=E("path",{d:"m100.1928-0.01697447-56.456455 0.016971786",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),nL=E("use",{transform:"rotate(90,103.82936,103.84698)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),iL=E("use",{transform:"rotate(-90,-146.1711,216.99493)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),rL=E("path",{d:"m0.98299048 70.806857-82.703445 0.0176",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),sL=E("path",{d:"m-77.744815 70.823611v-70.805991",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),oL=E("path",{d:"M 74.98046,90.876276 74.94529,1e-6",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),aL=E("use",{transform:"rotate(180,37.488228,185.86222)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),lL=E("use",{transform:"translate(.01917239 -199.11786)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),uL=E("path",{d:"M 0.03517,90.907629 0,43.736346",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),cL=E("path",{d:"m0.001791 86.303033h74.974662",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),fL=E("use",{transform:"rotate(180,8.955e-4,185.86222)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),hL=E("use",{transform:"translate(-66.646179,-199.11785)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),dL=E("path",{d:"m-66.646179 86.303033h66.64797",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),pL=E("path",{d:"m-66.64449 90.447495-0.03517-86.303032",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),gL=E("use",{transform:"rotate(-90,-58.747502,304.41851)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),mL=E("use",{transform:"rotate(90,8.3204854,199.35587)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),yL=E("use",{transform:"rotate(90,106.85826,274.59378)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),_L=E("use",{transform:"rotate(-90,12.440884,201.83123)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),vL=E("path",{d:"m40.050258 167.7505-0.03517 13.73383m34.772586-13.73383-0.03517 13.73386m-74.667365 3.23916h74.67453m24.007895 29.54659-23.97989 0.017m23.979884-46.55366-23.979884 0.017m21.243169 46.5216v-85.12771m-135.63152 116.51078-40.794678 0.017m114.46936-54.65336-114.80826 0.017m2.989448 54.63526v-54.6337m77.744809 94.37399h57.497773m0 3.265v-68.13934m-57.497772 68.15817v-21.32917",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),xL=E("use",{transform:"translate(40.022254,-100.69698)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),bL=E("use",{transform:"rotate(180,37.379836,235.07209)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),wL={x:"-10.125483",y:"-37.24559",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},EL={x:"-10.125483",y:"-37.24559","font-size":"14px","stroke-width":".926042"},kL={x:"-33.196793",y:"83.91066",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},AL={x:"-33.196793",y:"83.91066","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},CL={x:"28.729593",y:"282.97165",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},ML={x:"28.729591",y:"282.97165","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},SL={transform:"rotate(-90)",x:"-148.14502",y:"93.843246",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},TL={x:"-148.14502",y:"93.843246","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},DL={x:"17.552605",y:"182.24144",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},$L={x:"17.552603",y:"182.24144","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},OL={transform:"rotate(-90)",x:"30.028851",y:"93.20443",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},NL={x:"30.028849",y:"93.20443","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},FL={transform:"rotate(-90)",x:"-35.285568",y:"-80.223541",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},PL={x:"-35.285568",y:"-80.223541","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},RL={transform:"rotate(-90)",x:"31.40531",y:"-80.050827",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},LL={x:"31.405308",y:"-80.050827","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},IL={x:"37.614525",y:"83.767349",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},BL={x:"37.614525",y:"83.767349","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},zL={transform:"rotate(-90)",x:"-218.34647",y:"-79.921967",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},UL={x:"-218.34647",y:"-79.921967","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},jL=E("text",{x:"-20.463314",y:"-36.823689",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},[E("tspan",{x:"-20.463314",y:"-36.823689","font-size":"14px","stroke-width":".926042"},"\xD8")],-1),qL=E("path",{d:"m52.745348 223.94432h-105.4907v43.42165h105.4907z",fill:"#d3e9f3",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),HL=E("rect",{transform:"rotate(90)",x:"214.28712",y:"-32.223873",width:"9.6571846",height:"64.447746",rx:"0",ry:"0",fill:"url(#linearGradient1372)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),WL=E("path",{d:"m47.820572 228.86909h-95.64115v33.57211h95.64115z",fill:"url(#linearGradient1374)",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".7"},null,-1),VL=E("path",{d:"m55.076958 245.65512h-110.01349m54.936528-36.88479-1e-13 62.14674m80.921558-79.89831h-46.847558m23.423775-29.51817v59.03638m-0.023862-83.96767h-114.62043m57.146513 36.88479-1e-13 -62.14674",fill:"none",stroke:"#000","stroke-dasharray":"1.2, 0.6, 0.3, 0.6","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),YL={x:"-0.34081417",y:"105.93251",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},GL={x:"-0.34081578",y:"105.93251","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},KL=E("path",{d:"m-47.802981 119.78322-0.0352-14.60454",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),XL=E("path",{d:"m-47.8314 108.39203h95.62355",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),QL=E("path",{d:"m47.820569 119.78322-0.0352-14.93194",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),ZL=E("use",{transform:"translate(-47.8314,-177.02864)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),JL=E("use",{transform:"rotate(180,23.896075,196.90635)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),tI={transform:"rotate(-90)",x:"-171.54916",y:"-80.072586",fill:"#000000","font-size":"14px","letter-spacing":"0px","stroke-width":".926042","text-align":"center","text-anchor":"middle","word-spacing":"0px",style:{"line-height":"1.25"},"xml:space":"preserve"},eI={x:"-171.54916",y:"-80.072586","font-size":"14px","stroke-width":".926042","text-align":"center","text-anchor":"middle"},nI=E("path",{d:"m-47.820581 119.78322-33.239757 0.0176",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),iI=E("path",{d:"m-47.820581 153.35533-32.952727 0.0176",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),rI=E("path",{d:"m-77.74481 185.57757v-65.77889",fill:"none",stroke:"#000","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":".3"},null,-1),sI=E("use",{transform:"rotate(-90,-104.901,258.26448)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),oI=E("use",{transform:"rotate(90,43.938588,163.73727)",width:"100%",height:"100%","xlink:href":"#Arrow"},null,-1),aI={key:2};function lI(t,e,n,i,r,s){return tt(),it("div",{onContextmenu:e[0]||(e[0]=(...o)=>s.saveSVG&&s.saveSVG(...o)),class:"text-center"},[kt(dn,{name:"fade-scale",mode:"out-in"},{default:ae(()=>{var o,a;return[((o=n.obj)==null?void 0:o.depth)==1?(tt(),it("div",uP,[(tt(),it("svg",cP,[fP,E("g",hP,[dP,pP,gP,mP,yP,_P,vP,xP,bP,wP,EP,kP,AP,CP,MP,SP,TP,DP,$P,OP,NP,FP,PP,RP,LP,IP,BP,zP,UP,jP,qP,HP,WP,VP,E("g",YP,[E("text",GP,[E("tspan",KP,xt(s.dim[0]),1)]),E("g",XP,[E("text",QP,[E("tspan",ZP,xt(s.dim[7]),1)]),E("text",JP,[E("tspan",tR,xt(s.dim[4]),1)]),E("text",eR,[E("tspan",nR,xt(s.dim[1]),1)]),E("text",iR,[E("tspan",rR,xt(s.dim[2]),1)]),E("text",sR,[E("tspan",oR,xt(s.dim[3]),1)]),E("text",aR,[E("tspan",lR,xt(s.dim[5]),1)]),E("text",uR,[E("tspan",cR,xt(s.dim[6]),1)]),E("text",fR,[E("tspan",hR,xt(s.dim[8]),1)]),E("text",dR,[E("tspan",pR,xt(s.dim[9]),1)])]),gR])])]))])):((a=n.obj)==null?void 0:a.depth)==2?(tt(),it("div",mR,[(tt(),it("svg",yR,[_R,E("g",vR,[xR,bR,wR,ER,kR,AR,CR,MR,SR,TR,DR,$R,OR,NR,FR,PR,RR,LR,IR,BR,zR,UR,jR,qR,HR,WR,VR,YR,GR,KR,XR,QR,ZR,JR,tL,eL,nL,iL,rL,sL,oL,aL,lL,uL,cL,fL,hL,dL,pL,gL,mL,yL,_L,vL,xL,bL,E("text",wL,[E("tspan",EL,xt(s.dim[0]),1)]),E("text",kL,[E("tspan",AL,xt(s.dim[7]),1)]),E("text",CL,[E("tspan",ML,xt(s.dim[4]),1)]),E("text",SL,[E("tspan",TL,xt(s.dim[1]),1)]),E("text",DL,[E("tspan",$L,xt(s.dim[2]),1)]),E("text",OL,[E("tspan",NL,xt(s.dim[3]),1)]),E("text",FL,[E("tspan",PL,xt(s.dim[5]),1)]),E("text",RL,[E("tspan",LL,xt(s.dim[6]),1)]),E("text",IL,[E("tspan",BL,xt(s.dim[8]),1)]),E("text",zL,[E("tspan",UL,xt(s.dim[9]),1)]),jL,qL,HL,WL,VL,E("text",YL,[E("tspan",GL,xt(s.dim[10]),1)]),KL,XL,QL,ZL,JL,E("text",tI,[E("tspan",eI,xt(s.dim[11]),1)]),nI,iI,rI,sI,oI])]))])):(tt(),it("div",aI))]}),_:1})],32)}var uI=On(lP,[["render",lI]]);const cI={name:"ResultFanCard",props:{fan:Object},components:{PhysInput:dg,PhysOutput:pg,DimDraw:uI},computed:{dim(){var t,e;return{b1:(t=this.fan)==null?void 0:t.dim[10],b2:(e=this.fan)==null?void 0:e.dim[11]}}}},fI={class:"row"},hI={class:"col"},dI=Oi(" \u0421\u0445\u0435\u043C\u0430: "),pI={key:0,class:"badge bg-primary"},gI={key:1,class:"spinner-border spinner-border-sm text-info",role:"status"},mI={class:"col"};function yI(t,e,n,i,r,s){var l,u;const o=fn("PhysOutput"),a=fn("DimDraw");return tt(),it("div",fI,[E("div",hI,[E("div",null,[dI,kt(dn,{appear:"",name:"fade-scale",mode:"out-in"},{default:ae(()=>{var c,f;return[((c=n.fan)==null?void 0:c.scheme)?(tt(),it("span",pI,xt((f=n.fan)==null?void 0:f.scheme),1)):(tt(),it("div",gI))]}),_:1})]),(tt(!0),it(Bt,null,Fe([["Dmm","D","\u043C\u043C","\u0414\u0438\u0430\u043C\u0435\u0442\u0440 \u043A\u043E\u043B\u0435\u0441\u0430",0],["Nv","N","\u043A\u0412\u0442","\u041C\u043E\u0449\u043D\u043E\u0441\u0442\u044C \u043D\u0430 \u0432\u0430\u043B\u0443",2],["Mv","M","\u041D\xB7\u043C","\u041C\u043E\u043C\u0435\u043D\u0442 \u043D\u0430 \u0432\u0430\u043B\u0443",1],["Q","Q","\u043C<sup>3</sup>/\u0447","\u041F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",0],["Pv","P<sub>v</sub>","\u041F\u0430","\u0414\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u043D\u043E\u0435",0],["Ps","P<sub>s</sub>","\u041F\u0430","\u0414\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435",0],["\u03B7","\u03B7<sub>v</sub>","","\u041A\u041F\u0414 \u043F\u043E\u043B\u043D\u044B\u0439",3],["\u03B7s","\u03B7<sub>s</sub>","","\u041A\u041F\u0414 \u0441\u0442\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439",3],["u","u","\u043C/\u0441","\u041E\u043A\u0440\u0443\u0436\u043D\u0430\u044F \u0441\u043A\u043E\u0440\u043E\u0441\u0442\u044C",1]],c=>(tt(),$i(o,{obj:n.fan,valuename:c[0],prepend:c[1],append:c[2],tooltip:c[3],tofixed:c[4],key:c[0]},null,8,["obj","valuename","prepend","append","tooltip","tofixed"]))),128)),(tt(!0),it(Bt,null,Fe([["b1","b<sub>1</sub>",(((l=n.fan)==null?void 0:l.depth)==2?"(\xD72) ":"")+"\u043C\u043C","\u0428\u0438\u0440\u0438\u043D\u0430 \u043A\u043E\u043B\u0435\u0441\u0430 \u043D\u0430 \u0432\u0445\u043E\u0434\u0435",0],["b2","b<sub>2</sub>",(((u=n.fan)==null?void 0:u.depth)==2?"(\xD72) ":"")+"\u043C\u043C","\u0428\u0438\u0440\u0438\u043D\u0430 \u043A\u043E\u043B\u0435\u0441\u0430 \u043D\u0430 \u0432\u044B\u0445\u043E\u0434\u0435",0]],c=>(tt(),$i(o,{obj:s.dim,valuename:c[0],prepend:c[1],append:c[2],tooltip:c[3],tofixed:c[4],key:c[0]},null,8,["obj","valuename","prepend","append","tooltip","tofixed"]))),128))]),E("div",mI,[kt(a,{obj:n.fan,tofixed:0},null,8,["obj"])])])}var _I=On(cI,[["render",yI]]);const vI={name:"ResultIsAbsentCard",props:{result:Object},computed:{nyIsTooSmall(){var t,e;return((t=this.result)==null?void 0:t.ny)<((e=this.result)==null?void 0:e.minSpeedness)},nyIsTooBig(){var t,e;return((t=this.result)==null?void 0:t.ny)>=((e=this.result)==null?void 0:e.maxSpeedness)},minSpeedness(){var t,e;return(+((e=(t=this.result)==null?void 0:t.minSpeedness)==null?void 0:e.toFixed(1))).toString().replace(".",",")},maxSpeedness(){var t,e;return(+((e=(t=this.result)==null?void 0:t.maxSpeedness)==null?void 0:e.toFixed(1))).toString().replace(".",",")}}},xI=E("span",{class:"badge bg-danger my-1",style:{"font-size":"100%"}}," \u041D\u0435\u0442 \u043F\u043E\u0434\u0445\u043E\u0434\u044F\u0449\u0435\u0439 \u0441\u0445\u0435\u043C\u044B ",-1),bI={key:0};function wI(t,e,n,i,r,s){return tt(),it("div",null,[xI,s.nyIsTooSmall||s.nyIsTooBig?(tt(),it("div",bI," \u0411\u044B\u0441\u0442\u0440\u043E\u0445\u043E\u0434\u043D\u043E\u0441\u0442\u044C \u0441\u043B\u0438\u0448\u043A\u043E\u043C "+xt(s.nyIsTooSmall?"\u043C\u0430\u043B\u0430":"\u0432\u0435\u043B\u0438\u043A\u0430")+" ("+xt(s.nyIsTooSmall?"\u043C\u0435\u043D\u0435\u0435":"\u0431\u043E\u043B\u0435\u0435")+" "+xt(s.nyIsTooSmall?s.minSpeedness:s.maxSpeedness)+"). "+xt(s.nyIsTooSmall?"\u041F\u043E\u0432\u044B\u0441\u044C\u0442\u0435":"\u0421\u043D\u0438\u0437\u044C\u0442\u0435")+" \u0447\u0430\u0441\u0442\u043E\u0442\u0443 \u0438\u043B\u0438 \u043F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C. "+xt(s.nyIsTooSmall?"\u0421\u043D\u0438\u0437\u044C\u0442\u0435":"\u041F\u043E\u0432\u044B\u0441\u044C\u0442\u0435")+" \u0434\u0430\u0432\u043B\u0435\u043D\u0438\u0435. ",1)):hn("",!0)])}var EI=On(vI,[["render",wI]]),ye={pres:"#000000",flow:"#084298",power:"#b02a37",eff:"#198754"};const v3=[3,3];class gg{constructor({name:e="",dataName:n="pressureGraph",xScale:i="x",xField:r="flow",yScale:s="y",yField:o="fullpres",color:a=ye.pres,interpolate:l="cardinal",width:u=1.25}={}){this.name=e,this.type="line",this.role="graph-shadow",this.from={data:n},this.encode={enter:{x:{scale:i,field:r},y:{scale:s,field:o},stroke:{value:a},interpolate:{value:l},strokeWidth:{value:u}}}}}class x3 extends gg{constructor(e={}){super(e);this.name="FullPres",this.from.data="Natural",this.encode.enter.x.scale="Flow",this.encode.enter.x.field="Flow",this.encode.enter.y.scale="Pres",this.encode.enter.y.field="FullPres",this.encode.enter.stroke.value=ye.pres}}class kI extends x3{constructor(e={}){super(e);this.name="StatPres",this.encode.enter.y.field="StatPres",this.encode.enter.strokeDash={value:v3}}}class b3 extends gg{constructor(e={}){super(e);this.name="\u03B7",this.from.data="Natural",this.encode.enter.x.scale="Flow",this.encode.enter.x.field="Flow",this.encode.enter.y.scale="\u03B7",this.encode.enter.y.field="\u03B7",this.encode.enter.stroke.value=ye.eff}}class AI extends b3{constructor(e={}){super(e);this.name="\u03B7s",this.encode.enter.y.field="\u03B7s",this.encode.enter.strokeDash={value:v3}}}class CI extends gg{constructor(e={}){super(e);this.name="Power",this.from.data="Natural",this.encode.enter.x.scale="Flow",this.encode.enter.x.field="Flow",this.encode.enter.y.scale="Power",this.encode.enter.y.field="Power",this.encode.enter.stroke.value=ye.power}}class w3{constructor({name:e="x",type:n="linear",range:i="width",domain:r=[0,1],zero:s=!1,nice:o=!0}={}){this.name=e,this.type=n,this.range=i,this.domain=r,this.zero=s,this.nice=o}set minimum(e){this.domain[0]=e}set maximum(e){this.domain[1]=e}get minimum(){return this.domain[0]}get maximum(){return this.domain[1]}}class MI extends w3{constructor(e={}){super(e);this.nice=!0,this.range="width"}}class mg extends w3{constructor(e={}){super(e);this.nice=1,this.range="height"}}class SI extends MI{constructor(e={}){super(e);this.name="Flow"}}class TI extends mg{constructor(e={}){super(e);this.name="Pres"}}class DI extends mg{constructor(e={}){super(e);this.name="\u03B7"}}class $I extends mg{constructor(e={}){super(e);this.name="Power"}}class If{constructor({name:e="Flow",orient:n="bottom",title:i="Q, \u043C\xB3/\u0447",scale:r="x",format:s="d",grid:o=!0}={}){this.name=e,this.orient=n,this.title=i,this.scale=r,this.format=s,this.grid=o}}class OI extends If{constructor(e={}){super(e);this.name="Flow",this.orient="bottom",this.scale="Flow",this.format=".5",this.domainColor=ye.flow,this.labelColor=this.domainColor,this.titleColor=this.domainColor}}class NI extends If{constructor(e={}){super(e);this.name="Pres",this.orient="left",this.title="p, \u041F\u0430",this.scale="Pres",this.format="d"}}class FI extends If{constructor(e={}){super(e);this.name="\u03B7",this.orient="right",this.title="\u03B7 (\u041A\u041F\u0414)",this.scale="\u03B7",this.format=".3",this.domainColor=ye.eff,this.labelColor=this.domainColor,this.offset=0,this.titleAngle=270,this.titlePadding=15,this.titleColor=this.domainColor}}class PI extends If{constructor(e={}){super(e);this.name="Power",this.orient="right",this.scale="Power",this.format=".5",this.domainColor=ye.power,this.labelColor=this.domainColor,this.offset=80,this.titleAngle=270,this.titlePadding=15,this.titleColor=this.domainColor}}class RI{constructor({name:e="",values:n=[]}={}){this.name=e,this.values=n}addPoint(e){this.values.push(e)}addVarArray(e,n=[]){for(let i=0;i<=n.length-1;i++)typeof this.values[i]=="object"?this.values[i][e]=n[i]:this.addPoint({[e]:n[i]})}}class LI extends RI{constructor(e={}){super(e);this.name="Natural"}}class _a{constructor({name:e="",width:n=.5,color:i="Gray",strokeDash:r=[3,5],Q:s=null,Pv:o=null,Ps:a=null,\u03B7:l=null,\u03B7s:u=null,Nv:c=null}={}){this.name=e,this.type="rule",this.role="graph-shadow",this.encode={enter:{stroke:{value:i},strokeDash:{value:r},strokeWidth:{value:n},x:{},x2:{},y:{},y2:{}}},this.fantune={workPoint:{flow:s,fullPres:o,statPres:a,fullEff:l,statEff:u,power:c}}}makeFlow(e){this.encode.enter.stroke.value=ye.flow,this.encode.enter.x.scale="Flow",this.encode.enter.x.value=e,this.encode.enter.y.signal="height",this.encode.enter.y.mult=0,this.encode.enter.y2.signal="height",this.encode.enter.y2.offset=-8}makePres(e,n){this.encode.enter.stroke.value=ye.pres,this.encode.enter.x.value=30,this.encode.enter.x2.scale="Flow",this.encode.enter.x2.value=e,this.encode.enter.y.scale="Pres",this.encode.enter.y.value=n}makeEff(e,n){this.encode.enter.stroke.value=ye.eff,this.encode.enter.x.signal="width",this.encode.enter.x.offset=-25,this.encode.enter.x2.scale="Flow",this.encode.enter.x2.value=e,this.encode.enter.y.scale="\u03B7",this.encode.enter.y.value=n}makePower(e,n){this.encode.enter.stroke.value=ye.power,this.encode.enter.x.signal="width",this.encode.enter.x.offset=30,this.encode.enter.x2.scale="Flow",this.encode.enter.x2.value=e,this.encode.enter.y.scale="Power",this.encode.enter.y.value=n}}class II extends _a{constructor(e={}){super(e);this.name="RuleFlow";let n=this.fantune.workPoint.flow;!n||this.makeFlow(n)}}class BI extends _a{constructor(e={}){super(e);this.name="RuleFullPres";let n=this.fantune.workPoint.flow,i=this.fantune.workPoint.fullPres;!n||!i||this.makePres(n,i)}}class zI extends _a{constructor(e={}){super(e);this.name="RuleStatPres";let n=this.fantune.workPoint.flow,i=this.fantune.workPoint.statPres;!n||!i||this.makePres(n,i)}}class UI extends _a{constructor(e={}){super(e);this.name="RuleFullEff";let n=this.fantune.workPoint.flow,i=this.fantune.workPoint.fullEff;!n||!i||this.makeEff(n,i)}}class jI extends _a{constructor(e={}){super(e);this.name="RuleStatEff";let n=this.fantune.workPoint.flow,i=this.fantune.workPoint.statEff;!n||!i||this.makeEff(n,i)}}class qI extends _a{constructor(e={}){super(e);this.name="RulePower";let n=this.fantune.workPoint.flow,i=this.fantune.workPoint.power;!n||!i||this.makePower(n,i)}}class E3{constructor({name:e="",text:n="",color:i="Navy",Q:r=null,Pv:s=null,Ps:o=null,\u03B7:a=null,\u03B7s:l=null,Nv:u=null}={}){this.name=e,this.type="text",this.role="graph-shadow",this.encode={enter:{fontWeight:{value:"normal"},fontSize:{value:10},align:{},baseline:{},opacity:{value:1},strokeOpacity:{value:0},strokeWidth:{value:0},stroke:{value:"white"},text:{value:n},fill:{value:i},y:{},x:{}}},this.fantune={workPoint:{flow:r,fullPres:s,statPres:o,fullEff:a,statEff:l,power:u}}}}class HI extends E3{constructor(e={}){super(e);this.encode.enter.align.value="center"}makeFlow(e){this.encode.enter.fill.value=ye.flow,this.encode.enter.text.value=+e.toPrecision(4),this.encode.enter.x.scale="Flow",this.encode.enter.x.value=e,this.encode.enter.y.signal="height",this.encode.enter.y.offset=-2}}class zl extends E3{constructor(e={}){super(e);this.encode.enter.align.value="left",this.encode.enter.baseline.value="middle",this.encode.enter.x.value=2}makePres(e){this.encode.enter.fill.value=ye.pres,this.encode.enter.text.value=+e.toFixed(0),this.encode.enter.y.scale="Pres",this.encode.enter.y.value=e}makeEff(e){this.encode.enter.fill.value=ye.eff,this.encode.enter.text.value=+e.toFixed(2),this.encode.enter.align.value="right",this.encode.enter.x={signal:"width",offset:-2},this.encode.enter.y.scale="\u03B7",this.encode.enter.y.value=e}makePower(e){this.encode.enter.fill.value=ye.power,this.encode.enter.text.value=+e.toPrecision(3),this.encode.enter.align.value="right",this.encode.enter.x={signal:"width",offset:78},this.encode.enter.y.scale="Power",this.encode.enter.y.value=e}}class WI extends HI{constructor(e={}){super(e);this.name="TextFlow",this.encode.enter.fontWeight.value="bold";let n=this.fantune.workPoint.flow;!n||this.makeFlow(n)}}class VI extends zl{constructor(e={}){super(e);this.name="TextFullPres",this.encode.enter.fontWeight.value="bold";let n=this.fantune.workPoint.fullPres;!n||this.makePres(n)}}class YI extends zl{constructor(e={}){super(e);this.name="TextStatPres";let n=this.fantune.workPoint.statPres;!n||this.makePres(n)}}class GI extends zl{constructor(e={}){super(e);this.name="TextFullEff",this.encode.enter.fontWeight.value="bold";let n=this.fantune.workPoint.fullEff;!n||this.makeEff(n)}}class KI extends zl{constructor(e={}){super(e);this.name="TextStatEff";let n=this.fantune.workPoint.statEff;!n||this.makeEff(n)}}class XI extends zl{constructor(e={}){super(e);this.name="TextPower",this.encode.enter.fontWeight.value="bold";let n=this.fantune.workPoint.power;!n||this.makePower(n)}}class Ul{constructor({name:e="",color:n="Navy",Q:i=null,Pv:r=null,Ps:s=null,\u03B7:o=null,\u03B7s:a=null,Nv:l=null}={}){this.name=e,this.type="symbol",this.role="graph-shadow",this.fantune={workPoint:{flow:i,fullPres:r,statPres:s,fullEff:o,statEff:a,power:l}},this.encode={enter:{shape:{value:"circle"},size:{value:"30"},opacity:{value:1},strokeOpacity:{value:0},strokeWidth:{value:0},stroke:{value:"white"},fill:{value:n},y:{},x:{scale:"Flow",value:this.fantune.workPoint.flow}}}}makePres(e){this.encode.enter.fill.value=ye.pres,this.encode.enter.y.scale="Pres",this.encode.enter.y.value=e}makeEff(e){this.encode.enter.fill.value=ye.eff,this.encode.enter.y.scale="\u03B7",this.encode.enter.y.value=e}makePower(e){this.encode.enter.fill.value=ye.power,this.encode.enter.y.scale="Power",this.encode.enter.y.value=e}}class QI extends Ul{constructor(e={}){super(e);this.name="PinFullPres";let n=this.fantune.workPoint.fullPres;!n||this.makePres(n)}}class ZI extends Ul{constructor(e={}){super(e);this.name="PinStatPres";let n=this.fantune.workPoint.statPres;!n||this.makePres(n)}}class JI extends Ul{constructor(e={}){super(e);this.name="PinFullEff";let n=this.fantune.workPoint.fullEff;!n||this.makeEff(n)}}class tB extends Ul{constructor(e={}){super(e);this.name="PinStatEff";let n=this.fantune.workPoint.statEff;!n||this.makeEff(n)}}class eB extends Ul{constructor(e={}){super(e);this.name="PinPower";let n=this.fantune.workPoint.power;!n||this.makePower(n)}}function Rn(t,e,n){return t.fields=e||[],t.fname=n,t}function le(t){return t==null?null:t.fname}function Ve(t){return t==null?null:t.fields}function k3(t){return t.length===1?nB(t[0]):iB(t)}const nB=t=>function(e){return e[t]},iB=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function I(t){throw Error(t)}function yg(t){const e=[],n=t.length;let i=null,r=0,s="",o,a,l;t=t+"";function u(){e.push(s+t.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=t[a],l==="\\")s+=t.substring(o,a),s+=t.substring(++a,++a),o=a;else if(l===i)u(),i=null,r=-1;else{if(i)continue;o===r&&l==='"'||o===r&&l==="'"?(o=a+1,i=l):l==="."&&!r?a>o?u():o=a+1:l==="["?(a>o&&u(),r=o=a+1):l==="]"&&(r||I("Access path missing open bracket: "+t),r>0&&u(),r=0,o=a+1)}return r&&I("Access path missing closing bracket: "+t),i&&I("Access path missing closing quote: "+t),a>o&&(a++,u()),e}function Ln(t,e,n){const i=yg(t);return t=i.length===1?i[0]:t,Rn((n&&n.get||k3)(i),[t],e||t)}const Bf=Ln("id"),gn=Rn(t=>t,[],"identity"),Gs=Rn(()=>0,[],"zero"),jl=Rn(()=>1,[],"one"),gi=Rn(()=>!0,[],"true"),Ks=Rn(()=>!1,[],"false");function rB(t,e,n){const i=[e].concat([].slice.call(n));console[t].apply(console,i)}const sB=0,A3=1,oB=2,aB=3,lB=4;function uB(t,e,n=rB){let i=t||sB;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=A3&&n(e||"error","ERROR",arguments),this},warn(){return i>=oB&&n(e||"warn","WARN",arguments),this},info(){return i>=aB&&n(e||"log","INFO",arguments),this},debug(){return i>=lB&&n(e||"log","DEBUG",arguments),this}}}var lt=Array.isArray;function Mt(t){return t===Object(t)}const C3=t=>t!=="__proto__";function cB(...t){return t.reduce((e,n)=>{for(const i in n)if(i==="signals")e.signals=fB(e.signals,n.signals);else{const r=i==="legend"?{layout:1}:i==="style"?!0:null;M3(e,i,n[i],r)}return e},{})}function M3(t,e,n,i){if(!C3(e))return;let r,s;if(Mt(n)&&!lt(n)){s=Mt(t[e])?t[e]:t[e]={};for(r in n)i&&(i===!0||i[r])?M3(s,r,n[r]):C3(r)&&(s[r]=n[r])}else t[e]=n}function fB(t,e){if(t==null)return e;const n={},i=[];function r(s){n[s.name]||(n[s.name]=1,i.push(s))}return e.forEach(r),t.forEach(r),i}function Nt(t){return t[t.length-1]}function Ye(t){return t==null||t===""?null:+t}const S3=t=>e=>t*Math.exp(e),T3=t=>e=>Math.log(t*e),D3=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),$3=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,zf=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function Uf(t,e,n,i){const r=n(t[0]),s=n(Nt(t)),o=(s-r)*e;return[i(r-o),i(s-o)]}function hB(t,e){return Uf(t,e,Ye,gn)}function dB(t,e){var n=Math.sign(t[0]);return Uf(t,e,T3(n),S3(n))}function pB(t,e,n){return Uf(t,e,zf(n),zf(1/n))}function gB(t,e,n){return Uf(t,e,D3(n),$3(n))}function jf(t,e,n,i,r){const s=i(t[0]),o=i(Nt(t)),a=e!=null?i(e):(s+o)/2;return[r(a+(s-a)*n),r(a+(o-a)*n)]}function O3(t,e,n){return jf(t,e,n,Ye,gn)}function N3(t,e,n){const i=Math.sign(t[0]);return jf(t,e,n,T3(i),S3(i))}function _g(t,e,n,i){return jf(t,e,n,zf(i),zf(1/i))}function F3(t,e,n,i){return jf(t,e,n,D3(i),$3(i))}function mB(t){return 1+~~(new Date(t).getMonth()/3)}function yB(t){return 1+~~(new Date(t).getUTCMonth()/3)}function pt(t){return t!=null?lt(t)?t:[t]:[]}function _B(t,e,n){let i=t[0],r=t[1],s;return r<i&&(s=r,r=i,i=s),s=r-i,s>=n-e?[e,n]:[i=Math.min(Math.max(i,e),n-s),i+s]}function At(t){return typeof t=="function"}const vB="descending";function P3(t,e,n){n=n||{},e=pt(e)||[];const i=[],r=[],s={},o=n.comparator||xB;return pt(t).forEach((a,l)=>{a!=null&&(i.push(e[l]===vB?-1:1),r.push(a=At(a)?a:Ln(a,null,n)),(Ve(a)||[]).forEach(u=>s[u]=1))}),r.length===0?null:Rn(o(r,i),Object.keys(s))}const vg=(t,e)=>(t<e||t==null)&&e!=null?-1:(t>e||e==null)&&t!=null?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e===e?-1:e!==e&&t===t?1:0),xB=(t,e)=>t.length===1?bB(t[0],e[0]):wB(t,e,t.length),bB=(t,e)=>function(n,i){return vg(t(n),t(i))*e},wB=(t,e,n)=>(e.push(0),function(i,r){let s,o=0,a=-1;for(;o===0&&++a<n;)s=t[a],o=vg(s(i),s(r));return o*e[a]});function Ge(t){return At(t)?t:()=>t}function R3(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}function bt(t){for(let e,n,i=1,r=arguments.length;i<r;++i){e=arguments[i];for(n in e)t[n]=e[n]}return t}function cr(t,e){let n=0,i,r,s,o;if(t&&(i=t.length))if(e==null){for(r=t[n];n<i&&(r==null||r!==r);r=t[++n]);for(s=o=r;n<i;++n)r=t[n],r!=null&&(r<s&&(s=r),r>o&&(o=r))}else{for(r=e(t[n]);n<i&&(r==null||r!==r);r=e(t[++n]));for(s=o=r;n<i;++n)r=e(t[n]),r!=null&&(r<s&&(s=r),r>o&&(o=r))}return[s,o]}function EB(t,e){const n=t.length;let i=-1,r,s,o,a,l;if(e==null){for(;++i<n;)if(s=t[i],s!=null&&s>=s){r=o=s;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)s=t[i],s!=null&&(r>s&&(r=s,a=i),o<s&&(o=s,l=i))}else{for(;++i<n;)if(s=e(t[i],i,t),s!=null&&s>=s){r=o=s;break}if(i===n)return[-1,-1];for(a=l=i;++i<n;)s=e(t[i],i,t),s!=null&&(r>s&&(r=s,a=i),o<s&&(o=s,l=i))}return[a,l]}const kB=Object.prototype.hasOwnProperty;function gt(t,e){return kB.call(t,e)}const qf={};function ql(t){let e={},n;function i(s){return gt(e,s)&&e[s]!==qf}const r={size:0,empty:0,object:e,has:i,get(s){return i(s)?e[s]:void 0},set(s,o){return i(s)||(++r.size,e[s]===qf&&--r.empty),e[s]=o,this},delete(s){return i(s)&&(--r.size,++r.empty,e[s]=qf),this},clear(){r.size=r.empty=0,r.object=e={}},test(s){return arguments.length?(n=s,r):n},clean(){const s={};let o=0;for(const a in e){const l=e[a];l!==qf&&(!n||!n(l))&&(s[a]=l,++o)}r.size=o,r.empty=0,r.object=e=s}};return t&&Object.keys(t).forEach(s=>{r.set(s,t[s])}),r}function AB(t,e,n,i,r,s){if(!n&&n!==0)return s;const o=+n;let a=t[0],l=Nt(t),u;l<a&&(u=a,a=l,l=u),u=Math.abs(e-a);const c=Math.abs(l-e);return u<c&&u<=o?i:c<=o?r:s}function G(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),bt(i,n)}function Hl(t,e,n,i){let r=e[0],s=e[e.length-1],o;return r>s&&(o=r,r=s,s=o),n=n===void 0||n,i=i===void 0||i,(n?r<=t:r<t)&&(i?t<=s:t<s)}function CB(t){return typeof t=="boolean"}function Xs(t){return Object.prototype.toString.call(t)==="[object Date]"}function MB(t){return t&&At(t[Symbol.iterator])}function Wl(t){return typeof t=="number"}function SB(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function te(t){return typeof t=="string"}function L3(t,e,n){t&&(t=e?pt(t).map(a=>a.replace(/\\(.)/g,"$1")):pt(t));const i=t&&t.length,r=n&&n.get||k3,s=a=>r(e?[a]:yg(a));let o;if(!i)o=function(){return""};else if(i===1){const a=s(t[0]);o=function(l){return""+a(l)}}else{const a=t.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<i;)u+="|"+a[c](l);return u}}return Rn(o,t,"key")}function TB(t,e){const n=t[0],i=Nt(t),r=+e;return r?r===1?i:n+r*(i-n):n}const DB=1e4;function $B(t){t=+t||DB;let e,n,i;const r=()=>{e={},n={},i=0},s=(o,a)=>(++i>t&&(n=e,e={},i=1),e[o]=a);return r(),{clear:r,has:o=>gt(e,o)||gt(n,o),get:o=>gt(e,o)?e[o]:gt(n,o)?s(o,n[o]):void 0,set:(o,a)=>gt(e,o)?e[o]=a:s(o,a)}}function OB(t,e,n,i){const r=e.length,s=n.length;if(!s)return e;if(!r)return n;const o=i||new e.constructor(r+s);let a=0,l=0,u=0;for(;a<r&&l<s;++u)o[u]=t(e[a],n[l])>0?n[l++]:e[a++];for(;a<r;++a,++u)o[u]=e[a];for(;l<s;++l,++u)o[u]=n[l];return o}function Hf(t,e){let n="";for(;--e>=0;)n+=t;return n}function NB(t,e,n,i){const r=n||" ",s=t+"",o=e-s.length;return o<=0?s:i==="left"?Hf(r,o)+s:i==="center"?Hf(r,~~(o/2))+s+Hf(r,Math.ceil(o/2)):s+Hf(r,o)}function Wf(t){return t&&Nt(t)-t[0]||0}function ct(t){return lt(t)?"["+t.map(ct)+"]":Mt(t)||te(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function I3(t){return t==null||t===""?null:!t||t==="false"||t==="0"?!1:!!t}const FB=t=>Wl(t)||Xs(t)?t:Date.parse(t);function B3(t,e){return e=e||FB,t==null||t===""?null:e(t)}function z3(t){return t==null||t===""?null:t+""}function zi(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function PB(t,e,n,i){const r=i!=null?i:"\u2026",s=t+"",o=s.length,a=Math.max(0,e-r.length);return o<=e?s:n==="left"?r+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+r+s.slice(o-~~(a/2)):s.slice(0,a)+r}function Qs(t,e,n){if(t)if(e){const i=t.length;for(let r=0;r<i;++r){const s=e(t[r]);s&&n(s,r,t)}}else t.forEach(n)}var U3={},xg={},bg=34,Vl=10,wg=13;function j3(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function RB(t,e){var n=j3(t);return function(i,r){return e(n(i),r,t)}}function q3(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function mn(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function LB(t){return t<0?"-"+mn(-t,6):t>9999?"+"+mn(t,6):mn(t,4)}function IB(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":LB(t.getUTCFullYear())+"-"+mn(t.getUTCMonth()+1,2)+"-"+mn(t.getUTCDate(),2)+(r?"T"+mn(e,2)+":"+mn(n,2)+":"+mn(i,2)+"."+mn(r,3)+"Z":i?"T"+mn(e,2)+":"+mn(n,2)+":"+mn(i,2)+"Z":n||e?"T"+mn(e,2)+":"+mn(n,2)+"Z":"")}function BB(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(f,h){var d,p,g=r(f,function(m,y){if(d)return d(m,y-1);p=m,d=h?RB(m,h):j3(m)});return g.columns=p||[],g}function r(f,h){var d=[],p=f.length,g=0,m=0,y,_=p<=0,v=!1;f.charCodeAt(p-1)===Vl&&--p,f.charCodeAt(p-1)===wg&&--p;function x(){if(_)return xg;if(v)return v=!1,U3;var k,b=g,C;if(f.charCodeAt(b)===bg){for(;g++<p&&f.charCodeAt(g)!==bg||f.charCodeAt(++g)===bg;);return(k=g)>=p?_=!0:(C=f.charCodeAt(g++))===Vl?v=!0:C===wg&&(v=!0,f.charCodeAt(g)===Vl&&++g),f.slice(b+1,k-1).replace(/""/g,'"')}for(;g<p;){if((C=f.charCodeAt(k=g++))===Vl)v=!0;else if(C===wg)v=!0,f.charCodeAt(g)===Vl&&++g;else if(C!==n)continue;return f.slice(b,k)}return _=!0,f.slice(b,p)}for(;(y=x())!==xg;){for(var w=[];y!==U3&&y!==xg;)w.push(y),y=x();h&&(w=h(w,m++))==null||d.push(w)}return d}function s(f,h){return f.map(function(d){return h.map(function(p){return c(d[p])}).join(t)})}function o(f,h){return h==null&&(h=q3(f)),[h.map(c).join(t)].concat(s(f,h)).join(`
`)}function a(f,h){return h==null&&(h=q3(f)),s(f,h).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(t)}function c(f){return f==null?"":f instanceof Date?IB(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}function zB(t){return t}function UB(t){if(t==null)return zB;var e,n,i=t.scale[0],r=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var u=2,c=a.length,f=new Array(c);for(f[0]=(e+=a[0])*i+s,f[1]=(n+=a[1])*r+o;u<c;)f[u]=a[u],++u;return f}}function jB(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}function qB(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return H3(t,n)})}:H3(t,e)}function H3(t,e){var n=e.id,i=e.bbox,r=e.properties==null?{}:e.properties,s=W3(t,e);return n==null&&i==null?{type:"Feature",properties:r,geometry:s}:i==null?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}function W3(t,e){var n=UB(t.transform),i=t.arcs;function r(c,f){f.length&&f.pop();for(var h=i[c<0?~c:c],d=0,p=h.length;d<p;++d)f.push(n(h[d],d));c<0&&jB(f,p)}function s(c){return n(c)}function o(c){for(var f=[],h=0,d=c.length;h<d;++h)r(c[h],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function l(c){return c.map(a)}function u(c){var f=c.type,h;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(u)};case"Point":h=s(c.coordinates);break;case"MultiPoint":h=c.coordinates.map(s);break;case"LineString":h=o(c.arcs);break;case"MultiLineString":h=c.arcs.map(o);break;case"Polygon":h=l(c.arcs);break;case"MultiPolygon":h=c.arcs.map(l);break;default:return null}return{type:f,coordinates:h}}return u(e)}function HB(t,e){var n={},i={},r={},s=[],o=-1;e.forEach(function(u,c){var f=t.arcs[u<0?~u:u],h;f.length<3&&!f[1][0]&&!f[1][1]&&(h=e[++o],e[o]=u,e[c]=h)}),e.forEach(function(u){var c=a(u),f=c[0],h=c[1],d,p;if(d=r[f])if(delete r[d.end],d.push(u),d.end=h,p=i[h]){delete i[p.start];var g=p===d?d:d.concat(p);i[g.start=d.start]=r[g.end=p.end]=g}else i[d.start]=r[d.end]=d;else if(d=i[h])if(delete i[d.start],d.unshift(u),d.start=f,p=r[f]){delete r[p.end];var m=p===d?d:p.concat(d);i[m.start=p.start]=r[m.end=d.end]=m}else i[d.start]=r[d.end]=d;else d=[u],i[d.start=f]=r[d.end=h]=d});function a(u){var c=t.arcs[u<0?~u:u],f=c[0],h;return t.transform?(h=[0,0],c.forEach(function(d){h[0]+=d[0],h[1]+=d[1]})):h=c[c.length-1],u<0?[h,f]:[f,h]}function l(u,c){for(var f in u){var h=u[f];delete c[h.start],delete h.start,delete h.end,h.forEach(function(d){n[d<0?~d:d]=1}),s.push(h)}}return l(r,i),l(i,r),e.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function WB(t){return W3(t,VB.apply(this,arguments))}function VB(t,e,n){var i,r,s;if(arguments.length>1)i=YB(t,e,n);else for(r=0,i=new Array(s=t.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:HB(t,i)}}function YB(t,e,n){var i=[],r=[],s;function o(f){var h=f<0?~f:f;(r[h]||(r[h]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function l(f){f.forEach(a)}function u(f){f.forEach(l)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":l(f.arcs);break;case"MultiPolygon":u(f.arcs);break}}return c(e),r.forEach(n==null?function(f){i.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&i.push(f[0].i)}),i}function va(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Yl(t){let e=t,n=t;t.length===1&&(e=(o,a)=>t(o)-a,n=GB(t));function i(o,a,l,u){for(l==null&&(l=0),u==null&&(u=o.length);l<u;){const c=l+u>>>1;n(o[c],a)<0?l=c+1:u=c}return l}function r(o,a,l,u){for(l==null&&(l=0),u==null&&(u=o.length);l<u;){const c=l+u>>>1;n(o[c],a)>0?u=c:l=c+1}return l}function s(o,a,l,u){l==null&&(l=0),u==null&&(u=o.length);const c=i(o,a,l,u-1);return c>l&&e(o[c-1],a)>-e(o[c],a)?c-1:c}return{left:i,center:s,right:r}}function GB(t){return(e,n)=>va(t(e),n)}function V3(t){return t===null?NaN:+t}function*KB(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const Y3=Yl(va),Vf=Y3.right,XB=Y3.left;Yl(V3).center;var Gl=Vf;function QB(t,e){let n=0,i,r=0,s=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,s+=i*(o-r));else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,s+=i*(a-r))}if(n>1)return s/(n-1)}function ZB(t,e){const n=QB(t,e);return n&&Math.sqrt(n)}class Ke{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const s=n[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(n[i++]=a),e=o}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,s,o=0;if(n>0){for(o=e[--n];n>0&&(i=o,r=e[--n],o=i+r,s=r-(o-i),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(r=s*2,i=o+r,r==i-o&&(o=i))}return o}}function JB(t,e){return Array.from(e,n=>t[n])}var Eg=Math.sqrt(50),kg=Math.sqrt(10),Ag=Math.sqrt(2);function Cg(t,e,n){var i,r=-1,s,o,a;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(s=t,t=e,e=s),(a=G3(t,e,n))===0||!isFinite(a))return[];if(a>0){let l=Math.round(t/a),u=Math.round(e/a);for(l*a<t&&++l,u*a>e&&--u,o=new Array(s=u-l+1);++r<s;)o[r]=(l+r)*a}else{a=-a;let l=Math.round(t*a),u=Math.round(e*a);for(l/a<t&&++l,u/a>e&&--u,o=new Array(s=u-l+1);++r<s;)o[r]=(l+r)/a}return i&&o.reverse(),o}function G3(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=Eg?10:s>=kg?5:s>=Ag?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=Eg?10:s>=kg?5:s>=Ag?2:1)}function Vr(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=Eg?r*=10:s>=kg?r*=5:s>=Ag&&(r*=2),e<t?-r:r}function Zs(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Mg(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function K3(t,e,n=0,i=t.length-1,r=va){for(;i>n;){if(i-n>600){const l=i-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),d=Math.max(n,Math.floor(e-u*f/l+h)),p=Math.min(i,Math.floor(e+(l-u)*f/l+h));K3(t,e,d,p,r)}const s=t[e];let o=n,a=i;for(Kl(t,n,e),r(t[i],s)>0&&Kl(t,n,i);o<a;){for(Kl(t,o,a),++o,--a;r(t[o],s)<0;)++o;for(;r(t[a],s)>0;)--a}r(t[n],s)===0?Kl(t,n,a):(++a,Kl(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function Kl(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Sg(t,e,n){if(t=Float64Array.from(KB(t,n)),!!(i=t.length)){if((e=+e)<=0||i<2)return Mg(t);if(e>=1)return Zs(t);var i,r=(i-1)*e,s=Math.floor(r),o=Zs(K3(t,s).subarray(0,s+1)),a=Mg(t.subarray(s+1));return o+(a-o)*(r-s)}}function X3(t,e,n=V3){if(!!(i=t.length)){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),o=+n(t[s],s,t),a=+n(t[s+1],s+1,t);return o+(a-o)*(r-s)}}function tz(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of t)(s=e(s,++r,t))!=null&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function Q3(t,e){return Sg(t,.5,e)}function*ez(t){for(const e of t)yield*e}function Z3(t){return Array.from(ez(t))}function In(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function J3(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function nz(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Yf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function xa(t){return t=Yf(Math.abs(t)),t?t[1]:NaN}function iz(t,e){return function(n,i){for(var r=n.length,s=[],o=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[o=(o+1)%t.length];return s.reverse().join(e)}}function rz(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var sz=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ba(t){if(!(e=sz.exec(t)))throw new Error("invalid format: "+t);var e;return new Tg({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ba.prototype=Tg.prototype;function Tg(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Tg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function oz(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var tE;function az(t,e){var n=Yf(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(tE=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Yf(t,Math.max(0,e+s-1))[0]}function eE(t,e){var n=Yf(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var nE={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:nz,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>eE(t*100,e),r:eE,s:az,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function iE(t){return t}var rE=Array.prototype.map,sE=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function oE(t){var e=t.grouping===void 0||t.thousands===void 0?iE:iz(rE.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?iE:rz(rE.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=ba(f);var h=f.fill,d=f.align,p=f.sign,g=f.symbol,m=f.zero,y=f.width,_=f.comma,v=f.precision,x=f.trim,w=f.type;w==="n"?(_=!0,w="g"):nE[w]||(v===void 0&&(v=12),x=!0,w="g"),(m||h==="0"&&d==="=")&&(m=!0,h="0",d="=");var k=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",b=g==="$"?i:/[%p]/.test(w)?o:"",C=nE[w],T=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function M(S){var $=k,O=b,U,N,R;if(w==="c")O=C(S)+O,S="";else{S=+S;var z=S<0||1/S<0;if(S=isNaN(S)?l:C(Math.abs(S),v),x&&(S=oz(S)),z&&+S==0&&p!=="+"&&(z=!1),$=(z?p==="("?p:a:p==="-"||p==="("?"":p)+$,O=(w==="s"?sE[8+tE/3]:"")+O+(z&&p==="("?")":""),T){for(U=-1,N=S.length;++U<N;)if(R=S.charCodeAt(U),48>R||R>57){O=(R===46?r+S.slice(U+1):S.slice(U))+O,S=S.slice(0,U);break}}}_&&!m&&(S=e(S,1/0));var q=$.length+S.length+O.length,J=q<y?new Array(y-q+1).join(h):"";switch(_&&m&&(S=e(J+S,J.length?y-O.length:1/0),J=""),d){case"<":S=$+S+O+J;break;case"=":S=$+J+S+O;break;case"^":S=J.slice(0,q=J.length>>1)+$+S+O+J.slice(q);break;default:S=J+$+S+O;break}return s(S)}return M.toString=function(){return f+""},M}function c(f,h){var d=u((f=ba(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(xa(h)/3)))*3,g=Math.pow(10,-p),m=sE[8+p/3];return function(y){return d(g*y)+m}}return{format:u,formatPrefix:c}}var Gf,Kf,Dg;lz({thousands:",",grouping:[3],currency:["$",""]});function lz(t){return Gf=oE(t),Kf=Gf.format,Dg=Gf.formatPrefix,Gf}function aE(t){return Math.max(0,-xa(Math.abs(t)))}function lE(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xa(e)/3)))*3-xa(Math.abs(t)))}function uE(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xa(e)-xa(t))+1}var $g=new Date,Og=new Date;function _e(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=function(s){return t(s=new Date(+s)),s},r.ceil=function(s){return t(s=new Date(s-1)),e(s,1),t(s),s},r.round=function(s){var o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=function(s,o){return e(s=new Date(+s),o==null?1:Math.floor(o)),s},r.range=function(s,o,a){var l=[],u;if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;do l.push(u=new Date(+s)),e(s,a),t(s);while(u<s&&s<o);return l},r.filter=function(s){return _e(function(o){if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},function(o,a){if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););})},n&&(r.count=function(s,o){return $g.setTime(+s),Og.setTime(+o),t($g),t(Og),Math.floor(n($g,Og))},r.every=function(s){return s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?function(o){return i(o)%s==0}:function(o){return r.count(0,o)%s==0}):r}),r}var Ng=_e(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Ng.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?_e(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Ng};var Fg=Ng;const fr=1e3,Zn=fr*60,hr=Zn*60,Js=hr*24,Pg=Js*7,cE=Js*30,Rg=Js*365;var uz=_e(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*fr)},function(t,e){return(e-t)/fr},function(t){return t.getUTCSeconds()}),Yr=uz,cz=_e(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*fr)},function(t,e){t.setTime(+t+e*Zn)},function(t,e){return(e-t)/Zn},function(t){return t.getMinutes()}),Lg=cz,fz=_e(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*fr-t.getMinutes()*Zn)},function(t,e){t.setTime(+t+e*hr)},function(t,e){return(e-t)/hr},function(t){return t.getHours()}),Ig=fz,hz=_e(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Zn)/Js,t=>t.getDate()-1),Gr=hz;function to(t){return _e(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Zn)/Pg})}var Xl=to(0),Bg=to(1);to(2);to(3);var Ql=to(4);to(5);to(6);var dz=_e(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),Xf=dz,fE=_e(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});fE.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:_e(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};var Kr=fE,pz=_e(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Zn)},function(t,e){return(e-t)/Zn},function(t){return t.getUTCMinutes()}),zg=pz,gz=_e(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*hr)},function(t,e){return(e-t)/hr},function(t){return t.getUTCHours()}),Ug=gz,mz=_e(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Js},function(t){return t.getUTCDate()-1}),Xr=mz;function eo(t){return _e(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/Pg})}var Zl=eo(0),jg=eo(1);eo(2);eo(3);var Jl=eo(4);eo(5);eo(6);var yz=_e(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),Qf=yz,hE=_e(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});hE.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:_e(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};var Qr=hE;function dE(t,e,n,i,r,s){const o=[[Yr,1,fr],[Yr,5,5*fr],[Yr,15,15*fr],[Yr,30,30*fr],[s,1,Zn],[s,5,5*Zn],[s,15,15*Zn],[s,30,30*Zn],[r,1,hr],[r,3,3*hr],[r,6,6*hr],[r,12,12*hr],[i,1,Js],[i,2,2*Js],[n,1,Pg],[e,1,cE],[e,3,3*cE],[t,1,Rg]];function a(u,c,f){const h=c<u;h&&([u,c]=[c,u]);const d=f&&typeof f.range=="function"?f:l(u,c,f),p=d?d.range(u,+c+1):[];return h?p.reverse():p}function l(u,c,f){const h=Math.abs(c-u)/f,d=Yl(([,,m])=>m).right(o,h);if(d===o.length)return t.every(Vr(u/Rg,c/Rg,f));if(d===0)return Fg.every(Math.max(Vr(u,c,f),1));const[p,g]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return p.every(g)}return[a,l]}const[_z,vz]=dE(Qr,Qf,Zl,Xr,Ug,zg),[xz,bz]=dE(Kr,Xf,Xl,Gr,Ig,Lg),Pe="year",Bn="quarter",Xe="month",ve="week",zn="date",Qe="day",dr="dayofyear",Jn="hours",ti="minutes",mi="seconds",Ui="milliseconds",pE=[Pe,Bn,Xe,ve,zn,Qe,dr,Jn,ti,mi,Ui],qg=pE.reduce((t,e,n)=>(t[e]=1+n,t),{});function gE(t){const e=pt(t).slice(),n={};return e.length||I("Missing time unit."),e.forEach(r=>{gt(qg,r)?n[r]=1:I("Invalid time unit: ".concat(r,"."))}),(n[ve]||n[Qe]?1:0)+(n[Bn]||n[Xe]||n[zn]?1:0)+(n[dr]?1:0)>1&&I("Incompatible time units: ".concat(t)),e.sort((r,s)=>qg[r]-qg[s]),e}const wz={[Pe]:"%Y ",[Bn]:"Q%q ",[Xe]:"%b ",[zn]:"%d ",[ve]:"W%U ",[Qe]:"%a ",[dr]:"%j ",[Jn]:"%H:00",[ti]:"00:%M",[mi]:":%S",[Ui]:".%L",["".concat(Pe,"-").concat(Xe)]:"%Y-%m ",["".concat(Pe,"-").concat(Xe,"-").concat(zn)]:"%Y-%m-%d ",["".concat(Jn,"-").concat(ti)]:"%H:%M"};function Ez(t,e){const n=bt({},wz,e),i=gE(t),r=i.length;let s="",o=0,a,l;for(o=0;o<r;)for(a=i.length;a>o;--a)if(l=i.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const no=new Date;function Hg(t){return no.setFullYear(t),no.setMonth(0),no.setDate(1),no.setHours(0,0,0,0),no}function kz(t){return mE(new Date(t))}function Az(t){return Wg(new Date(t))}function mE(t){return Gr.count(Hg(t.getFullYear())-1,t)}function Wg(t){return Xl.count(Hg(t.getFullYear())-1,t)}function Vg(t){return Hg(t).getDay()}function Cz(t,e,n,i,r,s,o){if(0<=t&&t<100){const a=new Date(-1,e,n,i,r,s,o);return a.setFullYear(t),a}return new Date(t,e,n,i,r,s,o)}function Mz(t){return yE(new Date(t))}function Sz(t){return Yg(new Date(t))}function yE(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Xr.count(e-1,t)}function Yg(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Zl.count(e-1,t)}function Gg(t){return no.setTime(Date.UTC(t,0,1)),no.getUTCDay()}function Tz(t,e,n,i,r,s,o){if(0<=t&&t<100){const a=new Date(Date.UTC(-1,e,n,i,r,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(t,e,n,i,r,s,o))}function _E(t,e,n,i,r){const s=e||1,o=Nt(t),a=(y,_,v)=>(v=v||y,Dz(n[v],i[v],y===o&&s,_)),l=new Date,u=zi(t),c=u[Pe]?a(Pe):Ge(2012),f=u[Xe]?a(Xe):u[Bn]?a(Bn):Gs,h=u[ve]&&u[Qe]?a(Qe,1,ve+Qe):u[ve]?a(ve,1):u[Qe]?a(Qe,1):u[zn]?a(zn,1):u[dr]?a(dr,1):jl,d=u[Jn]?a(Jn):Gs,p=u[ti]?a(ti):Gs,g=u[mi]?a(mi):Gs,m=u[Ui]?a(Ui):Gs;return function(y){l.setTime(+y);const _=c(l);return r(_,f(l),h(l,_),d(l),p(l),g(l),m(l))}}function Dz(t,e,n,i){const r=n<=1?t:i?(s,o)=>i+n*Math.floor((t(s,o)-i)/n):(s,o)=>n*Math.floor(t(s,o)/n);return e?(s,o)=>e(r(s,o),o):r}function wa(t,e,n){return e+t*7-(n+6)%7}const $z={[Pe]:t=>t.getFullYear(),[Bn]:t=>Math.floor(t.getMonth()/3),[Xe]:t=>t.getMonth(),[zn]:t=>t.getDate(),[Jn]:t=>t.getHours(),[ti]:t=>t.getMinutes(),[mi]:t=>t.getSeconds(),[Ui]:t=>t.getMilliseconds(),[dr]:t=>mE(t),[ve]:t=>Wg(t),[ve+Qe]:(t,e)=>wa(Wg(t),t.getDay(),Vg(e)),[Qe]:(t,e)=>wa(1,t.getDay(),Vg(e))},Oz={[Bn]:t=>3*t,[ve]:(t,e)=>wa(t,0,Vg(e))};function Nz(t,e){return _E(t,e||1,$z,Oz,Cz)}const Fz={[Pe]:t=>t.getUTCFullYear(),[Bn]:t=>Math.floor(t.getUTCMonth()/3),[Xe]:t=>t.getUTCMonth(),[zn]:t=>t.getUTCDate(),[Jn]:t=>t.getUTCHours(),[ti]:t=>t.getUTCMinutes(),[mi]:t=>t.getUTCSeconds(),[Ui]:t=>t.getUTCMilliseconds(),[dr]:t=>yE(t),[ve]:t=>Yg(t),[Qe]:(t,e)=>wa(1,t.getUTCDay(),Gg(e)),[ve+Qe]:(t,e)=>wa(Yg(t),t.getUTCDay(),Gg(e))},Pz={[Bn]:t=>3*t,[ve]:(t,e)=>wa(t,0,Gg(e))};function Rz(t,e){return _E(t,e||1,Fz,Pz,Tz)}const Lz={[Pe]:Kr,[Bn]:Xf.every(3),[Xe]:Xf,[ve]:Xl,[zn]:Gr,[Qe]:Gr,[dr]:Gr,[Jn]:Ig,[ti]:Lg,[mi]:Yr,[Ui]:Fg},Iz={[Pe]:Qr,[Bn]:Qf.every(3),[Xe]:Qf,[ve]:Zl,[zn]:Xr,[Qe]:Xr,[dr]:Xr,[Jn]:Ug,[ti]:zg,[mi]:Yr,[Ui]:Fg};function tu(t){return Lz[t]}function eu(t){return Iz[t]}function vE(t,e,n){return t?t.offset(e,n):void 0}function Bz(t,e,n){return vE(tu(t),e,n)}function zz(t,e,n){return vE(eu(t),e,n)}function xE(t,e,n,i){return t?t.range(e,n,i):void 0}function Uz(t,e,n,i){return xE(tu(t),e,n,i)}function jz(t,e,n,i){return xE(eu(t),e,n,i)}const nu=1e3,iu=nu*60,ru=iu*60,Zf=ru*24,qz=Zf*7,bE=Zf*30,Kg=Zf*365,wE=[Pe,Xe,zn,Jn,ti,mi,Ui],su=wE.slice(0,-1),ou=su.slice(0,-1),au=ou.slice(0,-1),Hz=au.slice(0,-1),Wz=[Pe,ve],EE=[Pe,Xe],kE=[Pe],lu=[[su,1,nu],[su,5,5*nu],[su,15,15*nu],[su,30,30*nu],[ou,1,iu],[ou,5,5*iu],[ou,15,15*iu],[ou,30,30*iu],[au,1,ru],[au,3,3*ru],[au,6,6*ru],[au,12,12*ru],[Hz,1,Zf],[Wz,1,qz],[EE,1,bE],[EE,3,3*bE],[kE,1,Kg]];function Vz(t){const e=t.extent,n=t.maxbins||40,i=Math.abs(Wf(e))/n;let r=Yl(a=>a[2]).right(lu,i),s,o;return r===lu.length?(s=kE,o=Vr(e[0]/Kg,e[1]/Kg,n)):r?(r=lu[i/lu[r-1][2]<lu[r][2]/i?r-1:r],s=r[0],o=r[1]):(s=wE,o=Math.max(Vr(e[0],e[1],n),1)),{units:s,step:o}}function Xg(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qg(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function uu(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function AE(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=cu(r),c=fu(r),f=cu(s),h=fu(s),d=cu(o),p=fu(o),g=cu(a),m=fu(a),y=cu(l),_=fu(l),v={a:z,A:q,b:J,B:yt,c:null,d:$E,e:$E,f:gU,g:AU,G:MU,H:hU,I:dU,j:pU,L:OE,m:mU,M:yU,p:Ot,q:Dt,Q:IE,s:BE,S:_U,u:vU,U:xU,V:bU,w:wU,W:EU,x:null,X:null,y:kU,Y:CU,Z:SU,"%":LE},x={a:qt,A:Xt,b:ne,B:Mn,c:null,d:FE,e:FE,f:OU,g:jU,G:HU,H:TU,I:DU,j:$U,L:PE,m:NU,M:FU,p:ce,q:ge,Q:IE,s:BE,S:PU,u:RU,U:LU,V:IU,w:BU,W:zU,x:null,X:null,y:UU,Y:qU,Z:WU,"%":LE},w={a:M,A:S,b:$,B:O,c:U,d:TE,e:TE,f:lU,g:SE,G:ME,H:DE,I:DE,j:rU,L:aU,m:iU,M:sU,p:T,q:nU,Q:cU,s:fU,S:oU,u:Qz,U:Zz,V:Jz,w:Xz,W:tU,x:N,X:R,y:SE,Y:ME,Z:eU,"%":uU};v.x=k(n,v),v.X=k(i,v),v.c=k(e,v),x.x=k(n,x),x.X=k(i,x),x.c=k(e,x);function k(Q,mt){return function(wt){var W=[],A=-1,D=0,F=Q.length,B,j,K;for(wt instanceof Date||(wt=new Date(+wt));++A<F;)Q.charCodeAt(A)===37&&(W.push(Q.slice(D,A)),(j=CE[B=Q.charAt(++A)])!=null?B=Q.charAt(++A):j=B==="e"?" ":"0",(K=mt[B])&&(B=K(wt,j)),W.push(B),D=A+1);return W.push(Q.slice(D,A)),W.join("")}}function b(Q,mt){return function(wt){var W=uu(1900,void 0,1),A=C(W,Q,wt+="",0),D,F;if(A!=wt.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(mt&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(D=Qg(uu(W.y,0,1)),F=D.getUTCDay(),D=F>4||F===0?jg.ceil(D):jg(D),D=Xr.offset(D,(W.V-1)*7),W.y=D.getUTCFullYear(),W.m=D.getUTCMonth(),W.d=D.getUTCDate()+(W.w+6)%7):(D=Xg(uu(W.y,0,1)),F=D.getDay(),D=F>4||F===0?Bg.ceil(D):Bg(D),D=Gr.offset(D,(W.V-1)*7),W.y=D.getFullYear(),W.m=D.getMonth(),W.d=D.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),F="Z"in W?Qg(uu(W.y,0,1)).getUTCDay():Xg(uu(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(F+5)%7:W.w+W.U*7-(F+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,Qg(W)):Xg(W)}}function C(Q,mt,wt,W){for(var A=0,D=mt.length,F=wt.length,B,j;A<D;){if(W>=F)return-1;if(B=mt.charCodeAt(A++),B===37){if(B=mt.charAt(A++),j=w[B in CE?mt.charAt(A++):B],!j||(W=j(Q,wt,W))<0)return-1}else if(B!=wt.charCodeAt(W++))return-1}return W}function T(Q,mt,wt){var W=u.exec(mt.slice(wt));return W?(Q.p=c.get(W[0].toLowerCase()),wt+W[0].length):-1}function M(Q,mt,wt){var W=d.exec(mt.slice(wt));return W?(Q.w=p.get(W[0].toLowerCase()),wt+W[0].length):-1}function S(Q,mt,wt){var W=f.exec(mt.slice(wt));return W?(Q.w=h.get(W[0].toLowerCase()),wt+W[0].length):-1}function $(Q,mt,wt){var W=y.exec(mt.slice(wt));return W?(Q.m=_.get(W[0].toLowerCase()),wt+W[0].length):-1}function O(Q,mt,wt){var W=g.exec(mt.slice(wt));return W?(Q.m=m.get(W[0].toLowerCase()),wt+W[0].length):-1}function U(Q,mt,wt){return C(Q,e,mt,wt)}function N(Q,mt,wt){return C(Q,n,mt,wt)}function R(Q,mt,wt){return C(Q,i,mt,wt)}function z(Q){return o[Q.getDay()]}function q(Q){return s[Q.getDay()]}function J(Q){return l[Q.getMonth()]}function yt(Q){return a[Q.getMonth()]}function Ot(Q){return r[+(Q.getHours()>=12)]}function Dt(Q){return 1+~~(Q.getMonth()/3)}function qt(Q){return o[Q.getUTCDay()]}function Xt(Q){return s[Q.getUTCDay()]}function ne(Q){return l[Q.getUTCMonth()]}function Mn(Q){return a[Q.getUTCMonth()]}function ce(Q){return r[+(Q.getUTCHours()>=12)]}function ge(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var mt=k(Q+="",v);return mt.toString=function(){return Q},mt},parse:function(Q){var mt=b(Q+="",!1);return mt.toString=function(){return Q},mt},utcFormat:function(Q){var mt=k(Q+="",x);return mt.toString=function(){return Q},mt},utcParse:function(Q){var mt=b(Q+="",!0);return mt.toString=function(){return Q},mt}}}var CE={"-":"",_:" ","0":"0"},xe=/^\s*\d+/,Yz=/^%/,Gz=/[\\^$*+?|[\]().{}]/g;function Lt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Kz(t){return t.replace(Gz,"\\$&")}function cu(t){return new RegExp("^(?:"+t.map(Kz).join("|")+")","i")}function fu(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Xz(t,e,n){var i=xe.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Qz(t,e,n){var i=xe.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Zz(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Jz(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function tU(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function ME(t,e,n){var i=xe.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function SE(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function eU(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function nU(t,e,n){var i=xe.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function iU(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function TE(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function rU(t,e,n){var i=xe.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function DE(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function sU(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function oU(t,e,n){var i=xe.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function aU(t,e,n){var i=xe.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function lU(t,e,n){var i=xe.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function uU(t,e,n){var i=Yz.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function cU(t,e,n){var i=xe.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function fU(t,e,n){var i=xe.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function $E(t,e){return Lt(t.getDate(),e,2)}function hU(t,e){return Lt(t.getHours(),e,2)}function dU(t,e){return Lt(t.getHours()%12||12,e,2)}function pU(t,e){return Lt(1+Gr.count(Kr(t),t),e,3)}function OE(t,e){return Lt(t.getMilliseconds(),e,3)}function gU(t,e){return OE(t,e)+"000"}function mU(t,e){return Lt(t.getMonth()+1,e,2)}function yU(t,e){return Lt(t.getMinutes(),e,2)}function _U(t,e){return Lt(t.getSeconds(),e,2)}function vU(t){var e=t.getDay();return e===0?7:e}function xU(t,e){return Lt(Xl.count(Kr(t)-1,t),e,2)}function NE(t){var e=t.getDay();return e>=4||e===0?Ql(t):Ql.ceil(t)}function bU(t,e){return t=NE(t),Lt(Ql.count(Kr(t),t)+(Kr(t).getDay()===4),e,2)}function wU(t){return t.getDay()}function EU(t,e){return Lt(Bg.count(Kr(t)-1,t),e,2)}function kU(t,e){return Lt(t.getFullYear()%100,e,2)}function AU(t,e){return t=NE(t),Lt(t.getFullYear()%100,e,2)}function CU(t,e){return Lt(t.getFullYear()%1e4,e,4)}function MU(t,e){var n=t.getDay();return t=n>=4||n===0?Ql(t):Ql.ceil(t),Lt(t.getFullYear()%1e4,e,4)}function SU(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Lt(e/60|0,"0",2)+Lt(e%60,"0",2)}function FE(t,e){return Lt(t.getUTCDate(),e,2)}function TU(t,e){return Lt(t.getUTCHours(),e,2)}function DU(t,e){return Lt(t.getUTCHours()%12||12,e,2)}function $U(t,e){return Lt(1+Xr.count(Qr(t),t),e,3)}function PE(t,e){return Lt(t.getUTCMilliseconds(),e,3)}function OU(t,e){return PE(t,e)+"000"}function NU(t,e){return Lt(t.getUTCMonth()+1,e,2)}function FU(t,e){return Lt(t.getUTCMinutes(),e,2)}function PU(t,e){return Lt(t.getUTCSeconds(),e,2)}function RU(t){var e=t.getUTCDay();return e===0?7:e}function LU(t,e){return Lt(Zl.count(Qr(t)-1,t),e,2)}function RE(t){var e=t.getUTCDay();return e>=4||e===0?Jl(t):Jl.ceil(t)}function IU(t,e){return t=RE(t),Lt(Jl.count(Qr(t),t)+(Qr(t).getUTCDay()===4),e,2)}function BU(t){return t.getUTCDay()}function zU(t,e){return Lt(jg.count(Qr(t)-1,t),e,2)}function UU(t,e){return Lt(t.getUTCFullYear()%100,e,2)}function jU(t,e){return t=RE(t),Lt(t.getUTCFullYear()%100,e,2)}function qU(t,e){return Lt(t.getUTCFullYear()%1e4,e,4)}function HU(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Jl(t):Jl.ceil(t),Lt(t.getUTCFullYear()%1e4,e,4)}function WU(){return"+0000"}function LE(){return"%"}function IE(t){return+t}function BE(t){return Math.floor(+t/1e3)}var Ea,Zg,zE,Jg,UE;VU({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function VU(t){return Ea=AE(t),Zg=Ea.format,zE=Ea.parse,Jg=Ea.utcFormat,UE=Ea.utcParse,Ea}function hu(t){const e={};return n=>e[n]||(e[n]=t(n))}function YU(t,e){return n=>{const i=t(n),r=i.indexOf(e);if(r<0)return i;let s=GU(i,r);const o=s<i.length?i.slice(s):"";for(;--s>r;)if(i[s]!=="0"){++s;break}return i.slice(0,s)+o}}function GU(t,e){let n=t.lastIndexOf("e"),i;if(n>0)return n;for(n=t.length;--n>e;)if(i=t.charCodeAt(n),i>=48&&i<=57)return n+1}function jE(t){const e=hu(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(i){const r=ba(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return YU(e(r),e(".1f")(1)[1])}else return e(r)},formatSpan(i,r,s,o){o=ba(o==null?",f":o);const a=Vr(i,r,s),l=Math.max(Math.abs(i),Math.abs(r));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=lE(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=uE(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=aE(a))||(o.precision=u-(o.type==="%")*2);break}}return e(o)}}}let t1;KU();function KU(){return t1=jE({format:Kf,formatPrefix:Dg})}function qE(t){return jE(oE(t))}function e1(t){return arguments.length?t1=qE(t):t1}function HE(t,e,n){n=n||{},Mt(n)||I("Invalid time multi-format specifier: ".concat(n));const i=e(mi),r=e(ti),s=e(Jn),o=e(zn),a=e(ve),l=e(Xe),u=e(Bn),c=e(Pe),f=t(n[Ui]||".%L"),h=t(n[mi]||":%S"),d=t(n[ti]||"%I:%M"),p=t(n[Jn]||"%I %p"),g=t(n[zn]||n[Qe]||"%a %d"),m=t(n[ve]||"%b %d"),y=t(n[Xe]||"%B"),_=t(n[Bn]||"%B"),v=t(n[Pe]||"%Y");return x=>(i(x)<x?f:r(x)<x?h:s(x)<x?d:o(x)<x?p:l(x)<x?a(x)<x?g:m:c(x)<x?u(x)<x?y:_:v)(x)}function WE(t){const e=hu(t.format),n=hu(t.utcFormat);return{timeFormat:i=>te(i)?e(i):HE(e,tu,i),utcFormat:i=>te(i)?n(i):HE(n,eu,i),timeParse:hu(t.parse),utcParse:hu(t.utcParse)}}let n1;XU();function XU(){return n1=WE({format:Zg,parse:zE,utcFormat:Jg,utcParse:UE})}function VE(t){return WE(AE(t))}function Jf(t){return arguments.length?n1=VE(t):n1}const i1=(t,e)=>bt({},t,e);function QU(t,e){const n=t?qE(t):e1(),i=e?VE(e):Jf();return i1(n,i)}function ZU(t,e){const n=arguments.length;return n&&n!==2&&I("defaultLocale expects either zero or two arguments."),n?i1(e1(t),Jf(e)):i1(e1(),Jf())}const JU=/^(data:|([A-Za-z]+:)?\/\/)/,tj=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,ej=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,YE="file://";function nj(t,e){return n=>({options:n||{},sanitize:rj,load:ij,fileAccess:!!e,file:sj(e),http:aj(t)})}async function ij(t,e){const n=await this.sanitize(t,e),i=n.href;return n.localFile?this.file(i):this.http(i,e)}async function rj(t,e){e=bt({},this.options,e);const n=this.fileAccess,i={href:null};let r,s,o;const a=tj.test(t.replace(ej,""));(t==null||typeof t!="string"||!a)&&I("Sanitize failure, invalid URI: "+ct(t));const l=JU.test(t);return(o=e.baseURL)&&!l&&(!t.startsWith("/")&&!o.endsWith("/")&&(t="/"+t),t=o+t),s=(r=t.startsWith(YE))||e.mode==="file"||e.mode!=="http"&&!l&&n,r?t=t.slice(YE.length):t.startsWith("//")&&(e.defaultProtocol==="file"?(t=t.slice(2),s=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!s}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),e.context==="image"&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function sj(t){return t?e=>new Promise((n,i)=>{t.readFile(e,(r,s)=>{r?i(r):n(s)})}):oj}async function oj(){I("No file system access.")}function aj(t){return t?async function(e,n){const i=bt({},this.options.http,n),r=n&&n.response,s=await t(e,i);return s.ok?At(s[r])?s[r]():s.text():I(s.status+""+s.statusText)}:lj}async function lj(){I("No HTTP fetch method available.")}const uj=t=>t!=null&&t===t,cj=t=>t==="true"||t==="false"||t===!0||t===!1,fj=t=>!Number.isNaN(Date.parse(t)),GE=t=>!Number.isNaN(+t)&&!(t instanceof Date),hj=t=>GE(t)&&Number.isInteger(+t),KE={boolean:I3,integer:Ye,number:Ye,date:B3,string:z3,unknown:gn},th=[cj,hj,GE,fj],dj=["boolean","integer","number","date"];function pj(t,e){if(!t||!t.length)return"unknown";const n=t.length,i=th.length,r=th.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=e?t[s][e]:t[s],a=0;a<i;++a)if(r[a]&&uj(l)&&!th[a](l)&&(r[a]=0,++o,o===th.length))return"string";return dj[r.reduce((s,o)=>s===0?o:s,0)-1]}function gj(t,e){return e.reduce((n,i)=>(n[i]=pj(t,i),n),{})}function XE(t){const e=function(n,i){const r={delimiter:t};return r1(n,i?bt(i,r):r)};return e.responseType="text",e}function r1(t,e){return e.header&&(t=e.header.map(ct).join(e.delimiter)+`
`+t),BB(e.delimiter).parse(t+"")}r1.responseType="text";function mj(t){return typeof Buffer=="function"&&At(Buffer.isBuffer)?Buffer.isBuffer(t):!1}function s1(t,e){const n=e&&e.property?Ln(e.property):gn;return Mt(t)&&!mj(t)?yj(n(t),e):n(JSON.parse(t))}s1.responseType="json";function yj(t,e){return!lt(t)&&MB(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}const _j={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function QE(t,e){let n,i,r,s;return t=s1(t,e),e&&e.feature?(n=qB,r=e.feature):e&&e.mesh?(n=WB,r=e.mesh,s=_j[e.filter]):I("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[r])?n(t,i,s):I("Invalid TopoJSON object: "+r),i&&i.features||[i]}QE.responseType="json";const o1={dsv:r1,csv:XE(","),tsv:XE("	"),json:s1,topojson:QE};function ZE(t,e){return arguments.length>1?(o1[t]=e,this):gt(o1,t)?o1[t]:null}function vj(t){const e=ZE(t);return e&&e.responseType||"text"}function xj(t,e,n,i){e=e||{};const r=ZE(e.type||"json");return r||I("Unknown data format type: "+e.type),t=r(t,e),e.parse&&bj(t,e.parse,n,i),gt(t,"columns")&&delete t.columns,t}function bj(t,e,n,i){if(!t.length)return;const r=Jf();n=n||r.timeParse,i=i||r.utcParse;let s=t.columns||Object.keys(t[0]),o,a,l,u,c,f;e==="auto"&&(e=gj(t,s)),s=Object.keys(e);const h=s.map(d=>{const p=e[d];let g,m;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),m=g[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1)),(g[0]==="utc"?i:n)(m);if(!KE[p])throw Error("Illegal format pattern: "+d+":"+p);return KE[p]});for(l=0,c=t.length,f=s.length;l<c;++l)for(o=t[l],u=0;u<f;++u)a=s[u],o[a]=h[u](o[a])}const a1=nj(typeof fetch!="undefined"&&fetch,null);function eh(t){const e=t||gn,n=[],i={};return n.add=r=>{const s=e(r);return i[s]||(i[s]=1,n.push(r)),n},n.remove=r=>{const s=e(r);if(i[s]){i[s]=0;const o=n.indexOf(r);o>=0&&n.splice(o,1)}return n},n}async function nh(t,e){try{await e(t)}catch(n){t.error(n)}}const JE=Symbol("vega_id");let wj=1;function l1(t){return!!(t&&ut(t))}function ut(t){return t[JE]}function t5(t,e){return t[JE]=e,t}function Ut(t){const e=t===Object(t)?t:{data:t};return ut(e)?e:t5(e,wj++)}function u1(t){return ih(t,Ut({}))}function ih(t,e){for(const n in t)e[n]=t[n];return e}function e5(t,e){return t5(e,ut(t))}function io(t,e){return t?e?(n,i)=>t(n,i)||ut(e(n))-ut(e(i)):(n,i)=>t(n,i)||ut(n)-ut(i):null}function n5(t){return t&&t.constructor===ka}function ka(){const t=[],e=[],n=[],i=[],r=[];let s=null,o=!1;return{constructor:ka,insert(a){const l=pt(a),u=l.length;for(let c=0;c<u;++c)t.push(l[c]);return this},remove(a){const l=At(a)?i:e,u=pt(a),c=u.length;for(let f=0;f<c;++f)l.push(u[f]);return this},modify(a,l,u){const c={field:l,value:Ge(u)};return At(a)?(c.filter=a,r.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return At(a)?r.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let f,h,d,p,g,m;for(f=0,h=l.length;f<h;++f)u[ut(l[f])]=1;for(f=0,h=e.length;f<h;++f)g=e[f],u[ut(g)]=-1;for(f=0,h=i.length;f<h;++f)p=i[f],l.forEach(_=>{p(_)&&(u[ut(_)]=-1)});for(f=0,h=t.length;f<h;++f)g=t[f],m=ut(g),u[m]?u[m]=1:a.add.push(Ut(t[f]));for(f=0,h=l.length;f<h;++f)g=l[f],u[ut(g)]<0&&a.rem.push(g);function y(_,v,x){x?_[v]=x(_):a.encode=v,o||(c[ut(_)]=_)}for(f=0,h=n.length;f<h;++f)d=n[f],g=d.tuple,p=d.field,m=u[ut(g)],m>0&&(y(g,p,d.value),a.modifies(p));for(f=0,h=r.length;f<h;++f)d=r[f],p=d.filter,l.forEach(_=>{p(_)&&u[ut(_)]>0&&y(_,d.field,d.value)}),a.modifies(d.field);if(o)a.mod=e.length||i.length?l.filter(_=>u[ut(_)]>0):l.slice();else for(m in c)a.mod.push(c[m]);return(s||s==null&&(e.length||i.length))&&a.clean(!0),a}}}const rh="_:mod:_";function c1(){Object.defineProperty(this,rh,{writable:!0,value:{}})}c1.prototype={set(t,e,n,i){const r=this,s=r[t],o=r[rh];return e!=null&&e>=0?(s[e]!==n||i)&&(s[e]=n,o[e+":"+t]=-1,o[t]=-1):(s!==n||i)&&(r[t]=n,o[t]=lt(n)?1+n.length:-1),r},modified(t,e){const n=this[rh];if(arguments.length){if(lt(t)){for(let i=0;i<t.length;++i)if(n[t[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[rh]={},this}};let Ej=0;const kj="pulse",Aj=new c1,Cj=1,Mj=2;function Qt(t,e,n,i){this.id=++Ej,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i)}function i5(t){return function(e){const n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this)}}Qt.prototype={targets(){return this._targets||(this._targets=eh(Bf))},set(t){return this.value!==t?(this.value=t,1):0},skip:i5(Cj),modified:i5(Mj),parameters(t,e,n){e=e!==!1;const i=this._argval=this._argval||new c1,r=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(f,h,d)=>{d instanceof Qt?(d!==this&&(e&&d.targets().add(this),s.push(d)),r.push({op:d,name:f,index:h})):i.set(f,h,d)};for(o in t)if(a=t[o],o===kj)pt(a).forEach(f=>{f instanceof Qt?f!==this&&(f.targets().add(this),s.push(f)):I("Pulse parameters must be operator instances.")}),this.source=a;else if(lt(a))for(i.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(r.initonly=!0),s},marshall(t){const e=this._argval||Aj,n=this._argops;let i,r,s,o;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],s=i.op,o=s.modified()&&s.stamp===t,e.set(i.name,i.index,s.value,o);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,i,r;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};function Sj(t,e,n,i){let r=1,s;return t instanceof Qt?s=t:t&&t.prototype instanceof Qt?s=new t:At(t)?s=new Qt(null,t):(r=0,s=new Qt(t,e)),this.rank(s),r&&(i=n,n=e),n&&this.connect(s,s.parameters(n,i)),this.touch(s),s}function Tj(t,e){const n=t.rank,i=e.length;for(let r=0;r<i;++r)if(n<e[r].rank){this.rerank(t);return}}let Dj=0;function f1(t,e,n){this.id=++Dj,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function Zr(t,e,n){return new f1(t,e,n)}f1.prototype={_filter:gi,_apply:gn,targets(){return this._targets||(this._targets=eh(Bf))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=Zr(t);return this.targets().add(e),e},apply(t){const e=Zr(null,t);return this.targets().add(e),e},merge(){const t=Zr();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=Zr();return this.targets().add(Zr(null,null,R3(t,n=>{const i=n.dataflow;e.receive(n),i&&i.run&&i.run()}))),e},between(t,e){let n=!1;return t.targets().add(Zr(null,null,()=>n=!0)),e.targets().add(Zr(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=gi,this._targets=null}};function $j(t,e,n,i){const r=this,s=Zr(n,i),o=function(u){u.dataflow=r;try{s.receive(u)}catch(c){r.error(c)}finally{r.run()}};let a;typeof t=="string"&&typeof document!="undefined"?a=document.querySelectorAll(t):a=pt(t);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(e,o);return s}function Oj(t,e){const n=this.locale();return xj(t,e,n.timeParse,n.utcParse)}function Nj(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))}async function Fj(t,e){const n=this;let i=0,r;try{r=await n.loader().load(t,{context:"dataflow",response:vj(e&&e.type)});try{r=n.parse(r,e)}catch(s){i=-2,n.warn("Data ingestion failed",t,s)}}catch(s){i=-1,n.warn("Loading failed",t,s)}return{data:r,status:i}}async function Pj(t,e,n){const i=this,r=i._pending||Rj(i);r.requests+=1;const s=await i.request(e,n);return i.pulse(t,i.changeset().remove(gi).insert(s.data||[])),r.done(),s}function Rj(t){let e;const n=new Promise(i=>e=i);return n.requests=0,n.done=()=>{--n.requests==0&&(t._pending=null,e(t))},t._pending=n}const Lj={skip:!0};function Ij(t,e,n,i,r){return(t instanceof Qt?zj:Bj)(this,t,e,n,i,r),this}function Bj(t,e,n,i,r,s){const o=bt({},s,Lj);let a,l;At(n)||(n=Ge(n)),i===void 0?a=u=>t.touch(n(u)):At(i)?(l=new Qt(null,i,r,!1),a=u=>{l.evaluate(u);const c=n(u),f=l.value;n5(f)?t.pulse(c,f,s):t.update(c,f,o)}):a=u=>t.update(n(u),i,o),e.apply(a)}function zj(t,e,n,i,r,s){if(i===void 0)e.targets().add(n);else{const o=s||{},a=new Qt(null,Uj(n,i),r,!1);a.modified(o.force),a.rank=e.rank,e.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),t.connect(n,[a]))}}function Uj(t,e){return e=At(e)?e:Ge(e),t?function(n,i){const r=e(n,i);return t.skip()||(t.skip(r!==this.value).value=r),r}:e}function jj(t){t.rank=++this._rank}function qj(t){const e=[t];let n,i,r;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(r=i.length;--r>=0;)e.push(n=i[r]),n===t&&I("Cycle detected in dataflow graph.")}const sh={},ji=1<<0,Jr=1<<1,pr=1<<2,Hj=ji|Jr,r5=ji|pr,Aa=ji|Jr|pr,s5=1<<3,du=1<<4,o5=1<<5,a5=1<<6;function ro(t,e,n){this.dataflow=t,this.stamp=e==null?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function h1(t,e){const n=[];return Qs(t,e,i=>n.push(i)),n}function l5(t,e){const n={};return t.visit(e,i=>{n[ut(i)]=1}),i=>n[ut(i)]?null:i}function oh(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e}ro.prototype={StopPropagation:sh,ADD:ji,REM:Jr,MOD:pr,ADD_REM:Hj,ADD_MOD:r5,ALL:Aa,REFLOW:s5,SOURCE:du,NO_SOURCE:o5,NO_FIELDS:a5,fork(t){return new ro(this.dataflow).init(this,t)},clone(){const t=this.fork(Aa);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(Aa|du)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new ro(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&a5)&&(n.fields=t.fields),e&ji?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&Jr?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&pr?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&o5?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||Aa;return e&ji&&this.add.length||e&Jr&&this.rem.length||e&pr&&this.mod.length},reflow(t){if(t)return this.fork(Aa).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(pr,l5(this,ji))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return lt(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return(e||this.mod.length)&&n?arguments.length?lt(t)?t.some(i=>n[i]):n[t]:!!n:!1},filter(t,e){const n=this;return t&ji&&(n.addF=oh(n.addF,e)),t&Jr&&(n.remF=oh(n.remF,e)),t&pr&&(n.modF=oh(n.modF,e)),t&du&&(n.srcF=oh(n.srcF,e)),n},materialize(t){t=t||Aa;const e=this;return t&ji&&e.addF&&(e.add=h1(e.add,e.addF),e.addF=null),t&Jr&&e.remF&&(e.rem=h1(e.rem,e.remF),e.remF=null),t&pr&&e.modF&&(e.mod=h1(e.mod,e.modF),e.modF=null),t&du&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,i=e;if(t&du)return Qs(n.source,n.srcF,i),n;t&ji&&Qs(n.add,n.addF,i),t&Jr&&Qs(n.rem,n.remF,i),t&pr&&Qs(n.mod,n.modF,i);const r=n.source;if(t&s5&&r){const s=n.add.length+n.mod.length;s===r.length||(s?Qs(r,l5(n,r5),i):Qs(r,n.srcF,i))}return n}};function u5(t,e,n,i){const r=this,s=n.length;let o=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(let a=0;a<s;++a){const l=n[a];if(l.stamp===e){if(l.fields){const u=r.fields||(r.fields={});for(const c in l.fields)u[c]=1}l.changed(r.ADD)&&(o|=r.ADD),l.changed(r.REM)&&(o|=r.REM),l.changed(r.MOD)&&(o|=r.MOD)}}this.changes=o}G(u5,ro,{fork(t){const e=new ro(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?lt(t)?t.some(i=>n[i]):n[t]:0},filter(){I("MultiPulse does not support filtering.")},materialize(){I("MultiPulse does not support materialization.")},visit(t,e){const n=this,i=n.pulses,r=i.length;let s=0;if(t&n.SOURCE)for(;s<r;++s)i[s].visit(t,e);else for(;s<r;++s)i[s].stamp===n.stamp&&i[s].visit(t,e);return n}});async function Wj(t,e,n){const i=this,r=[];if(i._pulse)return c5(i);if(i._pending&&await i._pending,e&&await nh(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const s=++i._clock;i._pulse=new ro(i,s,t),i._touched.forEach(c=>i._enqueue(c,!0)),i._touched=eh(Bf);let o=0,a,l,u;try{for(;i._heap.size()>0;){if(a=i._heap.pop(),a.rank!==a.qrank){i._enqueue(a,!0);continue}l=a.run(i._getPulse(a,t)),l.then?l=await l:l.async&&(r.push(l.async),l=sh),l!==sh&&a._targets&&a._targets.forEach(c=>i._enqueue(c)),++o}}catch(c){i._heap.clear(),u=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${s}: ${o} operators`),u&&(i._postrun=[],i.error(u)),i._postrun.length){const c=i._postrun.sort((f,h)=>h.priority-f.priority);i._postrun=[];for(let f=0;f<c.length;++f)await nh(i,c[f].callback)}return n&&await nh(i,n),r.length&&Promise.all(r).then(c=>i.runAsync(null,()=>{c.forEach(f=>{try{f(i)}catch(h){i.error(h)}})})),i}async function Vj(t,e,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running}function Yj(t,e,n){return this._pulse?c5(this):(this.evaluate(t,e,n),this)}function Gj(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(i){this.error(i)}}function c5(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}function Kj(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function Xj(t,e){const n=t.source,i=this._clock;return n&&lt(n)?new u5(this,i,n.map(r=>r.pulse),e):this._input[t.id]||Qj(this._pulse,n&&n.pulse)}function Qj(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==sh&&(t.source=e.source),t)}const d1={skip:!1,force:!1};function Zj(t,e){const n=e||d1;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function Jj(t,e,n){const i=n||d1;return(t.set(e)||i.force)&&this.touch(t,i),this}function tq(t,e,n){this.touch(t,n||d1);const i=new ro(this,this._clock+(this._pulse?0:1)),r=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,r),this}function eq(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),f5(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let i;return e.length?(i=e[0],e[0]=n,nq(e,0,t)):i=n,i}}}function f5(t,e,n,i){let r,s;const o=t[n];for(;n>e;){if(s=n-1>>1,r=t[s],i(o,r)<0){t[n]=r,n=s;continue}break}return t[n]=o}function nq(t,e,n){const i=e,r=t.length,s=t[e];let o=(e<<1)+1,a;for(;o<r;)a=o+1,a<r&&n(t[o],t[a])>=0&&(o=a),t[e]=t[o],e=o,o=(e<<1)+1;return t[e]=s,f5(t,i,e,n)}function pu(){this.logger(uB()),this.logLevel(A3),this._clock=0,this._rank=0,this._locale=ZU();try{this._loader=a1()}catch{}this._touched=eh(Bf),this._input={},this._pulse=null,this._heap=eq((t,e)=>t.qrank-e.qrank),this._postrun=[]}function gu(t){return function(){return this._log[t].apply(this,arguments)}}pu.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:gu("error"),warn:gu("warn"),info:gu("info"),debug:gu("debug"),logLevel:gu("level"),cleanThreshold:1e4,add:Sj,connect:Tj,rank:jj,rerank:qj,pulse:tq,touch:Zj,update:Jj,changeset:ka,ingest:Nj,parse:Oj,preload:Pj,request:Fj,events:$j,on:Ij,evaluate:Wj,run:Yj,runAsync:Vj,runAfter:Gj,_enqueue:Kj,_getPulse:Xj};function P(t,e){Qt.call(this,t,null,e)}G(P,Qt,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const mu={};function iq(t){const e=rq(t);return e&&e.Definition||null}function rq(t){return t=t&&t.toLowerCase(),gt(mu,t)?mu[t]:null}function*h5(t,e){if(e==null)for(let n of t)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)i=e(i,++n,t),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function d5(t,e,n){const i=Float64Array.from(h5(t,n));return i.sort(va),e.map(r=>X3(i,r))}function p5(t,e){return d5(t,[.25,.5,.75],e)}function g5(t,e){const n=t.length,i=ZB(t,e),r=p5(t,e),s=(r[2]-r[0])/1.34,o=Math.min(i,s)||i||Math.abs(r[0])||1;return 1.06*o*Math.pow(n,-.2)}function sq(t){const e=t.maxbins||20,n=t.base||10,i=Math.log(n),r=t.divide||[5,2];let s=t.extent[0],o=t.extent[1],a,l,u,c,f,h;const d=t.span||o-s||Math.abs(s)||1;if(t.step)a=t.step;else if(t.steps){for(c=d/e,f=0,h=t.steps.length;f<h&&t.steps[f]<c;++f);a=t.steps[Math.max(0,f-1)]}else{for(l=Math.ceil(Math.log(e)/i),u=t.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(d)/i)-l));Math.ceil(d/a)>e;)a*=n;for(f=0,h=r.length;f<h;++f)c=a/r[f],c>=u&&d/c<=e&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/i)+1,g=Math.pow(n,-p-1);return(t.nice||t.nice===void 0)&&(c=Math.floor(s/a+g)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var gr=Math.random;function oq(t,e,n,i){if(!t.length)return[void 0,void 0];const r=Float64Array.from(h5(t,i)),s=r.length,o=e;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=r[~~(gr()*s)];c[u]=a/s}return c.sort(va),[Sg(c,n/2),Sg(c,1-n/2)]}function aq(t,e,n,i){i=i||(h=>h);const r=t.length,s=new Float64Array(r);let o=0,a=1,l=i(t[0]),u=l,c=l+e,f;for(;a<r;++a){if(f=i(t[a]),f>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=f+e,l=f}u=f}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?lq(s,e+e/4):s}function lq(t,e){const n=t.length;let i=0,r=1,s,o;for(;t[i]===t[r];)++r;for(;r<n;){for(s=r+1;t[r]===t[s];)++s;if(t[r]-t[r-1]<e){for(o=r+(i+s-r-r>>1);o<r;)t[o++]=t[r];for(;o>r;)t[o--]=t[i]}i=r,r=s}return t}const m5=Math.sqrt(2*Math.PI),uq=Math.SQRT2;let yu=NaN;function p1(t,e){t=t||0,e=e==null?1:e;let n=0,i=0,r,s;if(yu===yu)n=yu,yu=NaN;else{do n=gr()*2-1,i=gr()*2-1,r=n*n+i*i;while(r===0||r>1);s=Math.sqrt(-2*Math.log(r)/r),n*=s,yu=i*s}return t+n*e}function y5(t,e,n){n=n==null?1:n;const i=(t-(e||0))/n;return Math.exp(-.5*i*i)/(n*m5)}function g1(t,e,n){e=e||0,n=n==null?1:n;const i=(t-e)/n,r=Math.abs(i);let s;if(r>37)s=0;else{const o=Math.exp(-r*r/2);let a;r<7.07106781186547?(a=.0352624965998911*r+.700383064443688,a=a*r+6.37396220353165,a=a*r+33.912866078383,a=a*r+112.079291497871,a=a*r+221.213596169931,a=a*r+220.206867912376,s=o*a,a=.0883883476483184*r+1.75566716318264,a=a*r+16.064177579207,a=a*r+86.7807322029461,a=a*r+296.564248779674,a=a*r+637.333633378831,a=a*r+793.826512519948,a=a*r+440.413735824752,s=s/a):(a=r+.65,a=r+4/a,a=r+3/a,a=r+2/a,a=r+1/a,s=o/a/2.506628274631)}return i>0?1-s:s}function m1(t,e,n){return t<0||t>1?NaN:(e||0)+(n==null?1:n)*uq*cq(2*t-1)}function cq(t){let e=-Math.log((1-t)*(1+t)),n;return e<6.25?(e-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*e,n=128584807152564e-32+n*e,n=11157877678025181e-33+n*e,n=-1333171662854621e-31+n*e,n=20972767875968562e-33+n*e,n=6637638134358324e-30+n*e,n=-4054566272975207e-29+n*e,n=-8151934197605472e-29+n*e,n=26335093153082323e-28+n*e,n=-12975133253453532e-27+n*e,n=-5415412054294628e-26+n*e,n=10512122733215323e-25+n*e,n=-4112633980346984e-24+n*e,n=-29070369957882005e-24+n*e,n=42347877827932404e-23+n*e,n=-13654692000834679e-22+n*e,n=-13882523362786469e-21+n*e,n=.00018673420803405714+n*e,n=-.000740702534166267+n*e,n=-.006033670871430149+n*e,n=.24015818242558962+n*e,n=1.6536545626831027+n*e):e<16?(e=Math.sqrt(e)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*e,n=-27517406297064545e-23+n*e,n=18239629214389228e-24+n*e,n=15027403968909828e-22+n*e,n=-4013867526981546e-21+n*e,n=29234449089955446e-22+n*e,n=12475304481671779e-21+n*e,n=-47318229009055734e-21+n*e,n=6828485145957318e-20+n*e,n=24031110387097894e-21+n*e,n=-.0003550375203628475+n*e,n=.0009532893797373805+n*e,n=-.0016882755560235047+n*e,n=.002491442096107851+n*e,n=-.003751208507569241+n*e,n=.005370914553590064+n*e,n=1.0052589676941592+n*e,n=3.0838856104922208+n*e):Number.isFinite(e)?(e=Math.sqrt(e)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*e,n=15076572693500548e-25+n*e,n=-3789465440126737e-24+n*e,n=761570120807834e-23+n*e,n=-1496002662714924e-23+n*e,n=2914795345090108e-23+n*e,n=-6771199775845234e-23+n*e,n=22900482228026655e-23+n*e,n=-99298272942317e-20+n*e,n=4526062597223154e-21+n*e,n=-1968177810553167e-20+n*e,n=7599527703001776e-20+n*e,n=-.00021503011930044477+n*e,n=-.00013871931833623122+n*e,n=1.0103004648645344+n*e,n=4.849906401408584+n*e):n=1/0,n*t}function _5(t,e){let n,i;const r={mean(s){return arguments.length?(n=s||0,r):n},stdev(s){return arguments.length?(i=s==null?1:s,r):i},sample:()=>p1(n,i),pdf:s=>y5(s,n,i),cdf:s=>g1(s,n,i),icdf:s=>m1(s,n,i)};return r.mean(t).stdev(e)}function v5(t,e){const n=_5();let i=0;const r={data(s){return arguments.length?(t=s,i=s?s.length:0,r.bandwidth(e)):t},bandwidth(s){return arguments.length?(e=s,!e&&t&&(e=g5(t)),r):e},sample(){return t[~~(gr()*i)]+e*n.sample()},pdf(s){let o=0,a=0;for(;a<i;++a)o+=n.pdf((s-t[a])/e);return o/e/i},cdf(s){let o=0,a=0;for(;a<i;++a)o+=n.cdf((s-t[a])/e);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(t)}function x5(t,e){return t=t||0,e=e==null?1:e,Math.exp(t+p1()*e)}function b5(t,e,n){if(t<=0)return 0;e=e||0,n=n==null?1:n;const i=(Math.log(t)-e)/n;return Math.exp(-.5*i*i)/(n*m5*t)}function w5(t,e,n){return g1(Math.log(t),e,n)}function E5(t,e,n){return Math.exp(m1(t,e,n))}function fq(t,e){let n,i;const r={mean(s){return arguments.length?(n=s||0,r):n},stdev(s){return arguments.length?(i=s==null?1:s,r):i},sample:()=>x5(n,i),pdf:s=>b5(s,n,i),cdf:s=>w5(s,n,i),icdf:s=>E5(s,n,i)};return r.mean(t).stdev(e)}function hq(t,e){let n=0,i;function r(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(i=r(e=o||[]),s):e},distributions(o){return arguments.length?(o?(n=o.length,t=o):(n=0,t=[]),s.weights(e)):t},sample(){const o=gr();let a=t[n-1],l=i[0],u=0;for(;u<n-1;l+=i[++u])if(o<l){a=t[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=i[l]*t[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=i[l]*t[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(t).weights(e)}function k5(t,e){return e==null&&(e=t==null?1:t,t=0),t+(e-t)*gr()}function A5(t,e,n){return n==null&&(n=e==null?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function C5(t,e,n){return n==null&&(n=e==null?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function M5(t,e,n){return n==null&&(n=e==null?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function dq(t,e){let n,i;const r={min(s){return arguments.length?(n=s||0,r):n},max(s){return arguments.length?(i=s==null?1:s,r):i},sample:()=>k5(n,i),pdf:s=>A5(s,n,i),cdf:s=>C5(s,n,i),icdf:s=>M5(s,n,i)};return e==null&&(e=t==null?1:t,t=0),r.min(t).max(e)}function _u(t,e,n,i){const r=i-t*t,s=Math.abs(r)<1e-24?0:(n-t*e)/r;return[e-s*t,s]}function ah(t,e,n,i){t=t.filter(d=>{let p=e(d),g=n(d);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),i&&t.sort((d,p)=>e(d)-e(p));const r=t.length,s=new Float64Array(r),o=new Float64Array(r);let a=0,l=0,u=0,c,f,h;for(h of t)s[a]=c=+e(h),o[a]=f=+n(h),++a,l+=(c-l)/a,u+=(f-u)/a;for(a=0;a<r;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function vu(t,e,n,i){let r=-1,s,o;for(const a of t)s=e(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&i(s,o,++r)}function Ca(t,e,n,i,r){let s=0,o=0;return vu(t,e,n,(a,l)=>{const u=l-r(a),c=l-i;s+=u*u,o+=c*c}),1-s/o}function S5(t,e,n){let i=0,r=0,s=0,o=0,a=0;vu(t,e,n,(c,f)=>{++a,i+=(c-i)/a,r+=(f-r)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const l=_u(i,r,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:Ca(t,e,n,r,u)}}function pq(t,e,n){let i=0,r=0,s=0,o=0,a=0;vu(t,e,n,(c,f)=>{++a,c=Math.log(c),i+=(c-i)/a,r+=(f-r)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const l=_u(i,r,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:Ca(t,e,n,r,u)}}function gq(t,e,n){const[i,r,s,o]=ah(t,e,n);let a=0,l=0,u=0,c=0,f=0,h,d,p;vu(t,e,n,(_,v)=>{h=i[f++],d=Math.log(v),p=h*v,a+=(v*d-a)/f,l+=(p-l)/f,u+=(p*d-u)/f,c+=(h*p-c)/f});const[g,m]=_u(l/o,a/o,u/o,c/o),y=_=>Math.exp(g+m*(_-s));return{coef:[Math.exp(g-m*s),m],predict:y,rSquared:Ca(t,e,n,o,y)}}function mq(t,e,n){let i=0,r=0,s=0,o=0,a=0,l=0;vu(t,e,n,(f,h)=>{const d=Math.log(f),p=Math.log(h);++l,i+=(d-i)/l,r+=(p-r)/l,s+=(d*p-s)/l,o+=(d*d-o)/l,a+=(h-a)/l});const u=_u(i,r,s,o),c=f=>u[0]*Math.pow(f,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:Ca(t,e,n,a,c)}}function T5(t,e,n){const[i,r,s,o]=ah(t,e,n),a=i.length;let l=0,u=0,c=0,f=0,h=0,d,p,g,m;for(d=0;d<a;)p=i[d],g=r[d++],m=p*p,l+=(m-l)/d,u+=(m*p-u)/d,c+=(m*m-c)/d,f+=(p*g-f)/d,h+=(m*g-h)/d;const y=c-l*l,_=l*y-u*u,v=(h*l-f*u)/_,x=(f*y-h*u)/_,w=-v*l,k=b=>(b=b-s,v*b*b+x*b+w+o);return{coef:[w-x*s+v*s*s+o,x-2*v*s,v],predict:k,rSquared:Ca(t,e,n,o,k)}}function yq(t,e,n,i){if(i===1)return S5(t,e,n);if(i===2)return T5(t,e,n);const[r,s,o,a]=ah(t,e,n),l=r.length,u=[],c=[],f=i+1;let h,d,p,g,m;for(h=0;h<f;++h){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],h)*s[p];for(u.push(g),m=new Float64Array(f),d=0;d<f;++d){for(p=0,g=0;p<l;++p)g+=Math.pow(r[p],h+d);m[d]=g}c.push(m)}c.push(u);const y=vq(c),_=v=>{v-=o;let x=a+y[0]+y[1]*v+y[2]*v*v;for(h=3;h<f;++h)x+=y[h]*Math.pow(v,h);return x};return{coef:_q(f,y,-o,a),predict:_,rSquared:Ca(t,e,n,a,_)}}function _q(t,e,n,i){const r=Array(t);let s,o,a,l;for(s=0;s<t;++s)r[s]=0;for(s=t-1;s>=0;--s)for(a=e[s],l=1,r[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,r[s-o]+=a*Math.pow(n,o)*l;return r[0]+=i,r}function vq(t){const e=t.length-1,n=[];let i,r,s,o,a;for(i=0;i<e;++i){for(o=i,r=i+1;r<e;++r)Math.abs(t[i][r])>Math.abs(t[i][o])&&(o=r);for(s=i;s<e+1;++s)a=t[s][i],t[s][i]=t[s][o],t[s][o]=a;for(r=i+1;r<e;++r)for(s=e;s>=i;s--)t[s][r]-=t[s][i]*t[i][r]/t[i][i]}for(r=e-1;r>=0;--r){for(a=0,s=r+1;s<e;++s)a+=t[s][r]*n[s];n[r]=(t[e][r]-a)/t[r][r]}return n}const D5=2,$5=1e-12;function xq(t,e,n,i){const[r,s,o,a]=ah(t,e,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),f=new Float64Array(l),h=new Float64Array(l).fill(1);for(let d=-1;++d<=D5;){const p=[0,u-1];for(let m=0;m<l;++m){const y=r[m],_=p[0],v=p[1],x=y-r[_]>r[v]-y?_:v;let w=0,k=0,b=0,C=0,T=0;const M=1/Math.abs(r[x]-y||1);for(let O=_;O<=v;++O){const U=r[O],N=s[O],R=bq(Math.abs(y-U)*M)*h[O],z=U*R;w+=R,k+=z,b+=N*R,C+=N*z,T+=U*z}const[S,$]=_u(k/w,b/w,C/w,T/w);c[m]=S+$*y,f[m]=Math.abs(s[m]-c[m]),wq(r,m+1,p)}if(d===D5)break;const g=Q3(f);if(Math.abs(g)<$5)break;for(let m=0,y,_;m<l;++m)y=f[m]/(6*g),h[m]=y>=1?$5:(_=1-y*y)*_}return Eq(r,c,o,a)}function bq(t){return(t=1-t*t*t)*t*t}function wq(t,e,n){const i=t[e];let r=n[0],s=n[1]+1;if(!(s>=t.length))for(;e>r&&t[s]-i<=i-t[r];)n[0]=++r,n[1]=s,++s}function Eq(t,e,n,i){const r=t.length,s=[];let o=0,a=0,l=[],u;for(;o<r;++o)u=t[o]+n,l[0]===u?l[1]+=(e[o]-l[1])/++a:(a=0,l[1]+=i,l=[u,e[o]],s.push(l));return l[1]+=i,s}const kq=.5*Math.PI/180;function y1(t,e,n,i){n=n||25,i=Math.max(n,i||200);const r=g=>[g,t(g)],s=e[0],o=e[1],a=o-s,l=a/i,u=[r(s)],c=[];if(n===i){for(let g=1;g<i;++g)u.push(r(s+g/n*a));return u.push(r(o)),u}else{c.push(r(o));for(let g=n;--g>0;)c.push(r(s+g/n*a))}let f=u[0],h=c[c.length-1];const d=1/a,p=Aq(f[1],c);for(;h;){const g=r((f[0]+h[0])/2);g[0]-f[0]>=l&&Cq(f,g,h,d,p)>kq?c.push(g):(f=h,u.push(h),c.pop()),h=c[c.length-1]}return u}function Aq(t,e){let n=t,i=t;const r=e.length;for(let s=0;s<r;++s){const o=e[s][1];o<n&&(n=o),o>i&&(i=o)}return 1/(i-n)}function Cq(t,e,n,i,r){const s=Math.atan2(r*(n[1]-t[1]),i*(n[0]-t[0])),o=Math.atan2(r*(e[1]-t[1]),i*(e[0]-t[0]));return Math.abs(s-o)}function Mq(t){return e=>{const n=t.length;let i=1,r=String(t[0](e));for(;i<n;++i)r+="|"+t[i](e);return r}}function _1(t){return!t||!t.length?function(){return""}:t.length===1?t[0]:Mq(t)}function O5(t,e,n){return n||t+(e?"_"+e:"")}const v1=()=>{},Sq={init:v1,add:v1,rem:v1,idx:0},xu={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||t.min===void 0)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||t.max===void 0)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},bu=Object.keys(xu);function Tq(t,e){return n=>bt({name:t,out:n||t},Sq,e)}bu.forEach(t=>{xu[t]=Tq(t,xu[t])});function N5(t,e){return xu[t](e)}function F5(t,e){return t.idx-e.idx}function Dq(t){const e={};t.forEach(i=>e[i.name]=i);const n=i=>{!i.req||i.req.forEach(r=>{e[r]||n(e[r]=xu[r]())})};return t.forEach(n),Object.values(e).sort(F5)}function $q(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function Oq(t,e){if(t==null||t===""){++this.missing;return}t===t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e)))}function Nq(t,e){if(t==null||t===""){--this.missing;return}t===t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e)))}function Fq(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function P5(t,e){const n=e||gn,i=Dq(t),r=t.slice().sort(F5);function s(o){this._ops=i,this._out=r,this.cell=o,this.init()}return s.prototype.init=$q,s.prototype.add=Oq,s.prototype.rem=Nq,s.prototype.set=Fq,s.prototype.get=n,s.fields=t.map(o=>o.out),s}function x1(t){this._key=t?Ln(t):ut,this.reset()}const Te=x1.prototype;Te.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Te.add=function(t){this._add.push(t)};Te.rem=function(t){this._rem.push(t)};Te.values=function(){if(this._get=null,this._rem.length===0)return this._add;const t=this._add,e=this._rem,n=this._key,i=t.length,r=e.length,s=Array(i-r),o={};let a,l,u;for(a=0;a<r;++a)o[n(e[a])]=1;for(a=0,l=0;a<i;++a)o[n(u=t[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};Te.distinct=function(t){const e=this.values(),n={};let i=e.length,r=0,s;for(;--i>=0;)s=t(e[i])+"",gt(n,s)||(n[s]=1,++r);return r};Te.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=EB(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext};Te.argmin=function(t){return this.extent(t)[0]||{}};Te.argmax=function(t){return this.extent(t)[1]||{}};Te.min=function(t){const e=this.extent(t)[0];return e!=null?t(e):void 0};Te.max=function(t){const e=this.extent(t)[1];return e!=null?t(e):void 0};Te.quartile=function(t){return(this._get!==t||!this._q)&&(this._q=p5(this.values(),t),this._get=t),this._q};Te.q1=function(t){return this.quartile(t)[0]};Te.q2=function(t){return this.quartile(t)[1]};Te.q3=function(t){return this.quartile(t)[2]};Te.ci=function(t){return(this._get!==t||!this._ci)&&(this._ci=oq(this.values(),1e3,.05,t),this._get=t),this._ci};Te.ci0=function(t){return this.ci(t)[0]};Te.ci1=function(t){return this.ci(t)[1]};function ts(t){P.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ts.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bu},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};G(ts,P,{transform(t,e){const n=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.modified();return n.stamp=i.stamp,n.value&&(r||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(t):{},e.visit(e.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(t),e.visit(e.REM,s=>n.rem(s)),e.visit(e.ADD,s=>n.add(s))),i.modifies(n._outputs),n._drop=t.drop!==!1,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const t=this,e=t.value,n=t._dnames,i=n.map(()=>({})),r=n.length;function s(a){let l,u,c,f;for(l in a)for(c=a[l].tuple,u=0;u<r;++u)i[u][f=c[n[u]]]=f}s(t._prev),s(e);function o(a,l,u){const c=n[u],f=i[u++];for(const h in f){const d=a?a+"|"+h:h;l[c]=f[h],u<r?o(d,l,u):e[d]||t.cell(d,l)}}o("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],i={};function r(m){const y=pt(Ve(m)),_=y.length;let v=0,x;for(;v<_;++v)i[x=y[v]]||(i[x]=1,e.push(x))}this._dims=pt(t.groupby),this._dnames=this._dims.map(m=>{const y=le(m);return r(m),n.push(y),y}),this.cellkey=t.key?t.key:_1(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=t.fields||[null],o=t.ops||["count"],a=t.as||[],l=s.length,u={};let c,f,h,d,p,g;for(l!==o.length&&I("Unmatched number of fields and aggregate ops."),g=0;g<l;++g){if(c=s[g],f=o[g],c==null&&f!=="count"&&I("Null aggregate field specified."),d=le(c),p=O5(f,d,a[g]),n.push(p),f==="count"){this._counts.push(p);continue}h=u[d],h||(r(c),h=u[d]=[],h.field=c,this._measures.push(h)),f!=="count"&&(this._countOnly=!1),h.push(N5(f,p))}return this._measures=this._measures.map(m=>P5(m,m.field)),{}},cellkey:_1(),cell(t,e){let n=this.value[t];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let s=0;s<r;++s)n.agg[s]=new i[s](n)}return n.store&&(n.data=new x1),n},newtuple(t,e){const n=this._dnames,i=this._dims,r=i.length,s={};for(let o=0;o<r;++o)s[n[o]]=i[o](t);return e?e5(e.tuple,s):Ut(s)},clean(){const t=this.value;for(const e in t)t[e].num===0&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].add(i[r].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].rem(i[r].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let i=0,r=n.length;i<r;++i)e[n[i]]=t.num;if(!this._countOnly){const i=t.agg;for(let r=0,s=i.length;r<s;++r)i[r].set(e)}return e},changes(t){const e=this._adds,n=this._mods,i=this._prev,r=this._drop,s=t.add,o=t.rem,a=t.mod;let l,u,c,f;if(i)for(u in i)l=i[u],(!r||l.num)&&o.push(l.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(e[c])),e[c]=null;for(c=0,f=this._mlen;c<f;++c)l=n[c],(l.num===0&&r?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,t}});const Pq=1e-14;function b1(t){P.call(this,null,t)}b1.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};G(b1,P,{transform(t,e){const n=t.interval!==!1,i=this._bins(t),r=i.start,s=i.step,o=t.as||["bin0","bin1"],a=o[0],l=o[1];let u;return t.modified()?(e=e.reflow(!0),u=e.SOURCE):u=e.modified(Ve(t.field))?e.ADD_MOD:e.ADD,e.visit(u,n?c=>{const f=i(c);c[a]=f,c[l]=f==null?null:r+s*(1+(f-r)/s)}:c=>c[a]=i(c)),e.modifies(n?o:a)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=sq(t),i=n.step;let r=n.start,s=r+Math.ceil((n.stop-r)/i)*i,o,a;(o=t.anchor)!=null&&(a=o-(r+i*Math.floor((o-r)/i)),r+=a,s+=a);const l=function(u){let c=Ye(e(u));return c==null?null:c<r?-1/0:c>s?1/0:(c=Math.max(r,Math.min(c,s-i)),r+i*Math.floor(Pq+(c-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Rn(l,Ve(e),t.name||"bin_"+le(e))}});function R5(t,e,n){const i=t;let r=e||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[i(l)]=++a,size:()=>r.length,data:(l,u)=>(a&&(r=r.filter(c=>!o[i(c)]),o={},a=0),u&&l&&r.sort(l),s.length&&(r=l?OB(l,r,s.sort(l)):r.concat(s),s=[]),r)}}function w1(t){P.call(this,[],t)}w1.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};G(w1,P,{transform(t,e){const n=e.fork(e.ALL),i=R5(ut,this.value,n.materialize(n.ADD).add),r=t.sort,s=e.changed()||r&&(t.modified("sort")||e.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(s),this.value=n.source=i.data(io(r),s),e.source&&e.source.root&&(this.value.root=e.source.root),n}});function L5(t){Qt.call(this,null,Rq,t)}G(L5,Qt);function Rq(t){return this.value&&!t.modified()?this.value:P3(t.fields,t.orders)}function E1(t){P.call(this,null,t)}E1.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Lq(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase();break}return t.match(n)}G(E1,P,{transform(t,e){const n=f=>h=>{for(var d=Lq(a(h),t.case,s)||[],p,g=0,m=d.length;g<m;++g)o.test(p=d[g])||f(p)},i=this._parameterCheck(t,e),r=this._counts,s=this._match,o=this._stop,a=t.field,l=t.as||["text","count"],u=n(f=>r[f]=1+(r[f]||0)),c=n(f=>r[f]-=1);return i?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,c)),this._finish(e,l)},_parameterCheck(t,e){let n=!1;return(t.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),(t.modified("pattern")||!this._match)&&(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,i=this._tuples||(this._tuples={}),r=e[0],s=e[1],o=t.fork(t.NO_SOURCE|t.NO_FIELDS);let a,l,u;for(a in n)l=i[a],u=n[a]||0,!l&&u?(i[a]=l=Ut({}),l[r]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,i[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(e)}});function k1(t){P.call(this,null,t)}k1.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};G(k1,P,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.as||["a","b"],r=i[0],s=i[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=e.materialize(e.SOURCE).source,n.add=this.value=Iq(a,r,s,t.filter||gi)):n.mod=a,n.source=this.value,n.modifies(i)}});function Iq(t,e,n,i){for(var r=[],s={},o=t.length,a=0,l,u;a<o;++a)for(s[e]=u=t[a],l=0;l<o;++l)s[n]=t[l],i(s)&&(r.push(Ut(s)),s={},s[e]=u);return r}const I5={kde:v5,mixture:hq,normal:_5,lognormal:fq,uniform:dq},Bq="distributions",B5="function",zq="field";function z5(t,e){const n=t[B5];gt(I5,n)||I("Unknown distribution function: "+n);const i=I5[n]();for(const r in t)r===zq?i.data((t.from||e()).map(t[r])):r===Bq?i[r](t[r].map(s=>z5(s,e))):typeof i[r]===B5&&i[r](t[r]);return i}function A1(t){P.call(this,null,t)}const U5=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Uq={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:U5},{name:"weights",type:"number",array:!0}]};A1.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:U5.concat(Uq)},{name:"as",type:"string",array:!0,default:["value","density"]}]};G(A1,P,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=z5(t.distribution,jq(e)),r=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200;let o=t.method||"pdf";o!=="pdf"&&o!=="cdf"&&I("Invalid density method: "+o),!t.extent&&!i.data&&I("Missing density extent parameter."),o=i[o];const a=t.as||["value","density"],l=t.extent||cr(i.data()),u=y1(o,l,r,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Ut(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function jq(t){return()=>t.materialize(t.SOURCE).source}function j5(t,e){return t?t.map((n,i)=>e[i]||le(n)):null}function C1(t,e,n){const i=[],r=f=>f(l);let s,o,a,l,u,c;if(e==null)i.push(t.map(n));else for(s={},o=0,a=t.length;o<a;++o)l=t[o],u=e.map(r),c=s[u],c||(s[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}const q5="bin";function M1(t){P.call(this,null,t)}M1.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:q5}]};const qq=(t,e)=>Wf(cr(t,e))/30;G(M1,P,{transform(t,e){if(this.value&&!(t.modified()||e.changed()))return e;const n=e.materialize(e.SOURCE).source,i=C1(e.source,t.groupby,gn),r=t.smooth||!1,s=t.field,o=t.step||qq(n,s),a=io((p,g)=>s(p)-s(g)),l=t.as||q5,u=i.length;let c=1/0,f=-1/0,h=0,d;for(;h<u;++h){const p=i[h].sort(a);d=-1;for(const g of aq(p,o,r,s))g<c&&(c=g),g>f&&(f=g),p[++d][l]=g}return this.value={start:c,stop:f,step:o},e.reflow(!0).modifies(l)}});function H5(t){Qt.call(this,null,Hq,t),this.modified(!0)}G(H5,Qt);function Hq(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:Rn(n=>e(n,t),Ve(e),le(e))}function S1(t){P.call(this,[void 0,void 0],t)}S1.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};G(S1,P,{transform(t,e){const n=this.value,i=t.field,r=e.changed()||e.modified(i.fields)||t.modified("field");let s=n[0],o=n[1];if((r||s==null)&&(s=1/0,o=-1/0),e.visit(r?e.SOURCE:e.ADD,a=>{const l=Ye(i(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=le(i);a&&(a=` for field "${a}"`),e.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function T1(t,e){Qt.call(this,t),this.parent=e,this.count=0}G(T1,Qt,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}});function lh(t){P.call(this,{},t),this._keys=ql();const e=this._targets=[];e.active=0,e.forEach=n=>{for(let i=0,r=e.active;i<r;++i)n(e[i],i,e)}}G(lh,P,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,i){const r=this.value;let s=gt(r,t)&&r[t],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=i||(a=this._group[t])&&a.tuple,o=n.dataflow,s=new T1(n.fork(n.NO_SOURCE),this),o.add(s).connect(e(o,t,a)),r[t]=s,this.activate(s)),s},clean(){const t=this.value;let e=0;for(const n in t)if(t[n].count===0){const i=t[n].detachSubflow;i&&i(),delete t[n],++e}if(e){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(t){const e=this._targets,n=e.length,i=t?t.length:0;let r=0;for(;r<i;++r)e[r]=t[r];for(;r<n&&e[r]!=null;++r)e[r]=null;e.active=i},transform(t,e){const n=e.dataflow,i=t.key,r=t.subflow,s=this._keys,o=t.modified("key"),a=l=>this.subflow(l,r,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,l=>{const u=ut(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),e.visit(e.ADD,l=>{const u=i(l);s.set(ut(l),u),a(u).add(l)}),o||e.modified(i.fields)?e.visit(e.MOD,l=>{const u=ut(l),c=s.get(u),f=i(l);c===f?a(f).mod(l):(s.set(u,f),a(c).rem(l),a(f).add(l))}):e.changed(e.MOD)&&e.visit(e.MOD,l=>{a(s.get(ut(l))).mod(l)}),o&&e.visit(e.REFLOW,l=>{const u=ut(l),c=s.get(u),f=i(l);c!==f&&(s.set(u,f),a(c).rem(l),a(f).add(l))}),e.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),e}});function W5(t){Qt.call(this,null,Wq,t)}G(W5,Qt);function Wq(t){return this.value&&!t.modified()?this.value:lt(t.name)?pt(t.name).map(e=>Ln(e)):Ln(t.name,t.as)}function D1(t){P.call(this,ql(),t)}D1.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};G(D1,P,{transform(t,e){const n=e.dataflow,i=this.value,r=e.fork(),s=r.add,o=r.rem,a=r.mod,l=t.expr;let u=!0;e.visit(e.REM,f=>{const h=ut(f);i.has(h)?i.delete(h):o.push(f)}),e.visit(e.ADD,f=>{l(f,t)?s.push(f):i.set(ut(f),1)});function c(f){const h=ut(f),d=l(f,t),p=i.get(h);d&&p?(i.delete(h),s.push(f)):!d&&!p?(i.set(h,1),o.push(f)):u&&d&&!p&&a.push(f)}return e.visit(e.MOD,c),t.modified()&&(u=!1,e.visit(e.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function $1(t){P.call(this,[],t)}$1.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};G($1,P,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=j5(i,t.as||[]),s=t.index||null,o=r.length;return n.rem=this.value,e.visit(e.SOURCE,a=>{const l=i.map(p=>p(a)),u=l.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,h,d;for(;c<u;++c){for(h=u1(a),f=0;f<o;++f)h[r[f]]=(d=l[f][c])==null?null:d;s&&(h[s]=c),n.add.push(h)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(r)}});function O1(t){P.call(this,[],t)}O1.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};G(O1,P,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=i.map(le),s=t.as||["key","value"],o=s[0],a=s[1],l=i.length;return n.rem=this.value,e.visit(e.SOURCE,u=>{for(let c=0,f;c<l;++c)f=u1(u),f[o]=r[c],f[a]=i[c](u),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function N1(t){P.call(this,null,t)}N1.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};G(N1,P,{transform(t,e){const n=t.expr,i=t.as,r=t.modified(),s=t.initonly?e.ADD:r?e.SOURCE:e.modified(n.fields)||e.modified(i)?e.ADD_MOD:e.ADD;return r&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(i),e.visit(s,o=>o[i]=n(o,t))}});function V5(t){P.call(this,[],t)}G(V5,P,{transform(t,e){const n=e.fork(e.ALL),i=t.generator;let r=this.value,s=t.size-r.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=Ut(i(t))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=r.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,r=r.slice(-s);return n.source=this.value=r,n}});const uh={value:"value",median:Q3,mean:tz,min:Mg,max:Zs},Vq=[];function F1(t){P.call(this,[],t)}F1.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Yq(t){var e=t.method||uh.value,n;if(uh[e]==null)I("Unrecognized imputation method: "+e);else return e===uh.value?(n=t.value!==void 0?t.value:0,()=>n):uh[e]}function Gq(t){const e=t.field;return n=>n?e(n):NaN}G(F1,P,{transform(t,e){var n=e.fork(e.ALL),i=Yq(t),r=Gq(t),s=le(t.field),o=le(t.key),a=(t.groupby||[]).map(le),l=Kq(e.source,t.groupby,t.key,t.keyvals),u=[],c=this.value,f=l.domain.length,h,d,p,g,m,y,_,v,x,w;for(m=0,v=l.length;m<v;++m)for(h=l[m],p=h.values,d=NaN,_=0;_<f;++_)if(h[_]==null){for(g=l.domain[_],w={_impute:!0},y=0,x=p.length;y<x;++y)w[a[y]]=p[y];w[o]=g,w[s]=Number.isNaN(d)?d=i(h,r):d,u.push(Ut(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function Kq(t,e,n,i){var r=y=>y(m),s=[],o=i?i.slice():[],a={},l={},u,c,f,h,d,p,g,m;for(o.forEach((y,_)=>a[y]=_+1),h=0,g=t.length;h<g;++h)m=t[h],p=n(m),d=a[p]||(a[p]=o.push(p)),c=(u=e?e.map(r):Vq)+"",(f=l[c])||(f=l[c]=[],s.push(f),f.values=u),f[d-1]=m;return s.domain=o,s}function P1(t){ts.call(this,t)}P1.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:bu},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};G(P1,ts,{transform(t,e){const n=this,i=t.modified();let r;return n.value&&(i||e.modified(n._inputs,!0))?(r=n.value=i?n.init(t):{},e.visit(e.SOURCE,s=>n.add(s))):(r=n.value=n.value||this.init(t),e.visit(e.REM,s=>n.rem(s)),e.visit(e.ADD,s=>n.add(s))),n.changes(),e.visit(e.SOURCE,s=>{bt(s,r[n.cellkey(s)].tuple)}),e.reflow(i).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(t[n]),t[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}});function R1(t){P.call(this,null,t)}R1.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};G(R1,P,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=C1(i,t.groupby,t.field),s=(t.groupby||[]).map(le),o=t.bandwidth,a=t.cumulative?"cdf":"pdf",l=t.as||["value","density"],u=[];let c=t.extent,f=t.steps||t.minsteps||25,h=t.steps||t.maxsteps||200;a!=="pdf"&&a!=="cdf"&&I("Invalid density method: "+a),t.resolve==="shared"&&(c||(c=cr(i,t.field)),f=h=t.steps||h),r.forEach(d=>{const p=v5(d,o)[a],g=t.counts?d.length:1,m=c||cr(d);y1(p,m,f,h).forEach(y=>{const _={};for(let v=0;v<s.length;++v)_[s[v]]=d.dims[v];_[l[0]]=y[0],_[l[1]]=y[1]*g,u.push(Ut(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Y5(t){Qt.call(this,null,Xq,t)}G(Y5,Qt);function Xq(t){return this.value&&!t.modified()?this.value:L3(t.fields,t.flat)}function G5(t){P.call(this,[],t),this._pending=null}G(G5,P,{transform(t,e){const n=e.dataflow;return this._pending?L1(this,e,this._pending):Qq(t)?e.StopPropagation:t.values?L1(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(r=>(this._pending=pt(r.data),s=>s.touch(this)))}:n.request(t.url,t.format).then(i=>L1(this,e,pt(i.data)))}});function Qq(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}function L1(t,e,n){n.forEach(Ut);const i=e.fork(e.NO_FIELDS&e.NO_SOURCE);return i.rem=t.value,t.value=i.source=i.add=n,t._pending=null,i.rem.length&&i.clean(!0),i}function I1(t){P.call(this,{},t)}I1.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};G(I1,P,{transform(t,e){const n=t.fields,i=t.index,r=t.values,s=t.default==null?null:t.default,o=t.modified(),a=n.length;let l=o?e.SOURCE:e.ADD,u=e,c=t.as,f,h,d;return r?(h=r.length,a>1&&!c&&I('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*h&&I('The "as" parameter has too few output field names.'),c=c||r.map(le),f=function(p){for(var g=0,m=0,y,_;g<a;++g)if(_=i.get(n[g](p)),_==null)for(y=0;y<h;++y,++m)p[c[m]]=s;else for(y=0;y<h;++y,++m)p[c[m]]=r[y](_)}):(c||I("Missing output field names."),f=function(p){for(var g=0,m;g<a;++g)m=i.get(n[g](p)),p[c[g]]=m==null?s:m}),o?u=e.reflow(!0):(d=n.some(p=>e.modified(p.fields)),l|=d?e.MOD:0),e.visit(l,f),u.modifies(c)}});function K5(t){Qt.call(this,null,Zq,t)}G(K5,Qt);function Zq(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let i=1/0,r=-1/0,s,o;for(s=0;s<n;++s)o=e[s],o[0]<i&&(i=o[0]),o[1]>r&&(r=o[1]);return[i,r]}function X5(t){Qt.call(this,null,Jq,t)}G(X5,Qt);function Jq(t){return this.value&&!t.modified()?this.value:t.values.reduce((e,n)=>e.concat(n),[])}function Q5(t){P.call(this,null,t)}G(Q5,P,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function B1(t){ts.call(this,t)}B1.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:bu,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};G(B1,ts,{_transform:ts.prototype.transform,transform(t,e){return this._transform(tH(t,e),e)}});function tH(t,e){const n=t.field,i=t.value,r=(t.op==="count"?"__count__":t.op)||"sum",s=Ve(n).concat(Ve(i)),o=nH(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:o.map(()=>r),fields:o.map(a=>eH(a,n,i,s)),as:o.map(a=>a+""),modified:t.modified.bind(t)}}function eH(t,e,n,i){return Rn(r=>e(r)===t?n(r):NaN,i,t+"")}function nH(t,e,n){const i={},r=[];return n.visit(n.SOURCE,s=>{const o=t(s);i[o]||(i[o]=1,r.push(o))}),r.sort(vg),e?r.slice(0,e):r}function Z5(t){lh.call(this,t)}G(Z5,lh,{transform(t,e){const n=t.subflow,i=t.field,r=s=>this.subflow(ut(s),n,e,s);return(t.modified("field")||i&&e.modified(Ve(i)))&&I("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,s=>{const o=r(s);i(s).forEach(a=>o.mod(a))}),e.visit(e.ADD,s=>{const o=r(s);i(s).forEach(a=>o.add(Ut(a)))}),e.visit(e.REM,s=>{const o=r(s);i(s).forEach(a=>o.rem(a))})):(e.visit(e.MOD,s=>r(s).mod(s)),e.visit(e.ADD,s=>r(s).add(s)),e.visit(e.REM,s=>r(s).rem(s))),e.clean()&&e.runAfter(()=>this.clean()),e}});function z1(t){P.call(this,null,t)}z1.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};G(z1,P,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=j5(t.fields,t.as||[]),s=i?(a,l)=>iH(a,l,i,r):ih;let o;return this.value?o=this.value:(e=e.addAll(),o=this.value={}),e.visit(e.REM,a=>{const l=ut(a);n.rem.push(o[l]),o[l]=null}),e.visit(e.ADD,a=>{const l=s(a,Ut({}));o[ut(a)]=l,n.add.push(l)}),e.visit(e.MOD,a=>{n.mod.push(s(a,o[ut(a)]))}),n}});function iH(t,e,n,i){for(let r=0,s=n.length;r<s;++r)e[i[r]]=n[r](t);return e}function J5(t){P.call(this,null,t)}G(J5,P,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function U1(t){P.call(this,null,t)}U1.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const rH=1e-14;G(U1,P,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const r=e.materialize(e.SOURCE).source,s=C1(r,t.groupby,t.field),o=(t.groupby||[]).map(le),a=[],l=t.step||.01,u=t.probs||In(l/2,1-rH,l),c=u.length;return s.forEach(f=>{const h=d5(f,u);for(let d=0;d<c;++d){const p={};for(let g=0;g<o.length;++g)p[o[g]]=f.dims[g];p[i[0]]=u[d],p[i[1]]=h[d],a.push(Ut(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function tk(t){P.call(this,null,t)}G(tk,P,{transform(t,e){let n,i;return this.value?i=this.value:(n=e=e.addAll(),i=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,r=>{const s=ut(r);n.rem.push(i[s]),i[s]=null}),e.visit(e.ADD,r=>{const s=u1(r);i[ut(r)]=s,n.add.push(s)}),e.visit(e.MOD,r=>{const s=i[ut(r)];for(const o in r)s[o]=r[o],n.modifies(o);n.mod.push(s)})),n}});function j1(t){P.call(this,[],t),this.count=0}j1.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};G(j1,P,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.modified("size"),r=t.size,s=this.value.reduce((c,f)=>(c[ut(f)]=1,c),{});let o=this.value,a=this.count,l=0;function u(c){let f,h;o.length<r?o.push(c):(h=~~((a+1)*gr()),h<o.length&&h>=l&&(f=o[h],s[ut(f)]&&n.rem.push(f),o[h]=c)),++a}if(e.rem.length&&(e.visit(e.REM,c=>{const f=ut(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[ut(c)]!==-1)),(e.rem.length||i)&&o.length<r&&e.source&&(l=a=o.length,e.visit(e.SOURCE,c=>{s[ut(c)]||u(c)}),l=-1),i&&o.length>r){const c=o.length-r;for(let f=0;f<c;++f)s[ut(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return e.mod.length&&e.visit(e.MOD,c=>{s[ut(c)]&&n.mod.push(c)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||l<0)&&(n.add=o.filter(c=>!s[ut(c)])),this.count=a,this.value=n.source=o,n}});function q1(t){P.call(this,null,t)}q1.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};G(q1,P,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),i=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=In(t.start,t.stop,t.step||1).map(r=>{const s={};return s[i]=r,Ut(s)}),n.add=e.add.concat(this.value),n}});function ek(t){P.call(this,null,t),this.modified(!0)}G(ek,P,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});function H1(t){P.call(this,null,t)}const nk=["unit0","unit1"];H1.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:pE,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:nk}]};G(H1,P,{transform(t,e){const n=t.field,i=t.interval!==!1,r=t.timezone==="utc",s=this._floor(t,e),o=(r?eu:tu)(s.unit).offset,a=t.as||nk,l=a[0],u=a[1],c=s.step;let f=s.start||1/0,h=s.stop||-1/0,d=e.ADD;return(t.modified()||e.modified(Ve(n)))&&(e=e.reflow(!0),d=e.SOURCE,f=1/0,h=-1/0),e.visit(d,p=>{const g=n(p);let m,y;g==null?(p[l]=null,i&&(p[u]=null)):(p[l]=m=y=s(g),i&&(p[u]=y=o(m,c)),m<f&&(f=m),y>h&&(h=y))}),s.start=f,s.stop=h,e.modifies(i?a:l)},_floor(t,e){const n=t.timezone==="utc",{units:i,step:r}=t.units?{units:t.units,step:t.step||1}:Vz({extent:t.extent||cr(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),s=gE(i),o=this.value||{},a=(n?Rz:Nz)(s,r);return a.unit=Nt(s),a.units=s,a.step=r,a.start=o.start,a.stop=o.stop,this.value=a}});function ik(t){P.call(this,ql(),t)}G(ik,P,{transform(t,e){const n=e.dataflow,i=t.field,r=this.value,s=a=>r.set(i(a),a);let o=!0;return t.modified("field")||e.modified(i.fields)?(r.clear(),e.visit(e.SOURCE,s)):e.changed()?(e.visit(e.REM,a=>r.delete(i(a))),e.visit(e.ADD,s)):o=!1,this.modified(o),r.empty>n.cleanThreshold&&n.runAfter(r.clean),e.fork()}});function rk(t){P.call(this,null,t)}G(rk,P,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(io(t.sort)):e.source).map(t.field))}});function sH(t,e,n,i){const r=wu[t](e,n);return{init:r.init||Gs,update:function(s,o){o[i]=r.next(s)}}}const wu={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?++t:t}}},percent_rank:function(){const t=wu.rank(),e=t.next;return{init:t.init,next:n=>(e(n)-1)/(n.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,i=e.compare;let r=e.index;if(t<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;t=r}return(1+t)/n.length}}},ntile:function(t,e){e=+e,e>0||I("ntile num must be greater than zero.");const n=wu.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(e*i(r))}},lag:function(t,e){return e=+e||1,{next:n=>{const i=n.index-e;return i>=0?t(n.data[i]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const i=n.index+e,r=n.data;return i<r.length?t(r[i]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return e=+e,e>0||I("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(e-1);return i<n.i1?t(n.data[i]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const i=t(n.data[n.index]);return i!=null?e=i:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:i=>{const r=i.data;return i.index<=n?e:(n=oH(t,r,i.index))<0?(n=r.length,e=null):e=t(r[n])}}}};function oH(t,e,n){for(let i=e.length;n<i;++n)if(t(e[n])!=null)return n;return-1}const aH=Object.keys(wu);function sk(t){const e=pt(t.ops),n=pt(t.fields),i=pt(t.params),r=pt(t.as),s=this.outputs=[],o=this.windows=[],a={},l={},u=[],c=[];let f=!0;function h(d){pt(Ve(d)).forEach(p=>a[p]=1)}h(t.sort),e.forEach((d,p)=>{const g=n[p],m=le(g),y=O5(d,m,r[p]);if(h(g),s.push(y),gt(wu,d))o.push(sH(d,n[p],i[p],y));else{if(g==null&&d!=="count"&&I("Null aggregate field specified."),d==="count"){u.push(y);return}f=!1;let _=l[m];_||(_=l[m]=[],_.field=g,c.push(_)),_.push(N5(d,y))}}),(u.length||c.length)&&(this.cell=lH(c,u,f)),this.inputs=Object.keys(a)}const ok=sk.prototype;ok.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()};ok.update=function(t,e){const n=this.cell,i=this.windows,r=t.data,s=i&&i.length;let o;if(n){for(o=t.p0;o<t.i0;++o)n.rem(r[o]);for(o=t.p1;o<t.i1;++o)n.add(r[o]);n.set(e)}for(o=0;o<s;++o)i[o].update(t,e)};function lH(t,e,n){t=t.map(l=>P5(l,l.field));const i={num:0,agg:null,store:!1,count:e};if(!n)for(var r=t.length,s=i.agg=Array(r),o=0;o<r;++o)s[o]=new t[o](i);if(i.store)var a=i.data=new x1;return i.add=function(l){if(i.num+=1,!n){a&&a.add(l);for(let u=0;u<r;++u)s[u].add(s[u].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){a&&a.rem(l);for(let u=0;u<r;++u)s[u].rem(s[u].get(l),l)}},i.set=function(l){let u,c;for(a&&a.values(),u=0,c=e.length;u<c;++u)l[e[u]]=i.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},i.init=function(){i.num=0,a&&a.reset();for(let l=0;l<r;++l)s[l].init()},i}function W1(t){P.call(this,{},t),this._mlen=0,this._mods=[]}W1.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:aH.concat(bu)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};G(W1,P,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),i=io(t.sort),r=_1(t.groupby),s=a=>this.group(r(a));let o=this.state;(!o||n)&&(o=this.state=new sk(t)),n||e.modified(o.inputs)?(this.value={},e.visit(e.SOURCE,a=>s(a).add(a))):(e.visit(e.REM,a=>s(a).remove(a)),e.visit(e.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)uH(this._mods[a],o,i,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(o.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=R5(ut),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}});function uH(t,e,n,i){const r=i.sort,s=r&&!i.ignorePeers,o=i.frame||[null,0],a=t.data(n),l=a.length,u=s?Yl(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||Ge(-1)};e.init();for(let f=0;f<l;++f)cH(c,o,f,l),s&&fH(c,u),e.update(c,a[f])}function cH(t,e,n,i){t.p0=t.i0,t.p1=t.i1,t.i0=e[0]==null?0:Math.max(0,n-Math.abs(e[0])),t.i1=e[1]==null?i:Math.min(i,n+Math.abs(e[1])+1),t.index=n}function fH(t,e){const n=t.i0,i=t.i1-1,r=t.compare,s=t.data,o=s.length-1;n>0&&!r(s[n],s[n-1])&&(t.i0=e.left(s,s[n])),i<o&&!r(s[i],s[i+1])&&(t.i1=e.right(s,s[i]))}var hH=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",aggregate:ts,bin:b1,collect:w1,compare:L5,countpattern:E1,cross:k1,density:A1,dotbin:M1,expression:H5,extent:S1,facet:lh,field:W5,filter:D1,flatten:$1,fold:O1,formula:N1,generate:V5,impute:F1,joinaggregate:P1,kde:R1,key:Y5,load:G5,lookup:I1,multiextent:K5,multivalues:X5,params:Q5,pivot:B1,prefacet:Z5,project:z1,proxy:J5,quantile:U1,relay:tk,sample:j1,sequence:q1,sieve:ek,subflow:T1,timeunit:H1,tupleindex:ik,values:rk,window:W1});const V1=Math.PI,Y1=2*V1,so=1e-6,dH=Y1-so;function G1(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function oo(){return new G1}G1.prototype=oo.prototype={constructor:G1,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var s=this._x1,o=this._y1,a=n-t,l=i-e,u=s-t,c=o-e,f=u*u+c*c;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>so)if(!(Math.abs(c*a-l*u)>so)||!r)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-s,d=i-o,p=a*a+l*l,g=h*h+d*d,m=Math.sqrt(p),y=Math.sqrt(f),_=r*Math.tan((V1-Math.acos((p+f-g)/(2*m*y)))/2),v=_/y,x=_/m;Math.abs(v-1)>so&&(this._+="L"+(t+v*u)+","+(e+v*c)),this._+="A"+r+","+r+",0,0,"+ +(c*h>u*d)+","+(this._x1=t+x*a)+","+(this._y1=e+x*l)}},arc:function(t,e,n,i,r,s){t=+t,e=+e,n=+n,s=!!s;var o=n*Math.cos(i),a=n*Math.sin(i),l=t+o,u=e+a,c=1^s,f=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+u:(Math.abs(this._x1-l)>so||Math.abs(this._y1-u)>so)&&(this._+="L"+l+","+u),!!n&&(f<0&&(f=f%Y1+Y1),f>dH?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):f>so&&(this._+="A"+n+","+n+",0,"+ +(f>=V1)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function jt(t){return function(){return t}}var ak=Math.abs,Re=Math.atan2,ao=Math.cos,pH=Math.max,K1=Math.min,qi=Math.sin,Ma=Math.sqrt,Le=1e-12,Sa=Math.PI,ch=Sa/2,lk=2*Sa;function gH(t){return t>1?0:t<-1?Sa:Math.acos(t)}function uk(t){return t>=1?ch:t<=-1?-ch:Math.asin(t)}function mH(t){return t.innerRadius}function yH(t){return t.outerRadius}function _H(t){return t.startAngle}function vH(t){return t.endAngle}function xH(t){return t&&t.padAngle}function bH(t,e,n,i,r,s,o,a){var l=n-t,u=i-e,c=o-r,f=a-s,h=f*l-c*u;if(!(h*h<Le))return h=(c*(e-s)-f*(t-r))/h,[t+h*l,e+h*u]}function fh(t,e,n,i,r,s,o){var a=t-n,l=e-i,u=(o?s:-s)/Ma(a*a+l*l),c=u*l,f=-u*a,h=t+c,d=e+f,p=n+c,g=i+f,m=(h+p)/2,y=(d+g)/2,_=p-h,v=g-d,x=_*_+v*v,w=r-s,k=h*g-p*d,b=(v<0?-1:1)*Ma(pH(0,w*w*x-k*k)),C=(k*v-_*b)/x,T=(-k*_-v*b)/x,M=(k*v+_*b)/x,S=(-k*_+v*b)/x,$=C-m,O=T-y,U=M-m,N=S-y;return $*$+O*O>U*U+N*N&&(C=M,T=S),{cx:C,cy:T,x01:-c,y01:-f,x11:C*(r/w-1),y11:T*(r/w-1)}}function wH(){var t=mH,e=yH,n=jt(0),i=null,r=_H,s=vH,o=xH,a=null;function l(){var u,c,f=+t.apply(this,arguments),h=+e.apply(this,arguments),d=r.apply(this,arguments)-ch,p=s.apply(this,arguments)-ch,g=ak(p-d),m=p>d;if(a||(a=u=oo()),h<f&&(c=h,h=f,f=c),!(h>Le))a.moveTo(0,0);else if(g>lk-Le)a.moveTo(h*ao(d),h*qi(d)),a.arc(0,0,h,d,p,!m),f>Le&&(a.moveTo(f*ao(p),f*qi(p)),a.arc(0,0,f,p,d,m));else{var y=d,_=p,v=d,x=p,w=g,k=g,b=o.apply(this,arguments)/2,C=b>Le&&(i?+i.apply(this,arguments):Ma(f*f+h*h)),T=K1(ak(h-f)/2,+n.apply(this,arguments)),M=T,S=T,$,O;if(C>Le){var U=uk(C/f*qi(b)),N=uk(C/h*qi(b));(w-=U*2)>Le?(U*=m?1:-1,v+=U,x-=U):(w=0,v=x=(d+p)/2),(k-=N*2)>Le?(N*=m?1:-1,y+=N,_-=N):(k=0,y=_=(d+p)/2)}var R=h*ao(y),z=h*qi(y),q=f*ao(x),J=f*qi(x);if(T>Le){var yt=h*ao(_),Ot=h*qi(_),Dt=f*ao(v),qt=f*qi(v),Xt;if(g<Sa&&(Xt=bH(R,z,Dt,qt,yt,Ot,q,J))){var ne=R-Xt[0],Mn=z-Xt[1],ce=yt-Xt[0],ge=Ot-Xt[1],Q=1/qi(gH((ne*ce+Mn*ge)/(Ma(ne*ne+Mn*Mn)*Ma(ce*ce+ge*ge)))/2),mt=Ma(Xt[0]*Xt[0]+Xt[1]*Xt[1]);M=K1(T,(f-mt)/(Q-1)),S=K1(T,(h-mt)/(Q+1))}}k>Le?S>Le?($=fh(Dt,qt,R,z,h,S,m),O=fh(yt,Ot,q,J,h,S,m),a.moveTo($.cx+$.x01,$.cy+$.y01),S<T?a.arc($.cx,$.cy,S,Re($.y01,$.x01),Re(O.y01,O.x01),!m):(a.arc($.cx,$.cy,S,Re($.y01,$.x01),Re($.y11,$.x11),!m),a.arc(0,0,h,Re($.cy+$.y11,$.cx+$.x11),Re(O.cy+O.y11,O.cx+O.x11),!m),a.arc(O.cx,O.cy,S,Re(O.y11,O.x11),Re(O.y01,O.x01),!m))):(a.moveTo(R,z),a.arc(0,0,h,y,_,!m)):a.moveTo(R,z),!(f>Le)||!(w>Le)?a.lineTo(q,J):M>Le?($=fh(q,J,yt,Ot,f,-M,m),O=fh(R,z,Dt,qt,f,-M,m),a.lineTo($.cx+$.x01,$.cy+$.y01),M<T?a.arc($.cx,$.cy,M,Re($.y01,$.x01),Re(O.y01,O.x01),!m):(a.arc($.cx,$.cy,M,Re($.y01,$.x01),Re($.y11,$.x11),!m),a.arc(0,0,f,Re($.cy+$.y11,$.cx+$.x11),Re(O.cy+O.y11,O.cx+O.x11),m),a.arc(O.cx,O.cy,M,Re(O.y11,O.x11),Re(O.y01,O.x01),!m))):a.arc(0,0,f,x,v,m)}if(a.closePath(),u)return a=null,u+""||null}return l.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,c=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-Sa/2;return[ao(c)*u,qi(c)*u]},l.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:jt(+u),l):t},l.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:jt(+u),l):e},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:jt(+u),l):n},l.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:jt(+u),l):i},l.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:jt(+u),l):r},l.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:jt(+u),l):s},l.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:jt(+u),l):o},l.context=function(u){return arguments.length?(a=u==null?null:u,l):a},l}function ck(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function fk(t){this._context=t}fk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function X1(t){return new fk(t)}function hk(t){return t[0]}function dk(t){return t[1]}function pk(t,e){var n=jt(!0),i=null,r=X1,s=null;t=typeof t=="function"?t:t===void 0?hk:jt(t),e=typeof e=="function"?e:e===void 0?dk:jt(e);function o(a){var l,u=(a=ck(a)).length,c,f=!1,h;for(i==null&&(s=r(h=oo())),l=0;l<=u;++l)!(l<u&&n(c=a[l],l,a))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(c,l,a),+e(c,l,a));if(h)return s=null,h+""||null}return o.x=function(a){return arguments.length?(t=typeof a=="function"?a:jt(+a),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:jt(+a),o):e},o.defined=function(a){return arguments.length?(n=typeof a=="function"?a:jt(!!a),o):n},o.curve=function(a){return arguments.length?(r=a,i!=null&&(s=r(i)),o):r},o.context=function(a){return arguments.length?(a==null?i=s=null:s=r(i=a),o):i},o}function gk(t,e,n){var i=null,r=jt(!0),s=null,o=X1,a=null;t=typeof t=="function"?t:t===void 0?hk:jt(+t),e=typeof e=="function"?e:jt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?dk:jt(+n);function l(c){var f,h,d,p=(c=ck(c)).length,g,m=!1,y,_=new Array(p),v=new Array(p);for(s==null&&(a=o(y=oo())),f=0;f<=p;++f){if(!(f<p&&r(g=c[f],f,c))===m)if(m=!m)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),d=f-1;d>=h;--d)a.point(_[d],v[d]);a.lineEnd(),a.areaEnd()}m&&(_[f]=+t(g,f,c),v[f]=+e(g,f,c),a.point(i?+i(g,f,c):_[f],n?+n(g,f,c):v[f]))}if(y)return a=null,y+""||null}function u(){return pk().defined(r).curve(o).context(s)}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),i=null,l):t},l.x0=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),l):t},l.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:jt(+c),l):i},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),n=null,l):e},l.y0=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),l):e},l.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:jt(+c),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(i).y(e)},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:jt(!!c),l):r},l.curve=function(c){return arguments.length?(o=c,s!=null&&(a=o(s)),l):o},l.context=function(c){return arguments.length?(c==null?s=a=null:a=o(s=c),l):s},l}var EH={draw:function(t,e){var n=Math.sqrt(e/Sa);t.moveTo(n,0),t.arc(0,0,n,0,lk)}};function kH(t,e){var n=null;t=typeof t=="function"?t:jt(t||EH),e=typeof e=="function"?e:jt(e===void 0?64:+e);function i(){var r;if(n||(n=r=oo()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return i.type=function(r){return arguments.length?(t=typeof r=="function"?r:jt(r),i):t},i.size=function(r){return arguments.length?(e=typeof r=="function"?r:jt(+r),i):e},i.context=function(r){return arguments.length?(n=r==null?null:r,i):n},i}function es(){}function hh(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function dh(t){this._context=t}dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function AH(t){return new dh(t)}function mk(t){this._context=t}mk.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:hh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function CH(t){return new mk(t)}function yk(t){this._context=t}yk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:hh(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function MH(t){return new yk(t)}function _k(t,e){this._basis=new dh(t),this._beta=e}_k.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],s=t[n]-i,o=e[n]-r,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*t[a]+(1-this._beta)*(i+l*s),this._beta*e[a]+(1-this._beta)*(r+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var SH=function t(e){function n(i){return e===1?new dh(i):new _k(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function ph(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Q1(t,e){this._context=t,this._k=(1-e)/6}Q1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ph(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ph(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var TH=function t(e){function n(i){return new Q1(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Z1(t,e){this._context=t,this._k=(1-e)/6}Z1.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ph(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var DH=function t(e){function n(i){return new Z1(i,e)}return n.tension=function(i){return t(+i)},n}(0);function J1(t,e){this._context=t,this._k=(1-e)/6}J1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ph(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $H=function t(e){function n(i){return new J1(i,e)}return n.tension=function(i){return t(+i)},n}(0);function tm(t,e,n){var i=t._x1,r=t._y1,s=t._x2,o=t._y2;if(t._l01_a>Le){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Le){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,s,o,t._x2,t._y2)}function vk(t,e){this._context=t,this._alpha=e}vk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:tm(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var OH=function t(e){function n(i){return e?new vk(i,e):new Q1(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function xk(t,e){this._context=t,this._alpha=e}xk.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:tm(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var NH=function t(e){function n(i){return e?new xk(i,e):new Z1(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function bk(t,e){this._context=t,this._alpha=e}bk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tm(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var FH=function t(e){function n(i){return e?new bk(i,e):new J1(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function wk(t){this._context=t}wk.prototype={areaStart:es,areaEnd:es,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function PH(t){return new wk(t)}function Ek(t){return t<0?-1:1}function kk(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(Ek(s)+Ek(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ak(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function em(t,e,n){var i=t._x0,r=t._y0,s=t._x1,o=t._y1,a=(s-i)/3;t._context.bezierCurveTo(i+a,r+a*e,s-a,o-a*n,s,o)}function gh(t){this._context=t}gh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:em(this,this._t0,Ak(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,em(this,Ak(this,n=kk(this,t,e)),n);break;default:em(this,this._t0,n=kk(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Ck(t){this._context=new Mk(t)}(Ck.prototype=Object.create(gh.prototype)).point=function(t,e){gh.prototype.point.call(this,e,t)};function Mk(t){this._context=t}Mk.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function RH(t){return new gh(t)}function LH(t){return new Ck(t)}function Sk(t){this._context=t}Sk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=Tk(t),r=Tk(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Tk(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),o=new Array(n);for(r[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,o[e]-=i*o[e-1];for(r[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(o[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function IH(t){return new Sk(t)}function mh(t,e){this._context=t,this._t=e}mh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function BH(t){return new mh(t,.5)}function zH(t){return new mh(t,0)}function UH(t){return new mh(t,1)}function Ta(t,e){if(typeof document!="undefined"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}const jH=()=>typeof Image!="undefined"?Image:null;function Hi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ns(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nm=Symbol("implicit");function im(){var t=new Map,e=[],n=[],i=nm;function r(s){var o=s+"",a=t.get(o);if(!a){if(i!==nm)return i;t.set(o,a=e.push(s))}return n[(a-1)%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new Map;for(const o of s){const a=o+"";t.has(a)||t.set(a,e.push(o))}return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return im(e,n).unknown(i)},Hi.apply(r,arguments),r}function Da(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Eu(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function is(){}var lo=.7,$a=1/lo,Oa="\\s*([+-]?\\d+)\\s*",ku="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qH=/^#([0-9a-f]{3,8})$/,HH=new RegExp("^rgb\\("+[Oa,Oa,Oa]+"\\)$"),WH=new RegExp("^rgb\\("+[Wi,Wi,Wi]+"\\)$"),VH=new RegExp("^rgba\\("+[Oa,Oa,Oa,ku]+"\\)$"),YH=new RegExp("^rgba\\("+[Wi,Wi,Wi,ku]+"\\)$"),GH=new RegExp("^hsl\\("+[ku,Wi,Wi]+"\\)$"),KH=new RegExp("^hsla\\("+[ku,Wi,Wi,ku]+"\\)$"),Dk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Da(is,Au,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:$k,formatHex:$k,formatHsl:XH,formatRgb:Ok,toString:Ok});function $k(){return this.rgb().formatHex()}function XH(){return Lk(this).formatHsl()}function Ok(){return this.rgb().formatRgb()}function Au(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=qH.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Nk(e):n===3?new De(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?yh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?yh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=HH.exec(t))?new De(e[1],e[2],e[3],1):(e=WH.exec(t))?new De(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=VH.exec(t))?yh(e[1],e[2],e[3],e[4]):(e=YH.exec(t))?yh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=GH.exec(t))?Rk(e[1],e[2]/100,e[3]/100,1):(e=KH.exec(t))?Rk(e[1],e[2]/100,e[3]/100,e[4]):Dk.hasOwnProperty(t)?Nk(Dk[t]):t==="transparent"?new De(NaN,NaN,NaN,0):null}function Nk(t){return new De(t>>16&255,t>>8&255,t&255,1)}function yh(t,e,n,i){return i<=0&&(t=e=n=NaN),new De(t,e,n,i)}function rm(t){return t instanceof is||(t=Au(t)),t?(t=t.rgb(),new De(t.r,t.g,t.b,t.opacity)):new De}function rs(t,e,n,i){return arguments.length===1?rm(t):new De(t,e,n,i==null?1:i)}function De(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Da(De,rs,Eu(is,{brighter:function(t){return t=t==null?$a:Math.pow($a,t),new De(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?lo:Math.pow(lo,t),new De(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fk,formatHex:Fk,formatRgb:Pk,toString:Pk}));function Fk(){return"#"+sm(this.r)+sm(this.g)+sm(this.b)}function Pk(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function sm(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Rk(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vi(t,e,n,i)}function Lk(t){if(t instanceof Vi)return new Vi(t.h,t.s,t.l,t.opacity);if(t instanceof is||(t=Au(t)),!t)return new Vi;if(t instanceof Vi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(n-i)/a+(n<i)*6:n===s?o=(i-e)/a+2:o=(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new Vi(o,a,l,t.opacity)}function _h(t,e,n,i){return arguments.length===1?Lk(t):new Vi(t,e,n,i==null?1:i)}function Vi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Da(Vi,_h,Eu(is,{brighter:function(t){return t=t==null?$a:Math.pow($a,t),new Vi(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?lo:Math.pow(lo,t),new Vi(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new De(om(t>=240?t-240:t+120,r,i),om(t,r,i),om(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function om(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ik=Math.PI/180,Bk=180/Math.PI,vh=18,zk=.96422,Uk=1,jk=.82521,qk=4/29,Na=6/29,Hk=3*Na*Na,QH=Na*Na*Na;function Wk(t){if(t instanceof Yi)return new Yi(t.l,t.a,t.b,t.opacity);if(t instanceof mr)return Vk(t);t instanceof De||(t=rm(t));var e=cm(t.r),n=cm(t.g),i=cm(t.b),r=am((.2225045*e+.7168786*n+.0606169*i)/Uk),s,o;return e===n&&n===i?s=o=r:(s=am((.4360747*e+.3850649*n+.1430804*i)/zk),o=am((.0139322*e+.0971045*n+.7141733*i)/jk)),new Yi(116*r-16,500*(s-r),200*(r-o),t.opacity)}function xh(t,e,n,i){return arguments.length===1?Wk(t):new Yi(t,e,n,i==null?1:i)}function Yi(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}Da(Yi,xh,Eu(is,{brighter:function(t){return new Yi(this.l+vh*(t==null?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Yi(this.l-vh*(t==null?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=zk*lm(e),t=Uk*lm(t),n=jk*lm(n),new De(um(3.1338561*e-1.6168667*t-.4906146*n),um(-.9787684*e+1.9161415*t+.033454*n),um(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function am(t){return t>QH?Math.pow(t,1/3):t/Hk+qk}function lm(t){return t>Na?t*t*t:Hk*(t-qk)}function um(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function cm(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ZH(t){if(t instanceof mr)return new mr(t.h,t.c,t.l,t.opacity);if(t instanceof Yi||(t=Wk(t)),t.a===0&&t.b===0)return new mr(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Bk;return new mr(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function bh(t,e,n,i){return arguments.length===1?ZH(t):new mr(t,e,n,i==null?1:i)}function mr(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Vk(t){if(isNaN(t.h))return new Yi(t.l,0,0,t.opacity);var e=t.h*Ik;return new Yi(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Da(mr,bh,Eu(is,{brighter:function(t){return new mr(this.h,this.c,this.l+vh*(t==null?1:t),this.opacity)},darker:function(t){return new mr(this.h,this.c,this.l-vh*(t==null?1:t),this.opacity)},rgb:function(){return Vk(this).rgb()}}));var Yk=-.14861,fm=1.78277,hm=-.29227,wh=-.90649,Cu=1.97294,Gk=Cu*wh,Kk=Cu*fm,Xk=fm*hm-wh*Yk;function JH(t){if(t instanceof uo)return new uo(t.h,t.s,t.l,t.opacity);t instanceof De||(t=rm(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Xk*i+Gk*e-Kk*n)/(Xk+Gk-Kk),s=i-r,o=(Cu*(n-r)-hm*s)/wh,a=Math.sqrt(o*o+s*s)/(Cu*r*(1-r)),l=a?Math.atan2(o,s)*Bk-120:NaN;return new uo(l<0?l+360:l,a,r,t.opacity)}function dm(t,e,n,i){return arguments.length===1?JH(t):new uo(t,e,n,i==null?1:i)}function uo(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Da(uo,dm,Eu(is,{brighter:function(t){return t=t==null?$a:Math.pow($a,t),new uo(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?lo:Math.pow(lo,t),new uo(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ik,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new De(255*(e+n*(Yk*i+fm*r)),255*(e+n*(hm*i+wh*r)),255*(e+n*(Cu*i)),this.opacity)}}));function Qk(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}function Zk(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],o=i>0?t[i-1]:2*r-s,a=i<e-1?t[i+2]:2*s-r;return Qk((n-i/e)*e,o,r,s,a)}}function Jk(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],s=t[i%e],o=t[(i+1)%e],a=t[(i+2)%e];return Qk((n-i/e)*e,r,s,o,a)}}var Eh=t=>()=>t;function t6(t,e){return function(n){return t+n*e}}function tW(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function kh(t,e){var n=e-t;return n?t6(t,n>180||n<-180?n-360*Math.round(n/360):n):Eh(isNaN(t)?e:t)}function eW(t){return(t=+t)==1?be:function(e,n){return n-e?tW(e,n,t):Eh(isNaN(e)?n:e)}}function be(t,e){var n=e-t;return n?t6(t,n):Eh(isNaN(t)?e:t)}var pm=function t(e){var n=eW(e);function i(r,s){var o=n((r=rs(r)).r,(s=rs(s)).r),a=n(r.g,s.g),l=n(r.b,s.b),u=be(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=t,i}(1);function e6(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=rs(e[o]),i[o]=a.r||0,r[o]=a.g||0,s[o]=a.b||0;return i=t(i),r=t(r),s=t(s),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=s(l),a+""}}}var nW=e6(Zk),iW=e6(Jk);function gm(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function n6(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function rW(t,e){return(n6(e)?gm:i6)(t,e)}function i6(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),o;for(o=0;o<i;++o)r[o]=ss(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(a){for(o=0;o<i;++o)s[o]=r[o](a);return s}}function r6(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function yi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function s6(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=ss(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var mm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ym=new RegExp(mm.source,"g");function sW(t){return function(){return t}}function oW(t){return function(e){return t(e)+""}}function o6(t,e){var n=mm.lastIndex=ym.lastIndex=0,i,r,s,o=-1,a=[],l=[];for(t=t+"",e=e+"";(i=mm.exec(t))&&(r=ym.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(i=i[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:yi(i,r)})),n=ym.lastIndex;return n<e.length&&(s=e.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?oW(l[0].x):sW(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}function ss(t,e){var n=typeof e,i;return e==null||n==="boolean"?Eh(e):(n==="number"?yi:n==="string"?(i=Au(e))?(e=i,pm):o6:e instanceof Au?pm:e instanceof Date?r6:n6(e)?gm:Array.isArray(e)?i6:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?s6:yi)(t,e)}function aW(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function lW(t,e){var n=kh(+t,+e);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Mu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var a6=180/Math.PI,_m={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function l6(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*a6,skewX:Math.atan(l)*a6,scaleX:o,scaleY:a}}var Ah;function uW(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?_m:l6(e.a,e.b,e.c,e.d,e.e,e.f)}function cW(t){return t==null||(Ah||(Ah=document.createElementNS("http://www.w3.org/2000/svg","g")),Ah.setAttribute("transform",t),!(t=Ah.transform.baseVal.consolidate()))?_m:(t=t.matrix,l6(t.a,t.b,t.c,t.d,t.e,t.f))}function u6(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function s(u,c,f,h,d,p){if(u!==f||c!==h){var g=d.push("translate(",null,e,null,n);p.push({i:g-4,x:yi(u,f)},{i:g-2,x:yi(c,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function o(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:yi(u,c)})):c&&f.push(r(f)+"rotate("+c+i)}function a(u,c,f,h){u!==c?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:yi(u,c)}):c&&f.push(r(f)+"skewX("+c+i)}function l(u,c,f,h,d,p){if(u!==f||c!==h){var g=d.push(r(d)+"scale(",null,",",null,")");p.push({i:g-4,x:yi(u,f)},{i:g-2,x:yi(c,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,f,h),o(u.rotate,c.rotate,f,h),a(u.skewX,c.skewX,f,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(d){for(var p=-1,g=h.length,m;++p<g;)f[(m=h[p]).i]=m.x(d);return f.join("")}}}var fW=u6(uW,"px, ","px)","deg)"),hW=u6(cW,", ",")",")"),dW=1e-12;function c6(t){return((t=Math.exp(t))+1/t)/2}function pW(t){return((t=Math.exp(t))-1/t)/2}function gW(t){return((t=Math.exp(2*t))-1)/(t+1)}var mW=function t(e,n,i){function r(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],f=o[1],h=o[2],d=c-a,p=f-l,g=d*d+p*p,m,y;if(g<dW)y=Math.log(h/u)/e,m=function(b){return[a+b*d,l+b*p,u*Math.exp(e*b*y)]};else{var _=Math.sqrt(g),v=(h*h-u*u+i*g)/(2*u*n*_),x=(h*h-u*u-i*g)/(2*h*n*_),w=Math.log(Math.sqrt(v*v+1)-v),k=Math.log(Math.sqrt(x*x+1)-x);y=(k-w)/e,m=function(b){var C=b*y,T=c6(w),M=u/(n*_)*(T*gW(e*C+w)-pW(w));return[a+M*d,l+M*p,u*T/c6(e*C+w)]}}return m.duration=y*1e3*e/Math.SQRT2,m}return r.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return t(o,a,l)},r}(Math.SQRT2,2,4);function f6(t){return function(e,n){var i=t((e=_h(e)).h,(n=_h(n)).h),r=be(e.s,n.s),s=be(e.l,n.l),o=be(e.opacity,n.opacity);return function(a){return e.h=i(a),e.s=r(a),e.l=s(a),e.opacity=o(a),e+""}}}var yW=f6(kh),_W=f6(be);function vW(t,e){var n=be((t=xh(t)).l,(e=xh(e)).l),i=be(t.a,e.a),r=be(t.b,e.b),s=be(t.opacity,e.opacity);return function(o){return t.l=n(o),t.a=i(o),t.b=r(o),t.opacity=s(o),t+""}}function h6(t){return function(e,n){var i=t((e=bh(e)).h,(n=bh(n)).h),r=be(e.c,n.c),s=be(e.l,n.l),o=be(e.opacity,n.opacity);return function(a){return e.h=i(a),e.c=r(a),e.l=s(a),e.opacity=o(a),e+""}}}var xW=h6(kh),bW=h6(be);function d6(t){return function e(n){n=+n;function i(r,s){var o=t((r=dm(r)).h,(s=dm(s)).h),a=be(r.s,s.s),l=be(r.l,s.l),u=be(r.opacity,s.opacity);return function(c){return r.h=o(c),r.s=a(c),r.l=l(Math.pow(c,n)),r.opacity=u(c),r+""}}return i.gamma=e,i}(1)}var wW=d6(kh),EW=d6(be);function vm(t,e){e===void 0&&(e=t,t=ss);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return s[a](o-a)}}function kW(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var AW=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",interpolate:ss,interpolateArray:rW,interpolateBasis:Zk,interpolateBasisClosed:Jk,interpolateDate:r6,interpolateDiscrete:aW,interpolateHue:lW,interpolateNumber:yi,interpolateNumberArray:gm,interpolateObject:s6,interpolateRound:Mu,interpolateString:o6,interpolateTransformCss:fW,interpolateTransformSvg:hW,interpolateZoom:mW,interpolateRgb:pm,interpolateRgbBasis:nW,interpolateRgbBasisClosed:iW,interpolateHsl:yW,interpolateHslLong:_W,interpolateLab:vW,interpolateHcl:xW,interpolateHclLong:bW,interpolateCubehelix:wW,interpolateCubehelixLong:EW,piecewise:vm,quantize:kW});function CW(t){return function(){return t}}function xm(t){return+t}var p6=[0,1];function yn(t){return t}function bm(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:CW(isNaN(e)?NaN:.5)}function MW(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function SW(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=bm(r,i),s=n(o,s)):(i=bm(i,r),s=n(s,o)),function(a){return s(i(a))}}function TW(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=bm(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(a){var l=Gl(t,a,1,i)-1;return s[l](r[l](a))}}function Su(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ch(){var t=p6,e=p6,n=ss,i,r,s,o=yn,a,l,u;function c(){var h=Math.min(t.length,e.length);return o!==yn&&(o=MW(t[0],t[h-1])),a=h>2?TW:SW,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(l||(l=a(t.map(i),e,n)))(i(o(h)))}return f.invert=function(h){return o(r((u||(u=a(e,t.map(i),yi)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,xm),c()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=Mu,c()},f.clamp=function(h){return arguments.length?(o=h?!0:yn,c()):o!==yn},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,d){return i=h,r=d,c()}}function g6(){return Ch()(yn,yn)}function m6(t,e,n,i){var r=Vr(t,e,n),s;switch(i=ba(i==null?",f":i),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=lE(r,o))&&(i.precision=s),Dg(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=uE(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=aE(r))&&(i.precision=s-(i.type==="%")*2);break}}return Kf(i)}function co(t){var e=t.domain;return t.ticks=function(n){var i=e();return Cg(i[0],i[i.length-1],n==null?10:n)},t.tickFormat=function(n,i){var r=e();return m6(r[0],r[r.length-1],n==null?10:n,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,o=i[r],a=i[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=r,r=s,s=u);c-- >0;){if(u=G3(o,a,n),u===l)return i[r]=o,i[s]=a,e(i);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return t},t}function y6(){var t=g6();return t.copy=function(){return Su(t,y6())},Hi.apply(t,arguments),co(t)}function _6(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,xm),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return _6(t).unknown(e)},t=arguments.length?Array.from(t,xm):[0,1],co(n)}function v6(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],o;return s<r&&(o=n,n=i,i=o,o=r,r=s,s=o),t[n]=e.floor(r),t[i]=e.ceil(s),t}function x6(t){return Math.log(t)}function b6(t){return Math.exp(t)}function DW(t){return-Math.log(-t)}function $W(t){return-Math.exp(-t)}function OW(t){return isFinite(t)?+("1e"+t):t<0?0:t}function NW(t){return t===10?OW:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function FW(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function w6(t){return function(e){return-t(-e)}}function wm(t){var e=t(x6,b6),n=e.domain,i=10,r,s;function o(){return r=FW(i),s=NW(i),n()[0]<0?(r=w6(r),s=w6(s),t(DW,$W)):t(x6,b6),e}return e.base=function(a){return arguments.length?(i=+a,o()):i},e.domain=function(a){return arguments.length?(n(a),o()):n()},e.ticks=function(a){var l=n(),u=l[0],c=l[l.length-1],f;(f=c<u)&&(h=u,u=c,c=h);var h=r(u),d=r(c),p,g,m,y=a==null?10:+a,_=[];if(!(i%1)&&d-h<y){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(g=1,p=s(h);g<i;++g)if(m=p*g,!(m<u)){if(m>c)break;_.push(m)}}else for(;h<=d;++h)for(g=i-1,p=s(h);g>=1;--g)if(m=p*g,!(m<u)){if(m>c)break;_.push(m)}_.length*2<y&&(_=Cg(u,c,y))}else _=Cg(h,d,Math.min(d-h,y)).map(s);return f?_.reverse():_},e.tickFormat=function(a,l){if(l==null&&(l=i===10?".0e":","),typeof l!="function"&&(l=Kf(l)),a===1/0)return l;a==null&&(a=10);var u=Math.max(1,i*a/e.ticks().length);return function(c){var f=c/s(Math.round(r(c)));return f*i<i-.5&&(f*=i),f<=u?l(c):""}},e.nice=function(){return n(v6(n(),{floor:function(a){return s(Math.floor(r(a)))},ceil:function(a){return s(Math.ceil(r(a)))}}))},e}function E6(){var t=wm(Ch()).domain([1,10]);return t.copy=function(){return Su(t,E6()).base(t.base())},Hi.apply(t,arguments),t}function k6(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function A6(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Em(t){var e=1,n=t(k6(e),A6(e));return n.constant=function(i){return arguments.length?t(k6(e=+i),A6(e)):e},co(n)}function C6(){var t=Em(Ch());return t.copy=function(){return Su(t,C6()).constant(t.constant())},Hi.apply(t,arguments)}function M6(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function PW(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function RW(t){return t<0?-t*t:t*t}function km(t){var e=t(yn,yn),n=1;function i(){return n===1?t(yn,yn):n===.5?t(PW,RW):t(M6(n),M6(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},co(e)}function Am(){var t=km(Ch());return t.copy=function(){return Su(t,Am()).exponent(t.exponent())},Hi.apply(t,arguments),t}function LW(){return Am.apply(null,arguments).exponent(.5)}function S6(){var t=[],e=[],n=[],i;function r(){var o=0,a=Math.max(1,e.length);for(n=new Array(a-1);++o<a;)n[o-1]=X3(t,o/a);return s}function s(o){return o==null||isNaN(o=+o)?i:e[Gl(n,o)]}return s.invertExtent=function(o){var a=e.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:t[0],a<n.length?n[a]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let a of o)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(va),r()},s.range=function(o){return arguments.length?(e=Array.from(o),r()):e.slice()},s.unknown=function(o){return arguments.length?(i=o,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return S6().domain(t).range(e).unknown(i)},Hi.apply(s,arguments)}function T6(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function o(l){return l!=null&&l<=l?r[Gl(i,l,0,n)]:s}function a(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,a()):[t,e]},o.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,a()):r.slice()},o.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return i.slice()},o.copy=function(){return T6().domain([t,e]).range(r).unknown(s)},Hi.apply(co(o),arguments)}function D6(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[Gl(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return D6().domain(t).range(e).unknown(n)},Hi.apply(r,arguments)}function IW(t){return new Date(t)}function BW(t){return t instanceof Date?+t:+new Date(+t)}function Cm(t,e,n,i,r,s,o,a,l,u){var c=g6(),f=c.invert,h=c.domain,d=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),_=u("%b %d"),v=u("%B"),x=u("%Y");function w(k){return(l(k)<k?d:a(k)<k?p:o(k)<k?g:s(k)<k?m:i(k)<k?r(k)<k?y:_:n(k)<k?v:x)(k)}return c.invert=function(k){return new Date(f(k))},c.domain=function(k){return arguments.length?h(Array.from(k,BW)):h().map(IW)},c.ticks=function(k){var b=h();return t(b[0],b[b.length-1],k==null?10:k)},c.tickFormat=function(k,b){return b==null?w:u(b)},c.nice=function(k){var b=h();return(!k||typeof k.range!="function")&&(k=e(b[0],b[b.length-1],k==null?10:k)),k?h(v6(b,k)):c},c.copy=function(){return Su(c,Cm(t,e,n,i,r,s,o,a,l,u))},c}function zW(){return Hi.apply(Cm(xz,bz,Kr,Xf,Xl,Gr,Ig,Lg,Yr,Zg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function UW(){return Hi.apply(Cm(_z,vz,Qr,Qf,Zl,Xr,Ug,zg,Yr,Jg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mh(){var t=0,e=1,n,i,r,s,o=yn,a=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(r===0?.5:(f=(s(f)-n)*r,a?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),u):[t,e]},u.clamp=function(f){return arguments.length?(a=!!f,u):a},u.interpolator=function(f){return arguments.length?(o=f,u):o};function c(f){return function(h){var d,p;return arguments.length?([d,p]=h,o=f(d,p),u):[o(0),o(1)]}}return u.range=c(ss),u.rangeRound=c(Mu),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return s=f,n=f(t),i=f(e),r=n===i?0:1/(i-n),u}}function os(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Mm(){var t=co(Mh()(yn));return t.copy=function(){return os(t,Mm())},ns.apply(t,arguments)}function $6(){var t=wm(Mh()).domain([1,10]);return t.copy=function(){return os(t,$6()).base(t.base())},ns.apply(t,arguments)}function O6(){var t=Em(Mh());return t.copy=function(){return os(t,O6()).constant(t.constant())},ns.apply(t,arguments)}function Sm(){var t=km(Mh());return t.copy=function(){return os(t,Sm()).exponent(t.exponent())},ns.apply(t,arguments)}function jW(){return Sm.apply(null,arguments).exponent(.5)}function Sh(){var t=0,e=.5,n=1,i=1,r,s,o,a,l,u=yn,c,f=!1,h;function d(g){return isNaN(g=+g)?h:(g=.5+((g=+c(g))-s)*(i*g<i*s?a:l),u(f?Math.max(0,Math.min(1,g)):g))}d.domain=function(g){return arguments.length?([t,e,n]=g,r=c(t=+t),s=c(e=+e),o=c(n=+n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d):[t,e,n]},d.clamp=function(g){return arguments.length?(f=!!g,d):f},d.interpolator=function(g){return arguments.length?(u=g,d):u};function p(g){return function(m){var y,_,v;return arguments.length?([y,_,v]=m,u=vm(g,[y,_,v]),d):[u(0),u(.5),u(1)]}}return d.range=p(ss),d.rangeRound=p(Mu),d.unknown=function(g){return arguments.length?(h=g,d):h},function(g){return c=g,r=g(t),s=g(e),o=g(n),a=r===s?0:.5/(s-r),l=s===o?0:.5/(o-s),i=s<r?-1:1,d}}function N6(){var t=co(Sh()(yn));return t.copy=function(){return os(t,N6())},ns.apply(t,arguments)}function F6(){var t=wm(Sh()).domain([.1,1,10]);return t.copy=function(){return os(t,F6()).base(t.base())},ns.apply(t,arguments)}function P6(){var t=Em(Sh());return t.copy=function(){return os(t,P6()).constant(t.constant())},ns.apply(t,arguments)}function Tm(){var t=km(Sh());return t.copy=function(){return os(t,Tm()).exponent(t.exponent())},ns.apply(t,arguments)}function qW(){return Tm.apply(null,arguments).exponent(.5)}function Dm(t,e,n){const i=t-e+n*2;return t?i>0?i:1:0}const HW="identity",Fa="linear",yr="log",Tu="pow",Du="sqrt",Th="symlog",fo="time",ho="utc",Gi="sequential",Pa="diverging",Ra="quantile",Dh="quantize",$h="threshold",$m="ordinal",Om="point",R6="band",Nm="bin-ordinal",fe="continuous",$u="discrete",Ou="discretizing",ei="interpolating",Fm="temporal";function WW(t){return function(e){let n=e[0],i=e[1],r;return i<n&&(r=n,n=i,i=r),[t.invert(n),t.invert(i)]}}function VW(t){return function(e){const n=t.range();let i=e[0],r=e[1],s=-1,o,a,l,u;for(r<i&&(a=i,i=r,r=a),l=0,u=n.length;l<u;++l)n[l]>=i&&n[l]<=r&&(s<0&&(s=l),o=l);if(!(s<0))return i=t.invertExtent(n[s]),r=t.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function Pm(){const t=im().unknown(void 0),e=t.domain,n=t.range;let i=[0,1],r,s,o=!1,a=0,l=0,u=.5;delete t.unknown;function c(){const f=e().length,h=i[1]<i[0],d=i[1-h],p=Dm(f,a,l);let g=i[h-0];r=(d-g)/(p||1),o&&(r=Math.floor(r)),g+=(d-g-r*(f-a))*u,s=r*(1-a),o&&(g=Math.round(g),s=Math.round(s));const m=In(f).map(y=>g+r*y);return n(h?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),c()):e()},t.range=function(f){return arguments.length?(i=[+f[0],+f[1]],c()):i.slice()},t.rangeRound=function(f){return i=[+f[0],+f[1]],o=!0,c()},t.bandwidth=function(){return s},t.step=function(){return r},t.round=function(f){return arguments.length?(o=!!f,c()):o},t.padding=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),a=l,c()):a},t.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},t.paddingOuter=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},t.invertRange=function(f){if(f[0]==null||f[1]==null)return;const h=i[1]<i[0],d=h?n().reverse():n(),p=d.length-1;let g=+f[0],m=+f[1],y,_,v;if(!(g!==g||m!==m)&&(m<g&&(v=g,g=m,m=v),!(m<d[0]||g>i[1-h])))return y=Math.max(0,Vf(d,g)-1),_=g===m?y:Vf(d,m)-1,g-d[y]>s+1e-10&&++y,h&&(v=y,y=p-_,_=p-v),y>_?void 0:e().slice(y,_+1)},t.invert=function(f){const h=t.invertRange([f,f]);return h&&h[0]},t.copy=function(){return Pm().domain(e()).range(i).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function L6(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return L6(e())},t}function YW(){return L6(Pm().paddingInner(1))}var GW=Array.prototype.map;function KW(t){return GW.call(t,Ye)}const XW=Array.prototype.slice;function I6(){let t=[],e=[];function n(i){return i==null||i!==i?void 0:e[(Gl(t,i)-1)%e.length]}return n.domain=function(i){return arguments.length?(t=KW(i),n):t.slice()},n.range=function(i){return arguments.length?(e=XW.call(i),n):e.slice()},n.tickFormat=function(i,r){return m6(t[0],Nt(t),i==null?10:i,r)},n.copy=function(){return I6().domain(n.domain()).range(n.range())},n}const Oh={};function QW(t,e,n){const i=function(){const s=e();return s.invertRange||(s.invertRange=s.invert?WW(s):s.invertExtent?VW(s):void 0),s.type=t,s};return i.metadata=zi(pt(n)),i}function zt(t,e,n){return arguments.length>1?(Oh[t]=QW(t,e,n),this):B6(t)?Oh[t]:void 0}zt(HW,_6);zt(Fa,y6,fe);zt(yr,E6,[fe,yr]);zt(Tu,Am,fe);zt(Du,LW,fe);zt(Th,C6,fe);zt(fo,zW,[fe,Fm]);zt(ho,UW,[fe,Fm]);zt(Gi,Mm,[fe,ei]);zt("".concat(Gi,"-").concat(Fa),Mm,[fe,ei]);zt("".concat(Gi,"-").concat(yr),$6,[fe,ei,yr]);zt("".concat(Gi,"-").concat(Tu),Sm,[fe,ei]);zt("".concat(Gi,"-").concat(Du),jW,[fe,ei]);zt("".concat(Gi,"-").concat(Th),O6,[fe,ei]);zt("".concat(Pa,"-").concat(Fa),N6,[fe,ei]);zt("".concat(Pa,"-").concat(yr),F6,[fe,ei,yr]);zt("".concat(Pa,"-").concat(Tu),Tm,[fe,ei]);zt("".concat(Pa,"-").concat(Du),qW,[fe,ei]);zt("".concat(Pa,"-").concat(Th),P6,[fe,ei]);zt(Ra,S6,[Ou,Ra]);zt(Dh,T6,Ou);zt($h,D6,Ou);zt(Nm,I6,[$u,Ou]);zt($m,im,$u);zt(R6,Pm,$u);zt(Om,YW,$u);function B6(t){return gt(Oh,t)}function po(t,e){const n=Oh[t];return n&&n.metadata[e]}function Rm(t){return po(t,fe)}function La(t){return po(t,$u)}function Lm(t){return po(t,Ou)}function z6(t){return po(t,yr)}function ZW(t){return po(t,Fm)}function U6(t){return po(t,ei)}function j6(t){return po(t,Ra)}const JW=["clamp","base","constant","exponent"];function tV(t,e){const n=e[0],i=Nt(e)-n;return function(r){return t(n+r*i)}}function Im(t,e,n){return vm(H6(e||"rgb",n),t)}function eV(t,e){const n=new Array(e),i=e+1;for(let r=0;r<e;)n[r]=t(++r/i);return n}function q6(t,e,n){const i=n-e;let r,s,o;return!i||!Number.isFinite(i)?Ge(.5):(r=(s=t.type).indexOf("-"),s=r<0?s:s.slice(r+1),o=zt(s)().domain([e,n]).range([0,1]),JW.forEach(a=>t[a]?o[a](t[a]()):0),o)}function H6(t,e){const n=AW[nV(t)];return e!=null&&n&&n.gamma?n.gamma(e):n}function nV(t){return"interpolate"+t.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}const iV={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},rV={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function W6(t){const e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}function V6(t,e){for(const n in t)G6(n,e(t[n]))}const Y6={};V6(rV,W6);V6(iV,t=>Im(W6(t)));function G6(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(Y6[t]=e,this):Y6[t]}const Nh="symbol",sV="discrete",oV="gradient",aV=t=>lt(t)?t.map(e=>String(e)):String(t),lV=(t,e)=>t[1]-e[1],uV=(t,e)=>e[1]-t[1];function Bm(t,e,n){let i;return Wl(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),n!=null&&(e=Math.min(e,Math.floor(Wf(t.domain())/n||1)))),Mt(e)&&(i=e.step,e=e.interval),te(e)&&(e=t.type===fo?tu(e):t.type==ho?eu(e):I("Only time and utc scales accept interval strings."),i&&(e=e.every(i))),e}function K6(t,e,n){let i=t.range(),r=i[0],s=Nt(i),o=lV;if(r>s&&(i=s,s=r,r=i,o=uV),r=Math.floor(r),s=Math.ceil(s),e=e.map(a=>[a,t(a)]).filter(a=>r<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&e.length>1){const a=[e[0],Nt(e)];for(;e.length>n&&e.length>=3;)e=e.filter((l,u)=>!(u%2));e.length<3&&(e=a)}return e}function zm(t,e){return t.bins?K6(t,t.bins):t.ticks?t.ticks(e):t.domain()}function X6(t,e,n,i,r,s){const o=e.type;let a=aV;if(o===fo||r===fo)a=t.timeFormat(i);else if(o===ho||r===ho)a=t.utcFormat(i);else if(z6(o)){const l=t.formatFloat(i);if(s||e.bins)a=l;else{const u=Q6(e,n,!1);a=c=>u(c)?l(c):""}}else if(e.tickFormat){const l=e.domain();a=t.formatSpan(l[0],l[l.length-1],n,i)}else i&&(a=t.format(i));return a}function Q6(t,e,n){const i=zm(t,e),r=t.base(),s=Math.log(r),o=Math.max(1,r*e/i.length),a=l=>{let u=l/Math.pow(r,Math.round(Math.log(l)/s));return u*r<r-.5&&(u*=r),u<=o};return n?i.filter(a):a}const Um={[Ra]:"quantiles",[Dh]:"thresholds",[$h]:"domain"},Z6={[Ra]:"quantiles",[Dh]:"domain"};function J6(t,e){return t.bins?hV(t.bins):t.type===yr?Q6(t,e,!0):Um[t.type]?fV(t[Um[t.type]]()):zm(t,e)}function cV(t,e,n){const i=e[Z6[e.type]](),r=i.length;let s=r>1?i[1]-i[0]:i[0],o;for(o=1;o<r;++o)s=Math.min(s,i[o]-i[o-1]);return t.formatSpan(0,s,3*10,n)}function fV(t){const e=[-1/0].concat(t);return e.max=1/0,e}function hV(t){const e=t.slice(0,-1);return e.max=Nt(t),e}const dV=t=>Um[t.type]||t.bins;function tA(t,e,n,i,r,s,o){const a=Z6[e.type]&&s!==fo&&s!==ho?cV(t,e,r):X6(t,e,n,r,s,o);return i===Nh&&dV(e)?pV(a):i===sV?gV(a):mV(a)}const pV=t=>(e,n,i)=>{const r=eA(i[n+1],eA(i.max,1/0)),s=nA(e,t),o=nA(r,t);return s&&o?s+" \u2013 "+o:o?"< "+o:"\u2265 "+s},eA=(t,e)=>t!=null?t:e,gV=t=>(e,n)=>n?t(e):null,mV=t=>e=>t(e),nA=(t,e)=>Number.isFinite(t)?e(t):null;function yV(t){const e=t.domain(),n=e.length-1;let i=+e[0],r=+Nt(e),s=r-i;if(t.type===$h){const o=n?s/n:.1;i-=o,r+=o,s=r-i}return o=>(o-i)/s}function _V(t,e,n,i){const r=i||e.type;return te(n)&&ZW(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===fo?t.timeFormat("%A, %d %B %Y, %X"):!n&&r===ho?t.utcFormat("%A, %d %B %Y, %X UTC"):tA(t,e,5,null,n,i,!0)}function iA(t,e,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=_V(t,e,n.format,n.formatType);if(Lm(e.type)){const s=J6(e).slice(1).map(r),o=s.length;return"".concat(o," boundar").concat(o===1?"y":"ies",": ").concat(s.join(", "))}else if(La(e.type)){const s=e.domain(),o=s.length,a=o>i?s.slice(0,i-2).map(r).join(", ")+", ending with "+s.slice(-1).map(r):s.map(r).join(", ");return"".concat(o," value").concat(o===1?"":"s",": ").concat(a)}else{const s=e.domain();return"values from ".concat(r(s[0])," to ").concat(r(Nt(s)))}}let vV=0;const Fh="p_";function jm(t){return t&&t.gradient}function rA(t,e,n){const i=t.gradient;let r=t.id,s=i==="radial"?Fh:"";return r||(r=t.id="gradient_"+vV++,i==="radial"?(t.x1=Ki(t.x1,.5),t.y1=Ki(t.y1,.5),t.r1=Ki(t.r1,0),t.x2=Ki(t.x2,.5),t.y2=Ki(t.y2,.5),t.r2=Ki(t.r2,.5),s=Fh):(t.x1=Ki(t.x1,0),t.y1=Ki(t.y1,0),t.x2=Ki(t.x2,1),t.y2=Ki(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+s+r+")"}function Ki(t,e){return t!=null?t:e}function xV(t,e){var n=[],i;return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(r,s){return n.push({offset:r,color:s}),i}}}const sA={basis:{curve:AH},"basis-closed":{curve:CH},"basis-open":{curve:MH},bundle:{curve:SH,tension:"beta",value:.85},cardinal:{curve:TH,tension:"tension",value:0},"cardinal-open":{curve:$H,tension:"tension",value:0},"cardinal-closed":{curve:DH,tension:"tension",value:0},"catmull-rom":{curve:OH,tension:"alpha",value:.5},"catmull-rom-closed":{curve:NH,tension:"alpha",value:.5},"catmull-rom-open":{curve:FH,tension:"alpha",value:.5},linear:{curve:X1},"linear-closed":{curve:PH},monotone:{horizontal:LH,vertical:RH},natural:{curve:IH},step:{curve:BH},"step-after":{curve:UH},"step-before":{curve:zH}};function oA(t,e,n){var i=gt(sA,t)&&sA[t],r=null;return i&&(r=i.curve||i[e||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const bV={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Nu=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function qm(t){const e=[];let n,i,r,s,o,a,l,u,c,f;const h=t.slice().replace(Nu[0],"###$1").split(Nu[1]).slice(1);for(l=0,c=h.length;l<c;++l){for(n=h[l],i=n.slice(1).trim().replace(Nu[2],"$1###$2").replace(Nu[3],"$1###$2").split(Nu[4]),o=n.charAt(0),r=[o],u=0,f=i.length;u<f;++u)(s=+i[u])===s&&r.push(s);if(a=bV[o.toLowerCase()],r.length-1>a){const d=r.length;for(u=1,e.push([o].concat(r.slice(u,u+=a))),o=o==="M"?"L":o==="m"?"l":o;u<d;u+=a)e.push([o].concat(r.slice(u,u+a)))}else e.push(r)}return e}const as=Math.PI/180,wV=1e-14,go=Math.PI/2,Xi=Math.PI*2,Ia=Math.sqrt(3)/2;var Hm={},Wm={},aA=[].join;function EV(t,e,n,i,r,s,o,a,l){const u=aA.call(arguments);if(Hm[u])return Hm[u];const c=o*as,f=Math.sin(c),h=Math.cos(c);n=Math.abs(n),i=Math.abs(i);const d=h*(a-t)*.5+f*(l-e)*.5,p=h*(l-e)*.5-f*(a-t)*.5;let g=d*d/(n*n)+p*p/(i*i);g>1&&(g=Math.sqrt(g),n*=g,i*=g);const m=h/n,y=f/n,_=-f/i,v=h/i,x=m*a+y*l,w=_*a+v*l,k=m*t+y*e,b=_*t+v*e,C=(k-x)*(k-x)+(b-w)*(b-w);let T=1/C-.25;T<0&&(T=0);let M=Math.sqrt(T);s==r&&(M=-M);const S=.5*(x+k)-M*(b-w),$=.5*(w+b)+M*(k-x),O=Math.atan2(w-$,x-S);let N=Math.atan2(b-$,k-S)-O;N<0&&s===1?N+=Xi:N>0&&s===0&&(N-=Xi);const R=Math.ceil(Math.abs(N/(go+.001))),z=[];for(let q=0;q<R;++q){const J=O+q*N/R,yt=O+(q+1)*N/R;z[q]=[S,$,J,yt,n,i,f,h]}return Hm[u]=z}function kV(t){const e=aA.call(t);if(Wm[e])return Wm[e];var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7];const c=u*o,f=-l*a,h=l*o,d=u*a,p=Math.cos(r),g=Math.sin(r),m=Math.cos(s),y=Math.sin(s),_=.5*(s-r),v=Math.sin(_*.5),x=8/3*v*v/Math.sin(_),w=n+p-x*g,k=i+g+x*p,b=n+m,C=i+y,T=b+x*y,M=C-x*m;return Wm[e]=[c*w+f*k,h*w+d*k,c*T+f*M,h*T+d*M,c*b+f*C,h*b+d*C]}const ni=["l",0,0,0,0,0,0,0];function AV(t,e,n){const i=ni[0]=t[0];if(i==="a"||i==="A")ni[1]=e*t[1],ni[2]=n*t[2],ni[3]=t[3],ni[4]=t[4],ni[5]=t[5],ni[6]=e*t[6],ni[7]=n*t[7];else if(i==="h"||i==="H")ni[1]=e*t[1];else if(i==="v"||i==="V")ni[1]=n*t[1];else for(var r=1,s=t.length;r<s;++r)ni[r]=(r%2==1?e:n)*t[r];return ni}function Ph(t,e,n,i,r,s){var o,a=null,l=0,u=0,c=0,f=0,h,d,p,g;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),s==null&&(s=r),t.beginPath&&t.beginPath();for(var m=0,y=e.length;m<y;++m){switch(o=e[m],(r!==1||s!==1)&&(o=AV(o,r,s)),o[0]){case"l":l+=o[1],u+=o[2],t.lineTo(l+n,u+i);break;case"L":l=o[1],u=o[2],t.lineTo(l+n,u+i);break;case"h":l+=o[1],t.lineTo(l+n,u+i);break;case"H":l=o[1],t.lineTo(l+n,u+i);break;case"v":u+=o[1],t.lineTo(l+n,u+i);break;case"V":u=o[1],t.lineTo(l+n,u+i);break;case"m":l+=o[1],u+=o[2],t.moveTo(l+n,u+i);break;case"M":l=o[1],u=o[2],t.moveTo(l+n,u+i);break;case"c":h=l+o[5],d=u+o[6],c=l+o[3],f=u+o[4],t.bezierCurveTo(l+o[1]+n,u+o[2]+i,c+n,f+i,h+n,d+i),l=h,u=d;break;case"C":l=o[5],u=o[6],c=o[3],f=o[4],t.bezierCurveTo(o[1]+n,o[2]+i,c+n,f+i,l+n,u+i);break;case"s":h=l+o[3],d=u+o[4],c=2*l-c,f=2*u-f,t.bezierCurveTo(c+n,f+i,l+o[1]+n,u+o[2]+i,h+n,d+i),c=l+o[1],f=u+o[2],l=h,u=d;break;case"S":h=o[3],d=o[4],c=2*l-c,f=2*u-f,t.bezierCurveTo(c+n,f+i,o[1]+n,o[2]+i,h+n,d+i),l=h,u=d,c=o[1],f=o[2];break;case"q":h=l+o[3],d=u+o[4],c=l+o[1],f=u+o[2],t.quadraticCurveTo(c+n,f+i,h+n,d+i),l=h,u=d;break;case"Q":h=o[3],d=o[4],t.quadraticCurveTo(o[1]+n,o[2]+i,h+n,d+i),l=h,u=d,c=o[1],f=o[2];break;case"t":h=l+o[1],d=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,f=u):a[0]==="t"?(c=2*l-p,f=2*u-g):a[0]==="q"&&(c=2*l-c,f=2*u-f),p=c,g=f,t.quadraticCurveTo(c+n,f+i,h+n,d+i),l=h,u=d,c=l+o[1],f=u+o[2];break;case"T":h=o[1],d=o[2],c=2*l-c,f=2*u-f,t.quadraticCurveTo(c+n,f+i,h+n,d+i),l=h,u=d;break;case"a":lA(t,l+n,u+i,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+i]),l+=o[6],u+=o[7];break;case"A":lA(t,l+n,u+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),l=o[6],u=o[7];break;case"z":case"Z":t.closePath();break}a=o}}function lA(t,e,n,i){const r=EV(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let s=0;s<r.length;++s){const o=kV(r[s]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const uA=.5773502691896257,cA={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,Xi)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,r=n/2.5,s=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-s),t.lineTo(r,-s),t.lineTo(0,-n),t.lineTo(-r,-s),t.lineTo(-i,-s),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ia*n,r=i-n*uA,s=n/4;t.moveTo(0,-i-r),t.lineTo(-s,i-r),t.lineTo(s,i-r),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ia*n,r=i-n*uA;t.moveTo(0,-i-r),t.lineTo(-n,i-r),t.lineTo(n,i-r),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ia*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ia*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ia*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Ia*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function CV(t){return gt(cA,t)?cA[t]:MV(t)}var Vm={};function MV(t){if(!gt(Vm,t)){const e=qm(t);Vm[t]={draw:function(n,i){Ph(n,e,0,0,Math.sqrt(i)/2)}}}return Vm[t]}const ls=.448084975506;function SV(t){return t.x}function TV(t){return t.y}function DV(t){return t.width}function $V(t){return t.height}function _r(t){return typeof t=="function"?t:()=>+t}function Rh(t,e,n){return Math.max(e,Math.min(t,n))}function OV(){var t=SV,e=TV,n=DV,i=$V,r=_r(0),s=r,o=r,a=r,l=null;function u(c,f,h){var d,p=f!=null?f:+t.call(this,c),g=h!=null?h:+e.call(this,c),m=+n.call(this,c),y=+i.call(this,c),_=Math.min(m,y)/2,v=Rh(+r.call(this,c),0,_),x=Rh(+s.call(this,c),0,_),w=Rh(+o.call(this,c),0,_),k=Rh(+a.call(this,c),0,_);if(l||(l=d=oo()),v<=0&&x<=0&&w<=0&&k<=0)l.rect(p,g,m,y);else{var b=p+m,C=g+y;l.moveTo(p+v,g),l.lineTo(b-x,g),l.bezierCurveTo(b-ls*x,g,b,g+ls*x,b,g+x),l.lineTo(b,C-k),l.bezierCurveTo(b,C-ls*k,b-ls*k,C,b-k,C),l.lineTo(p+w,C),l.bezierCurveTo(p+ls*w,C,p,C-ls*w,p,C-w),l.lineTo(p,g+v),l.bezierCurveTo(p,g+ls*v,p+ls*v,g,p+v,g),l.closePath()}if(d)return l=null,d+""||null}return u.x=function(c){return arguments.length?(t=_r(c),u):t},u.y=function(c){return arguments.length?(e=_r(c),u):e},u.width=function(c){return arguments.length?(n=_r(c),u):n},u.height=function(c){return arguments.length?(i=_r(c),u):i},u.cornerRadius=function(c,f,h,d){return arguments.length?(r=_r(c),s=f!=null?_r(f):r,a=h!=null?_r(h):r,o=d!=null?_r(d):s,u):r},u.context=function(c){return arguments.length?(l=c==null?null:c,u):l},u}function NV(){var t,e,n,i,r=null,s,o,a,l;function u(f,h,d){const p=d/2;if(s){var g=a-h,m=f-o;if(g||m){var y=Math.sqrt(g*g+m*m),_=(g/=y)*l,v=(m/=y)*l,x=Math.atan2(m,g);r.moveTo(o-_,a-v),r.lineTo(f-g*p,h-m*p),r.arc(f,h,p,x-Math.PI,x),r.lineTo(o+_,a+v),r.arc(o,a,l,x,x+Math.PI)}else r.arc(f,h,p,0,Xi);r.closePath()}else s=1;o=f,a=h,l=p}function c(f){var h,d=f.length,p,g=!1,m;for(r==null&&(r=m=oo()),h=0;h<=d;++h)!(h<d&&i(p=f[h],h,f))===g&&(g=!g)&&(s=0),g&&u(+t(p,h,f),+e(p,h,f),+n(p,h,f));if(m)return r=null,m+""||null}return c.x=function(f){return arguments.length?(t=f,c):t},c.y=function(f){return arguments.length?(e=f,c):e},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(i=f,c):i},c.context=function(f){return arguments.length?(f==null?r=null:r=f,c):r},c}function Fu(t,e){return t!=null?t:e}const Pu=t=>t.x||0,Ru=t=>t.y||0,FV=t=>t.width||0,PV=t=>t.height||0,RV=t=>(t.x||0)+(t.width||0),LV=t=>(t.y||0)+(t.height||0),IV=t=>t.startAngle||0,BV=t=>t.endAngle||0,zV=t=>t.padAngle||0,UV=t=>t.innerRadius||0,jV=t=>t.outerRadius||0,qV=t=>t.cornerRadius||0,HV=t=>Fu(t.cornerRadiusTopLeft,t.cornerRadius)||0,WV=t=>Fu(t.cornerRadiusTopRight,t.cornerRadius)||0,VV=t=>Fu(t.cornerRadiusBottomRight,t.cornerRadius)||0,YV=t=>Fu(t.cornerRadiusBottomLeft,t.cornerRadius)||0,GV=t=>Fu(t.size,64),KV=t=>t.size||1,Lh=t=>t.defined!==!1,XV=t=>CV(t.shape||"circle"),QV=wH().startAngle(IV).endAngle(BV).padAngle(zV).innerRadius(UV).outerRadius(jV).cornerRadius(qV),ZV=gk().x(Pu).y1(Ru).y0(LV).defined(Lh),JV=gk().y(Ru).x1(Pu).x0(RV).defined(Lh),tY=pk().x(Pu).y(Ru).defined(Lh),eY=OV().x(Pu).y(Ru).width(FV).height(PV).cornerRadius(HV,WV,VV,YV),nY=kH().type(XV).size(GV),iY=NV().x(Pu).y(Ru).defined(Lh).size(KV);function Ym(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function rY(t,e){return QV.context(t)(e)}function sY(t,e){const n=e[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?JV:ZV).curve(oA(i,n.orient,n.tension)).context(t)(e)}function oY(t,e){const n=e[0],i=n.interpolate||"linear";return tY.curve(oA(i,n.orient,n.tension)).context(t)(e)}function Ba(t,e,n,i){return eY.context(t)(e,n,i)}function aY(t,e){return(e.mark.shape||e.shape).context(t)(e)}function lY(t,e){return nY.context(t)(e)}function uY(t,e){return iY.context(t)(e)}var cY=1;function Gm(t,e,n){var i=e.clip,r=t._defs,s=e.clip_id||(e.clip_id="clip"+cY++),o=r.clipping[s]||(r.clipping[s]={id:s});return At(i)?o.path=i(null):Ym(n)?o.path=Ba(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function we(t){this.clear(),t&&this.union(t)}we.prototype={clone(){return new we(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(t,e,n){var{x1:i,y1:r,x2:s,y2:o}=this,a=Math.cos(t),l=Math.sin(t),u=e-e*a+n*l,c=n-e*l-n*a;return[a*i-l*r+u,l*i+a*r+c,a*i-l*o+u,l*i+a*o+c,a*s-l*r+u,l*s+a*r+c,a*s-l*o+u,l*s+a*o+c]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Km(t){this.mark=t,this.bounds=this.bounds||new we}function Xm(t){Km.call(this,t),this.items=this.items||[]}G(Xm,Km);function fA(t){this._pending=0,this._loader=t||a1()}function hA(t){t._pending+=1}function Lu(t){t._pending-=1}fA.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return hA(e),e._loader.sanitize(t,{context:"href"}).then(n=>(Lu(e),n)).catch(()=>(Lu(e),null))},loadImage(t){const e=this,n=jH();return hA(e),e._loader.sanitize(t,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const s=new n,o=gt(i,"crossOrigin")?i.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>Lu(e),s.onerror=()=>Lu(e),s.src=r,s}).catch(i=>(Lu(e),{complete:!1,width:0,height:0,src:i&&i.url||""}))},ready(){const t=this;return new Promise(e=>{function n(i){t.pending()?setTimeout(()=>{n(!0)},10):e(i)}n(!1)})}};function us(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const i=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(i+(n?fY(e,i):0))}return t}function fY(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e}const hY=Xi-1e-8;let Ih,Bh,zh,mo,Qm,Uh,Zm,Jm;const cs=(t,e)=>Ih.add(t,e),jh=(t,e)=>cs(Bh=t,zh=e),dA=t=>cs(t,Ih.y1),pA=t=>cs(Ih.x1,t),yo=(t,e)=>Qm*t+Zm*e,_o=(t,e)=>Uh*t+Jm*e,ty=(t,e)=>cs(yo(t,e),_o(t,e)),ey=(t,e)=>jh(yo(t,e),_o(t,e));function qh(t,e){return Ih=t,e?(mo=e*as,Qm=Jm=Math.cos(mo),Uh=Math.sin(mo),Zm=-Uh):(Qm=Jm=1,mo=Uh=Zm=0),dY}const dY={beginPath(){},closePath(){},moveTo:ey,lineTo:ey,rect(t,e,n,i){mo?(ty(t+n,e),ty(t+n,e+i),ty(t,e+i),ey(t,e)):(cs(t+n,e+i),jh(t,e))},quadraticCurveTo(t,e,n,i){const r=yo(t,e),s=_o(t,e),o=yo(n,i),a=_o(n,i);gA(Bh,r,o,dA),gA(zh,s,a,pA),jh(o,a)},bezierCurveTo(t,e,n,i,r,s){const o=yo(t,e),a=_o(t,e),l=yo(n,i),u=_o(n,i),c=yo(r,s),f=_o(r,s);mA(Bh,o,l,c,dA),mA(zh,a,u,f,pA),jh(c,f)},arc(t,e,n,i,r,s){if(i+=mo,r+=mo,Bh=n*Math.cos(r)+t,zh=n*Math.sin(r)+e,Math.abs(r-i)>hY)cs(t-n,e-n),cs(t+n,e+n);else{const o=u=>cs(n*Math.cos(u)+t,n*Math.sin(u)+e);let a,l;if(o(i),o(r),r!==i)if(i=i%Xi,i<0&&(i+=Xi),r=r%Xi,r<0&&(r+=Xi),r<i&&(s=!s,a=i,i=r,r=a),s)for(r-=Xi,a=i-i%go,l=0;l<4&&a>r;++l,a-=go)o(a);else for(a=i-i%go+go,l=0;l<4&&a<r;++l,a=a+go)o(a)}}};function gA(t,e,n,i){const r=(t-e)/(t+n-2*e);0<r&&r<1&&i(t+(e-t)*r)}function mA(t,e,n,i,r){const s=i-t+3*e-3*n,o=t+n-2*e,a=t-e;let l=0,u=0,c;Math.abs(s)>wV?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&r(yA(l,t,e,n,i)),0<u&&u<1&&r(yA(u,t,e,n,i))}function yA(t,e,n,i,r){const s=1-t,o=s*s,a=t*t;return o*s*e+3*o*t*n+3*s*a*i+a*t*r}var fs=(fs=Ta(1,1))?fs.getContext("2d"):null;const ny=new we;function _A(t){return function(e,n){if(!fs)return!0;t(fs,e),ny.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:r,x2:s,y2:o}=ny;for(let a=r;a<=o;++a)for(let l=i;l<=s;++l)if(fs.isPointInPath(l,a))return!0;return!1}}function vA(t,e){return e.contains(t.x||0,t.y||0)}function xA(t,e){const n=t.x||0,i=t.y||0,r=t.width||0,s=t.height||0;return e.intersects(ny.set(n,i,n+r,i+s))}function pY(t,e){const n=t.x||0,i=t.y||0,r=t.x2!=null?t.x2:n,s=t.y2!=null?t.y2:i;return Iu(e,n,i,r,s)}function Iu(t,e,n,i,r){const{x1:s,y1:o,x2:a,y2:l}=t,u=i-e,c=r-n;let f=0,h=1,d,p,g,m;for(m=0;m<4;++m){if(m===0&&(d=-u,p=-(s-e)),m===1&&(d=u,p=a-e),m===2&&(d=-c,p=-(o-n)),m===3&&(d=c,p=l-n),Math.abs(d)<1e-10&&p<0)return!1;if(g=p/d,d<0){if(g>h)return!1;g>f&&(f=g)}else if(d>0){if(g<f)return!1;g<h&&(h=g)}}return!0}function za(t,e){t.globalCompositeOperation=e.blend||"source-over"}function _i(t,e){return t==null?e:t}function bA(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t}function gY(t,e,n){const i=n.width(),r=n.height();let s;if(e.gradient==="radial")s=t.createRadialGradient(n.x1+_i(e.x1,.5)*i,n.y1+_i(e.y1,.5)*r,Math.max(i,r)*_i(e.r1,0),n.x1+_i(e.x2,.5)*i,n.y1+_i(e.y2,.5)*r,Math.max(i,r)*_i(e.r2,.5));else{const o=_i(e.x1,0),a=_i(e.y1,0),l=_i(e.x2,1),u=_i(e.y2,0);if(o===l||a===u||i===r)s=t.createLinearGradient(n.x1+o*i,n.y1+a*r,n.x1+l*i,n.y1+u*r);else{const c=Ta(Math.ceil(i),Math.ceil(r)),f=c.getContext("2d");return f.scale(i,r),f.fillStyle=bA(f.createLinearGradient(o,a,l,u),e.stops),f.fillRect(0,0,i,r),t.createPattern(c,"no-repeat")}}return bA(s,e.stops)}function wA(t,e,n){return jm(n)?gY(t,n,e.bounds):n}function Hh(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=wA(t,e,e.fill),!0):!1}var mY=[];function Ua(t,e,n){var i=(i=e.strokeWidth)!=null?i:1;return i<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=wA(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||mY),t.lineDashOffset=e.strokeDashOffset||0),!0):!1)}function yY(t,e){return t.zindex-e.zindex||t.index-e.index}function EA(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],i,r,s;for(r=0,s=e.length;r<s;++r)i=e[r],i.index=r,i.zindex&&n.push(i);return t.zdirty=!1,t.zitems=n.sort(yY)}function Qi(t,e){var n=t.items,i,r;if(!n||!n.length)return;const s=EA(t);if(s&&s.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||e(n[i]);n=s}for(i=0,r=n.length;i<r;++i)e(n[i])}function iy(t,e){var n=t.items,i,r;if(!n||!n.length)return null;const s=EA(t);for(s&&s.length&&(n=s),r=n.length;--r>=0;)if(i=e(n[r]))return i;if(n===s){for(n=t.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=e(n[r])))return i}return null}function ry(t){return function(e,n,i){Qi(n,r=>{(!i||i.intersects(r.bounds))&&kA(t,e,r,r)})}}function _Y(t){return function(e,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&kA(t,e,n.items[0],n.items)}}function kA(t,e,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(t(e,i)||(za(e,n),n.fill&&Hh(e,n,r)&&e.fill(),n.stroke&&Ua(e,n,r)&&e.stroke()))}function Wh(t){return t=t||gi,function(e,n,i,r,s,o){return i*=e.pixelRatio,r*=e.pixelRatio,iy(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&t(e,a,i,r,s,o))return a})}}function Bu(t,e){return function(n,i,r,s){var o=Array.isArray(i)?i[0]:i,a=e==null?o.fill:e,l=o.stroke&&n.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,n.lineWidth=u!=null?u:1,n.lineCap=c!=null?c:"butt"),t(n,i)?!1:a&&n.isPointInPath(r,s)||l&&n.isPointInStroke(r,s)}}function sy(t){return Wh(Bu(t))}function vo(t,e){return"translate("+t+","+e+")"}function oy(t){return"rotate("+t+")"}function vY(t,e){return"scale("+t+","+e+")"}function AA(t){return vo(t.x||0,t.y||0)}function xY(t){return vo(t.x||0,t.y||0)+(t.angle?" "+oy(t.angle):"")}function bY(t){return vo(t.x||0,t.y||0)+(t.angle?" "+oy(t.angle):"")+(t.scaleX||t.scaleY?" "+vY(t.scaleX||1,t.scaleY||1):"")}function ay(t,e,n){function i(o,a){o("transform",xY(a)),o("d",e(null,a))}function r(o,a){return e(qh(o,a.angle),a),us(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=as),o.beginPath(),e(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:t,tag:"path",nested:!1,attr:i,bound:r,draw:ry(s),pick:sy(s),isect:n||_A(s)}}var wY=ay("arc",rY);function EY(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],i=t[0].orient==="horizontal"?"y":"x",r=t.length,s=1/0,o,a;--r>=0;)t[r].defined!==!1&&(a=Math.abs(t[r][i]-n),a<s&&(s=a,o=t[r]));return o}function kY(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),i=t.length,r,s,o;--i>=0;)if(t[i].defined!==!1&&(r=t[i].x-e[0],s=t[i].y-e[1],o=r*r+s*s,o<n))return t[i];return null}function AY(t,e){for(var n=t.length,i,r,s;--n>=0;)if(t[n].defined!==!1&&(i=t[n].x-e[0],r=t[n].y-e[1],s=i*i+r*r,i=t[n].size||1,s<i*i))return t[n];return null}function ly(t,e,n){function i(l,u){var c=u.mark.items;c.length&&l("d",e(null,c))}function r(l,u){var c=u.items;return c.length===0?l:(e(qh(l),c),us(l,c[0]))}function s(l,u){l.beginPath(),e(l,u)}const o=Bu(s);function a(l,u,c,f,h,d){var p=u.items,g=u.bounds;return!p||!p.length||g&&!g.contains(h,d)?null:(c*=l.pixelRatio,f*=l.pixelRatio,o(l,p,c,f)?p[0]:null)}return{type:t,tag:"path",nested:!0,attr:i,bound:r,draw:_Y(s),pick:a,isect:vA,tip:n}}var CY=ly("area",sY,EY);function MY(t,e){var n=e.clip;t.save(),At(n)?(t.beginPath(),n(t),t.clip()):CA(t,e.group)}function CA(t,e){t.beginPath(),Ym(e)?Ba(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function MA(t){const e=_i(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function SY(t,e){t("transform",AA(e))}function SA(t,e){const n=MA(e);t("d",Ba(null,e,n,n))}function TY(t,e){t("class","background"),t("aria-hidden",!0),SA(t,e)}function DY(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?SA(t,e):t("d","")}function $Y(t,e,n){const i=e.clip?Gm(n,e,e):null;t("clip-path",i)}function OY(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let r=0;r<i;++r)t.union(n[r].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),us(t,e),t.translate(e.x||0,e.y||0)}function zu(t,e,n,i){const r=MA(e);t.beginPath(),Ba(t,e,(n||0)+r,(i||0)+r)}const NY=Bu(zu),FY=Bu(zu,!1),PY=Bu(zu,!0);function RY(t,e,n){Qi(e,i=>{const r=i.x||0,s=i.y||0,o=i.strokeForeground,a=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&a&&(zu(t,i,r,s),za(t,i),i.fill&&Hh(t,i,a)&&t.fill(),i.stroke&&!o&&Ua(t,i,a)&&t.stroke()),t.save(),t.translate(r,s),i.clip&&CA(t,i),n&&n.translate(-r,-s),Qi(i,l=>{this.draw(t,l,n)}),n&&n.translate(r,s),t.restore(),o&&i.stroke&&a&&(zu(t,i,r,s),za(t,i),Ua(t,i,a)&&t.stroke())})}function LY(t,e,n,i,r,s){if(e.bounds&&!e.bounds.contains(r,s)||!e.items)return null;const o=n*t.pixelRatio,a=i*t.pixelRatio;return iy(e,l=>{let u,c,f;const h=l.bounds;if(h&&!h.contains(r,s))return;c=l.x||0,f=l.y||0;const d=c+(l.width||0),p=f+(l.height||0),g=l.clip;if(g&&(r<c||r>d||s<f||s>p))return;if(t.save(),t.translate(c,f),c=r-c,f=s-f,g&&Ym(l)&&!PY(t,l,o,a))return t.restore(),null;const m=l.strokeForeground,y=e.interactive!==!1;return y&&m&&l.stroke&&FY(t,l,o,a)?(t.restore(),l):(u=iy(l,_=>IY(_,c,f)?this.pick(_,n,i,c,f):null),!u&&y&&(l.fill||!m&&l.stroke)&&NY(t,l,o,a)&&(u=l),t.restore(),u||null)})}function IY(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n)}var BY={type:"group",tag:"g",nested:!1,attr:SY,bound:OY,draw:RY,pick:LY,isect:xA,content:$Y,background:TY,foreground:DY},Uu={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function uy(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(i=>{t.image=i,t.image.url=t.url})),n}function cy(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width}function fy(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height}function Vh(t,e){return t==="center"?e/2:t==="right"?e:0}function Yh(t,e){return t==="middle"?e/2:t==="bottom"?e:0}function zY(t,e,n){const i=uy(e,n),r=cy(e,i),s=fy(e,i),o=(e.x||0)-Vh(e.align,r),a=(e.y||0)-Yh(e.baseline,s),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";t("href",l,Uu["xmlns:xlink"],"xlink:href"),t("transform",vo(o,a)),t("width",r),t("height",s),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid")}function UY(t,e){const n=e.image,i=cy(e,n),r=fy(e,n),s=(e.x||0)-Vh(e.align,i),o=(e.y||0)-Yh(e.baseline,r);return t.set(s,o,s+i,o+r)}function jY(t,e,n){Qi(e,i=>{if(n&&!n.intersects(i.bounds))return;const r=uy(i,this);let s=cy(i,r),o=fy(i,r);if(s===0||o===0)return;let a=(i.x||0)-Vh(i.align,s),l=(i.y||0)-Yh(i.baseline,o),u,c,f,h;i.aspect!==!1&&(c=r.width/r.height,f=i.width/i.height,c===c&&f===f&&c!==f&&(f<c?(h=s/c,l+=(o-h)/2,o=h):(h=o*c,a+=(s-h)/2,s=h))),(r.complete||r.toDataURL)&&(za(t,i),t.globalAlpha=(u=i.opacity)!=null?u:1,t.imageSmoothingEnabled=i.smooth!==!1,t.drawImage(r,a,l,s,o))})}var qY={type:"image",tag:"image",nested:!1,attr:zY,bound:UY,draw:jY,pick:Wh(),isect:gi,get:uy,xOffset:Vh,yOffset:Yh},HY=ly("line",oY,kY);function WY(t,e){var n=e.scaleX||1,i=e.scaleY||1;(n!==1||i!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",bY(e)),t("d",e.path)}function Gh(t,e){var n=e.path;if(n==null)return!0;var i=e.x||0,r=e.y||0,s=e.scaleX||1,o=e.scaleY||1,a=(e.angle||0)*as,l=e.pathCache;(!l||l.path!==n)&&((e.pathCache=l=qm(n)).path=n),a&&t.rotate&&t.translate?(t.translate(i,r),t.rotate(a),Ph(t,l,0,0,s,o),t.rotate(-a),t.translate(-i,-r)):Ph(t,l,i,r,s,o)}function VY(t,e){return Gh(qh(t,e.angle),e)?t.set(0,0,0,0):us(t,e,!0)}var YY={type:"path",tag:"path",nested:!1,attr:WY,bound:VY,draw:ry(Gh),pick:sy(Gh),isect:_A(Gh)};function GY(t,e){t("d",Ba(null,e))}function KY(t,e){var n,i;return us(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e)}function TA(t,e){t.beginPath(),Ba(t,e)}var XY={type:"rect",tag:"path",nested:!1,attr:GY,bound:KY,draw:ry(TA),pick:sy(TA),isect:xA};function QY(t,e){t("transform",AA(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0)}function ZY(t,e){var n,i;return us(t.set(n=e.x||0,i=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:i),e)}function DA(t,e,n){var i,r,s,o;return e.stroke&&Ua(t,e,n)?(i=e.x||0,r=e.y||0,s=e.x2!=null?e.x2:i,o=e.y2!=null?e.y2:r,t.beginPath(),t.moveTo(i,r),t.lineTo(s,o),!0):!1}function JY(t,e,n){Qi(e,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&DA(t,i,r)&&(za(t,i),t.stroke())}})}function tG(t,e,n,i){return t.isPointInStroke?DA(t,e,1)&&t.isPointInStroke(n,i):!1}var eG={type:"rule",tag:"line",nested:!1,attr:QY,bound:ZY,draw:JY,pick:Wh(tG),isect:pY},nG=ay("shape",aY),iG=ay("symbol",lY,vA);const $A=$B();var vr={height:xr,measureWidth:dy,estimateWidth:hy,width:hy,canvas:OA};OA(!0);function OA(t){vr.width=t&&fs?dy:hy}function hy(t,e){return NA(hs(t,e),xr(t))}function NA(t,e){return~~(.8*t.length*e)}function dy(t,e){return xr(t)<=0||!(e=hs(t,e))?0:FA(e,py(t))}function FA(t,e){const n=`(${e}) ${t}`;let i=$A.get(n);return i===void 0&&(fs.font=e,i=fs.measureText(t).width,$A.set(n,i)),i}function xr(t){return t.fontSize!=null?+t.fontSize||0:11}function xo(t){return t.lineHeight!=null?t.lineHeight:xr(t)+2}function rG(t){return lt(t)?t.length>1?t:t[0]:t}function ju(t){return rG(t.lineBreak&&t.text&&!lt(t.text)?t.text.split(t.lineBreak):t.text)}function PA(t){const e=ju(t);return(lt(e)?e.length-1:0)*xo(t)}function hs(t,e){const n=e==null?"":(e+"").trim();return t.limit>0&&n.length?oG(t,n):n}function sG(t){if(vr.width===dy){const e=py(t);return n=>FA(n,e)}else{const e=xr(t);return n=>NA(n,e)}}function oG(t,e){var n=+t.limit,i=sG(t);if(i(e)<n)return e;var r=t.ellipsis||"\u2026",s=t.dir==="rtl",o=0,a=e.length,l;if(n-=i(r),s){for(;o<a;)l=o+a>>>1,i(e.slice(l))>n?o=l+1:a=l;return r+e.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),i(e.slice(0,l))<n?o=l:a=l-1;return e.slice(0,o)+r}}function Kh(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function py(t,e){return""+(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+xr(t)+"px "+Kh(t,e)}function gy(t){var e=t.baseline,n=xr(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*xo(t):e==="line-bottom"?.29*n-.5*xo(t):0)}const aG={left:"start",center:"middle",right:"end"},qu=new we;function Xh(t){var e=t.x||0,n=t.y||0,i=t.radius||0,r;return i&&(r=(t.theta||0)-go,e+=i*Math.cos(r),n+=i*Math.sin(r)),qu.x1=e,qu.y1=n,qu}function lG(t,e){var n=e.dx||0,i=(e.dy||0)+gy(e),r=Xh(e),s=r.x1,o=r.y1,a=e.angle||0,l;t("text-anchor",aG[e.align]||"start"),a?(l=vo(s,o)+" "+oy(a),(n||i)&&(l+=" "+vo(n,i))):l=vo(s+n,o+i),t("transform",l)}function my(t,e,n){var i=vr.height(e),r=e.align,s=Xh(e),o=s.x1,a=s.y1,l=e.dx||0,u=(e.dy||0)+gy(e)-Math.round(.8*i),c=ju(e),f;if(lt(c)?(i+=xo(e)*(c.length-1),f=c.reduce((h,d)=>Math.max(h,vr.width(e,d)),0)):f=vr.width(e,c),r==="center"?l-=f/2:r==="right"&&(l-=f),t.set(l+=o,u+=a,l+f,u+i),e.angle&&!n)t.rotate(e.angle*as,o,a);else if(n===2)return t.rotatedPoints(e.angle*as,o,a);return t}function uG(t,e,n){Qi(e,i=>{var r=i.opacity==null?1:i.opacity,s,o,a,l,u,c,f;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(t.font=py(i),t.textAlign=i.align||"left",s=Xh(i),o=s.x1,a=s.y1,i.angle&&(t.save(),t.translate(o,a),t.rotate(i.angle*as),o=a=0),o+=i.dx||0,a+=(i.dy||0)+gy(i),c=ju(i),za(t,i),lt(c))for(u=xo(i),l=0;l<c.length;++l)f=hs(i,c[l]),i.fill&&Hh(t,i,r)&&t.fillText(f,o,a),i.stroke&&Ua(t,i,r)&&t.strokeText(f,o,a),a+=u;else f=hs(i,c),i.fill&&Hh(t,i,r)&&t.fillText(f,o,a),i.stroke&&Ua(t,i,r)&&t.strokeText(f,o,a);i.angle&&t.restore()}})}function cG(t,e,n,i,r,s){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=Xh(e),a=o.x1,l=o.y1,u=my(qu,e,1),c=-e.angle*as,f=Math.cos(c),h=Math.sin(c),d=f*r-h*s+(a-f*a+h*l),p=h*r+f*s+(l-h*a-f*l);return u.contains(d,p)}function fG(t,e){const n=my(qu,t,2);return Iu(e,n[0],n[1],n[2],n[3])||Iu(e,n[0],n[1],n[4],n[5])||Iu(e,n[4],n[5],n[6],n[7])||Iu(e,n[2],n[3],n[6],n[7])}var hG={type:"text",tag:"text",nested:!1,attr:lG,bound:my,draw:uG,pick:Wh(cG),isect:fG},dG=ly("trail",uY,AY),ii={arc:wY,area:CY,group:BY,image:qY,line:HY,path:YY,rect:XY,rule:eG,shape:nG,symbol:iG,text:hG,trail:dG};function RA(t,e,n){var i=ii[t.mark.marktype],r=e||i.bound;return i.nested&&(t=t.mark),r(t.bounds||(t.bounds=new we),t,n)}var LA={mark:null};function pG(t,e,n){var i=ii[t.marktype],r=i.bound,s=t.items,o=s&&s.length,a,l,u,c;if(i.nested)return o?u=s[0]:(LA.mark=t,u=LA),c=RA(u,r,n),e=e&&e.union(c)||c,e;if(e=e||t.bounds&&t.bounds.clear()||new we,o)for(a=0,l=s.length;a<l;++a)e.union(RA(s[a],r,n));return t.bounds=e}const gG=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function mG(t,e){return JSON.stringify(t,gG,e)}function yG(t){const e=typeof t=="string"?JSON.parse(t):t;return IA(e)}function IA(t){var e=t.marktype,n=t.items,i,r,s;if(n)for(r=0,s=n.length;r<s;++r)i=e?"mark":"group",n[r][i]=t,n[r].zindex&&(n[r][i].zdirty=!0),(e||i)==="group"&&IA(n[r]);return e&&pG(t),t}function BA(t){arguments.length?this.root=yG(t):(this.root=zA({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Xm(this.root)])}BA.prototype={toJSON(t){return mG(this.root,t||0)},mark(t,e,n){e=e||this.root.items[0];const i=zA(t,e);return e.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}};function zA(t,e){const n={bounds:new we,clip:!!t.clip,group:e,interactive:t.interactive!==!1,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function bo(t,e,n){return!t&&typeof document!="undefined"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function UA(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===e)return n[i]}function Un(t,e,n,i){var r=t.childNodes[e],s;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(s=r||null,r=bo(t.ownerDocument,n,i),t.insertBefore(r,s)),r}function Zi(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t}function jA(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function yy(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function _G(t,e,n,i){var r=t&&t.mark,s,o;if(r&&(s=ii[r.marktype]).tip){for(o=yy(e,n),o[0]-=i[0],o[1]-=i[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=s.tip(r.items,o)}return t}function wo(t,e){this._active=null,this._handlers={},this._loader=t||a1(),this._tooltip=e||vG}function vG(t,e,n,i){t.element().setAttribute("title",i||"")}wo.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let i=t?t.length:0;--i>=0;)if(t[i].type===e&&(!n||t[i].handler===n))return i;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const i in e)n.push(...e[i]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(t.type,t),s=bo(null,"a");for(const o in i)s.setAttribute(o,i[o]);s.dispatchEvent(r)}).catch(()=>{})},handleTooltip(t,e,n){if(e&&e.tooltip!=null){e=_G(e,t,this.canvas(),this._origin);const i=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,i)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),i=this._origin,r=t.bounds,s=r.width(),o=r.height();let a=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;t.mark&&(t=t.mark.group);)a+=t.x||0,l+=t.y||0;return{x:a,y:l,width:s,height:o,left:a,top:l,right:a+s,bottom:l+o}}};function br(t){this._el=null,this._bgcolor=null,this._loader=new fA(t)}br.prototype={initialize(t,e,n,i,r){return this._el=t,this.resize(e,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,i){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,i=n._loader[t](e);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(s=>{s&&r(),n._ready=null})}return i},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const xG="keydown",bG="keypress",wG="keyup",qA="dragenter",Qh="dragleave",HA="dragover",_y="mousedown",EG="mouseup",Zh="mousemove",Hu="mouseout",WA="mouseover",Jh="click",kG="dblclick",AG="wheel",VA="mousewheel",td="touchstart",ed="touchmove",nd="touchend",CG=[xG,bG,wG,qA,Qh,HA,_y,EG,Zh,Hu,WA,Jh,kG,AG,VA,td,ed,nd],vy=Zh,Wu=Hu,xy=Jh;function id(t,e){wo.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}const MG=t=>t===td||t===ed||t===nd?[td,ed,nd]:[t];function YA(t,e){MG(e).forEach(n=>SG(t,n))}function SG(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?i=>t[e](i):i=>t.fire(e,i)))}function GA(t,e,n){return function(i){const r=this._active,s=this.pickEvent(i);s===r?this.fire(t,i):((!r||!r.exit)&&this.fire(n,i),this._active=s,this.fire(e,i),this.fire(t,i))}}function KA(t){return function(e){this.fire(t,e),this._active=null}}G(id,wo,{initialize(t,e,n){return this._canvas=t&&UA(t,"canvas"),[Jh,_y,Zh,Hu,Qh].forEach(i=>YA(this,i)),wo.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:CG,DOMMouseScroll(t){this.fire(VA,t)},mousemove:GA(Zh,WA,Hu),dragover:GA(HA,qA,Qh),mouseout:KA(Hu),dragleave:KA(Qh),mousedown(t){this._down=this._active,this.fire(_y,t)},click(t){this._down===this._active&&(this.fire(Jh,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(td,t,!0)},touchmove(t){this.fire(ed,t,!0)},touchend(t){this.fire(nd,t,!0),this._touch=null},fire(t,e,n){const i=n?this._touch:this._active,r=this._handlers[t];if(e.vegaType=t,t===xy&&i&&i.href?this.handleHref(e,i,i.href):(t===vy||t===Wu)&&this.handleTooltip(e,i,t!==Wu),r)for(let s=0,o=r.length;s<o;++s)r[s].handler.call(this._obj,e,i)},on(t,e){const n=this.eventName(t),i=this._handlers;return this._handlerIndex(i[n],t,e)<0&&(YA(this,t),(i[n]||(i[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&i.splice(r,1),this},pickEvent(t){const e=yy(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,i,r){const s=this.context();return ii[t.marktype].pick.call(this,s,t,e,n,i,r)}});function TG(){return typeof window!="undefined"&&window.devicePixelRatio||1}var DG=TG();function $G(t,e,n,i,r,s){const o=typeof HTMLElement!="undefined"&&t instanceof HTMLElement&&t.parentNode!=null,a=t.getContext("2d"),l=o?DG:r;t.width=e*l,t.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(t.style.width=e+"px",t.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1]),t}function by(t){br.call(this,t),this._options={},this._redraw=!1,this._dirty=new we,this._tempb=new we}const XA=br.prototype,OG=(t,e,n)=>new we().set(0,0,e,n).translate(-t[0],-t[1]);function NG(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}G(by,br,{initialize(t,e,n,i,r,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Ta(1,1,this._options.type),t&&this._canvas&&(Zi(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),XA.initialize.call(this,t,e,n,i,r)},resize(t,e,n,i){if(XA.resize.call(this,t,e,n,i),this._canvas)$G(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||I("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;for(;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,i=this._width,r=this._height,s=this._dirty,o=OG(n,i,r);e.save();const a=this._redraw||s.empty()?(this._redraw=!1,o.expand(1)):NG(e,o.intersect(s),n);return this.clear(-n[0],-n[1],i,r),this.draw(e,t,a),e.restore(),s.clear(),this},draw(t,e,n){const i=ii[e.marktype];e.clip&&MY(t,e),i.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,i){const r=this._options,s=this.context();r.type!=="pdf"&&!r.externalContext&&s.clearRect(t,e,n,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,e,n,i))}});function QA(t,e){wo.call(this,t,e);const n=this;n._hrefHandler=wy(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href)}),n._tooltipHandler=wy(n,(i,r)=>{n.handleTooltip(i,r,i.type!==Wu)})}const wy=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i)};G(QA,wo,{initialize(t,e,n){let i=this._svg;return i&&(i.removeEventListener(xy,this._hrefHandler),i.removeEventListener(vy,this._tooltipHandler),i.removeEventListener(Wu,this._tooltipHandler)),this._svg=i=t&&UA(t,"svg"),i&&(i.addEventListener(xy,this._hrefHandler),i.addEventListener(vy,this._tooltipHandler),i.addEventListener(Wu,this._tooltipHandler)),wo.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[n],t,e)<0){const s={type:t,handler:e,listener:wy(this,e)};(i[n]||(i[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const ZA="aria-hidden",Ey="aria-label",ky="role",Ay="aria-roledescription",JA="graphics-object",Cy="graphics-symbol",t4=(t,e,n)=>({[ky]:t,[Ay]:e,[Ey]:n||void 0}),FG=zi(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),e4={axis:{desc:"axis",caption:LG},legend:{desc:"legend",caption:IG},"title-text":{desc:"title",caption:t=>`Title text '${s4(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${s4(t)}'`}},n4={ariaRole:ky,ariaRoleDescription:Ay,description:Ey};function i4(t,e){const n=e.aria===!1;if(t(ZA,n||void 0),n||e.description==null)for(const i in n4)t(n4[i],void 0);else{const i=e.mark.marktype;t(Ey,e.description),t(ky,e.ariaRole||(i==="group"?JA:Cy)),t(Ay,e.ariaRoleDescription||`${i} mark`)}}function r4(t){return t.aria===!1?{[ZA]:!0}:FG[t.role]?null:e4[t.role]?RG(t,e4[t.role]):PG(t)}function PG(t){const e=t.marktype,n=e==="group"||e==="text"||t.items.some(i=>i.description!=null&&i.aria!==!1);return t4(n?JA:Cy,`${e} mark container`,t.description)}function RG(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return t4(e.role||Cy,e.desc,n.description||i(n))}catch{return null}}function s4(t){return pt(t.text).join(" ")}function LG(t){const e=t.datum,n=t.orient,i=e.title?o4(t):null,r=t.context,s=r.scales[e.scale].value,o=r.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${La(a)?"discrete":a} scale with ${iA(o,s,t)}`}function IG(t){const e=t.datum,n=e.title?o4(t):null,i=`${e.type||""} legend`.trim(),r=e.scales,s=Object.keys(r),o=t.context,a=o.scales[r[s[0]]].value,l=o.dataflow.locale();return zG(i)+(n?` titled '${n}'`:"")+` for ${BG(s)} with ${iA(l,a,t)}`}function o4(t){try{return pt(Nt(t.items).items[0].text).join(" ")}catch{return null}}function BG(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+Nt(t)}function zG(t){return t.length?t[0].toUpperCase()+t.slice(1):t}const a4=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),UG=t=>a4(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function l4(){let t="",e="",n="";const i=[],r=()=>e=n="",s=l=>{e&&(t+=`${e}>${n}`,r()),i.push(l)},o=(l,u)=>(u!=null&&(e+=` ${l}="${UG(u)}"`),a),a={open(l,...u){s(l),e="<"+l;for(const c of u)for(const f in c)o(f,c[f]);return a},close(){const l=i.pop();return e?t+=e+(n?`>${n}</${l}>`:"/>"):t+=`</${l}>`,r(),a},attr:o,text:l=>(n+=a4(l),a),toString:()=>t};return a}const jG=t=>u4(l4(),t)+"";function u4(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let r=0;r<i;++r)t.attr(n[r].name,n[r].value)}if(e.hasChildNodes()){const n=e.childNodes,i=n.length;for(let r=0;r<i;r++){const s=n[r];s.nodeType===3?t.text(s.nodeValue):u4(t,s)}}return t.close()}const rd={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},c4={fill:"none","stroke-miterlimit":10},Vu=0,f4="http://www.w3.org/2000/xmlns/",he=Uu.xmlns;function h4(t){br.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const My=br.prototype;G(h4,br,{initialize(t,e,n,i,r){return this._defs={},this._clearDefs(),t&&(this._svg=Un(t,0,"svg",he),this._svg.setAttributeNS(f4,"xmlns",he),this._svg.setAttributeNS(f4,"xmlns:xlink",Uu["xmlns:xlink"]),this._svg.setAttribute("version",Uu.version),this._svg.setAttribute("class","marks"),Zi(t,1),this._root=Un(this._svg,Vu,"g",he),ds(this._root,c4),Zi(this._svg,Vu+1)),this.background(this._bgcolor),My.initialize.call(this,t,e,n,i,r)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),My.background.apply(this,arguments)},resize(t,e,n,i){return My.resize.call(this,t,e,n,i),this._svg&&(ds(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=Un(t,Vu,"rect",he),ds(n,{width:this._width,height:this._height,fill:e}));const i=jG(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),i},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),Zi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,i,r,s,o,a,l;for(o=0,a=t.length;o<a;++o)if(n=t[o],i=n.mark,i.marktype!==r&&(r=i.marktype,s=ii[r]),i.zdirty&&i.dirty!==e&&(this._dirtyAll=!1,d4(n,e),i.items.forEach(u=>{u.dirty=e})),!i.zdirty){if(n.exit){s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null;continue}n=s.nested?i.items[0]:n,n._update!==e&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,d4(n,e)):this._update(s,n._svg,n),n._update=e)}return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const i=this._svg,r=ii[e.marktype],s=e.interactive===!1?"none":null,o=r.tag==="g";let a=null,l=0;const u=p4(e,t,n,"g",i);u.setAttribute("class",jA(e));const c=r4(e);for(const h in c)Ze(u,h,c[h]);o||Ze(u,"pointer-events",s),Ze(u,"clip-path",e.clip?Gm(this,e,e.group):null);const f=h=>{const d=this.isDirty(h),p=p4(h,u,a,r.tag,i);d&&(this._update(r,p,h),o&&WG(this,p,h)),a=p,++l};return r.nested?e.items.length&&f(e.items[0]):Qi(e,f),Zi(u,l),u},_update(t,e,n){wr=e,Ie=e.__values__,i4(Yu,n),t.attr(Yu,n,this);const i=YG[t.type];i&&i.call(this,t,e,n),wr&&this.style(wr,n)},style(t,e){if(e!=null)for(const n in rd){let i=n==="font"?Kh(e):e[n];if(i===Ie[n])continue;const r=rd[n];i==null?t.removeAttribute(r):(jm(i)&&(i=rA(i,this._defs.gradient,g4())),t.setAttribute(r,i+"")),Ie[n]=i}},defs(){const t=this._svg,e=this._defs;let n=e.el,i=0;for(const r in e.gradient)n||(e.el=n=Un(t,Vu+1,"defs",he)),i=qG(n,e.gradient[r],i);for(const r in e.clipping)n||(e.el=n=Un(t,Vu+1,"defs",he)),i=HG(n,e.clipping[r],i);n&&(i===0?(t.removeChild(n),e.el=null):Zi(n,i))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});function d4(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return}function qG(t,e,n){let i,r,s;if(e.gradient==="radial"){let o=Un(t,n++,"pattern",he);ds(o,{id:Fh+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Un(o,0,"rect",he),ds(o,{width:1,height:1,fill:`url(${g4()}#${e.id})`}),t=Un(t,n++,"radialGradient",he),ds(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else t=Un(t,n++,"linearGradient",he),ds(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,r=e.stops.length;i<r;++i)s=Un(t,i,"stop",he),s.setAttribute("offset",e.stops[i].offset),s.setAttribute("stop-color",e.stops[i].color);return Zi(t,i),n}function HG(t,e,n){let i;return t=Un(t,n,"clipPath",he),t.setAttribute("id",e.id),e.path?(i=Un(t,0,"path",he),i.setAttribute("d",e.path)):(i=Un(t,0,"rect",he),ds(i,{x:0,y:0,width:e.width,height:e.height})),Zi(t,1),n+1}function WG(t,e,n){e=e.lastChild.previousSibling;let i,r=0;Qi(n,s=>{i=t.mark(e,s,i),++r}),Zi(e,1+r)}function p4(t,e,n,i,r){let s=t._svg,o;if(!s&&(o=e.ownerDocument,s=bo(o,i,he),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},i==="g"))){const a=bo(o,"path",he);s.appendChild(a),a.__data__=t;const l=bo(o,"g",he);s.appendChild(l),l.__data__=t;const u=bo(o,"path",he);s.appendChild(u),u.__data__=t,u.__values__={fill:"default"}}return(s.ownerSVGElement!==r||VG(s,n))&&e.insertBefore(s,n?n.nextSibling:e.firstChild),s}function VG(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}let wr=null,Ie=null;const YG={group(t,e,n){const i=wr=e.childNodes[2];Ie=i.__values__,t.foreground(Yu,n,this),Ie=e.__values__,wr=e.childNodes[1],t.content(Yu,n,this);const r=wr=e.childNodes[0];t.background(Yu,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Ie.events&&(Ze(i,"pointer-events",s),Ze(r,"pointer-events",s),Ie.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ze(i,"display",null),this.style(r,n),Ze(r,"stroke",null),o&&(n.fill=null),Ie=i.__values__,this.style(i,n),o&&(n.fill=o),wr=null}else Ze(i,"display","none")},image(t,e,n){n.smooth===!1?(Sy(e,"image-rendering","optimizeSpeed"),Sy(e,"image-rendering","pixelated")):Sy(e,"image-rendering",null)},text(t,e,n){const i=ju(n);let r,s,o,a;lt(i)?(s=i.map(l=>hs(n,l)),r=s.join(`
`),r!==Ie.text&&(Zi(e,0),o=e.ownerDocument,a=xo(n),s.forEach((l,u)=>{const c=bo(o,"tspan",he);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),e.appendChild(c)}),Ie.text=r)):(s=hs(n,i),s!==Ie.text&&(e.textContent=s,Ie.text=s)),Ze(e,"font-family",Kh(n)),Ze(e,"font-size",xr(n)+"px"),Ze(e,"font-style",n.fontStyle),Ze(e,"font-variant",n.fontVariant),Ze(e,"font-weight",n.fontWeight)}};function Yu(t,e,n){e!==Ie[t]&&(n?GG(wr,t,e,n):Ze(wr,t,e),Ie[t]=e)}function Sy(t,e,n){n!==Ie[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),Ie[e]=n)}function ds(t,e){for(const n in e)Ze(t,n,e[n])}function Ze(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e)}function GG(t,e,n,i){n!=null?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e)}function g4(){let t;return typeof window=="undefined"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function m4(t){br.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}G(m4,br,{svg(){return this._text},_render(t){const e=l4();e.open("svg",bt({},Uu,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",c4,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=ii[e.marktype],i=n.tag,r=[i4,n.attr];t.open("g",{class:jA(e),"clip-path":e.clip?Gm(this,e,e.group):null},r4(e),{"pointer-events":i!=="g"&&e.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&t.open("a",a),t.open(i,this.attr(e,o,r,i!=="g"?i:null)),i==="text"){const l=ju(o);if(lt(l)){const u={x:0,dy:xo(o)};for(let c=0;c<l.length;++c)t.open("tspan",c?u:null).text(hs(o,l[c])).close()}else t.text(hs(o,l))}else if(i==="g"){const l=o.strokeForeground,u=o.fill,c=o.stroke;l&&c&&(o.stroke=null),t.open("path",this.attr(e,o,n.background,"bgrect")).close(),t.open("g",this.attr(e,o,n.content)),Qi(o,f=>this.mark(t,f)),t.close(),l&&c?(u&&(o.fill=null),o.stroke=c,t.open("path",this.attr(e,o,n.foreground,"bgrect")).close(),u&&(o.fill=u)):t.open("path",this.attr(e,o,n.foreground,"bgfore")).close()}t.close(),a&&t.close()};return n.nested?e.items&&e.items.length&&s(e.items[0]):Qi(e,s),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[e]=i})}return null},attr(t,e,n,i){const r={},s=(o,a,l,u)=>{r[u||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,e,this)):n(s,e,this),i&&KG(r,e,t,i,this._defs),r},defs(t){const e=this._defs.gradient,n=this._defs.clipping;if(Object.keys(e).length+Object.keys(n).length!==0){t.open("defs");for(const r in e){const s=e[r],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Fh+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),t.close(),t.open("radialGradient",{id:r,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:r,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)t.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();t.close()}for(const r in n){const s=n[r];t.open("clipPath",{id:r}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}});function KG(t,e,n,i,r){if(e==null||(i==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null)))return t;i==="image"&&e.smooth===!1&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),i==="text"&&(t["font-family"]=Kh(e),t["font-size"]=xr(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const s in rd){let o=e[s];const a=rd[s];o==="transparent"&&(a==="fill"||a==="stroke")||o!=null&&(jm(o)&&(o=rA(o,r.gradient,"")),t[a]=o)}return t}const y4="canvas",_4="png",v4="svg",x4="none",Eo={Canvas:y4,PNG:_4,SVG:v4,None:x4},ja={};ja[y4]=ja[_4]={renderer:by,headless:by,handler:id};ja[v4]={renderer:h4,headless:m4,handler:QA};ja[x4]={};function Ty(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(ja[t]=e,this):ja[t]}function XG(t,e,n){const i=[],r=new we().union(e),s=t.marktype;return s?b4(t,r,n,i):s==="group"?w4(t,r,n,i):I("Intersect scene must be mark node or group item.")}function b4(t,e,n,i){if(QG(t,e,n)){const r=t.items,s=t.marktype,o=r.length;let a=0;if(s==="group")for(;a<o;++a)w4(r[a],e,n,i);else for(const l=ii[s].isect;a<o;++a){const u=r[a];E4(u,e,l)&&i.push(u)}}return i}function QG(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)))}function w4(t,e,n,i){n&&n(t.mark)&&E4(t,e,ii.group.isect)&&i.push(t);const r=t.items,s=r&&r.length;if(s){const o=t.x||0,a=t.y||0;e.translate(-o,-a);for(let l=0;l<s;++l)b4(r[l],e,n,i);e.translate(o,a)}return i}function E4(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e)}const Dy=new we;function ZG(t){const e=t.clip;if(At(e))e(qh(Dy.clear()));else if(e)Dy.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(Dy)}const qa="top",vi="left",xi="right",ps="bottom",JG="top-left",tK="top-right",eK="bottom-left",nK="bottom-right",$y="start",Oy="middle",Je="end",iK="x",rK="y",sd="group",Ny="axis",Fy="title",sK="frame",oK="scope",Py="legend",k4="row-header",A4="row-footer",C4="row-title",M4="column-header",S4="column-footer",T4="column-title",aK="padding",lK="symbol",D4="fit",uK="fit-x",cK="fit-y",fK="pad",Ry="none",od="all",Ly="each",Iy="flush",gs="column",ms="row";function $4(t){P.call(this,null,t)}G($4,P,{transform(t,e){const n=e.dataflow,i=t.mark,r=i.marktype,s=ii[r],o=s.bound;let a=i.bounds,l;if(s.nested)i.items.length&&n.dirty(i.items[0]),a=ad(i,o),i.items.forEach(u=>{u.bounds.clear().union(a)});else if(r===sd||t.modified())switch(e.visit(e.MOD,u=>n.dirty(u)),a.clear(),i.items.forEach(u=>a.union(ad(u,o))),i.role){case Ny:case Py:case Fy:e.reflow()}else l=e.changed(e.REM),e.visit(e.ADD,u=>{a.union(ad(u,o))}),e.visit(e.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(ad(u,o))}),l&&(a.clear(),i.items.forEach(u=>a.union(u.bounds)));return ZG(i),e.modifies("bounds")}});function ad(t,e,n){return e(t.bounds.clear(),t,n)}const O4=":vega_identifier:";function By(t){P.call(this,0,t)}By.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};G(By,P,{transform(t,e){const n=hK(e.dataflow),i=t.as;let r=n.value;return e.visit(e.ADD,s=>s[i]=s[i]||++r),n.set(this.value=r),e}});function hK(t){return t._signals[O4]||(t._signals[O4]=t.add(0))}function N4(t){P.call(this,null,t)}G(N4,P,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,dK(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const i=n.marktype===sd?Xm:Km;return e.visit(e.ADD,r=>i.call(r,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});function dK(t){const e=t.groups,n=t.parent;return e&&e.size===1?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function F4(t){P.call(this,null,t)}const P4={parity:t=>t.filter((e,n)=>n%2?e.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((i,r)=>!r||!R4(n.bounds,i.bounds,e)?(n=i,1):i.opacity=0)}},R4=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),L4=(t,e)=>{for(var n=1,i=t.length,r=t[0].bounds,s;n<i;r=s,++n)if(R4(r,s=t[n].bounds,e))return!0},pK=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},gK=(t,e,n)=>{var i=t.range(),r=new we;return e===qa||e===ps?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),s=>r.encloses(s.bounds)},I4=t=>(t.forEach(e=>e.opacity=1),t),B4=(t,e)=>t.reflow(e.modified()).modifies("opacity");G(F4,P,{transform(t,e){const n=P4[t.method]||P4.parity,i=t.separation||0;let r=e.materialize(e.SOURCE).source,s,o;if(!r||!r.length)return;if(!t.method)return t.modified("method")&&(I4(r),e=B4(e,t)),e;if(r=r.filter(pK),!r.length)return;if(t.sort&&(r=r.slice().sort(t.sort)),s=I4(r),e=B4(e,t),s.length>=3&&L4(s,i)){do s=n(s,i);while(s.length>=3&&L4(s,i));s.length<3&&!Nt(r).opacity&&(s.length>1&&(Nt(s).opacity=0),Nt(r).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(o=gK(t.boundScale,t.boundOrient,+t.boundTolerance),r.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&a.union(l.bounds)}),e}});function z4(t){P.call(this,null,t)}G(z4,P,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,i=>n.dirty(i)),e.fields&&e.fields.zindex){const i=e.source&&e.source[0];i&&(i.mark.zdirty=!0)}}});const Be=new we;function Ha(t,e,n){return t[e]===n?0:(t[e]=n,1)}function mK(t){var e=t.items[0].orient;return e===vi||e===xi}function yK(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function _K(t,e,n,i){var r=e.items[0],s=r.datum,o=r.translate!=null?r.translate:.5,a=r.orient,l=yK(s),u=r.range,c=r.offset,f=r.position,h=r.minExtent,d=r.maxExtent,p=s.title&&r.items[l[2]].items[0],g=r.titlePadding,m=r.bounds,y=p&&PA(p),_=0,v=0,x,w;switch(Be.clear().union(m),m.clear(),(x=l[0])>-1&&m.union(r.items[x].bounds),(x=l[1])>-1&&m.union(r.items[x].bounds),a){case qa:_=f||0,v=-c,w=Math.max(h,Math.min(d,-m.y1)),m.add(0,-w).add(u,0),p&&ld(t,p,w,g,y,0,-1,m);break;case vi:_=-c,v=f||0,w=Math.max(h,Math.min(d,-m.x1)),m.add(-w,0).add(0,u),p&&ld(t,p,w,g,y,1,-1,m);break;case xi:_=n+c,v=f||0,w=Math.max(h,Math.min(d,m.x2)),m.add(0,0).add(w,u),p&&ld(t,p,w,g,y,1,1,m);break;case ps:_=f||0,v=i+c,w=Math.max(h,Math.min(d,m.y2)),m.add(0,0).add(u,w),p&&ld(t,p,w,g,0,0,1,m);break;default:_=r.x,v=r.y}return us(m.translate(_,v),r),Ha(r,"x",_+o)|Ha(r,"y",v+o)&&(r.bounds=Be,t.dirty(r),r.bounds=m,t.dirty(r)),r.mark.bounds.clear().union(m)}function ld(t,e,n,i,r,s,o,a){const l=e.bounds;if(e.auto){const u=o*(n+r+i);let c=0,f=0;t.dirty(e),s?c=(e.x||0)-(e.x=u):f=(e.y||0)-(e.y=u),e.mark.bounds.clear().union(l.translate(-c,-f)),t.dirty(e)}a.union(l)}const U4=(t,e)=>Math.floor(Math.min(t,e)),j4=(t,e)=>Math.ceil(Math.max(t,e));function vK(t){var e=t.items,n=e.length,i=0,r,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=e[i],s=r.items,r.marktype===sd)switch(r.role){case Ny:case Py:case Fy:break;case k4:o.rowheaders.push(...s);break;case A4:o.rowfooters.push(...s);break;case M4:o.colheaders.push(...s);break;case S4:o.colfooters.push(...s);break;case C4:o.rowtitle=s[0];break;case T4:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function xK(t){return new we().set(0,0,t.width||0,t.height||0)}function bK(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function ee(t,e,n){const i=Mt(t)?t[e]:t;return i!=null?i:n!==void 0?n:0}function q4(t){return t<0?Math.ceil(-t):0}function H4(t,e,n){var i=!n.nodirty,r=n.bounds===Iy?xK:bK,s=Be.set(0,0,0,0),o=ee(n.align,gs),a=ee(n.align,ms),l=ee(n.padding,gs),u=ee(n.padding,ms),c=n.columns||e.length,f=c<=0?1:Math.ceil(e.length/c),h=e.length,d=Array(h),p=Array(c),g=0,m=Array(h),y=Array(f),_=0,v=Array(h),x=Array(h),w=Array(h),k,b,C,T,M,S,$,O,U,N,R;for(b=0;b<c;++b)p[b]=0;for(b=0;b<f;++b)y[b]=0;for(b=0;b<h;++b)S=e[b],M=w[b]=r(S),S.x=S.x||0,v[b]=0,S.y=S.y||0,x[b]=0,C=b%c,T=~~(b/c),g=Math.max(g,$=Math.ceil(M.x2)),_=Math.max(_,O=Math.ceil(M.y2)),p[C]=Math.max(p[C],$),y[T]=Math.max(y[T],O),d[b]=l+q4(M.x1),m[b]=u+q4(M.y1),i&&t.dirty(e[b]);for(b=0;b<h;++b)b%c==0&&(d[b]=0),b<c&&(m[b]=0);if(o===Ly)for(C=1;C<c;++C){for(R=0,b=C;b<h;b+=c)R<d[b]&&(R=d[b]);for(b=C;b<h;b+=c)d[b]=R+p[C-1]}else if(o===od){for(R=0,b=0;b<h;++b)b%c&&R<d[b]&&(R=d[b]);for(b=0;b<h;++b)b%c&&(d[b]=R+g)}else for(o=!1,C=1;C<c;++C)for(b=C;b<h;b+=c)d[b]+=p[C-1];if(a===Ly)for(T=1;T<f;++T){for(R=0,b=T*c,k=b+c;b<k;++b)R<m[b]&&(R=m[b]);for(b=T*c;b<k;++b)m[b]=R+y[T-1]}else if(a===od){for(R=0,b=c;b<h;++b)R<m[b]&&(R=m[b]);for(b=c;b<h;++b)m[b]=R+_}else for(a=!1,T=1;T<f;++T)for(b=T*c,k=b+c;b<k;++b)m[b]+=y[T-1];for(U=0,b=0;b<h;++b)U=d[b]+(b%c?U:0),v[b]+=U-e[b].x;for(C=0;C<c;++C)for(N=0,b=C;b<h;b+=c)N+=m[b],x[b]+=N-e[b].y;if(o&&ee(n.center,gs)&&f>1)for(b=0;b<h;++b)M=o===od?g:p[b%c],U=M-w[b].x2-e[b].x-v[b],U>0&&(v[b]+=U/2);if(a&&ee(n.center,ms)&&c!==1)for(b=0;b<h;++b)M=a===od?_:y[~~(b/c)],N=M-w[b].y2-e[b].y-x[b],N>0&&(x[b]+=N/2);for(b=0;b<h;++b)s.union(w[b].translate(v[b],x[b]));switch(U=ee(n.anchor,iK),N=ee(n.anchor,rK),ee(n.anchor,gs)){case Je:U-=s.width();break;case Oy:U-=s.width()/2}switch(ee(n.anchor,ms)){case Je:N-=s.height();break;case Oy:N-=s.height()/2}for(U=Math.round(U),N=Math.round(N),s.clear(),b=0;b<h;++b)e[b].mark.bounds.clear();for(b=0;b<h;++b)S=e[b],S.x+=v[b]+=U,S.y+=x[b]+=N,s.union(S.mark.bounds.union(S.bounds.translate(v[b],x[b]))),i&&t.dirty(S);return s}function wK(t,e,n){var i=vK(e),r=i.marks,s=n.bounds===Iy?EK:kK,o=n.offset,a=n.columns||r.length,l=a<=0?1:Math.ceil(r.length/a),u=l*a,c,f,h,d,p,g,m;const y=H4(t,r,n);y.empty()&&y.set(0,0,0,0),i.rowheaders&&(g=ee(n.headerBand,ms,null),c=ud(t,i.rowheaders,r,a,l,-ee(o,"rowHeader"),U4,0,s,"x1",0,a,1,g)),i.colheaders&&(g=ee(n.headerBand,gs,null),f=ud(t,i.colheaders,r,a,a,-ee(o,"columnHeader"),U4,1,s,"y1",0,1,a,g)),i.rowfooters&&(g=ee(n.footerBand,ms,null),h=ud(t,i.rowfooters,r,a,l,ee(o,"rowFooter"),j4,0,s,"x2",a-1,a,1,g)),i.colfooters&&(g=ee(n.footerBand,gs,null),d=ud(t,i.colfooters,r,a,a,ee(o,"columnFooter"),j4,1,s,"y2",u-a,1,a,g)),i.rowtitle&&(p=ee(n.titleAnchor,ms),m=ee(o,"rowTitle"),m=p===Je?h+m:c-m,g=ee(n.titleBand,ms,.5),W4(t,i.rowtitle,m,0,y,g)),i.coltitle&&(p=ee(n.titleAnchor,gs),m=ee(o,"columnTitle"),m=p===Je?d+m:f-m,g=ee(n.titleBand,gs,.5),W4(t,i.coltitle,m,1,y,g))}function EK(t,e){return e==="x1"?t.x||0:e==="y1"?t.y||0:e==="x2"?(t.x||0)+(t.width||0):e==="y2"?(t.y||0)+(t.height||0):void 0}function kK(t,e){return t.bounds[e]}function ud(t,e,n,i,r,s,o,a,l,u,c,f,h,d){var p=n.length,g=0,m=0,y,_,v,x,w,k,b,C,T;if(!p)return g;for(y=c;y<p;y+=f)n[y]&&(g=o(g,l(n[y],u)));if(!e.length)return g;for(e.length>r&&(t.warn("Grid headers exceed limit: "+r),e=e.slice(0,r)),g+=s,_=0,x=e.length;_<x;++_)t.dirty(e[_]),e[_].mark.bounds.clear();for(y=c,_=0,x=e.length;_<x;++_,y+=f){for(k=e[_],w=k.mark.bounds,v=y;v>=0&&(b=n[v])==null;v-=h);a?(C=d==null?b.x:Math.round(b.bounds.x1+d*b.bounds.width()),T=g):(C=g,T=d==null?b.y:Math.round(b.bounds.y1+d*b.bounds.height())),w.union(k.bounds.translate(C-(k.x||0),T-(k.y||0))),k.x=C,k.y=T,t.dirty(k),m=o(m,w[u])}return m}function W4(t,e,n,i,r,s){if(!!e){t.dirty(e);var o=n,a=n;i?o=Math.round(r.x1+s*r.width()):a=Math.round(r.y1+s*r.height()),e.bounds.translate(o-(e.x||0),a-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=a,t.dirty(e)}}function AK(t,e){const n=t[e]||{};return(i,r)=>n[i]!=null?n[i]:t[i]!=null?t[i]:r}function CK(t,e){let n=-1/0;return t.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:e}function MK(t,e,n,i,r,s,o){const a=AK(n,e),l=CK(t,a("offset",0)),u=a("anchor",$y),c=u===Je?1:u===Oy?.5:0,f={align:Ly,bounds:a("bounds",Iy),columns:a("direction")==="vertical"?1:t.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(e){case vi:f.anchor={x:Math.floor(i.x1)-l,column:Je,y:c*(o||i.height()+2*i.y1),row:u};break;case xi:f.anchor={x:Math.ceil(i.x2)+l,y:c*(o||i.height()+2*i.y1),row:u};break;case qa:f.anchor={y:Math.floor(r.y1)-l,row:Je,x:c*(s||r.width()+2*r.x1),column:u};break;case ps:f.anchor={y:Math.ceil(r.y2)+l,x:c*(s||r.width()+2*r.x1),column:u};break;case JG:f.anchor={x:l,y:l};break;case tK:f.anchor={x:s-l,y:l,column:Je};break;case eK:f.anchor={x:l,y:o-l,row:Je};break;case nK:f.anchor={x:s-l,y:o-l,column:Je,row:Je};break}return f}function SK(t,e){var n=e.items[0],i=n.datum,r=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),DK(t,n,n.items[0].items[0]),s=TK(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),i.type===lK&&$K(n.items[0].items[0].items[0].items),r!==Ry&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,us(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function TK(t,e){return t.items.forEach(n=>e.union(n.bounds)),e.x1=t.padding,e.y1=t.padding,e}function DK(t,e,n){var i=e.padding,r=i-n.x,s=i-n.y;if(!e.datum.title)(r||s)&&Gu(t,n,r,s);else{var o=e.items[1].items[0],a=o.anchor,l=e.titlePadding||0,u=i-o.x,c=i-o.y;switch(o.orient){case vi:r+=Math.ceil(o.bounds.width())+l;break;case xi:case ps:break;default:s+=o.bounds.height()+l}switch((r||s)&&Gu(t,n,r,s),o.orient){case vi:c+=Wa(e,n,o,a,1,1);break;case xi:u+=Wa(e,n,o,Je,0,0)+l,c+=Wa(e,n,o,a,1,1);break;case ps:u+=Wa(e,n,o,a,0,0),c+=Wa(e,n,o,Je,-1,0,1)+l;break;default:u+=Wa(e,n,o,a,0,0)}(u||c)&&Gu(t,o,u,c),(u=Math.round(o.bounds.x1-i))<0&&(Gu(t,n,-u,0),Gu(t,o,-u,0))}}function Wa(t,e,n,i,r,s,o){const a=t.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?e.items[0]:e,c=u.bounds[r?"y2":"x2"]-t.padding,f=l&&s?c:0,h=l&&s?0:c,d=r<=0?0:PA(n);return Math.round(i===$y?f:i===Je?h-d:.5*(c-d))}function Gu(t,e,n,i){e.x+=n,e.y+=i,e.bounds.translate(n,i),e.mark.bounds.translate(n,i),t.dirty(e)}function $K(t){const e=t.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});t.forEach(n=>{n.width=e[n.column],n.height=n.bounds.y2-n.y})}function OK(t,e,n,i,r){var s=e.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,f=s.items[0].items[0],h=s.items[1]&&s.items[1].items[0],d=a===vi||a===xi?i:n,p=0,g=0,m=0,y=0,_=0,v;if(o!==sd?a===vi?(p=r.y2,d=r.y1):a===xi?(p=r.y1,d=r.y2):(p=r.x1,d=r.x2):a===vi&&(p=i,d=0),v=l===$y?p:l===Je?d:(p+d)/2,h&&h.text){switch(a){case qa:case ps:_=f.bounds.height()+c;break;case vi:y=f.bounds.width()+c;break;case xi:y=-f.bounds.width()-c;break}Be.clear().union(h.bounds),Be.translate(y-(h.x||0),_-(h.y||0)),Ha(h,"x",y)|Ha(h,"y",_)&&(t.dirty(h),h.bounds.clear().union(Be),h.mark.bounds.clear().union(Be),t.dirty(h)),Be.clear().union(h.bounds)}else Be.clear();switch(Be.union(f.bounds),a){case qa:g=v,m=r.y1-Be.height()-u;break;case vi:g=r.x1-Be.width()-u,m=v;break;case xi:g=r.x2+Be.width()+u,m=v;break;case ps:g=v,m=r.y2+u;break;default:g=s.x,m=s.y}return Ha(s,"x",g)|Ha(s,"y",m)&&(Be.translate(g,m),t.dirty(s),s.bounds.clear().union(Be),e.bounds.clear().union(Be),t.dirty(s)),s.bounds}function V4(t){P.call(this,null,t)}G(V4,P,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(i=>{t.layout&&wK(n,i,t.layout),FK(n,i,t)}),NK(t.mark.group)?e.reflow():e}});function NK(t){return t&&t.mark.role!=="legend-entry"}function FK(t,e,n){var i=e.items,r=Math.max(0,e.width||0),s=Math.max(0,e.height||0),o=new we().set(0,0,r,s),a=o.clone(),l=o.clone(),u=[],c,f,h,d,p,g;for(p=0,g=i.length;p<g;++p)switch(f=i[p],f.role){case Ny:d=mK(f)?a:l,d.union(_K(t,f,r,s));break;case Fy:c=f;break;case Py:u.push(SK(t,f));break;case sK:case oK:case k4:case A4:case C4:case M4:case S4:case T4:a.union(f.bounds),l.union(f.bounds);break;default:o.union(f.bounds)}if(u.length){const m={};u.forEach(y=>{h=y.orient||xi,h!==Ry&&(m[h]||(m[h]=[])).push(y)});for(const y in m){const _=m[y];H4(t,_,MK(_,y,n.legends,a,l,r,s))}u.forEach(y=>{const _=y.bounds;if(_.equals(y._bounds)||(y.bounds=y._bounds,t.dirty(y),y.bounds=_,t.dirty(y)),n.autosize&&n.autosize.type===D4)switch(y.orient){case vi:case xi:o.add(_.x1,0).add(_.x2,0);break;case qa:case ps:o.add(0,_.y1).add(0,_.y2)}else o.union(_)})}o.union(a).union(l),c&&o.union(OK(t,c,r,s,o)),e.clip&&o.set(0,0,e.width||0,e.height||0),PK(t,e,o,n)}function PK(t,e,n,i){const r=i.autosize||{},s=r.type;if(t._autosize<1||!s)return;let o=t._width,a=t._height,l=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,e.height||0),f=Math.max(0,Math.ceil(-n.y1));const h=Math.max(0,Math.ceil(n.x2-l)),d=Math.max(0,Math.ceil(n.y2-c));if(r.contains===aK){const p=t.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Ry?(u=0,f=0,l=o,c=a):s===D4?(l=Math.max(0,o-u-h),c=Math.max(0,a-f-d)):s===uK?(l=Math.max(0,o-u-h),a=c+f+d):s===cK?(o=l+u+h,c=Math.max(0,a-f-d)):s===fK&&(o=l+u+h,a=c+f+d),t._resizeView(o,a,l,c,[u,f],r.resize)}var RK=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",bound:$4,identifier:By,mark:N4,overlap:F4,render:z4,viewlayout:V4});function Y4(t){P.call(this,null,t)}G(Y4,P,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,s=t.scale,o=t.count==null?t.values?t.values.length:10:t.count,a=Bm(s,o,t.minstep),l=t.format||X6(n,s,a,t.formatSpecifier,t.formatType,!!t.values),u=t.values?K6(s,t.values,a):zm(s,a);return r&&(i.rem=r),r=u.map((c,f)=>Ut({index:f/(u.length-1||1),value:c,label:l(c)})),t.extra&&r.length&&r.push(Ut({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function G4(t){P.call(this,null,t)}function LK(){return Ut({})}function IK(t){const e=ql().test(n=>n.exit);return e.lookup=n=>e.get(t(n)),e}G(G4,P,{transform(t,e){var n=e.dataflow,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.item||LK,s=t.key||ut,o=this.value;return lt(i.encode)&&(i.encode=null),o&&(t.modified("key")||e.modified(s))&&I("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=IK(s)),e.visit(e.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,i.add.push(u)):i.mod.push(u):(u=r(a),o.set(l,u),i.add.push(u)),u.datum=a,u.exit=!1}),e.visit(e.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,i.mod.push(u))}),e.visit(e.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(i.rem.push(u),u.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&i.modifies("datum"),(e.clean()||t.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}});function K4(t){P.call(this,null,t)}G(K4,P,{transform(t,e){var n=e.fork(e.ADD_REM),i=t.mod||!1,r=t.encoders,s=e.encode;if(lt(s))if(n.changed()||s.every(f=>r[f]))s=s[0],n.encode=null;else return e.StopPropagation;var o=s==="enter",a=r.update||Ks,l=r.enter||Ks,u=r.exit||Ks,c=(s&&!o?r[s]:a)||Ks;if(e.changed(e.ADD)&&(e.visit(e.ADD,f=>{l(f,t),a(f,t)}),n.modifies(l.output),n.modifies(a.output),c!==Ks&&c!==a&&(e.visit(e.ADD,f=>{c(f,t)}),n.modifies(c.output))),e.changed(e.REM)&&u!==Ks&&(e.visit(e.REM,f=>{u(f,t)}),n.modifies(u.output)),o||c!==Ks){const f=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(f,h=>{const d=l(h,t)||i;(c(h,t)||d)&&n.mod.push(h)}),n.mod.length&&n.modifies(l.output)):e.visit(f,h=>{(c(h,t)||i)&&n.mod.push(h)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:e.StopPropagation}});function X4(t){P.call(this,[],t)}G(X4,P,{transform(t,e){if(this.value!=null&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,s=t.type||Nh,o=t.scale,a=+t.limit,l=Bm(o,t.count==null?5:t.count,t.minstep),u=!!t.values||s===Nh,c=t.format||tA(n,o,l,s,t.formatSpecifier,t.formatType,u),f=t.values||J6(o,l),h,d,p,g,m;return r&&(i.rem=r),s===Nh?(a&&f.length>a?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=f.slice(0,a-1),m=!0):r=f,At(p=t.size)?(!t.values&&o(r[0])===0&&(r=r.slice(1)),g=r.reduce((y,_)=>Math.max(y,p(_,t)),0)):p=Ge(g=p||8),r=r.map((y,_)=>Ut({index:_,label:c(y,_,r),value:y,offset:g,size:p(y,t)})),m&&(m=f[r.length],r.push(Ut({index:r.length,label:"\u2026".concat(f.length-r.length," entries"),value:m,offset:g,size:p(m,t)})))):s===oV?(h=o.domain(),d=q6(o,h[0],Nt(h)),f.length<3&&!t.values&&h[0]!==Nt(h)&&(f=[h[0],Nt(h)]),r=f.map((y,_)=>Ut({index:_,label:c(y,_,f),value:y,perc:d(y)}))):(p=f.length-1,d=yV(o),r=f.map((y,_)=>Ut({index:_,label:c(y,_,f),value:y,perc:_?d(y):0,perc2:_===p?1:d(f[_+1])}))),i.source=r,i.add=r,this.value=r,i}});const BK=t=>t.source.x,zK=t=>t.source.y,UK=t=>t.target.x,jK=t=>t.target.y;function zy(t){P.call(this,{},t)}zy.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};G(zy,P,{transform(t,e){var n=t.sourceX||BK,i=t.sourceY||zK,r=t.targetX||UK,s=t.targetY||jK,o=t.as||"path",a=t.orient||"vertical",l=t.shape||"line",u=t8.get(l+"-"+a)||t8.get(l);return u||I("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,c=>{c[o]=u(n(c),i(c),r(c),s(c))}),e.reflow(t.modified()).modifies(o)}});const Q4=(t,e,n,i)=>"M"+t+","+e+"L"+n+","+i,qK=(t,e,n,i)=>Q4(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),Z4=(t,e,n,i)=>{var r=n-t,s=i-e,o=Math.sqrt(r*r+s*s)/2,a=180*Math.atan2(s,r)/Math.PI;return"M"+t+","+e+"A"+o+","+o+" "+a+" 0 1 "+n+","+i},HK=(t,e,n,i)=>Z4(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),J4=(t,e,n,i)=>{const r=n-t,s=i-e,o=.2*(r+s),a=.2*(s-r);return"M"+t+","+e+"C"+(t+o)+","+(e+a)+" "+(n+a)+","+(i-o)+" "+n+","+i},WK=(t,e,n,i)=>J4(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),VK=(t,e,n,i)=>"M"+t+","+e+"V"+i+"H"+n,YK=(t,e,n,i)=>"M"+t+","+e+"H"+n+"V"+i,GK=(t,e,n,i)=>{const r=Math.cos(t),s=Math.sin(t),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-t)>Math.PI?n<=t:n>t;return"M"+e*r+","+e*s+"A"+e+","+e+" 0 0,"+(l?1:0)+" "+e*o+","+e*a+"L"+i*o+","+i*a},KK=(t,e,n,i)=>{const r=(t+n)/2;return"M"+t+","+e+"C"+r+","+e+" "+r+","+i+" "+n+","+i},XK=(t,e,n,i)=>{const r=(e+i)/2;return"M"+t+","+e+"C"+t+","+r+" "+n+","+r+" "+n+","+i},QK=(t,e,n,i)=>{const r=Math.cos(t),s=Math.sin(t),o=Math.cos(n),a=Math.sin(n),l=(e+i)/2;return"M"+e*r+","+e*s+"C"+l*r+","+l*s+" "+l*o+","+l*a+" "+i*o+","+i*a},t8=ql({line:Q4,"line-radial":qK,arc:Z4,"arc-radial":HK,curve:J4,"curve-radial":WK,"orthogonal-horizontal":VK,"orthogonal-vertical":YK,"orthogonal-radial":GK,"diagonal-horizontal":KK,"diagonal-vertical":XK,"diagonal-radial":QK});function Uy(t){P.call(this,null,t)}Uy.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};G(Uy,P,{transform(t,e){var n=t.as||["startAngle","endAngle"],i=n[0],r=n[1],s=t.field||jl,o=t.startAngle||0,a=t.endAngle!=null?t.endAngle:2*Math.PI,l=e.source,u=l.map(s),c=u.length,f=o,h=(a-o)/J3(u),d=In(c),p,g,m;for(t.sort&&d.sort((y,_)=>u[y]-u[_]),p=0;p<c;++p)m=u[d[p]],g=l[d[p]],g[i]=f,g[r]=f+=m*h;return this.value=u,e.reflow(t.modified()).modifies(n)}});const ZK=5;function JK(t){const e=t.type;return!t.bins&&(e===Fa||e===Tu||e===Du)}function e8(t){return Rm(t)&&t!==Gi}const tX=zi(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function n8(t){P.call(this,null,t),this.modified(!0)}G(n8,P,{transform(t,e){var n=e.dataflow,i=this.value,r=eX(t);(!i||r!==i.type)&&(this.value=i=zt(r)());for(r in t)if(!tX[r]){if(r==="padding"&&e8(i.type))continue;At(i[r])?i[r](t[r]):n.warn("Unsupported scale property: "+r)}return aX(i,t,oX(i,t,iX(i,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function eX(t){var e=t.type,n="",i;return e===Gi?Gi+"-"+Fa:(nX(t)&&(i=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(t.domainMid!=null):0,n=i===2?Gi+"-":i===3?Pa+"-":""),(n+e||Fa).toLowerCase())}function nX(t){const e=t.type;return Rm(e)&&e!==fo&&e!==ho&&(t.scheme||t.range&&t.range.length&&t.range.every(te))}function iX(t,e,n){const i=rX(t,e.domainRaw,n);if(i>-1)return i;var r=e.domain,s=t.type,o=e.zero||e.zero===void 0&&JK(t),a,l;if(!r)return 0;if(e8(s)&&e.padding&&r[0]!==Nt(r)&&(r=sX(s,r,e.range,e.padding,e.exponent,e.constant)),(o||e.domainMin!=null||e.domainMax!=null||e.domainMid!=null)&&(a=(r=r.slice()).length-1||1,o&&(r[0]>0&&(r[0]=0),r[a]<0&&(r[a]=0)),e.domainMin!=null&&(r[0]=e.domainMin),e.domainMax!=null&&(r[a]=e.domainMax),e.domainMid!=null)){l=e.domainMid;const u=l>r[a]?a+1:l<r[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(u,0,l)}return t.domain(i8(s,r,n)),s===$m&&t.unknown(e.domainImplicit?nm:void 0),e.nice&&t.nice&&t.nice(e.nice!==!0&&Bm(t,e.nice)||null),r.length}function rX(t,e,n){return e?(t.domain(i8(t.type,e,n)),e.length):-1}function sX(t,e,n,i,r,s){var o=Math.abs(Nt(n)-n[0]),a=o/(o-2*i),l=t===yr?N3(e,null,a):t===Du?_g(e,null,a,.5):t===Tu?_g(e,null,a,r||1):t===Th?F3(e,null,a,s||1):O3(e,null,a);return e=e.slice(),e[0]=l[0],e[e.length-1]=l[1],e}function i8(t,e,n){if(z6(t)){var i=Math.abs(e.reduce((r,s)=>r+(s<0?-1:s>0?1:0),0));i!==e.length&&n.warn("Log scale domain includes zero: "+ct(e))}return e}function oX(t,e,n){let i=e.bins;if(i&&!lt(i)){const r=t.domain(),s=r[0],o=Nt(r),a=i.step;let l=i.start==null?s:i.start,u=i.stop==null?o:i.stop;a||I("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),i=In(l,u+a/2,a)}return i?t.bins=i:t.bins&&delete t.bins,t.type===Nm&&(i?!e.domain&&!e.domainRaw&&(t.domain(i),n=i.length):t.bins=t.domain()),n}function aX(t,e,n){var i=t.type,r=e.round||!1,s=e.range;if(e.rangeStep!=null)s=lX(i,e,n);else if(e.scheme&&(s=uX(i,e,n),At(s))){if(t.interpolator)return t.interpolator(s);I("Scale type ".concat(i," does not support interpolating color schemes."))}if(s&&U6(i))return t.interpolator(Im(jy(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&t.interpolate?t.interpolate(H6(e.interpolate,e.interpolateGamma)):At(t.round)?t.round(r):At(t.rangeRound)&&t.interpolate(r?Mu:ss),s&&t.range(jy(s,e.reverse))}function lX(t,e,n){t!==R6&&t!==Om&&I("Only band and point scales support rangeStep.");var i=(e.paddingOuter!=null?e.paddingOuter:e.padding)||0,r=t===Om?1:(e.paddingInner!=null?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Dm(n,r,i)]}function uX(t,e,n){var i=e.schemeExtent,r,s;return lt(e.scheme)?s=Im(e.scheme,e.interpolate,e.interpolateGamma):(r=e.scheme.toLowerCase(),s=G6(r),s||I("Unrecognized scheme name: ".concat(e.scheme))),n=t===$h?n+1:t===Nm?n-1:t===Ra||t===Dh?+e.schemeCount||ZK:n,U6(t)?r8(s,i,e.reverse):At(s)?eV(r8(s,i),n):t===$m?s:s.slice(0,n)}function r8(t,e,n){return At(t)&&(e||n)?tV(t,jy(e||[0,1],n)):t}function jy(t,e){return e?t.slice().reverse():t}function s8(t){P.call(this,null,t)}G(s8,P,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(io(t.sort)),this.modified(n),e}});const o8="zero",a8="center",l8="normalize",u8=["y0","y1"];function qy(t){P.call(this,null,t)}qy.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:o8,values:[o8,a8,l8]},{name:"as",type:"string",array:!0,length:2,default:u8}]};G(qy,P,{transform(t,e){var n=t.as||u8,i=n[0],r=n[1],s=io(t.sort),o=t.field||jl,a=t.offset===a8?cX:t.offset===l8?fX:hX,l,u,c,f;for(l=dX(e.source,t.groupby,s,o),u=0,c=l.length,f=l.max;u<c;++u)a(l[u],f,o,i,r);return e.reflow(t.modified()).modifies(n)}});function cX(t,e,n,i,r){for(var s=(e-t.sum)/2,o=t.length,a=0,l;a<o;++a)l=t[a],l[i]=s,l[r]=s+=Math.abs(n(l))}function fX(t,e,n,i,r){for(var s=1/t.sum,o=0,a=t.length,l=0,u=0,c;l<a;++l)c=t[l],c[i]=o,c[r]=o=s*(u+=Math.abs(n(c)))}function hX(t,e,n,i,r){for(var s=0,o=0,a=t.length,l=0,u,c;l<a;++l)c=t[l],u=+n(c),u<0?(c[i]=o,c[r]=o+=u):(c[i]=s,c[r]=s+=u)}function dX(t,e,n,i){var r=[],s=g=>g(c),o,a,l,u,c,f,h,d,p;if(e==null)r.push(t.slice());else for(o={},a=0,l=t.length;a<l;++a)c=t[a],f=e.map(s),h=o[f],h||(o[f]=h=[],r.push(h)),h.push(c);for(f=0,p=0,u=r.length;f<u;++f){for(h=r[f],a=0,d=0,l=h.length;a<l;++a)d+=Math.abs(i(h[a]));h.sum=d,d>p&&(p=d),n&&h.sort(n)}return r.max=p,r}var pX=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",axisticks:Y4,datajoin:G4,encode:K4,legendentries:X4,linkpath:zy,pie:Uy,scale:n8,sortitems:s8,stack:qy}),ft=1e-6,cd=1e-12,St=Math.PI,se=St/2,fd=St/4,tn=St*2,ue=180/St,Tt=St/180,Ft=Math.abs,Va=Math.atan,ri=Math.atan2,ht=Math.cos,hd=Math.ceil,c8=Math.exp,Hy=Math.hypot,dd=Math.log,Wy=Math.pow,ot=Math.sin,si=Math.sign||function(t){return t>0?1:t<0?-1:0},en=Math.sqrt,Vy=Math.tan;function f8(t){return t>1?0:t<-1?St:Math.acos(t)}function _n(t){return t>1?se:t<-1?-se:Math.asin(t)}function $e(){}function pd(t,e){t&&d8.hasOwnProperty(t.type)&&d8[t.type](t,e)}var h8={Feature:function(t,e){pd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)pd(n[i].geometry,e)}},d8={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Yy(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Yy(n[i],e,0)},Polygon:function(t,e){p8(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)p8(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)pd(n[i],e)}};function Yy(t,e,n){var i=-1,r=t.length-n,s;for(e.lineStart();++i<r;)s=t[i],e.point(s[0],s[1],s[2]);e.lineEnd()}function p8(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Yy(t[n],e,1);e.polygonEnd()}function Er(t,e){t&&h8.hasOwnProperty(t.type)?h8[t.type](t,e):pd(t,e)}var gd=new Ke,md=new Ke,g8,m8,Gy,Ky,Xy,Ji={point:$e,lineStart:$e,lineEnd:$e,polygonStart:function(){gd=new Ke,Ji.lineStart=gX,Ji.lineEnd=mX},polygonEnd:function(){var t=+gd;md.add(t<0?tn+t:t),this.lineStart=this.lineEnd=this.point=$e},sphere:function(){md.add(tn)}};function gX(){Ji.point=yX}function mX(){y8(g8,m8)}function yX(t,e){Ji.point=y8,g8=t,m8=e,t*=Tt,e*=Tt,Gy=t,Ky=ht(e=e/2+fd),Xy=ot(e)}function y8(t,e){t*=Tt,e*=Tt,e=e/2+fd;var n=t-Gy,i=n>=0?1:-1,r=i*n,s=ht(e),o=ot(e),a=Xy*o,l=Ky*s+a*ht(r),u=a*i*ot(r);gd.add(ri(u,l)),Gy=t,Ky=s,Xy=o}function _X(t){return md=new Ke,Er(t,Ji),md*2}function yd(t){return[ri(t[1],t[0]),_n(t[2])]}function ko(t){var e=t[0],n=t[1],i=ht(n);return[i*ht(e),i*ot(e),ot(n)]}function _d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ya(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Qy(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function vd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xd(t){var e=en(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var ie,vn,oe,jn,Ao,_8,v8,Ga,Ku,ys,kr,Ar={point:Zy,lineStart:b8,lineEnd:w8,polygonStart:function(){Ar.point=E8,Ar.lineStart=vX,Ar.lineEnd=xX,Ku=new Ke,Ji.polygonStart()},polygonEnd:function(){Ji.polygonEnd(),Ar.point=Zy,Ar.lineStart=b8,Ar.lineEnd=w8,gd<0?(ie=-(oe=180),vn=-(jn=90)):Ku>ft?jn=90:Ku<-ft&&(vn=-90),kr[0]=ie,kr[1]=oe},sphere:function(){ie=-(oe=180),vn=-(jn=90)}};function Zy(t,e){ys.push(kr=[ie=t,oe=t]),e<vn&&(vn=e),e>jn&&(jn=e)}function x8(t,e){var n=ko([t*Tt,e*Tt]);if(Ga){var i=Ya(Ga,n),r=[i[1],-i[0],0],s=Ya(r,i);xd(s),s=yd(s);var o=t-Ao,a=o>0?1:-1,l=s[0]*ue*a,u,c=Ft(o)>180;c^(a*Ao<l&&l<a*t)?(u=s[1]*ue,u>jn&&(jn=u)):(l=(l+360)%360-180,c^(a*Ao<l&&l<a*t)?(u=-s[1]*ue,u<vn&&(vn=u)):(e<vn&&(vn=e),e>jn&&(jn=e))),c?t<Ao?qn(ie,t)>qn(ie,oe)&&(oe=t):qn(t,oe)>qn(ie,oe)&&(ie=t):oe>=ie?(t<ie&&(ie=t),t>oe&&(oe=t)):t>Ao?qn(ie,t)>qn(ie,oe)&&(oe=t):qn(t,oe)>qn(ie,oe)&&(ie=t)}else ys.push(kr=[ie=t,oe=t]);e<vn&&(vn=e),e>jn&&(jn=e),Ga=n,Ao=t}function b8(){Ar.point=x8}function w8(){kr[0]=ie,kr[1]=oe,Ar.point=Zy,Ga=null}function E8(t,e){if(Ga){var n=t-Ao;Ku.add(Ft(n)>180?n+(n>0?360:-360):n)}else _8=t,v8=e;Ji.point(t,e),x8(t,e)}function vX(){Ji.lineStart()}function xX(){E8(_8,v8),Ji.lineEnd(),Ft(Ku)>ft&&(ie=-(oe=180)),kr[0]=ie,kr[1]=oe,Ga=null}function qn(t,e){return(e-=t)<0?e+360:e}function bX(t,e){return t[0]-e[0]}function k8(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function wX(t){var e,n,i,r,s,o,a;if(jn=oe=-(ie=vn=1/0),ys=[],Er(t,Ar),n=ys.length){for(ys.sort(bX),e=1,i=ys[0],s=[i];e<n;++e)r=ys[e],k8(i,r[0])||k8(i,r[1])?(qn(i[0],r[1])>qn(i[0],i[1])&&(i[1]=r[1]),qn(r[0],i[1])>qn(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(o=-1/0,n=s.length-1,e=0,i=s[n];e<=n;i=r,++e)r=s[e],(a=qn(i[1],r[0]))>o&&(o=a,ie=r[0],oe=i[1])}return ys=kr=null,ie===1/0||vn===1/0?[[NaN,NaN],[NaN,NaN]]:[[ie,vn],[oe,jn]]}var Xu,bd,wd,Ed,kd,Ad,Cd,Md,Jy,t2,e2,A8,C8,nn,rn,sn,bi={sphere:$e,point:n2,lineStart:M8,lineEnd:S8,polygonStart:function(){bi.lineStart=AX,bi.lineEnd=CX},polygonEnd:function(){bi.lineStart=M8,bi.lineEnd=S8}};function n2(t,e){t*=Tt,e*=Tt;var n=ht(e);Qu(n*ht(t),n*ot(t),ot(e))}function Qu(t,e,n){++Xu,wd+=(t-wd)/Xu,Ed+=(e-Ed)/Xu,kd+=(n-kd)/Xu}function M8(){bi.point=EX}function EX(t,e){t*=Tt,e*=Tt;var n=ht(e);nn=n*ht(t),rn=n*ot(t),sn=ot(e),bi.point=kX,Qu(nn,rn,sn)}function kX(t,e){t*=Tt,e*=Tt;var n=ht(e),i=n*ht(t),r=n*ot(t),s=ot(e),o=ri(en((o=rn*s-sn*r)*o+(o=sn*i-nn*s)*o+(o=nn*r-rn*i)*o),nn*i+rn*r+sn*s);bd+=o,Ad+=o*(nn+(nn=i)),Cd+=o*(rn+(rn=r)),Md+=o*(sn+(sn=s)),Qu(nn,rn,sn)}function S8(){bi.point=n2}function AX(){bi.point=MX}function CX(){T8(A8,C8),bi.point=n2}function MX(t,e){A8=t,C8=e,t*=Tt,e*=Tt,bi.point=T8;var n=ht(e);nn=n*ht(t),rn=n*ot(t),sn=ot(e),Qu(nn,rn,sn)}function T8(t,e){t*=Tt,e*=Tt;var n=ht(e),i=n*ht(t),r=n*ot(t),s=ot(e),o=rn*s-sn*r,a=sn*i-nn*s,l=nn*r-rn*i,u=Hy(o,a,l),c=_n(u),f=u&&-c/u;Jy.add(f*o),t2.add(f*a),e2.add(f*l),bd+=c,Ad+=c*(nn+(nn=i)),Cd+=c*(rn+(rn=r)),Md+=c*(sn+(sn=s)),Qu(nn,rn,sn)}function SX(t){Xu=bd=wd=Ed=kd=Ad=Cd=Md=0,Jy=new Ke,t2=new Ke,e2=new Ke,Er(t,bi);var e=+Jy,n=+t2,i=+e2,r=Hy(e,n,i);return r<cd&&(e=Ad,n=Cd,i=Md,bd<ft&&(e=wd,n=Ed,i=kd),r=Hy(e,n,i),r<cd)?[NaN,NaN]:[ri(n,e)*ue,_n(i/r)*ue]}function i2(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function r2(t,e){return[Ft(t)>St?t+Math.round(-t/tn)*tn:t,e]}r2.invert=r2;function D8(t,e,n){return(t%=tn)?e||n?i2(O8(t),N8(e,n)):O8(t):e||n?N8(e,n):r2}function $8(t){return function(e,n){return e+=t,[e>St?e-tn:e<-St?e+tn:e,n]}}function O8(t){var e=$8(t);return e.invert=$8(-t),e}function N8(t,e){var n=ht(t),i=ot(t),r=ht(e),s=ot(e);function o(a,l){var u=ht(l),c=ht(a)*u,f=ot(a)*u,h=ot(l),d=h*n+c*i;return[ri(f*r-d*s,c*n-h*i),_n(d*r+f*s)]}return o.invert=function(a,l){var u=ht(l),c=ht(a)*u,f=ot(a)*u,h=ot(l),d=h*r-f*s;return[ri(f*r+h*s,c*n+d*i),_n(d*n-c*i)]},o}function TX(t){t=D8(t[0]*Tt,t[1]*Tt,t.length>2?t[2]*Tt:0);function e(n){return n=t(n[0]*Tt,n[1]*Tt),n[0]*=ue,n[1]*=ue,n}return e.invert=function(n){return n=t.invert(n[0]*Tt,n[1]*Tt),n[0]*=ue,n[1]*=ue,n},e}function DX(t,e,n,i,r,s){if(!!n){var o=ht(e),a=ot(e),l=i*n;r==null?(r=e+i*tn,s=e-l/2):(r=F8(o,r),s=F8(o,s),(i>0?r<s:r>s)&&(r+=i*tn));for(var u,c=r;i>0?c>s:c<s;c-=l)u=yd([o,-a*ht(c),-a*ot(c)]),t.point(u[0],u[1])}}function F8(t,e){e=ko(e),e[0]-=t,xd(e);var n=f8(-e[1]);return((-e[2]<0?-n:n)+tn-ft)%tn}function P8(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:$e,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Sd(t,e){return Ft(t[0]-e[0])<ft&&Ft(t[1]-e[1])<ft}function Td(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function R8(t,e,n,i,r){var s=[],o=[],a,l;if(t.forEach(function(p){if(!((g=p.length-1)<=0)){var g,m=p[0],y=p[g],_;if(Sd(m,y)){if(!m[2]&&!y[2]){for(r.lineStart(),a=0;a<g;++a)r.point((m=p[a])[0],m[1]);r.lineEnd();return}y[0]+=2*ft}s.push(_=new Td(m,p,null,!0)),o.push(_.o=new Td(m,null,_,!1)),s.push(_=new Td(y,p,null,!1)),o.push(_.o=new Td(y,null,_,!0))}}),!!s.length){for(o.sort(e),L8(s),L8(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,f;;){for(var h=u,d=!0;h.v;)if((h=h.n)===u)return;c=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,l=c.length;a<l;++a)r.point((f=c[a])[0],f[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(d)for(c=h.p.z,a=c.length-1;a>=0;--a)r.point((f=c[a])[0],f[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);r.lineEnd()}}}function L8(t){if(!!(e=t.length)){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function s2(t){return Ft(t[0])<=St?t[0]:si(t[0])*((Ft(t[0])+St)%tn-St)}function $X(t,e){var n=s2(e),i=e[1],r=ot(i),s=[ot(n),-ht(n),0],o=0,a=0,l=new Ke;r===1?i=se+ft:r===-1&&(i=-se-ft);for(var u=0,c=t.length;u<c;++u)if(!!(h=(f=t[u]).length))for(var f,h,d=f[h-1],p=s2(d),g=d[1]/2+fd,m=ot(g),y=ht(g),_=0;_<h;++_,p=x,m=k,y=b,d=v){var v=f[_],x=s2(v),w=v[1]/2+fd,k=ot(w),b=ht(w),C=x-p,T=C>=0?1:-1,M=T*C,S=M>St,$=m*k;if(l.add(ri($*T*ot(M),y*b+$*ht(M))),o+=S?C+T*tn:C,S^p>=n^x>=n){var O=Ya(ko(d),ko(v));xd(O);var U=Ya(s,O);xd(U);var N=(S^C>=0?-1:1)*_n(U[2]);(i>N||i===N&&(O[0]||O[1]))&&(a+=S^C>=0?1:-1)}}return(o<-ft||o<ft&&l<-cd)^a&1}function I8(t,e,n,i){return function(r){var s=e(r),o=P8(),a=e(o),l=!1,u,c,f,h={point:d,lineStart:g,lineEnd:m,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=v,c=[],u=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=m,c=Z3(c);var x=$X(u,i);c.length?(l||(r.polygonStart(),l=!0),R8(c,NX,x,n,r)):x&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(x,w){t(x,w)&&r.point(x,w)}function p(x,w){s.point(x,w)}function g(){h.point=p,s.lineStart()}function m(){h.point=d,s.lineEnd()}function y(x,w){f.push([x,w]),a.point(x,w)}function _(){a.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),a.lineEnd();var x=a.clean(),w=o.result(),k,b=w.length,C,T,M;if(f.pop(),u.push(f),f=null,!!b){if(x&1){if(T=w[0],(C=T.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),k=0;k<C;++k)r.point((M=T[k])[0],M[1]);r.lineEnd()}return}b>1&&x&2&&w.push(w.pop().concat(w.shift())),c.push(w.filter(OX))}}return h}}function OX(t){return t.length>1}function NX(t,e){return((t=t.x)[0]<0?t[1]-se-ft:se-t[1])-((e=e.x)[0]<0?e[1]-se-ft:se-e[1])}var B8=I8(function(){return!0},FX,RX,[-St,-se]);function FX(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(s,o){var a=s>0?St:-St,l=Ft(s-e);Ft(l-St)<ft?(t.point(e,n=(n+o)/2>0?se:-se),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(s,n),r=0):i!==a&&l>=St&&(Ft(e-i)<ft&&(e-=i*ft),Ft(s-a)<ft&&(s-=a*ft),n=PX(e,n,s,o),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(a,n),r=0),t.point(e=s,n=o),i=a},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function PX(t,e,n,i){var r,s,o=ot(t-n);return Ft(o)>ft?Va((ot(e)*(s=ht(i))*ot(n)-ot(i)*(r=ht(e))*ot(t))/(r*s*o)):(e+i)/2}function RX(t,e,n,i){var r;if(t==null)r=n*se,i.point(-St,r),i.point(0,r),i.point(St,r),i.point(St,0),i.point(St,-r),i.point(0,-r),i.point(-St,-r),i.point(-St,0),i.point(-St,r);else if(Ft(t[0]-e[0])>ft){var s=t[0]<e[0]?St:-St;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}function LX(t){var e=ht(t),n=6*Tt,i=e>0,r=Ft(e)>ft;function s(c,f,h,d){DX(d,t,n,h,c,f)}function o(c,f){return ht(c)*ht(f)>e}function a(c){var f,h,d,p,g;return{lineStart:function(){p=d=!1,g=1},point:function(m,y){var _=[m,y],v,x=o(m,y),w=i?x?0:u(m,y):x?u(m+(m<0?St:-St),y):0;if(!f&&(p=d=x)&&c.lineStart(),x!==d&&(v=l(f,_),(!v||Sd(f,v)||Sd(_,v))&&(_[2]=1)),x!==d)g=0,x?(c.lineStart(),v=l(_,f),c.point(v[0],v[1])):(v=l(f,_),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(r&&f&&i^x){var k;!(w&h)&&(k=l(_,f,!0))&&(g=0,i?(c.lineStart(),c.point(k[0][0],k[0][1]),c.point(k[1][0],k[1][1]),c.lineEnd()):(c.point(k[1][0],k[1][1]),c.lineEnd(),c.lineStart(),c.point(k[0][0],k[0][1],3)))}x&&(!f||!Sd(f,_))&&c.point(_[0],_[1]),f=_,d=x,h=w},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return g|(p&&d)<<1}}}function l(c,f,h){var d=ko(c),p=ko(f),g=[1,0,0],m=Ya(d,p),y=_d(m,m),_=m[0],v=y-_*_;if(!v)return!h&&c;var x=e*y/v,w=-e*_/v,k=Ya(g,m),b=vd(g,x),C=vd(m,w);Qy(b,C);var T=k,M=_d(b,T),S=_d(T,T),$=M*M-S*(_d(b,b)-1);if(!($<0)){var O=en($),U=vd(T,(-M-O)/S);if(Qy(U,b),U=yd(U),!h)return U;var N=c[0],R=f[0],z=c[1],q=f[1],J;R<N&&(J=N,N=R,R=J);var yt=R-N,Ot=Ft(yt-St)<ft,Dt=Ot||yt<ft;if(!Ot&&q<z&&(J=z,z=q,q=J),Dt?Ot?z+q>0^U[1]<(Ft(U[0]-N)<ft?z:q):z<=U[1]&&U[1]<=q:yt>St^(N<=U[0]&&U[0]<=R)){var qt=vd(T,(-M+O)/S);return Qy(qt,b),[U,yd(qt)]}}}function u(c,f){var h=i?t:St-t,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return I8(o,a,s,i?[0,-t]:[-St,t-St])}function IX(t,e,n,i,r,s){var o=t[0],a=t[1],l=e[0],u=e[1],c=0,f=1,h=l-o,d=u-a,p;if(p=n-o,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=r-o,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}if(p=i-a,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}return c>0&&(t[0]=o+c*h,t[1]=a+c*d),f<1&&(e[0]=o+f*h,e[1]=a+f*d),!0}}}}}var Zu=1e9,Dd=-Zu;function z8(t,e,n,i){function r(u,c){return t<=u&&u<=n&&e<=c&&c<=i}function s(u,c,f,h){var d=0,p=0;if(u==null||(d=o(u,f))!==(p=o(c,f))||l(u,c)<0^f>0)do h.point(d===0||d===3?t:n,d>1?i:e);while((d=(d+f+4)%4)!==p);else h.point(c[0],c[1])}function o(u,c){return Ft(u[0]-t)<ft?c>0?0:3:Ft(u[0]-n)<ft?c>0?2:1:Ft(u[1]-e)<ft?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var f=o(u,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-u[1]:f===1?u[0]-c[0]:f===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,f=P8(),h,d,p,g,m,y,_,v,x,w,k,b={point:C,lineStart:$,lineEnd:O,polygonStart:M,polygonEnd:S};function C(N,R){r(N,R)&&c.point(N,R)}function T(){for(var N=0,R=0,z=d.length;R<z;++R)for(var q=d[R],J=1,yt=q.length,Ot=q[0],Dt,qt,Xt=Ot[0],ne=Ot[1];J<yt;++J)Dt=Xt,qt=ne,Ot=q[J],Xt=Ot[0],ne=Ot[1],qt<=i?ne>i&&(Xt-Dt)*(i-qt)>(ne-qt)*(t-Dt)&&++N:ne<=i&&(Xt-Dt)*(i-qt)<(ne-qt)*(t-Dt)&&--N;return N}function M(){c=f,h=[],d=[],k=!0}function S(){var N=T(),R=k&&N,z=(h=Z3(h)).length;(R||z)&&(u.polygonStart(),R&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),z&&R8(h,a,N,s,u),u.polygonEnd()),c=u,h=d=p=null}function $(){b.point=U,d&&d.push(p=[]),w=!0,x=!1,_=v=NaN}function O(){h&&(U(g,m),y&&x&&f.rejoin(),h.push(f.result())),b.point=C,x&&c.lineEnd()}function U(N,R){var z=r(N,R);if(d&&p.push([N,R]),w)g=N,m=R,y=z,w=!1,z&&(c.lineStart(),c.point(N,R));else if(z&&x)c.point(N,R);else{var q=[_=Math.max(Dd,Math.min(Zu,_)),v=Math.max(Dd,Math.min(Zu,v))],J=[N=Math.max(Dd,Math.min(Zu,N)),R=Math.max(Dd,Math.min(Zu,R))];IX(q,J,t,e,n,i)?(x||(c.lineStart(),c.point(q[0],q[1])),c.point(J[0],J[1]),z||c.lineEnd(),k=!1):z&&(c.lineStart(),c.point(N,R),k=!1)}_=N,v=R,x=z}return b}}function U8(t,e,n){var i=In(t,e-ft,n).concat(e);return function(r){return i.map(function(s){return[r,s]})}}function j8(t,e,n){var i=In(t,e-ft,n).concat(e);return function(r){return i.map(function(s){return[s,r]})}}function BX(){var t,e,n,i,r,s,o,a,l=10,u=l,c=90,f=360,h,d,p,g,m=2.5;function y(){return{type:"MultiLineString",coordinates:_()}}function _(){return In(hd(i/c)*c,n,c).map(p).concat(In(hd(a/f)*f,o,f).map(g)).concat(In(hd(e/l)*l,t,l).filter(function(v){return Ft(v%c)>ft}).map(h)).concat(In(hd(s/u)*u,r,u).filter(function(v){return Ft(v%f)>ft}).map(d))}return y.lines=function(){return _().map(function(v){return{type:"LineString",coordinates:v}})},y.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},y.extent=function(v){return arguments.length?y.extentMajor(v).extentMinor(v):y.extentMinor()},y.extentMajor=function(v){return arguments.length?(i=+v[0][0],n=+v[1][0],a=+v[0][1],o=+v[1][1],i>n&&(v=i,i=n,n=v),a>o&&(v=a,a=o,o=v),y.precision(m)):[[i,a],[n,o]]},y.extentMinor=function(v){return arguments.length?(e=+v[0][0],t=+v[1][0],s=+v[0][1],r=+v[1][1],e>t&&(v=e,e=t,t=v),s>r&&(v=s,s=r,r=v),y.precision(m)):[[e,s],[t,r]]},y.step=function(v){return arguments.length?y.stepMajor(v).stepMinor(v):y.stepMinor()},y.stepMajor=function(v){return arguments.length?(c=+v[0],f=+v[1],y):[c,f]},y.stepMinor=function(v){return arguments.length?(l=+v[0],u=+v[1],y):[l,u]},y.precision=function(v){return arguments.length?(m=+v,h=U8(s,r,90),d=j8(e,t,m),p=U8(a,o,90),g=j8(i,n,m),y):m},y.extentMajor([[-180,-90+ft],[180,90-ft]]).extentMinor([[-180,-80-ft],[180,80+ft]])}var Ju=t=>t,o2=new Ke,a2=new Ke,q8,H8,l2,u2,_s={point:$e,lineStart:$e,lineEnd:$e,polygonStart:function(){_s.lineStart=zX,_s.lineEnd=jX},polygonEnd:function(){_s.lineStart=_s.lineEnd=_s.point=$e,o2.add(Ft(a2)),a2=new Ke},result:function(){var t=o2/2;return o2=new Ke,t}};function zX(){_s.point=UX}function UX(t,e){_s.point=W8,q8=l2=t,H8=u2=e}function W8(t,e){a2.add(u2*t-l2*e),l2=t,u2=e}function jX(){W8(q8,H8)}var V8=_s,Ka=1/0,$d=Ka,tc=-Ka,Od=tc,qX={point:HX,lineStart:$e,lineEnd:$e,polygonStart:$e,polygonEnd:$e,result:function(){var t=[[Ka,$d],[tc,Od]];return tc=Od=-($d=Ka=1/0),t}};function HX(t,e){t<Ka&&(Ka=t),t>tc&&(tc=t),e<$d&&($d=e),e>Od&&(Od=e)}var Nd=qX,c2=0,f2=0,ec=0,Fd=0,Pd=0,Xa=0,h2=0,d2=0,nc=0,Y8,G8,tr,er,wi={point:Co,lineStart:K8,lineEnd:X8,polygonStart:function(){wi.lineStart=YX,wi.lineEnd=GX},polygonEnd:function(){wi.point=Co,wi.lineStart=K8,wi.lineEnd=X8},result:function(){var t=nc?[h2/nc,d2/nc]:Xa?[Fd/Xa,Pd/Xa]:ec?[c2/ec,f2/ec]:[NaN,NaN];return c2=f2=ec=Fd=Pd=Xa=h2=d2=nc=0,t}};function Co(t,e){c2+=t,f2+=e,++ec}function K8(){wi.point=WX}function WX(t,e){wi.point=VX,Co(tr=t,er=e)}function VX(t,e){var n=t-tr,i=e-er,r=en(n*n+i*i);Fd+=r*(tr+t)/2,Pd+=r*(er+e)/2,Xa+=r,Co(tr=t,er=e)}function X8(){wi.point=Co}function YX(){wi.point=KX}function GX(){Q8(Y8,G8)}function KX(t,e){wi.point=Q8,Co(Y8=tr=t,G8=er=e)}function Q8(t,e){var n=t-tr,i=e-er,r=en(n*n+i*i);Fd+=r*(tr+t)/2,Pd+=r*(er+e)/2,Xa+=r,r=er*t-tr*e,h2+=r*(tr+t),d2+=r*(er+e),nc+=r*3,Co(tr=t,er=e)}var Z8=wi;function J8(t){this._context=t}J8.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,tn);break}}},result:$e};var p2=new Ke,g2,t7,e7,ic,rc,Rd={point:$e,lineStart:function(){Rd.point=XX},lineEnd:function(){g2&&n7(t7,e7),Rd.point=$e},polygonStart:function(){g2=!0},polygonEnd:function(){g2=null},result:function(){var t=+p2;return p2=new Ke,t}};function XX(t,e){Rd.point=n7,t7=ic=t,e7=rc=e}function n7(t,e){ic-=t,rc-=e,p2.add(en(ic*ic+rc*rc)),ic=t,rc=e}var i7=Rd;function r7(){this._string=[]}r7.prototype={_radius:4.5,_circle:s7(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=s7(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function s7(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function o7(t,e){var n=4.5,i,r;function s(o){return o&&(typeof n=="function"&&r.pointRadius(+n.apply(this,arguments)),Er(o,i(r))),r.result()}return s.area=function(o){return Er(o,i(V8)),V8.result()},s.measure=function(o){return Er(o,i(i7)),i7.result()},s.bounds=function(o){return Er(o,i(Nd)),Nd.result()},s.centroid=function(o){return Er(o,i(Z8)),Z8.result()},s.projection=function(o){return arguments.length?(i=o==null?(t=null,Ju):(t=o).stream,s):t},s.context=function(o){return arguments.length?(r=o==null?(e=null,new r7):new J8(e=o),typeof n!="function"&&r.pointRadius(n),s):e},s.pointRadius=function(o){return arguments.length?(n=typeof o=="function"?o:(r.pointRadius(+o),+o),s):n},s.projection(t).context(e)}function Ld(t){return function(e){var n=new m2;for(var i in t)n[i]=t[i];return n.stream=e,n}}function m2(){}m2.prototype={constructor:m2,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function y2(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Er(n,t.stream(Nd)),e(Nd.result()),i!=null&&t.clipExtent(i),t}function Id(t,e,n){return y2(t,function(i){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(i[1][0]-i[0][0]),s/(i[1][1]-i[0][1])),a=+e[0][0]+(r-o*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(s-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}function _2(t,e,n){return Id(t,[[0,0],e],n)}function v2(t,e,n){return y2(t,function(i){var r=+e,s=r/(i[1][0]-i[0][0]),o=(r-s*(i[1][0]+i[0][0]))/2,a=-s*i[0][1];t.scale(150*s).translate([o,a])},n)}function x2(t,e,n){return y2(t,function(i){var r=+e,s=r/(i[1][1]-i[0][1]),o=-s*i[0][0],a=(r-s*(i[1][1]+i[0][1]))/2;t.scale(150*s).translate([o,a])},n)}var a7=16,QX=ht(30*Tt);function l7(t,e){return+e?JX(t,e):ZX(t)}function ZX(t){return Ld({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function JX(t,e){function n(i,r,s,o,a,l,u,c,f,h,d,p,g,m){var y=u-i,_=c-r,v=y*y+_*_;if(v>4*e&&g--){var x=o+h,w=a+d,k=l+p,b=en(x*x+w*w+k*k),C=_n(k/=b),T=Ft(Ft(k)-1)<ft||Ft(s-f)<ft?(s+f)/2:ri(w,x),M=t(T,C),S=M[0],$=M[1],O=S-i,U=$-r,N=_*O-y*U;(N*N/v>e||Ft((y*O+_*U)/v-.5)>.3||o*h+a*d+l*p<QX)&&(n(i,r,s,o,a,l,S,$,T,x/=b,w/=b,k,g,m),m.point(S,$),n(S,$,T,x,w,k,u,c,f,h,d,p,g,m))}}return function(i){var r,s,o,a,l,u,c,f,h,d,p,g,m={point:y,lineStart:_,lineEnd:x,polygonStart:function(){i.polygonStart(),m.lineStart=w},polygonEnd:function(){i.polygonEnd(),m.lineStart=_}};function y(C,T){C=t(C,T),i.point(C[0],C[1])}function _(){f=NaN,m.point=v,i.lineStart()}function v(C,T){var M=ko([C,T]),S=t(C,T);n(f,h,c,d,p,g,f=S[0],h=S[1],c=C,d=M[0],p=M[1],g=M[2],a7,i),i.point(f,h)}function x(){m.point=y,i.lineEnd()}function w(){_(),m.point=k,m.lineEnd=b}function k(C,T){v(r=C,T),s=f,o=h,a=d,l=p,u=g,m.point=v}function b(){n(f,h,c,d,p,g,s,o,r,a,l,u,a7,i),m.lineEnd=x,x()}return m}}var tQ=Ld({point:function(t,e){this.stream.point(t*Tt,e*Tt)}});function eQ(t){return Ld({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function nQ(t,e,n,i,r){function s(o,a){return o*=i,a*=r,[e+t*o,n-t*a]}return s.invert=function(o,a){return[(o-e)/t*i,(n-a)/t*r]},s}function u7(t,e,n,i,r,s){if(!s)return nQ(t,e,n,i,r);var o=ht(s),a=ot(s),l=o*t,u=a*t,c=o/t,f=a/t,h=(a*n-o*e)/t,d=(a*e+o*n)/t;function p(g,m){return g*=i,m*=r,[l*g-u*m+e,n-u*g-l*m]}return p.invert=function(g,m){return[i*(c*g-f*m+h),r*(d-f*g-c*m)]},p}function nr(t){return c7(function(){return t})()}function c7(t){var e,n=150,i=480,r=250,s=0,o=0,a=0,l=0,u=0,c,f=0,h=1,d=1,p=null,g=B8,m=null,y,_,v,x=Ju,w=.5,k,b,C,T,M;function S(N){return C(N[0]*Tt,N[1]*Tt)}function $(N){return N=C.invert(N[0],N[1]),N&&[N[0]*ue,N[1]*ue]}S.stream=function(N){return T&&M===N?T:T=tQ(eQ(c)(g(k(x(M=N)))))},S.preclip=function(N){return arguments.length?(g=N,p=void 0,U()):g},S.postclip=function(N){return arguments.length?(x=N,m=y=_=v=null,U()):x},S.clipAngle=function(N){return arguments.length?(g=+N?LX(p=N*Tt):(p=null,B8),U()):p*ue},S.clipExtent=function(N){return arguments.length?(x=N==null?(m=y=_=v=null,Ju):z8(m=+N[0][0],y=+N[0][1],_=+N[1][0],v=+N[1][1]),U()):m==null?null:[[m,y],[_,v]]},S.scale=function(N){return arguments.length?(n=+N,O()):n},S.translate=function(N){return arguments.length?(i=+N[0],r=+N[1],O()):[i,r]},S.center=function(N){return arguments.length?(s=N[0]%360*Tt,o=N[1]%360*Tt,O()):[s*ue,o*ue]},S.rotate=function(N){return arguments.length?(a=N[0]%360*Tt,l=N[1]%360*Tt,u=N.length>2?N[2]%360*Tt:0,O()):[a*ue,l*ue,u*ue]},S.angle=function(N){return arguments.length?(f=N%360*Tt,O()):f*ue},S.reflectX=function(N){return arguments.length?(h=N?-1:1,O()):h<0},S.reflectY=function(N){return arguments.length?(d=N?-1:1,O()):d<0},S.precision=function(N){return arguments.length?(k=l7(b,w=N*N),U()):en(w)},S.fitExtent=function(N,R){return Id(S,N,R)},S.fitSize=function(N,R){return _2(S,N,R)},S.fitWidth=function(N,R){return v2(S,N,R)},S.fitHeight=function(N,R){return x2(S,N,R)};function O(){var N=u7(n,0,0,h,d,f).apply(null,e(s,o)),R=u7(n,i-N[0],r-N[1],h,d,f);return c=D8(a,l,u),b=i2(e,R),C=i2(c,b),k=l7(b,w),U()}function U(){return T=M=null,S}return function(){return e=t.apply(this,arguments),S.invert=e.invert&&$,O()}}function b2(t){var e=0,n=St/3,i=c7(t),r=i(e,n);return r.parallels=function(s){return arguments.length?i(e=s[0]*Tt,n=s[1]*Tt):[e*ue,n*ue]},r}function iQ(t){var e=ht(t);function n(i,r){return[i*e,ot(r)/e]}return n.invert=function(i,r){return[i/e,_n(r*e)]},n}function rQ(t,e){var n=ot(t),i=(n+ot(e))/2;if(Ft(i)<ft)return iQ(t);var r=1+n*(2*i-n),s=en(r)/i;function o(a,l){var u=en(r-2*i*ot(l))/i;return[u*ot(a*=i),s-u*ht(a)]}return o.invert=function(a,l){var u=s-l,c=ri(a,Ft(u))*si(u);return u*i<0&&(c-=St*si(a)*si(u)),[c/i,_n((r-(a*a+u*u)*i*i)/(2*i))]},o}function Bd(){return b2(rQ).scale(155.424).center([0,33.6442])}function f7(){return Bd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function sQ(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function oQ(){var t,e,n=f7(),i,r=Bd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=Bd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(h,d){l=[h,d]}};function c(h){var d=h[0],p=h[1];return l=null,i.point(d,p),l||(s.point(d,p),l)||(a.point(d,p),l)}c.invert=function(h){var d=n.scale(),p=n.translate(),g=(h[0]-p[0])/d,m=(h[1]-p[1])/d;return(m>=.12&&m<.234&&g>=-.425&&g<-.214?r:m>=.166&&m<.234&&g>=-.214&&g<-.115?o:n).invert(h)},c.stream=function(h){return t&&e===h?t:t=sQ([n.stream(e=h),r.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),p=+h[0],g=+h[1];return i=n.translate(h).clipExtent([[p-.455*d,g-.238*d],[p+.455*d,g+.238*d]]).stream(u),s=r.translate([p-.307*d,g+.201*d]).clipExtent([[p-.425*d+ft,g+.12*d+ft],[p-.214*d-ft,g+.234*d-ft]]).stream(u),a=o.translate([p-.205*d,g+.212*d]).clipExtent([[p-.214*d+ft,g+.166*d+ft],[p-.115*d-ft,g+.234*d-ft]]).stream(u),f()},c.fitExtent=function(h,d){return Id(c,h,d)},c.fitSize=function(h,d){return _2(c,h,d)},c.fitWidth=function(h,d){return v2(c,h,d)},c.fitHeight=function(h,d){return x2(c,h,d)};function f(){return t=e=null,c}return c.scale(1070)}function h7(t){return function(e,n){var i=ht(e),r=ht(n),s=t(i*r);return s===1/0?[2,0]:[s*r*ot(e),s*ot(n)]}}function sc(t){return function(e,n){var i=en(e*e+n*n),r=t(i),s=ot(r),o=ht(r);return[ri(e*s,i*o),_n(i&&n*s/i)]}}var d7=h7(function(t){return en(2/(1+t))});d7.invert=sc(function(t){return 2*_n(t/2)});function aQ(){return nr(d7).scale(124.75).clipAngle(180-.001)}var p7=h7(function(t){return(t=f8(t))&&t/ot(t)});p7.invert=sc(function(t){return t});function lQ(){return nr(p7).scale(79.4188).clipAngle(180-.001)}function zd(t,e){return[t,dd(Vy((se+e)/2))]}zd.invert=function(t,e){return[t,2*Va(c8(e))-se]};function uQ(){return g7(zd).scale(961/tn)}function g7(t){var e=nr(t),n=e.center,i=e.scale,r=e.translate,s=e.clipExtent,o=null,a,l,u;e.scale=function(f){return arguments.length?(i(f),c()):i()},e.translate=function(f){return arguments.length?(r(f),c()):r()},e.center=function(f){return arguments.length?(n(f),c()):n()},e.clipExtent=function(f){return arguments.length?(f==null?o=a=l=u=null:(o=+f[0][0],a=+f[0][1],l=+f[1][0],u=+f[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var f=St*i(),h=e(TX(e.rotate()).invert([0,0]));return s(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:t===zd?[[Math.max(h[0]-f,o),a],[Math.min(h[0]+f,l),u]]:[[o,Math.max(h[1]-f,a)],[l,Math.min(h[1]+f,u)]])}return c()}function Ud(t){return Vy((se+t)/2)}function cQ(t,e){var n=ht(t),i=t===e?ot(t):dd(n/ht(e))/dd(Ud(e)/Ud(t)),r=n*Wy(Ud(t),i)/i;if(!i)return zd;function s(o,a){r>0?a<-se+ft&&(a=-se+ft):a>se-ft&&(a=se-ft);var l=r/Wy(Ud(a),i);return[l*ot(i*o),r-l*ht(i*o)]}return s.invert=function(o,a){var l=r-a,u=si(i)*en(o*o+l*l),c=ri(o,Ft(l))*si(l);return l*i<0&&(c-=St*si(o)*si(l)),[c/i,2*Va(Wy(r/u,1/i))-se]},s}function fQ(){return b2(cQ).scale(109.5).parallels([30,30])}function jd(t,e){return[t,e]}jd.invert=jd;function hQ(){return nr(jd).scale(152.63)}function dQ(t,e){var n=ht(t),i=t===e?ot(t):(n-ht(e))/(e-t),r=n/i+t;if(Ft(i)<ft)return jd;function s(o,a){var l=r-a,u=i*o;return[l*ot(u),r-l*ht(u)]}return s.invert=function(o,a){var l=r-a,u=ri(o,Ft(l))*si(l);return l*i<0&&(u-=St*si(o)*si(l)),[u/i,r-si(i)*en(o*o+l*l)]},s}function pQ(){return b2(dQ).scale(131.154).center([0,13.9389])}var oc=1.340264,ac=-.081106,lc=893e-6,uc=.003796,qd=en(3)/2,gQ=12;function m7(t,e){var n=_n(qd*ot(e)),i=n*n,r=i*i*i;return[t*ht(n)/(qd*(oc+3*ac*i+r*(7*lc+9*uc*i))),n*(oc+ac*i+r*(lc+uc*i))]}m7.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,s=0,o,a,l;s<gQ&&(a=n*(oc+ac*i+r*(lc+uc*i))-e,l=oc+3*ac*i+r*(7*lc+9*uc*i),n-=o=a/l,i=n*n,r=i*i*i,!(Ft(o)<cd));++s);return[qd*t*(oc+3*ac*i+r*(7*lc+9*uc*i))/ht(n),_n(ot(n)/qd)]};function mQ(){return nr(m7).scale(177.158)}function y7(t,e){var n=ht(e),i=ht(t)*n;return[n*ot(t)/i,ot(e)/i]}y7.invert=sc(Va);function yQ(){return nr(y7).scale(144.049).clipAngle(60)}function _Q(){var t=1,e=0,n=0,i=1,r=1,s=0,o,a,l=null,u,c,f,h=1,d=1,p=Ld({point:function(x,w){var k=v([x,w]);this.stream.point(k[0],k[1])}}),g=Ju,m,y;function _(){return h=t*i,d=t*r,m=y=null,v}function v(x){var w=x[0]*h,k=x[1]*d;if(s){var b=k*o-w*a;w=w*o+k*a,k=b}return[w+e,k+n]}return v.invert=function(x){var w=x[0]-e,k=x[1]-n;if(s){var b=k*o+w*a;w=w*o-k*a,k=b}return[w/h,k/d]},v.stream=function(x){return m&&y===x?m:m=p(g(y=x))},v.postclip=function(x){return arguments.length?(g=x,l=u=c=f=null,_()):g},v.clipExtent=function(x){return arguments.length?(g=x==null?(l=u=c=f=null,Ju):z8(l=+x[0][0],u=+x[0][1],c=+x[1][0],f=+x[1][1]),_()):l==null?null:[[l,u],[c,f]]},v.scale=function(x){return arguments.length?(t=+x,_()):t},v.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],_()):[e,n]},v.angle=function(x){return arguments.length?(s=x%360*Tt,a=ot(s),o=ht(s),_()):s*ue},v.reflectX=function(x){return arguments.length?(i=x?-1:1,_()):i<0},v.reflectY=function(x){return arguments.length?(r=x?-1:1,_()):r<0},v.fitExtent=function(x,w){return Id(v,x,w)},v.fitSize=function(x,w){return _2(v,x,w)},v.fitWidth=function(x,w){return v2(v,x,w)},v.fitHeight=function(x,w){return x2(v,x,w)},v}function _7(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}_7.invert=function(t,e){var n=e,i=25,r;do{var s=n*n,o=s*s;n-=r=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-e)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Ft(r)>ft&&--i>0);return[t/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function vQ(){return nr(_7).scale(175.295)}function v7(t,e){return[ht(e)*ot(t),ot(e)]}v7.invert=sc(_n);function xQ(){return nr(v7).scale(249.5).clipAngle(90+ft)}function x7(t,e){var n=ht(e),i=1+ht(t)*n;return[n*ot(t)/i,ot(e)/i]}x7.invert=sc(function(t){return 2*Va(t)});function bQ(){return nr(x7).scale(250).clipAngle(142)}function b7(t,e){return[dd(Vy((se+e)/2)),-t]}b7.invert=function(t,e){return[-e,2*Va(c8(t))-se]};function wQ(){var t=g7(b7),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var EQ=Math.abs,w2=Math.cos,Hd=Math.sin,kQ=1e-6,w7=Math.PI,E2=w7/2,E7=AQ(2);function k7(t){return t>1?E2:t<-1?-E2:Math.asin(t)}function AQ(t){return t>0?Math.sqrt(t):0}function CQ(t,e){var n=t*Hd(e),i=30,r;do e-=r=(e+Hd(e)-n)/(1+w2(e));while(EQ(r)>kQ&&--i>0);return e/2}function MQ(t,e,n){function i(r,s){return[t*r*w2(s=CQ(n,s)),e*Hd(s)]}return i.invert=function(r,s){return s=k7(s/e),[r/(t*w2(s)),k7((2*s+Hd(2*s))/n)]},i}var SQ=MQ(E7/E2,E7,w7);function TQ(){return nr(SQ).scale(169.529)}const DQ=o7(),k2=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function $Q(t,e){return function n(){const i=e();return i.type=t,i.path=o7().projection(i),i.copy=i.copy||function(){const r=n();return k2.forEach(s=>{i[s]&&r[s](i[s]())}),r.path.pointRadius(i.path.pointRadius()),r},i}}function A7(t,e){if(!t||typeof t!="string")throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(Wd[t]=$Q(t,e),this):Wd[t]||null}function C7(t){return t&&t.path||DQ}const Wd={albers:f7,albersusa:oQ,azimuthalequalarea:aQ,azimuthalequidistant:lQ,conicconformal:fQ,conicequalarea:Bd,conicequidistant:pQ,equalEarth:mQ,equirectangular:hQ,gnomonic:yQ,identity:_Q,mercator:uQ,mollweide:TQ,naturalEarth1:vQ,orthographic:xQ,stereographic:bQ,transversemercator:wQ};for(const t in Wd)A7(t,Wd[t]);function OQ(){}const Cr=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function M7(){var t=1,e=1,n=a;function i(l,u){return u.map(c=>r(l,c))}function r(l,u){var c=[],f=[];return s(l,u,h=>{n(h,l,u),NQ(h)>0?c.push([h]):f.push(h)}),f.forEach(h=>{for(var d=0,p=c.length,g;d<p;++d)if(FQ((g=c[d])[0],h)!==-1){g.push(h);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var f=new Array,h=new Array,d,p,g,m,y,_;for(d=p=-1,m=l[0]>=u,Cr[m<<1].forEach(v);++d<t-1;)g=m,m=l[d+1]>=u,Cr[g|m<<1].forEach(v);for(Cr[m<<0].forEach(v);++p<e-1;){for(d=-1,m=l[p*t+t]>=u,y=l[p*t]>=u,Cr[m<<1|y<<2].forEach(v);++d<t-1;)g=m,m=l[p*t+t+d+1]>=u,_=y,y=l[p*t+d+1]>=u,Cr[g|m<<1|y<<2|_<<3].forEach(v);Cr[m|y<<3].forEach(v)}for(d=-1,y=l[p*t]>=u,Cr[y<<2].forEach(v);++d<t-1;)_=y,y=l[p*t+d+1]>=u,Cr[y<<2|_<<3].forEach(v);Cr[y<<3].forEach(v);function v(x){var w=[x[0][0]+d,x[0][1]+p],k=[x[1][0]+d,x[1][1]+p],b=o(w),C=o(k),T,M;(T=h[b])?(M=f[C])?(delete h[T.end],delete f[M.start],T===M?(T.ring.push(k),c(T.ring)):f[T.start]=h[M.end]={start:T.start,end:M.end,ring:T.ring.concat(M.ring)}):(delete h[T.end],T.ring.push(k),h[T.end=C]=T):(T=f[C])?(M=h[b])?(delete f[T.start],delete h[M.end],T===M?(T.ring.push(k),c(T.ring)):f[M.start]=h[T.end]={start:M.start,end:T.end,ring:M.ring.concat(T.ring)}):(delete f[T.start],T.ring.unshift(w),f[T.start=b]=T):f[b]=h[C]={start:b,end:C,ring:[w,k]}}}function o(l){return l[0]*2+l[1]*(t+1)*4}function a(l,u,c){l.forEach(f=>{var h=f[0],d=f[1],p=h|0,g=d|0,m,y=u[g*t+p];h>0&&h<t&&p===h&&(m=u[g*t+p-1],f[0]=h+(c-m)/(y-m)-.5),d>0&&d<e&&g===d&&(m=u[(g-1)*t+p],f[1]=d+(c-m)/(y-m)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[t,e];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||I("invalid size"),t=u,e=c,i},i.smooth=function(l){return arguments.length?(n=l?a:OQ,i):n===a},i}function NQ(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function FQ(t,e){for(var n=-1,i=e.length,r;++n<i;)if(r=PQ(t,e[n]))return r;return 0}function PQ(t,e){for(var n=e[0],i=e[1],r=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],u=l[0],c=l[1],f=t[a],h=f[0],d=f[1];if(RQ(l,f,e))return 0;c>i!=d>i&&n<(h-u)*(i-c)/(d-c)+u&&(r=-r)}return r}function RQ(t,e,n){var i;return LQ(t,e,n)&&IQ(t[i=+(t[0]===e[0])],n[i],e[i])}function LQ(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}function IQ(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function S7(t,e,n){return function(i){var r=cr(i),s=n?Math.min(r[0],0):r[0],o=r[1],a=o-s,l=e?Vr(s,o,t):a/(t+1);return In(s+l,o,l)}}function A2(t){P.call(this,null,t)}A2.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};G(A2,P,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,r=t.field||gn,s=M7().smooth(t.smooth!==!1),o=t.thresholds||BQ(i,r,t),a=t.as===null?null:t.as||"contour",l=[];return i.forEach(u=>{const c=r(u),f=s.size([c.width,c.height])(c.values,lt(o)?o:o(c.values));zQ(f,c,u,t),f.forEach(h=>{l.push(ih(u,Ut(a!=null?{[a]:h}:h)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function BQ(t,e,n){const i=S7(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(t.map(r=>Zs(e(r).values)))}function zQ(t,e,n,i){let r=i.scale||e.scale,s=i.translate||e.translate;if(At(r)&&(r=r(n,i)),At(s)&&(s=s(n,i)),(r===1||r==null)&&!s)return;const o=(Wl(r)?r:r[0])||1,a=(Wl(r)?r:r[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;t.forEach(T7(e,o,a,l,u))}function T7(t,e,n,i,r){const s=t.x1||0,o=t.y1||0,a=e*n<0;function l(f){f.forEach(u)}function u(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*e+i,f[1]=(f[1]-o)*n+r}return function(f){return f.coordinates.forEach(l),f}}function D7(t,e,n){const i=t>=0?t:g5(e,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function C2(t){return At(t)?t:Ge(+t)}function $7(){var t=l=>l[0],e=l=>l[1],n=jl,i=[-1,-1],r=960,s=500,o=2;function a(l,u){const c=D7(i[0],l,t)>>o,f=D7(i[1],l,e)>>o,h=c?c+2:0,d=f?f+2:0,p=2*h+(r>>o),g=2*d+(s>>o),m=new Float32Array(p*g),y=new Float32Array(p*g);let _=m;l.forEach(x=>{const w=h+(+t(x)>>o),k=d+(+e(x)>>o);w>=0&&w<p&&k>=0&&k<g&&(m[w+k*p]+=+n(x))}),c>0&&f>0?(Qa(p,g,m,y,c),Za(p,g,y,m,f),Qa(p,g,m,y,c),Za(p,g,y,m,f),Qa(p,g,m,y,c),Za(p,g,y,m,f)):c>0?(Qa(p,g,m,y,c),Qa(p,g,y,m,c),Qa(p,g,m,y,c),_=y):f>0&&(Za(p,g,m,y,f),Za(p,g,y,m,f),Za(p,g,m,y,f),_=y);const v=u?Math.pow(2,-2*o):1/J3(_);for(let x=0,w=p*g;x<w;++x)_[x]*=v;return{values:_,scale:1<<o,width:p,height:g,x1:h,y1:d,x2:h+(r>>o),y2:d+(s>>o)}}return a.x=function(l){return arguments.length?(t=C2(l),a):t},a.y=function(l){return arguments.length?(e=C2(l),a):e},a.weight=function(l){return arguments.length?(n=C2(l),a):n},a.size=function(l){if(!arguments.length)return[r,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||I("invalid size"),r=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||I("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=pt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&I("invalid bandwidth"),i=l,a):i},a}function Qa(t,e,n,i,r){const s=(r<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+r;++a)a<t&&(l+=n[a+o*t]),a>=r&&(a>=s&&(l-=n[a-s+o*t]),i[a-r+o*t]=l/Math.min(a+1,t-1+s-a,s))}function Za(t,e,n,i,r){const s=(r<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+r;++a)a<e&&(l+=n[o+a*t]),a>=r&&(a>=s&&(l-=n[o+(a-s)*t]),i[o+(a-r)*t]=l/Math.min(a+1,e-1+s-a,s))}function M2(t){P.call(this,null,t)}M2.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const UQ=["x","y","weight","size","cellSize","bandwidth"];function O7(t,e){return UQ.forEach(n=>e[n]!=null?t[n](e[n]):0),t}G(M2,P,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,r=jQ(i,t.groupby),s=(t.groupby||[]).map(le),o=O7($7(),t),a=t.as||"grid",l=[];function u(c,f){for(let h=0;h<s.length;++h)c[s[h]]=f[h];return c}return l=r.map(c=>Ut(u({[a]:o(c,t.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function jQ(t,e){var n=[],i=c=>c(a),r,s,o,a,l,u;if(e==null)n.push(t);else for(r={},s=0,o=t.length;s<o;++s)a=t[s],l=e.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function S2(t){P.call(this,null,t)}S2.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};G(S2,P,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=M7().smooth(t.smooth!==!1),r=t.values,s=t.thresholds||S7(t.count||10,t.nice,!!r),o=t.size,a,l;return r||(r=e.materialize(e.SOURCE).source,a=O7($7(),t)(r,!0),l=T7(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],r=a.values),s=lt(s)?s:s(r),r=i.size(o)(r,s),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(Ut),n}});const T2="Feature",D2="FeatureCollection",qQ="MultiPoint";function $2(t){P.call(this,null,t)}$2.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};G($2,P,{transform(t,e){var n=this._features,i=this._points,r=t.fields,s=r&&r[0],o=r&&r[1],a=t.geojson||!r&&gn,l=e.ADD,u;u=t.modified()||e.changed(e.REM)||e.modified(Ve(a))||s&&e.modified(Ve(s))||o&&e.modified(Ve(o)),(!this.value||u)&&(l=e.SOURCE,this._features=n=[],this._points=i=[]),a&&e.visit(l,c=>n.push(a(c))),s&&o&&(e.visit(l,c=>{var f=s(c),h=o(c);f!=null&&h!=null&&(f=+f)===f&&(h=+h)===h&&i.push([f,h])}),n=n.concat({type:T2,geometry:{type:qQ,coordinates:i}})),this.value={type:D2,features:n}}});function O2(t){P.call(this,null,t)}O2.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};G(O2,P,{transform(t,e){var n=e.fork(e.ALL),i=this.value,r=t.field||gn,s=t.as||"path",o=n.SOURCE;!i||t.modified()?(this.value=i=C7(t.projection),n.materialize().reflow()):o=r===gn||e.modified(r.fields)?n.ADD_MOD:n.ADD;const a=HQ(i,t.pointRadius);return n.visit(o,l=>l[s]=i(r(l))),i.pointRadius(a),n.modifies(s)}});function HQ(t,e){const n=t.pointRadius();return t.context(null),e!=null&&t.pointRadius(e),n}function N2(t){P.call(this,null,t)}N2.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};G(N2,P,{transform(t,e){var n=t.projection,i=t.fields[0],r=t.fields[1],s=t.as||["x","y"],o=s[0],a=s[1],l;function u(c){const f=n([i(c),r(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(l=e.modified(i.fields)||e.modified(r.fields),e.visit(l?e.ADD_MOD:e.ADD,u)),e.modifies(s)}});function F2(t){P.call(this,null,t)}F2.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};G(F2,P,{transform(t,e){var n=e.fork(e.ALL),i=this.value,r=t.as||"shape",s=n.ADD;return(!i||t.modified())&&(this.value=i=WQ(C7(t.projection),t.field||Ln("datum"),t.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[r]=i),n.modifies(r)}});function WQ(t,e,n){const i=n==null?r=>t(e(r)):r=>{var s=t.pointRadius(),o=t.pointRadius(n)(e(r));return t.pointRadius(s),o};return i.context=r=>(t.context(r),i),i}function P2(t){P.call(this,[],t),this.generator=BX()}P2.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};G(P2,P,{transform(t,e){var n=this.value,i=this.generator,r;if(!n.length||t.modified())for(const s in t)At(i[s])&&i[s](t[s]);return r=i(),n.length?e.mod.push(e5(n[0],r)):e.add.push(Ut(r)),n[0]=r,e}});function R2(t){P.call(this,null,t)}R2.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};G(R2,P,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,i=t.resolve==="shared",r=t.field||gn,s=YQ(t.opacity,t),o=VQ(t.color,t),a=t.as||"image",l={$x:0,$y:0,$value:0,$max:i?Zs(n.map(u=>Zs(r(u).values))):0};return n.forEach(u=>{const c=r(u),f=bt({},u,l);i||(f.$max=Zs(c.values||[])),u[a]=GQ(c,f,o.dep?o:Ge(o(f)),s.dep?s:Ge(s(f)))}),e.reflow(!0).modifies(a)}});function VQ(t,e){let n;return At(t)?(n=i=>rs(t(i,e)),n.dep=N7(t)):n=Ge(rs(t||"#888")),n}function YQ(t,e){let n;return At(t)?(n=i=>t(i,e),n.dep=N7(t)):t?n=Ge(t):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function N7(t){if(!At(t))return!1;const e=zi(Ve(t));return e.$x||e.$y||e.$value||e.$max}function GQ(t,e,n,i){const r=t.width,s=t.height,o=t.x1||0,a=t.y1||0,l=t.x2||r,u=t.y2||s,c=t.values,f=c?m=>c[m]:Gs,h=Ta(l-o,u-a),d=h.getContext("2d"),p=d.getImageData(0,0,l-o,u-a),g=p.data;for(let m=a,y=0;m<u;++m){e.$y=m-a;for(let _=o,v=m*r;_<l;++_,y+=4){e.$x=_-o,e.$value=f(_+v);const x=n(e);g[y+0]=x.r,g[y+1]=x.g,g[y+2]=x.b,g[y+3]=~~(255*i(e))}}return d.putImageData(p,0,0),h}function F7(t){P.call(this,null,t),this.modified(!0)}G(F7,P,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=XQ(t.type),k2.forEach(i=>{t[i]!=null&&P7(n,i,t[i])})):k2.forEach(i=>{t.modified(i)&&P7(n,i,t[i])}),t.pointRadius!=null&&n.path.pointRadius(t.pointRadius),t.fit&&KQ(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});function KQ(t,e){const n=QQ(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function XQ(t){const e=A7((t||"mercator").toLowerCase());return e||I("Unrecognized projection type: "+t),e()}function P7(t,e,n){At(t[e])&&t[e](n)}function QQ(t){return t=pt(t),t.length===1?t[0]:{type:D2,features:t.reduce((e,n)=>e.concat(ZQ(n)),[])}}function ZQ(t){return t.type===D2?t.features:pt(t).filter(e=>e!=null).map(e=>e.type===T2?e:{type:T2,geometry:e})}var JQ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",contour:S2,geojson:$2,geopath:O2,geopoint:N2,geoshape:F2,graticule:P2,heatmap:R2,isocontour:A2,kde2d:M2,projection:F7});function tZ(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function r(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-t)*i,u=(u/o-e)*i,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return r.initialize=function(s){n=s},r.x=function(s){return arguments.length?(t=+s,r):t},r.y=function(s){return arguments.length?(e=+s,r):e},r.strength=function(s){return arguments.length?(i=+s,r):i},r}function eZ(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return R7(this.cover(e,n),e,n,t)}function R7(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s=t._root,o={data:i},a=t._x0,l=t._y0,u=t._x1,c=t._y1,f,h,d,p,g,m,y,_;if(!s)return t._root=o,t;for(;s.length;)if((g=e>=(f=(a+u)/2))?a=f:u=f,(m=n>=(h=(l+c)/2))?l=h:c=h,r=s,!(s=s[y=m<<1|g]))return r[y]=o,t;if(d=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===d&&n===p)return o.next=s,r?r[y]=o:t._root=o,t;do r=r?r[y]=new Array(4):t._root=new Array(4),(g=e>=(f=(a+u)/2))?a=f:u=f,(m=n>=(h=(l+c)/2))?l=h:c=h;while((y=m<<1|g)==(_=(p>=h)<<1|d>=f));return r[_]=s,r[y]=o,t}function nZ(t){var e,n,i=t.length,r,s,o=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,f=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=r,a[n]=s,r<l&&(l=r),r>c&&(c=r),s<u&&(u=s),s>f&&(f=s));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),n=0;n<i;++n)R7(this,o[n],a[n],t[n]);return this}function iZ(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var o=r-n||1,a=this._root,l,u;n>t||t>=r||i>e||e>=s;)switch(u=(e<i)<<1|t<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:r=n+o,s=i+o;break;case 1:n=r-o,s=i+o;break;case 2:r=n+o,i=s-o;break;case 3:n=r-o,i=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this}function rZ(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function sZ(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function on(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function oZ(t,e,n){var i,r=this._x0,s=this._y0,o,a,l,u,c=this._x1,f=this._y1,h=[],d=this._root,p,g;for(d&&h.push(new on(d,r,s,c,f)),n==null?n=1/0:(r=t-n,s=e-n,c=t+n,f=e+n,n*=n);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>c||(a=p.y0)>f||(l=p.x1)<r||(u=p.y1)<s))if(d.length){var m=(o+l)/2,y=(a+u)/2;h.push(new on(d[3],m,y,l,u),new on(d[2],o,y,m,u),new on(d[1],m,a,l,y),new on(d[0],o,a,m,y)),(g=(e>=y)<<1|t>=m)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-g],h[h.length-1-g]=p)}else{var _=t-+this._x.call(null,d.data),v=e-+this._y.call(null,d.data),x=_*_+v*v;if(x<n){var w=Math.sqrt(n=x);r=t-w,s=e-w,c=t+w,f=e+w,i=d.data}}return i}function aZ(t){if(isNaN(c=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,i,r,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,h,d,p,g,m,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(h=(o+l)/2))?o=h:l=h,(g=f>=(d=(a+u)/2))?a=d:u=d,e=n,!(n=n[m=g<<1|p]))return this;if(!n.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(i=e,y=m)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,r?(s?r.next=s:delete r.next,this):e?(s?e[m]=s:delete e[m],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[y]=n:this._root=n),this):(this._root=s,this)}function lZ(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function uZ(){return this._root}function cZ(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function fZ(t){var e=[],n,i=this._root,r,s,o,a,l;for(i&&e.push(new on(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&i.length){var u=(s+a)/2,c=(o+l)/2;(r=i[3])&&e.push(new on(r,u,c,a,l)),(r=i[2])&&e.push(new on(r,s,c,u,l)),(r=i[1])&&e.push(new on(r,u,o,a,c)),(r=i[0])&&e.push(new on(r,s,o,u,c))}return this}function hZ(t){var e=[],n=[],i;for(this._root&&e.push(new on(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.x1,u=i.y1,c=(o+l)/2,f=(a+u)/2;(s=r[0])&&e.push(new on(s,o,a,c,f)),(s=r[1])&&e.push(new on(s,c,a,l,f)),(s=r[2])&&e.push(new on(s,o,f,c,u)),(s=r[3])&&e.push(new on(s,c,f,l,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function dZ(t){return t[0]}function pZ(t){return arguments.length?(this._x=t,this):this._x}function gZ(t){return t[1]}function mZ(t){return arguments.length?(this._y=t,this):this._y}function L2(t,e,n){var i=new I2(e==null?dZ:e,n==null?gZ:n,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function I2(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function L7(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var an=L2.prototype=I2.prototype;an.copy=function(){var t=new I2(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=L7(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=L7(i));return t};an.add=eZ;an.addAll=nZ;an.cover=iZ;an.data=rZ;an.extent=sZ;an.find=oZ;an.remove=aZ;an.removeAll=lZ;an.root=uZ;an.size=cZ;an.visit=fZ;an.visitAfter=hZ;an.x=pZ;an.y=mZ;function ln(t){return function(){return t}}function vs(t){return(t()-.5)*1e-6}function yZ(t){return t.x+t.vx}function _Z(t){return t.y+t.vy}function vZ(t){var e,n,i,r=1,s=1;typeof t!="function"&&(t=ln(t==null?1:+t));function o(){for(var u,c=e.length,f,h,d,p,g,m,y=0;y<s;++y)for(f=L2(e,yZ,_Z).visitAfter(a),u=0;u<c;++u)h=e[u],g=n[h.index],m=g*g,d=h.x+h.vx,p=h.y+h.vy,f.visit(_);function _(v,x,w,k,b){var C=v.data,T=v.r,M=g+T;if(C){if(C.index>h.index){var S=d-C.x-C.vx,$=p-C.y-C.vy,O=S*S+$*$;O<M*M&&(S===0&&(S=vs(i),O+=S*S),$===0&&($=vs(i),O+=$*$),O=(M-(O=Math.sqrt(O)))/O*r,h.vx+=(S*=O)*(M=(T*=T)/(m+T)),h.vy+=($*=O)*M,C.vx-=S*(M=1-M),C.vy-=$*M)}return}return x>d+M||k<d-M||w>p+M||b<p-M}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(!!e){var u,c=e.length,f;for(n=new Array(c),u=0;u<c;++u)f=e[u],n[f.index]=+t(f,u,e)}}return o.initialize=function(u,c){e=u,i=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(r=+u,o):r},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:ln(+u),l(),o):t},o}function xZ(t){return t.index}function I7(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function bZ(t){var e=xZ,n=f,i,r=ln(30),s,o,a,l,u,c=1;t==null&&(t=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function h(m){for(var y=0,_=t.length;y<c;++y)for(var v=0,x,w,k,b,C,T,M;v<_;++v)x=t[v],w=x.source,k=x.target,b=k.x+k.vx-w.x-w.vx||vs(u),C=k.y+k.vy-w.y-w.vy||vs(u),T=Math.sqrt(b*b+C*C),T=(T-s[v])/T*m*i[v],b*=T,C*=T,k.vx-=b*(M=l[v]),k.vy-=C*M,w.vx+=b*(M=1-M),w.vy+=C*M}function d(){if(!!o){var m,y=o.length,_=t.length,v=new Map(o.map((w,k)=>[e(w,k,o),w])),x;for(m=0,a=new Array(y);m<_;++m)x=t[m],x.index=m,typeof x.source!="object"&&(x.source=I7(v,x.source)),typeof x.target!="object"&&(x.target=I7(v,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(m=0,l=new Array(_);m<_;++m)x=t[m],l[m]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);i=new Array(_),p(),s=new Array(_),g()}}function p(){if(!!o)for(var m=0,y=t.length;m<y;++m)i[m]=+n(t[m],m,t)}function g(){if(!!o)for(var m=0,y=t.length;m<y;++m)s[m]=+r(t[m],m,t)}return h.initialize=function(m,y){o=m,u=y,d()},h.links=function(m){return arguments.length?(t=m,d(),h):t},h.id=function(m){return arguments.length?(e=m,h):e},h.iterations=function(m){return arguments.length?(c=+m,h):c},h.strength=function(m){return arguments.length?(n=typeof m=="function"?m:ln(+m),p(),h):n},h.distance=function(m){return arguments.length?(r=typeof m=="function"?m:ln(+m),g(),h):r},h}var wZ={value:()=>{}};function B7(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Vd(n)}function Vd(t){this._=t}function EZ(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Vd.prototype=B7.prototype={constructor:Vd,on:function(t,e){var n=this._,i=EZ(t+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(t=i[s]).type)&&(r=kZ(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=i[s]).type)n[r]=z7(n[r],t.name,e);else if(e==null)for(r in n)n[r]=z7(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Vd(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function kZ(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function z7(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=wZ,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ja=0,cc=0,fc=0,U7=1e3,Yd,hc,Gd=0,Mo=0,Kd=0,dc=typeof performance=="object"&&performance.now?performance:Date,j7=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function B2(){return Mo||(j7(AZ),Mo=dc.now()+Kd)}function AZ(){Mo=0}function Xd(){this._call=this._time=this._next=null}Xd.prototype=q7.prototype={constructor:Xd,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?B2():+n)+(e==null?0:+e),!this._next&&hc!==this&&(hc?hc._next=this:Yd=this,hc=this),this._call=t,this._time=n,z2()},stop:function(){this._call&&(this._call=null,this._time=1/0,z2())}};function q7(t,e,n){var i=new Xd;return i.restart(t,e,n),i}function CZ(){B2(),++Ja;for(var t=Yd,e;t;)(e=Mo-t._time)>=0&&t._call.call(null,e),t=t._next;--Ja}function H7(){Mo=(Gd=dc.now())+Kd,Ja=cc=0;try{CZ()}finally{Ja=0,SZ(),Mo=0}}function MZ(){var t=dc.now(),e=t-Gd;e>U7&&(Kd-=e,Gd=t)}function SZ(){for(var t,e=Yd,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Yd=n);hc=t,z2(i)}function z2(t){if(!Ja){cc&&(cc=clearTimeout(cc));var e=t-Mo;e>24?(t<1/0&&(cc=setTimeout(H7,t-dc.now()-Kd)),fc&&(fc=clearInterval(fc))):(fc||(Gd=dc.now(),fc=setInterval(MZ,U7)),Ja=1,j7(H7))}}function TZ(t,e,n){var i=new Xd,r=e;return e==null?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(s,o,a){o=+o,a=a==null?B2():+a,i._restart(function l(u){u+=r,i._restart(l,r+=o,a),s(u)},o,a)},i.restart(t,e,n),i)}const DZ=1664525,$Z=1013904223,W7=4294967296;function OZ(){let t=1;return()=>(t=(DZ*t+$Z)%W7)/W7}function NZ(t){return t.x}function FZ(t){return t.y}var PZ=10,RZ=Math.PI*(3-Math.sqrt(5));function LZ(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,o=.6,a=new Map,l=q7(f),u=B7("tick","end"),c=OZ();t==null&&(t=[]);function f(){h(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function h(g){var m,y=t.length,_;g===void 0&&(g=1);for(var v=0;v<g;++v)for(n+=(s-n)*r,a.forEach(function(x){x(n)}),m=0;m<y;++m)_=t[m],_.fx==null?_.x+=_.vx*=o:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=o:(_.y=_.fy,_.vy=0);return e}function d(){for(var g=0,m=t.length,y;g<m;++g){if(y=t[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var _=PZ*Math.sqrt(.5+g),v=g*RZ;y.x=_*Math.cos(v),y.y=_*Math.sin(v)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(t,c),g}return d(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(g){return arguments.length?(t=g,d(),a.forEach(p),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(i=+g,e):i},alphaDecay:function(g){return arguments.length?(r=+g,e):+r},alphaTarget:function(g){return arguments.length?(s=+g,e):s},velocityDecay:function(g){return arguments.length?(o=1-g,e):1-o},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),e):c},force:function(g,m){return arguments.length>1?(m==null?a.delete(g):a.set(g,p(m)),e):a.get(g)},find:function(g,m,y){var _=0,v=t.length,x,w,k,b,C;for(y==null?y=1/0:y*=y,_=0;_<v;++_)b=t[_],x=g-b.x,w=m-b.y,k=x*x+w*w,k<y&&(C=b,y=k);return C},on:function(g,m){return arguments.length>1?(u.on(g,m),e):u.on(g)}}}function IZ(){var t,e,n,i,r=ln(-30),s,o=1,a=1/0,l=.81;function u(d){var p,g=t.length,m=L2(t,NZ,FZ).visitAfter(f);for(i=d,p=0;p<g;++p)e=t[p],m.visit(h)}function c(){if(!!t){var d,p=t.length,g;for(s=new Array(p),d=0;d<p;++d)g=t[d],s[g.index]=+r(g,d,t)}}function f(d){var p=0,g,m,y=0,_,v,x;if(d.length){for(_=v=x=0;x<4;++x)(g=d[x])&&(m=Math.abs(g.value))&&(p+=g.value,y+=m,_+=m*g.x,v+=m*g.y);d.x=_/y,d.y=v/y}else{g=d,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}d.value=p}function h(d,p,g,m){if(!d.value)return!0;var y=d.x-e.x,_=d.y-e.y,v=m-p,x=y*y+_*_;if(v*v/l<x)return x<a&&(y===0&&(y=vs(n),x+=y*y),_===0&&(_=vs(n),x+=_*_),x<o&&(x=Math.sqrt(o*x)),e.vx+=y*d.value*i/x,e.vy+=_*d.value*i/x),!0;if(d.length||x>=a)return;(d.data!==e||d.next)&&(y===0&&(y=vs(n),x+=y*y),_===0&&(_=vs(n),x+=_*_),x<o&&(x=Math.sqrt(o*x)));do d.data!==e&&(v=s[d.data.index]*i/x,e.vx+=y*v,e.vy+=_*v);while(d=d.next)}return u.initialize=function(d,p){t=d,n=p,c()},u.strength=function(d){return arguments.length?(r=typeof d=="function"?d:ln(+d),c(),u):r},u.distanceMin=function(d){return arguments.length?(o=d*d,u):Math.sqrt(o)},u.distanceMax=function(d){return arguments.length?(a=d*d,u):Math.sqrt(a)},u.theta=function(d){return arguments.length?(l=d*d,u):Math.sqrt(l)},u}function BZ(t){var e=ln(.1),n,i,r;typeof t!="function"&&(t=ln(t==null?0:+t));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(r[l]-c.x)*i[l]*a}function o(){if(!!n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:ln(+a),o(),s):e},s.x=function(a){return arguments.length?(t=typeof a=="function"?a:ln(+a),o(),s):t},s}function zZ(t){var e=ln(.1),n,i,r;typeof t!="function"&&(t=ln(t==null?0:+t));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(r[l]-c.y)*i[l]*a}function o(){if(!!n){var a,l=n.length;for(i=new Array(l),r=new Array(l),a=0;a<l;++a)i[a]=isNaN(r[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(e=typeof a=="function"?a:ln(+a),o(),s):e},s.y=function(a){return arguments.length?(t=typeof a=="function"?a:ln(+a),o(),s):t},s}const V7={center:tZ,collide:vZ,nbody:IZ,link:bZ,x:BZ,y:zZ},pc="forces",U2=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],UZ=["static","iterations"],Y7=["x","y","vx","vy"];function j2(t){P.call(this,null,t)}j2.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Y7}]};G(j2,P,{transform(t,e){var n=this.value,i=e.changed(e.ADD_REM),r=t.modified(U2),s=t.iterations||300;if(n?(i&&(e.modifies("index"),n.nodes(e.source)),(r||e.changed(e.MOD))&&G7(n,t,0,e)):(this.value=n=qZ(e.source,t),n.on("tick",jZ(e.dataflow,this)),t.static||(i=!0,n.tick()),e.modifies("index")),r||i||t.modified(UZ)||e.changed()&&t.restart){if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),t.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return e.StopPropagation}return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==pc||c.op._argval.force!=="link")){for(var i=c.op._argops,r=0,s=i.length,o;r<s;++r)if(i[r].name==="links"&&(o=i[r].op.source)){n.pulse(o,n.changeset().reflow());break}}return e.reflow(t.modified()).modifies(Y7)}});function jZ(t,e){return()=>t.touch(e).run()}function qZ(t,e){const n=LZ(t),i=n.stop,r=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,r()),n.stop=()=>(s=!0,i()),G7(n,e,!0).on("end",()=>s=!0)}function G7(t,e,n,i){var r=pt(e.forces),s,o,a,l;for(s=0,o=U2.length;s<o;++s)a=U2[s],a!==pc&&e.modified(a)&&t[a](e[a]);for(s=0,o=r.length;s<o;++s)l=pc+s,a=n||e.modified(pc,s)?WZ(r[s]):i&&HZ(r[s],i)?t.force(l):null,a&&t.force(l,a);for(o=t.numForces||0;s<o;++s)t.force(pc+s,null);return t.numForces=r.length,t}function HZ(t,e){var n,i;for(n in t)if(At(i=t[n])&&e.modified(Ve(i)))return 1;return 0}function WZ(t){var e,n;gt(V7,t.force)||I("Unrecognized force: "+t.force),e=V7[t.force]();for(n in t)At(e[n])&&VZ(e[n],t[n],t);return e}function VZ(t,e,n){t(At(e)?i=>e(i,n):e)}var YZ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",force:j2});function GZ(t,e){return t.parent===e.parent?1:2}function KZ(t){return t.reduce(XZ,0)/t.length}function XZ(t,e){return t+e.x}function QZ(t){return 1+t.reduce(ZZ,0)}function ZZ(t,e){return Math.max(t,e.y)}function JZ(t){for(var e;e=t.children;)t=e[0];return t}function tJ(t){for(var e;e=t.children;)t=e[e.length-1];return t}function eJ(){var t=GZ,e=1,n=1,i=!1;function r(s){var o,a=0;s.eachAfter(function(h){var d=h.children;d?(h.x=KZ(d),h.y=QZ(d)):(h.x=o?a+=t(h,o):0,h.y=0,o=h)});var l=JZ(s),u=tJ(s),c=l.x-t(l,u)/2,f=u.x+t(u,l)/2;return s.eachAfter(i?function(h){h.x=(h.x-s.x)*e,h.y=(s.y-h.y)*n}:function(h){h.x=(h.x-c)/(f-c)*e,h.y=(1-(s.y?h.y/s.y:1))*n})}return r.separation=function(s){return arguments.length?(t=s,r):t},r.size=function(s){return arguments.length?(i=!1,e=+s[0],n=+s[1],r):i?null:[e,n]},r.nodeSize=function(s){return arguments.length?(i=!0,e=+s[0],n=+s[1],r):i?[e,n]:null},r}function nJ(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function iJ(){return this.eachAfter(nJ)}function rJ(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this}function sJ(t,e){for(var n=this,i=[n],r,s,o=-1;n=i.pop();)if(t.call(e,n,++o,this),r=n.children)for(s=r.length-1;s>=0;--s)i.push(r[s]);return this}function oJ(t,e){for(var n=this,i=[n],r=[],s,o,a,l=-1;n=i.pop();)if(r.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)i.push(s[o]);for(;n=r.pop();)t.call(e,n,++l,this);return this}function aJ(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i}function lJ(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}function uJ(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function cJ(t){for(var e=this,n=fJ(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i}function fJ(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}function hJ(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function dJ(){return Array.from(this)}function pJ(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function gJ(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*mJ(){var t=this,e,n=[t],i,r,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,i=t.children)for(r=0,s=i.length;r<s;++r)n.push(i[r]);while(n.length)}function q2(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=vJ)):e===void 0&&(e=_J);for(var n=new tl(t),i,r=[n],s,o,a,l;i=r.pop();)if((o=e(i.data))&&(l=(o=Array.from(o)).length))for(i.children=o,a=l-1;a>=0;--a)r.push(s=o[a]=new tl(o[a])),s.parent=i,s.depth=i.depth+1;return n.eachBefore(K7)}function yJ(){return q2(this).eachBefore(xJ)}function _J(t){return t.children}function vJ(t){return Array.isArray(t)?t[1]:null}function xJ(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function K7(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function tl(t){this.data=t,this.depth=this.height=0,this.parent=null}tl.prototype=q2.prototype={constructor:tl,count:iJ,each:rJ,eachAfter:oJ,eachBefore:sJ,find:aJ,sum:lJ,sort:uJ,path:cJ,ancestors:hJ,descendants:dJ,leaves:pJ,links:gJ,copy:yJ,[Symbol.iterator]:mJ};function bJ(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wJ(t){for(var e=t.length,n,i;e;)i=Math.random()*e--|0,n=t[e],t[e]=t[i],t[i]=n;return t}function EJ(t){for(var e=0,n=(t=wJ(Array.from(t))).length,i=[],r,s;e<n;)r=t[e],s&&X7(s,r)?++e:(s=AJ(i=kJ(i,r)),e=0);return s}function kJ(t,e){var n,i;if(H2(e,t))return[e];for(n=0;n<t.length;++n)if(Qd(e,t[n])&&H2(gc(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(Qd(gc(t[n],t[i]),e)&&Qd(gc(t[n],e),t[i])&&Qd(gc(t[i],e),t[n])&&H2(Q7(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function Qd(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function X7(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function H2(t,e){for(var n=0;n<e.length;++n)if(!X7(t,e[n]))return!1;return!0}function AJ(t){switch(t.length){case 1:return CJ(t[0]);case 2:return gc(t[0],t[1]);case 3:return Q7(t[0],t[1],t[2])}}function CJ(t){return{x:t.x,y:t.y,r:t.r}}function gc(t,e){var n=t.x,i=t.y,r=t.r,s=e.x,o=e.y,a=e.r,l=s-n,u=o-i,c=a-r,f=Math.sqrt(l*l+u*u);return{x:(n+s+l/f*c)/2,y:(i+o+u/f*c)/2,r:(f+r+a)/2}}function Q7(t,e,n){var i=t.x,r=t.y,s=t.r,o=e.x,a=e.y,l=e.r,u=n.x,c=n.y,f=n.r,h=i-o,d=i-u,p=r-a,g=r-c,m=l-s,y=f-s,_=i*i+r*r-s*s,v=_-o*o-a*a+l*l,x=_-u*u-c*c+f*f,w=d*p-h*g,k=(p*x-g*v)/(w*2)-i,b=(g*m-p*y)/w,C=(d*v-h*x)/(w*2)-r,T=(h*y-d*m)/w,M=b*b+T*T-1,S=2*(s+k*b+C*T),$=k*k+C*C-s*s,O=-(M?(S+Math.sqrt(S*S-4*M*$))/(2*M):$/S);return{x:i+k+b*O,y:r+C+T*O,r:O}}function Z7(t,e,n){var i=t.x-e.x,r,s,o=t.y-e.y,a,l,u=i*i+o*o;u?(s=e.r+n.r,s*=s,l=t.r+n.r,l*=l,s>l?(r=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-r*r)),n.x=t.x-r*i-a*o,n.y=t.y-r*o+a*i):(r=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-r*r)),n.x=e.x+r*i-a*o,n.y=e.y+r*o+a*i)):(n.x=e.x+n.r,n.y=e.y)}function J7(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function t9(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,s=(e.y*n.r+n.y*e.r)/i;return r*r+s*s}function Zd(t){this._=t,this.next=null,this.previous=null}function MJ(t){if(!(r=(t=bJ(t)).length))return 0;var e,n,i,r,s,o,a,l,u,c,f;if(e=t[0],e.x=0,e.y=0,!(r>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;Z7(n,e,i=t[2]),e=new Zd(e),n=new Zd(n),i=new Zd(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(a=3;a<r;++a){Z7(e._,n._,i=t[a]),i=new Zd(i),l=n.next,u=e.previous,c=n._.r,f=e._.r;do if(c<=f){if(J7(l._,i._)){n=l,e.next=n,n.previous=e,--a;continue t}c+=l._.r,l=l.next}else{if(J7(u._,i._)){e=u,e.next=n,n.previous=e,--a;continue t}f+=u._.r,u=u.previous}while(l!==u.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,s=t9(e);(i=i.next)!==n;)(o=t9(i))<s&&(e=i,s=o);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=EJ(e),a=0;a<r;++a)e=t[a],e.x-=i.x,e.y-=i.y;return i.r}function SJ(t){return t==null?null:Jd(t)}function Jd(t){if(typeof t!="function")throw new Error;return t}function So(){return 0}function el(t){return function(){return t}}function TJ(t){return Math.sqrt(t.value)}function DJ(){var t=null,e=1,n=1,i=So;function r(s){return s.x=e/2,s.y=n/2,t?s.eachBefore(e9(t)).eachAfter(W2(i,.5)).eachBefore(n9(1)):s.eachBefore(e9(TJ)).eachAfter(W2(So,1)).eachAfter(W2(i,s.r/Math.min(e,n))).eachBefore(n9(Math.min(e,n)/(2*s.r))),s}return r.radius=function(s){return arguments.length?(t=SJ(s),r):t},r.size=function(s){return arguments.length?(e=+s[0],n=+s[1],r):[e,n]},r.padding=function(s){return arguments.length?(i=typeof s=="function"?s:el(+s),r):i},r}function e9(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function W2(t,e){return function(n){if(i=n.children){var i,r,s=i.length,o=t(n)*e||0,a;if(o)for(r=0;r<s;++r)i[r].r+=o;if(a=MJ(i),o)for(r=0;r<s;++r)i[r].r-=o;n.r=a+o}}}function n9(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function i9(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function mc(t,e,n,i,r){for(var s=t.children,o,a=-1,l=s.length,u=t.value&&(i-e)/t.value;++a<l;)o=s[a],o.y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*u}function $J(){var t=1,e=1,n=0,i=!1;function r(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/a,o.eachBefore(s(e,a)),i&&o.eachBefore(i9),o}function s(o,a){return function(l){l.children&&mc(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,f=l.x1-n,h=l.y1-n;f<u&&(u=f=(u+f)/2),h<c&&(c=h=(c+h)/2),l.x0=u,l.y0=c,l.x1=f,l.y1=h}}return r.round=function(o){return arguments.length?(i=!!o,r):i},r.size=function(o){return arguments.length?(t=+o[0],e=+o[1],r):[t,e]},r.padding=function(o){return arguments.length?(n=+o,r):n},r}var OJ={depth:-1},r9={};function NJ(t){return t.id}function FJ(t){return t.parentId}function s9(){var t=NJ,e=FJ;function n(i){var r=Array.from(i),s=r.length,o,a,l,u,c,f,h,d=new Map;for(a=0;a<s;++a)o=r[a],c=r[a]=new tl(o),(f=t(o,a,i))!=null&&(f+="")&&(h=c.id=f,d.set(h,d.has(h)?r9:c)),(f=e(o,a,i))!=null&&(f+="")&&(c.parent=f);for(a=0;a<s;++a)if(c=r[a],f=c.parent){if(u=d.get(f),!u)throw new Error("missing: "+f);if(u===r9)throw new Error("ambiguous: "+f);u.children?u.children.push(c):u.children=[c],c.parent=u}else{if(l)throw new Error("multiple roots");l=c}if(!l)throw new Error("no root");if(l.parent=OJ,l.eachBefore(function(p){p.depth=p.parent.depth+1,--s}).eachBefore(K7),l.parent=null,s>0)throw new Error("cycle");return l}return n.id=function(i){return arguments.length?(t=Jd(i),n):t},n.parentId=function(i){return arguments.length?(e=Jd(i),n):e},n}function PJ(t,e){return t.parent===e.parent?1:2}function V2(t){var e=t.children;return e?e[0]:t.t}function Y2(t){var e=t.children;return e?e[e.length-1]:t.t}function RJ(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function LJ(t){for(var e=0,n=0,i=t.children,r=i.length,s;--r>=0;)s=i[r],s.z+=e,s.m+=e,e+=s.s+(n+=s.c)}function IJ(t,e,n){return t.a.parent===e.parent?t.a:n}function t0(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}t0.prototype=Object.create(tl.prototype);function BJ(t){for(var e=new t0(t,0),n,i=[e],r,s,o,a;n=i.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)i.push(r=n.children[o]=new t0(s[o],o)),r.parent=n;return(e.parent=new t0(null,0)).children=[e],e}function zJ(){var t=PJ,e=1,n=1,i=null;function r(u){var c=BJ(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),i)u.eachBefore(l);else{var f=u,h=u,d=u;u.eachBefore(function(_){_.x<f.x&&(f=_),_.x>h.x&&(h=_),_.depth>d.depth&&(d=_)});var p=f===h?1:t(f,h)/2,g=p-f.x,m=e/(h.x+p+g),y=n/(d.depth||1);u.eachBefore(function(_){_.x=(_.x+g)*m,_.y=_.depth*y})}return u}function s(u){var c=u.children,f=u.parent.children,h=u.i?f[u.i-1]:null;if(c){LJ(u);var d=(c[0].z+c[c.length-1].z)/2;h?(u.z=h.z+t(u._,h._),u.m=u.z-d):u.z=d}else h&&(u.z=h.z+t(u._,h._));u.parent.A=a(u,h,u.parent.A||f[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,f){if(c){for(var h=u,d=u,p=c,g=h.parent.children[0],m=h.m,y=d.m,_=p.m,v=g.m,x;p=Y2(p),h=V2(h),p&&h;)g=V2(g),d=Y2(d),d.a=u,x=p.z+_-h.z-m+t(p._,h._),x>0&&(RJ(IJ(p,u,f),u,x),m+=x,y+=x),_+=p.m,m+=h.m,v+=g.m,y+=d.m;p&&!Y2(d)&&(d.t=p,d.m+=_-y),h&&!V2(g)&&(g.t=h,g.m+=m-v,f=u)}return f}function l(u){u.x*=e,u.y=u.depth*n}return r.separation=function(u){return arguments.length?(t=u,r):t},r.size=function(u){return arguments.length?(i=!1,e=+u[0],n=+u[1],r):i?null:[e,n]},r.nodeSize=function(u){return arguments.length?(i=!0,e=+u[0],n=+u[1],r):i?[e,n]:null},r}function e0(t,e,n,i,r){for(var s=t.children,o,a=-1,l=s.length,u=t.value&&(r-n)/t.value;++a<l;)o=s[a],o.x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*u}var o9=(1+Math.sqrt(5))/2;function a9(t,e,n,i,r,s){for(var o=[],a=e.children,l,u,c=0,f=0,h=a.length,d,p,g=e.value,m,y,_,v,x,w,k;c<h;){d=r-n,p=s-i;do m=a[f++].value;while(!m&&f<h);for(y=_=m,w=Math.max(p/d,d/p)/(g*t),k=m*m*w,x=Math.max(_/k,k/y);f<h;++f){if(m+=u=a[f].value,u<y&&(y=u),u>_&&(_=u),k=m*m*w,v=Math.max(_/k,k/y),v>x){m-=u;break}x=v}o.push(l={value:m,dice:d<p,children:a.slice(c,f)}),l.dice?mc(l,n,i,r,g?i+=p*m/g:s):e0(l,n,i,g?n+=d*m/g:r,s),g-=m,c=f}return o}var l9=function t(e){function n(i,r,s,o,a){a9(e,i,r,s,o,a)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(o9);function UJ(){var t=l9,e=!1,n=1,i=1,r=[0],s=So,o=So,a=So,l=So,u=So;function c(h){return h.x0=h.y0=0,h.x1=n,h.y1=i,h.eachBefore(f),r=[0],e&&h.eachBefore(i9),h}function f(h){var d=r[h.depth],p=h.x0+d,g=h.y0+d,m=h.x1-d,y=h.y1-d;m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),h.x0=p,h.y0=g,h.x1=m,h.y1=y,h.children&&(d=r[h.depth+1]=s(h)/2,p+=u(h)-d,g+=o(h)-d,m-=a(h)-d,y-=l(h)-d,m<p&&(p=m=(p+m)/2),y<g&&(g=y=(g+y)/2),t(h,p,g,m,y))}return c.round=function(h){return arguments.length?(e=!!h,c):e},c.size=function(h){return arguments.length?(n=+h[0],i=+h[1],c):[n,i]},c.tile=function(h){return arguments.length?(t=Jd(h),c):t},c.padding=function(h){return arguments.length?c.paddingInner(h).paddingOuter(h):c.paddingInner()},c.paddingInner=function(h){return arguments.length?(s=typeof h=="function"?h:el(+h),c):s},c.paddingOuter=function(h){return arguments.length?c.paddingTop(h).paddingRight(h).paddingBottom(h).paddingLeft(h):c.paddingTop()},c.paddingTop=function(h){return arguments.length?(o=typeof h=="function"?h:el(+h),c):o},c.paddingRight=function(h){return arguments.length?(a=typeof h=="function"?h:el(+h),c):a},c.paddingBottom=function(h){return arguments.length?(l=typeof h=="function"?h:el(+h),c):l},c.paddingLeft=function(h){return arguments.length?(u=typeof h=="function"?h:el(+h),c):u},c}function jJ(t,e,n,i,r){var s=t.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,t.value,e,n,i,r);function c(f,h,d,p,g,m,y){if(f>=h-1){var _=s[f];_.x0=p,_.y0=g,_.x1=m,_.y1=y;return}for(var v=u[f],x=d/2+v,w=f+1,k=h-1;w<k;){var b=w+k>>>1;u[b]<x?w=b+1:k=b}x-u[w-1]<u[w]-x&&f+1<w&&--w;var C=u[w]-v,T=d-C;if(m-p>y-g){var M=d?(p*T+m*C)/d:m;c(f,w,C,p,g,M,y),c(w,h,T,M,g,m,y)}else{var S=d?(g*T+y*C)/d:y;c(f,w,C,p,g,m,S),c(w,h,T,p,S,m,y)}}}function qJ(t,e,n,i,r){(t.depth&1?e0:mc)(t,e,n,i,r)}var HJ=function t(e){function n(i,r,s,o,a){if((l=i._squarify)&&l.ratio===e)for(var l,u,c,f,h=-1,d,p=l.length,g=i.value;++h<p;){for(u=l[h],c=u.children,f=u.value=0,d=c.length;f<d;++f)u.value+=c[f].value;u.dice?mc(u,r,s,o,g?s+=(a-s)*u.value/g:a):e0(u,r,s,g?r+=(o-r)*u.value/g:o,a),g-=u.value}else i._squarify=l=a9(e,i,r,s,o,a),l.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n}(o9);function G2(t,e,n){const i={};return t.each(r=>{const s=r.data;n(s)&&(i[e(s)]=r)}),t.lookup=i,t}function K2(t){P.call(this,null,t)}K2.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const WJ=t=>t.values;G(K2,P,{transform(t,e){e.source||I("Nest transform requires an upstream data source.");var n=t.generate,i=t.modified(),r=e.clone(),s=this.value;return(!s||i||e.changed())&&(s&&s.each(o=>{o.children&&l1(o.data)&&r.rem.push(o.data)}),this.value=s=q2({values:pt(t.keys).reduce((o,a)=>(o.key(a),o),VJ()).entries(r.source)},WJ),n&&s.each(o=>{o.children&&(o=Ut(o.data),r.add.push(o),r.source.push(o))}),G2(s,ut,ut)),r.source.root=s,r}});function VJ(){const t=[],e={entries:r=>i(n(r,0),0),key:r=>(t.push(r),e)};function n(r,s){if(s>=t.length)return r;const o=r.length,a=t[s++],l={},u={};let c=-1,f,h,d;for(;++c<o;)f=a(h=r[c])+"",(d=l[f])?d.push(h):l[f]=[h];for(f in l)u[f]=n(l[f],s);return u}function i(r,s){if(++s>t.length)return r;const o=[];for(const a in r)o.push({key:a,values:i(r[a],s)});return o}return e}function Mr(t){P.call(this,null,t)}const YJ=(t,e)=>t.parent===e.parent?1:2;G(Mr,P,{transform(t,e){(!e.source||!e.source.root)&&I(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),i=this.fields,r=e.source.root,s=t.as||i;t.field?r.sum(t.field):r.count(),t.sort&&r.sort(io(t.sort,o=>o.data)),GJ(n,this.params,t),n.separation&&n.separation(t.separation!==!1?YJ:jl);try{this.value=n(r)}catch(o){I(o)}return r.each(o=>KJ(o,i,s)),e.reflow(t.modified()).modifies(s).modifies("leaf")}});function GJ(t,e,n){for(let i,r=0,s=e.length;r<s;++r)i=e[r],i in n&&t[i](n[i])}function KJ(t,e,n){const i=t.data,r=e.length-1;for(let s=0;s<r;++s)i[n[s]]=t[e[s]];i[n[r]]=t.children?t.children.length:0}const X2=["x","y","r","depth","children"];function Q2(t){Mr.call(this,t)}Q2.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:X2.length,default:X2}]};G(Q2,Mr,{layout:DJ,params:["radius","size","padding"],fields:X2});const Z2=["x0","y0","x1","y1","depth","children"];function J2(t){Mr.call(this,t)}J2.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Z2.length,default:Z2}]};G(J2,Mr,{layout:$J,params:["size","round","padding"],fields:Z2});function t_(t){P.call(this,null,t)}t_.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};G(t_,P,{transform(t,e){e.source||I("Stratify transform requires an upstream data source.");let n=this.value;const i=t.modified(),r=e.fork(e.ALL).materialize(e.SOURCE),s=!n||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return r.source=r.source.slice(),s&&(n=r.source.length?G2(s9().id(t.key).parentId(t.parentKey)(r.source),t.key,gi):G2(s9()([{}]),t.key,t.key)),r.source.root=this.value=n,r}});const u9={tidy:zJ,cluster:eJ},e_=["x","y","depth","children"];function n_(t){Mr.call(this,t)}n_.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:e_.length,default:e_}]};G(n_,Mr,{layout(t){const e=t||"tidy";if(gt(u9,e))return u9[e]();I("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:e_});function i_(t){P.call(this,[],t)}i_.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};G(i_,P,{transform(t,e){const n=this.value,i=e.source&&e.source.root,r=e.fork(e.NO_SOURCE),s={};return i||I("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(r.rem=n,e.visit(e.SOURCE,o=>s[ut(o)]=1),i.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[ut(a)]&&s[ut(l)]&&r.add.push(Ut({source:l,target:a}))}),this.value=r.add):e.changed(e.MOD)&&(e.visit(e.MOD,o=>s[ut(o)]=1),n.forEach(o=>{(s[ut(o.source)]||s[ut(o.target)])&&r.mod.push(o)})),r}});const c9={binary:jJ,dice:mc,slice:e0,slicedice:qJ,squarify:l9,resquarify:HJ},r_=["x0","y0","x1","y1","depth","children"];function s_(t){Mr.call(this,t)}s_.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:r_.length,default:r_}]};G(s_,Mr,{layout(){const t=UJ();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{gt(c9,e)?t.tile(c9[e]):I("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:r_});var XJ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",nest:K2,pack:Q2,partition:J2,stratify:t_,tree:n_,treelinks:i_,treemap:s_});const QJ=4278190080,ZJ=268435456,JJ=.0625;function ttt(t,e){const n=t.bitmap();return(e||[]).forEach(i=>n.set(t(i.boundary[0]),t(i.boundary[3]))),[n,void 0]}function ett(t,e,n,i){const r=t.width,s=t.height,o=n||i,a=Ta(r,s).getContext("2d");e.forEach(m=>f9(a,m,o));const l=new Uint32Array(a.getImageData(0,0,r,s).data.buffer),u=t.bitmap(),c=o&&t.bitmap();let f,h,d,p,g;for(h=0;h<s;++h)for(f=0;f<r;++f)g=l[h*r+f]&QJ,g&&(d=t(f),p=t(h),i||u.set(d,p),o&&g^ZJ&&c.set(d,p));return[u,c]}function f9(t,e,n){if(!e.length)return;const i=e[0].mark.marktype;i==="group"?e.forEach(r=>{r.items.forEach(s=>f9(t,s.items,n))}):ii[i].draw(t,{items:n?e.map(ntt):e})}function ntt(t){const e=ih(t,{});return e.stroke&&(e.strokeOpacity=1),e.fill&&(e.fillOpacity=JJ,e.stroke="#000",e.strokeOpacity=1,e.strokeWidth=2),e}const Sr=5,un=31,yc=32,xs=new Uint32Array(yc+1),Ei=new Uint32Array(yc+1);Ei[0]=0;xs[0]=~Ei[0];for(let t=1;t<=yc;++t)Ei[t]=Ei[t-1]<<1|1,xs[t]=~Ei[t];function itt(t,e){const n=new Uint32Array(~~((t*e+yc)/yc));function i(s,o){n[s]|=o}function r(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*t+s;return n[a>>>Sr]&1<<(a&un)},set:(s,o)=>{const a=o*t+s;i(a>>>Sr,1<<(a&un))},clear:(s,o)=>{const a=o*t+s;r(a>>>Sr,~(1<<(a&un)))},getRange:(s,o,a,l)=>{let u=l,c,f,h,d;for(;u>=o;--u)if(c=u*t+s,f=u*t+a,h=c>>>Sr,d=f>>>Sr,h===d){if(n[h]&xs[c&un]&Ei[(f&un)+1])return!0}else{if(n[h]&xs[c&un]||n[d]&Ei[(f&un)+1])return!0;for(let p=h+1;p<d;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,f,h,d;for(;o<=l;++o)if(u=o*t+s,c=o*t+a,f=u>>>Sr,h=c>>>Sr,f===h)i(f,xs[u&un]&Ei[(c&un)+1]);else for(i(f,xs[u&un]),i(h,Ei[(c&un)+1]),d=f+1;d<h;++d)i(d,4294967295)},clearRange:(s,o,a,l)=>{let u,c,f,h,d;for(;o<=l;++o)if(u=o*t+s,c=o*t+a,f=u>>>Sr,h=c>>>Sr,f===h)r(f,Ei[u&un]|xs[(c&un)+1]);else for(r(f,Ei[u&un]),r(h,xs[(c&un)+1]),d=f+1;d<h;++d)r(d,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=e||a>=t}}function rtt(t,e,n){const i=Math.max(1,Math.sqrt(t*e/1e6)),r=~~((t+2*n+i)/i),s=~~((e+2*n+i)/i),o=a=>~~((a+n)/i);return o.invert=a=>a*i-n,o.bitmap=()=>itt(r,s),o.ratio=i,o.padding=n,o.width=t,o.height=e,o}function stt(t,e,n,i){const r=t.width,s=t.height;return function(o){const a=o.datum.datum.items[i].items,l=a.length,u=o.datum.fontSize,c=vr.width(o.datum,o.datum.text);let f=0,h,d,p,g,m,y,_;for(let v=0;v<l;++v)h=a[v].x,p=a[v].y,d=a[v].x2===void 0?h:a[v].x2,g=a[v].y2===void 0?p:a[v].y2,m=(h+d)/2,y=(p+g)/2,_=Math.abs(d-h+g-p),_>=f&&(f=_,o.x=m,o.y=y);return m=c/2,y=u/2,h=o.x-m,d=o.x+m,p=o.y-y,g=o.y+y,o.align="center",h<0&&d<=r?o.align="left":0<=h&&r<d&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function ott(t,e,n,i,r,s){let o=n/2;return t-o<0||t+o>r||e-(o=i/2)<0||e+o>s}function att(){return!1}function ltt(t,e,n,i,r,s,o,a){const l=r*s/(i*2),u=t(e-l),c=t(e+l),f=t(n-(s=s/2)),h=t(n+s);return o.outOfBounds(u,f,c,h)||o.getRange(u,f,c,h)||a&&a.getRange(u,f,c,h)}function utt(t,e,n,i,r,s,o,a){const l=r*s/(i*2);let u=t(e-l),c=t(e+l),f=t(n-(s=s/2)),h=t(n+s);return u=u>0?u:0,f=f>0?f:0,c=c<t.width?c:t.width-1,h=h<t.height?h:t.height-1,o.getRange(u,f,c,h)||a&&a.getRange(u,f,c,h)}function h9(t){return t?[utt,att]:[ltt,ott]}function ctt(t,e,n,i,r){const s=t.width,o=t.height,[a,l]=h9(r),u=e[0],c=e[1];function f(h,d,p,g,m){const y=t.invert(h),_=t.invert(d);let v=p,x=o,w;if(!l(y,_,g,m,s,o)&&!a(t,y,_,m,g,v,u,c)&&!a(t,y,_,m,g,m,u,null)){for(;x-v>=1;)w=(v+x)/2,a(t,y,_,m,g,w,u,c)?x=w:v=w;if(v>p)return[y,_,v,!0]}}return function(h){const d=h.datum.datum.items[i].items,p=d.length,g=h.datum.fontSize,m=vr.width(h.datum,h.datum.text);let y=n?g:0,_=!1,v=!1,x=0,w,k,b,C,T,M,S,$,O,U,N,R,z,q,J,yt,Ot;for(let Dt=0;Dt<p;++Dt){for(w=d[Dt].x,b=d[Dt].y,k=d[Dt].x2===void 0?w:d[Dt].x2,C=d[Dt].y2===void 0?b:d[Dt].y2,w>k&&(Ot=w,w=k,k=Ot),b>C&&(Ot=b,b=C,C=Ot),O=t(w),N=t(k),U=~~((O+N)/2),R=t(b),q=t(C),z=~~((R+q)/2),S=U;S>=O;--S)for($=z;$>=R;--$)yt=f(S,$,y,m,g),yt&&([h.x,h.y,y,_]=yt);for(S=U;S<=N;++S)for($=z;$<=q;++$)yt=f(S,$,y,m,g),yt&&([h.x,h.y,y,_]=yt);!_&&!n&&(J=Math.abs(k-w+C-b),T=(w+k)/2,M=(b+C)/2,J>=x&&!l(T,M,m,g,s,o)&&!a(t,T,M,g,m,g,u,null)&&(x=J,h.x=T,h.y=M,v=!0))}return _||v?(T=m/2,M=g/2,u.setRange(t(h.x-T),t(h.y-M),t(h.x+T),t(h.y+M)),h.align="center",h.baseline="middle",!0):!1}}const ftt=[-1,-1,1,1],htt=[-1,1,-1,1];function dtt(t,e,n,i,r){const s=t.width,o=t.height,[a,l]=h9(r),u=e[0],c=e[1],f=t.bitmap();return function(h){const d=h.datum.datum.items[i].items,p=d.length,g=h.datum.fontSize,m=vr.width(h.datum,h.datum.text),y=[];let _=n?g:0,v=!1,x=!1,w=0,k,b,C,T,M,S,$,O,U,N,R,z;for(let q=0;q<p;++q){for(k=d[q].x,C=d[q].y,b=d[q].x2===void 0?k:d[q].x2,T=d[q].y2===void 0?C:d[q].y2,y.push([t((k+b)/2),t((C+T)/2)]);y.length;)if([$,O]=y.pop(),!(u.get($,O)||c.get($,O)||f.get($,O))){f.set($,O);for(let J=0;J<4;++J)M=$+ftt[J],S=O+htt[J],f.outOfBounds(M,S,M,S)||y.push([M,S]);if(M=t.invert($),S=t.invert(O),U=_,N=o,!l(M,S,m,g,s,o)&&!a(t,M,S,g,m,U,u,c)&&!a(t,M,S,g,m,g,u,null)){for(;N-U>=1;)R=(U+N)/2,a(t,M,S,g,m,R,u,c)?N=R:U=R;U>_&&(h.x=M,h.y=S,_=U,v=!0)}}!v&&!n&&(z=Math.abs(b-k+T-C),M=(k+b)/2,S=(C+T)/2,z>=w&&!l(M,S,m,g,s,o)&&!a(t,M,S,g,m,g,u,null)&&(w=z,h.x=M,h.y=S,x=!0))}return v||x?(M=m/2,S=g/2,u.setRange(t(h.x-M),t(h.y-S),t(h.x+M),t(h.y+S)),h.align="center",h.baseline="middle",!0):!1}}const ptt=["right","center","left"],gtt=["bottom","middle","top"];function mtt(t,e,n,i,r){const s=t.width,o=t.height,a=e[0],l=e[1],u=i.length;return function(c){const f=c.boundary,h=c.datum.fontSize;if(!r&&(f[2]<0||f[5]<0||f[0]>s||f[3]>o))return!1;let d=0,p,g,m,y,_,v,x,w,k,b,C,T,M,S,$;for(let O=0;O<u;++O){if(p=(n[O]&3)-1,g=(n[O]>>>2&3)-1,m=p===0&&g===0||i[O]<0,y=p&&g?Math.SQRT1_2:1,_=i[O]<0?-1:1,v=f[1+p]+i[O]*p*y,C=f[4+g]+_*h*g/2+i[O]*g*y,w=C-h/2,k=C+h/2,T=t(v),S=t(w),$=t(k),r&&(T=T<0?0:T,S=S<0?0:S,$=$>=t.height?t.height-1:$),!d)if(d9(T,T,S,$,a,l,v,v,w,k,f,m))d=vr.width(c.datum,c.datum.text);else continue;if(b=v+_*d*p/2,v=b-d/2,x=b+d/2,T=t(v),M=t(x),r&&(T=T<0?0:T,M=M>=t.width?t.width-1:M),d9(T,M,S,$,a,l,v,x,w,k,f,m))return c.x=p?p*_<0?x:v:b,c.y=g?g*_<0?k:w:C,c.align=ptt[p*_+1],c.baseline=gtt[g*_+1],a.setRange(T,S,M,$),!0}return!1}}function d9(t,e,n,i,r,s,o,a,l,u,c,f){return!(r.outOfBounds(t,n,e,i)||(f&&s?s.getRange(t,n,e,i)||!ytt(o,l,a,u,c):r.getRange(t,n,e,i)))}function ytt(t,e,n,i,r){return r[0]<=t&&n<=r[2]&&r[3]<=e&&i<=r[5]}const o_=0,a_=4,l_=8,u_=0,c_=1,f_=2,_tt={"top-left":o_+u_,top:o_+c_,"top-right":o_+f_,left:a_+u_,middle:a_+c_,right:a_+f_,"bottom-left":l_+u_,bottom:l_+c_,"bottom-right":l_+f_},vtt={naive:stt,"reduced-search":ctt,floodfill:dtt};function xtt(t,e,n,i,r,s,o,a,l,u,c){if(!t.length)return t;const f=Math.max(i.length,r.length),h=btt(i,f),d=wtt(r,f),p=Ett(t[0].datum),g=p==="group"&&t[0].datum.items[l].marktype,m=g==="area",y=ktt(p,g,a,l),_=u===null||u===1/0,v=rtt(e[0],e[1],_?0:u),x=m&&c==="naive",w=t.map(C=>({datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(C)}));let k;if(!x){n&&w.sort((T,M)=>n(T.datum,M.datum));let C=!1;for(let T=0;T<d.length&&!C;++T)C=d[T]===5||h[T]<0;p&&(o||m)&&(s=[t.map(T=>T.datum)].concat(s)),k=s.length?ett(v,s,C,m):ttt(v,o&&w)}const b=m?vtt[c](v,k,o,l,_):mtt(v,k,d,h,_);return w.forEach(C=>C.opacity=+b(C)),w}function btt(t,e){const n=new Float64Array(e),i=t.length;for(let r=0;r<i;++r)n[r]=t[r]||0;for(let r=i;r<e;++r)n[r]=n[i-1];return n}function wtt(t,e){const n=new Int8Array(e),i=t.length;for(let r=0;r<i;++r)n[r]|=_tt[t[r]];for(let r=i;r<e;++r)n[r]=n[i-1];return n}function Ett(t){return t&&t.mark&&t.mark.marktype}function ktt(t,e,n,i){const r=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return t?t==="line"||t==="area"?s=>r(s.datum):e==="line"?s=>{const o=s.datum.items[i].items;return r(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:r}const h_=["x","y","opacity","align","baseline"],p9=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function d_(t){P.call(this,null,t)}d_.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:p9},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:h_.length,default:h_}]};G(d_,P,{transform(t,e){function n(s){const o=t[s];return At(o)&&e.modified(o.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||n("sort")))return;(!t.size||t.size.length!==2)&&I("Size parameter should be specified as a [width, height] array.");const r=t.as||h_;return xtt(e.materialize(e.SOURCE).source||[],t.size,t.sort,pt(t.offset==null?1:t.offset),pt(t.anchor||p9),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(s=>{const o=s.datum;o[r[0]]=s.x,o[r[1]]=s.y,o[r[2]]=s.opacity,o[r[3]]=s.align,o[r[4]]=s.baseline}),e.reflow(i).modifies(r)}});var Att=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",label:d_});function g9(t,e){var n=[],i=function(c){return c(a)},r,s,o,a,l,u;if(e==null)n.push(t);else for(r={},s=0,o=t.length;s<o;++s)a=t[s],l=e.map(i),u=r[l],u||(r[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function p_(t){P.call(this,null,t)}p_.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};G(p_,P,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=g9(i,t.groupby),s=(t.groupby||[]).map(le),o=s.length,a=t.as||[le(t.x),le(t.y)],l=[];r.forEach(u=>{xq(u,t.x,t.y,t.bandwidth||.3).forEach(c=>{const f={};for(let h=0;h<o;++h)f[s[h]]=u.dims[h];f[a[0]]=c[0],f[a[1]]=c[1],l.push(Ut(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const g_={linear:S5,log:pq,exp:gq,pow:mq,quad:T5,poly:yq},Ctt=(t,e)=>t==="poly"?e:t==="quad"?2:1;function m_(t){P.call(this,null,t)}m_.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(g_)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};G(m_,P,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=g9(i,t.groupby),s=(t.groupby||[]).map(le),o=t.method||"linear",a=t.order||3,l=Ctt(o,a),u=t.as||[le(t.x),le(t.y)],c=g_[o],f=[];let h=t.extent;gt(g_,o)||I("Invalid regression method: "+o),h!=null&&o==="log"&&h[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),r.forEach(d=>{if(d.length<=l){e.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(d,t.x,t.y,a);if(t.params){f.push(Ut({keys:d.dims,coef:g.coef,rSquared:g.rSquared}));return}const m=h||cr(d,t.x),y=_=>{const v={};for(let x=0;x<s.length;++x)v[s[x]]=d.dims[x];v[u[0]]=_[0],v[u[1]]=_[1],f.push(Ut(v))};o==="linear"?m.forEach(_=>y([_,g.predict(_)])):y1(g.predict,m,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});var Mtt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",loess:p_,regression:m_});const m9=Math.pow(2,-52),n0=new Uint32Array(512);class i0{static from(e,n=Ott,i=Ntt){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=e[o];s[2*o]=n(a),s[2*o+1]=i(a)}return new i0(s)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:s}=this,o=e.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let M=0;M<o;M++){const S=e[2*M],$=e[2*M+1];S<a&&(a=S),$<l&&(l=$),S>u&&(u=S),$>c&&(c=$),this._ids[M]=M}const f=(a+u)/2,h=(l+c)/2;let d=1/0,p,g,m;for(let M=0;M<o;M++){const S=y_(f,h,e[2*M],e[2*M+1]);S<d&&(p=M,d=S)}const y=e[2*p],_=e[2*p+1];d=1/0;for(let M=0;M<o;M++){if(M===p)continue;const S=y_(y,_,e[2*M],e[2*M+1]);S<d&&S>0&&(g=M,d=S)}let v=e[2*g],x=e[2*g+1],w=1/0;for(let M=0;M<o;M++){if(M===p||M===g)continue;const S=Dtt(y,_,v,x,e[2*M],e[2*M+1]);S<w&&(m=M,w=S)}let k=e[2*m],b=e[2*m+1];if(w===1/0){for(let $=0;$<o;$++)this._dists[$]=e[2*$]-e[0]||e[2*$+1]-e[1];nl(this._ids,this._dists,0,o-1);const M=new Uint32Array(o);let S=0;for(let $=0,O=-1/0;$<o;$++){const U=this._ids[$];this._dists[U]>O&&(M[S++]=U,O=this._dists[U])}this.hull=M.subarray(0,S),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(r0(y,_,v,x,k,b)){const M=g,S=v,$=x;g=m,v=k,x=b,m=M,k=S,b=$}const C=$tt(y,_,v,x,k,b);this._cx=C.x,this._cy=C.y;for(let M=0;M<o;M++)this._dists[M]=y_(e[2*M],e[2*M+1],C.x,C.y);nl(this._ids,this._dists,0,o-1),this._hullStart=p;let T=3;i[p]=n[m]=g,i[g]=n[p]=m,i[m]=n[g]=p,r[p]=0,r[g]=1,r[m]=2,s.fill(-1),s[this._hashKey(y,_)]=p,s[this._hashKey(v,x)]=g,s[this._hashKey(k,b)]=m,this.trianglesLen=0,this._addTriangle(p,g,m,-1,-1,-1);for(let M=0,S,$;M<this._ids.length;M++){const O=this._ids[M],U=e[2*O],N=e[2*O+1];if(M>0&&Math.abs(U-S)<=m9&&Math.abs(N-$)<=m9||(S=U,$=N,O===p||O===g||O===m))continue;let R=0;for(let Ot=0,Dt=this._hashKey(U,N);Ot<this._hashSize&&(R=s[(Dt+Ot)%this._hashSize],!(R!==-1&&R!==i[R]));Ot++);R=n[R];let z=R,q;for(;q=i[z],!r0(U,N,e[2*z],e[2*z+1],e[2*q],e[2*q+1]);)if(z=q,z===R){z=-1;break}if(z===-1)continue;let J=this._addTriangle(z,O,i[z],-1,-1,r[z]);r[O]=this._legalize(J+2),r[z]=J,T++;let yt=i[z];for(;q=i[yt],r0(U,N,e[2*yt],e[2*yt+1],e[2*q],e[2*q+1]);)J=this._addTriangle(yt,O,q,r[O],-1,r[yt]),r[O]=this._legalize(J+2),i[yt]=yt,T--,yt=q;if(z===R)for(;q=n[z],r0(U,N,e[2*q],e[2*q+1],e[2*z],e[2*z+1]);)J=this._addTriangle(q,O,z,-1,r[z],r[q]),this._legalize(J+2),r[q]=J,i[z]=z,T--,z=q;this._hullStart=n[O]=z,i[z]=n[yt]=O,i[O]=yt,s[this._hashKey(U,N)]=O,s[this._hashKey(e[2*z],e[2*z+1])]=z}this.hull=new Uint32Array(T);for(let M=0,S=this._hullStart;M<T;M++)this.hull[M]=S,S=i[S];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(Stt(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:i,coords:r}=this;let s=0,o=0;for(;;){const a=i[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=n0[--s];continue}const u=a-a%3,c=l+(e+1)%3,f=u+(a+2)%3,h=n[o],d=n[e],p=n[c],g=n[f];if(Ttt(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1],r[2*g],r[2*g+1])){n[e]=g,n[a]=h;const y=i[f];if(y===-1){let v=this._hullStart;do{if(this._hullTri[v]===f){this._hullTri[v]=e;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(e,y),this._link(a,i[o]),this._link(o,f);const _=u+(a+1)%3;s<n0.length&&(n0[s++]=_)}else{if(s===0)break;e=n0[--s]}}return o}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,i,r,s,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=n,this._triangles[a+2]=i,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Stt(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function y_(t,e,n,i){const r=t-n,s=e-i;return r*r+s*s}function __(t,e,n,i,r,s){const o=(i-e)*(r-t),a=(n-t)*(s-e);return Math.abs(o-a)>=33306690738754716e-32*Math.abs(o+a)?o-a:0}function r0(t,e,n,i,r,s){return(__(r,s,t,e,n,i)||__(t,e,n,i,r,s)||__(n,i,r,s,t,e))<0}function Ttt(t,e,n,i,r,s,o,a){const l=t-o,u=e-a,c=n-o,f=i-a,h=r-o,d=s-a,p=l*l+u*u,g=c*c+f*f,m=h*h+d*d;return l*(f*m-g*d)-u*(c*m-g*h)+p*(c*d-f*h)<0}function Dtt(t,e,n,i,r,s){const o=n-t,a=i-e,l=r-t,u=s-e,c=o*o+a*a,f=l*l+u*u,h=.5/(o*u-a*l),d=(u*c-a*f)*h,p=(o*f-l*c)*h;return d*d+p*p}function $tt(t,e,n,i,r,s){const o=n-t,a=i-e,l=r-t,u=s-e,c=o*o+a*a,f=l*l+u*u,h=.5/(o*u-a*l),d=t+(u*c-a*f)*h,p=e+(o*f-l*c)*h;return{x:d,y:p}}function nl(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const s=t[r],o=e[s];let a=r-1;for(;a>=n&&e[t[a]]>o;)t[a+1]=t[a--];t[a+1]=s}else{const r=n+i>>1;let s=n+1,o=i;_c(t,r,s),e[t[n]]>e[t[i]]&&_c(t,n,i),e[t[s]]>e[t[i]]&&_c(t,s,i),e[t[n]]>e[t[s]]&&_c(t,n,s);const a=t[s],l=e[a];for(;;){do s++;while(e[t[s]]<l);do o--;while(e[t[o]]>l);if(o<s)break;_c(t,s,o)}t[n+1]=t[o],t[o]=a,i-s+1>=o-n?(nl(t,e,s,i),nl(t,e,n,o-1)):(nl(t,e,n,o-1),nl(t,e,s,i))}}function _c(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Ott(t){return t[0]}function Ntt(t){return t[1]}const y9=1e-6;class To{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,i){e=+e,n=+n,i=+i;const r=e+i,s=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>y9||Math.abs(this._y1-s)>y9)&&(this._+="L"+r+","+s),!!i&&(this._+=`A${i},${i},0,1,1,${e-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,n,i,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class v_{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class Ftt{constructor(e,[n,i,r,s]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((s=+s)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=n,this.ymax=s,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:i},vectors:r}=this,s=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let d=0,p=0,g=i.length,m,y;d<g;d+=3,p+=2){const _=i[d]*2,v=i[d+1]*2,x=i[d+2]*2,w=e[_],k=e[_+1],b=e[v],C=e[v+1],T=e[x],M=e[x+1],S=b-w,$=C-k,O=T-w,U=M-k,N=S*S+$*$,R=O*O+U*U,z=(S*U-$*O)*2;if(!z)m=(w+T)/2-1e8*U,y=(k+M)/2+1e8*O;else if(Math.abs(z)<1e-8)m=(w+T)/2,y=(k+M)/2;else{const q=1/z;m=w+(U*N-$*R)*q,y=k+(S*R-O*N)*q}s[p]=m,s[p+1]=y}let o=n[n.length-1],a,l=o*4,u,c=e[2*o],f,h=e[2*o+1];r.fill(0);for(let d=0;d<n.length;++d)o=n[d],a=l,u=c,f=h,l=o*4,c=e[2*o],h=e[2*o+1],r[a+2]=r[l]=f-h,r[a+3]=r[l+1]=c-u}render(e){const n=e==null?e=new To:void 0,{delaunay:{halfedges:i,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=i.length;c<f;++c){const h=i[c];if(h<c)continue;const d=Math.floor(c/3)*2,p=Math.floor(h/3)*2,g=o[d],m=o[d+1],y=o[p],_=o[p+1];this._renderSegment(g,m,y,_,e)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const f=Math.floor(r[u]/3)*2,h=o[f],d=o[f+1],p=l*4,g=this._project(h,d,a[p+2],a[p+3]);g&&this._renderSegment(h,d,g[0],g[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new To:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const i=n==null?n=new To:void 0,r=this._clip(e);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,i=e.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(e){const n=new v_;return this.renderCell(e,n),n.value()}_renderSegment(e,n,i,r,s){let o;const a=this._regioncode(e,n),l=this._regioncode(i,r);a===0&&l===0?(s.moveTo(e,n),s.lineTo(i,r)):(o=this._clipSegment(e,n,i,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(e,n,i)===e}*neighbors(e){const n=this._clip(e);if(n)for(const i of this.delaunay.neighbors(e)){const r=this._clip(i);if(r)t:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(n[s]==r[a]&&n[s+1]==r[a+1]&&n[(s+2)%o]==r[(a+l-2)%l]&&n[(s+3)%o]==r[(a+l-1)%l]){yield i;break t}}}_cell(e){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:s}}=this,o=i[e];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3==2?l-2:l+1,s[l]!==e)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:i}=this,r=e*4;return i[r]||i[r+1]?this._clipInfinite(e,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(e,n)}_clipFinite(e,n){const i=n.length;let r=null,s,o,a=n[i-2],l=n[i-1],u,c=this._regioncode(a,l),f,h;for(let d=0;d<i;d+=2)if(s=a,o=l,a=n[d],l=n[d+1],u=c,c=this._regioncode(a,l),u===0&&c===0)f=h,h=0,r?r.push(a,l):r=[a,l];else{let p,g,m,y,_;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[g,m,y,_]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[y,_,g,m]=p,f=h,h=this._edgecode(g,m),f&&h&&this._edge(e,f,h,r,r.length),r?r.push(g,m):r=[g,m]}f=h,h=this._edgecode(y,_),f&&h&&this._edge(e,f,h,r,r.length),r?r.push(y,_):r=[y,_]}if(r)f=h,h=this._edgecode(r[0],r[1]),f&&h&&this._edge(e,f,h,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,n,i,r,s,o){for(;;){if(s===0&&o===0)return[e,n,i,r];if(s&o)return null;let a,l,u=s||o;u&8?(a=e+(i-e)*(this.ymax-n)/(r-n),l=this.ymax):u&4?(a=e+(i-e)*(this.ymin-n)/(r-n),l=this.ymin):u&2?(l=n+(r-n)*(this.xmax-e)/(i-e),a=this.xmax):(l=n+(r-n)*(this.xmin-e)/(i-e),a=this.xmin),s?(e=a,n=l,s=this._regioncode(e,n)):(i=a,r=l,o=this._regioncode(i,r))}}_clipInfinite(e,n,i,r,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],i,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let u=0,c=a.length,f,h=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)f=h,h=this._edgecode(a[u],a[u+1]),f&&h&&(u=this._edge(e,f,h,a,u),c=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,n,i,r,s){for(;n!==i;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(e,o,a)&&(r.splice(s,0,o,a),s+=2)}if(r.length>4)for(let o=0;o<r.length;o+=2){const a=(o+2)%r.length,l=(o+4)%r.length;(r[o]===r[a]&&r[a]===r[l]||r[o+1]===r[a+1]&&r[a+1]===r[l+1])&&(r.splice(a,2),o-=2)}return s}_project(e,n,i,r){let s=1/0,o,a,l;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<s&&(l=this.ymin,a=e+(s=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<s&&(l=this.ymax,a=e+(s=o)*i)}if(i>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/i)<s&&(a=this.xmax,l=n+(s=o)*r)}else if(i<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/i)<s&&(a=this.xmin,l=n+(s=o)*r)}return[a,l]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const Ptt=2*Math.PI,il=Math.pow;function Rtt(t){return t[0]}function Ltt(t){return t[1]}function Itt(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const r=2*e[i],s=2*e[i+1],o=2*e[i+2];if((n[o]-n[r])*(n[s+1]-n[r+1])-(n[s]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function Btt(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class x_{static from(e,n=Rtt,i=Ltt,r){return new x_("length"in e?ztt(e,n,i,r):Float64Array.from(Utt(e,n,i,r)))}constructor(e){this._delaunator=new i0(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&Itt(e)){this.collinear=Int32Array.from({length:n.length/2},(h,d)=>d).sort((h,d)=>n[2*h]-n[2*d]||n[2*h+1]-n[2*d+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let h=0,d=n.length/2;h<d;++h){const p=Btt(n[2*h],n[2*h+1],f);n[2*h]=p[0],n[2*h+1]=p[1]}this._delaunator=new i0(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=i.length;l<u;++l){const c=s[l%3==2?l-2:l+1];(i[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=r.length;l<u;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,r.length===2&&(o[r[1]]=0))}voronoi(e){return new Ftt(this,e)}*neighbors(e){const{inedges:n,hull:i,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(e);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const l=n[e];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3==2?u-2:u+1,o[u]!==e)return;if(u=s[u],u===-1){const f=i[(r[e]+1)%i.length];f!==c&&(yield f);return}}while(u!==l)}find(e,n,i=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const r=i;let s;for(;(s=this._step(i,e,n))>=0&&s!==i&&s!==r;)i=s;return s}_step(e,n,i){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(r[e]===-1||!u.length)return(e+1)%(u.length>>1);let c=e,f=il(n-u[e*2],2)+il(i-u[e*2+1],2);const h=r[e];let d=h;do{let p=l[d];const g=il(n-u[p*2],2)+il(i-u[p*2+1],2);if(g<f&&(f=g,c=p),d=d%3==2?d-2:d+1,l[d]!==e)break;if(d=a[d],d===-1){if(d=s[(o[e]+1)%s.length],d!==p&&il(n-u[d*2],2)+il(i-u[d*2+1],2)<f)return d;break}}while(d!==h);return c}render(e){const n=e==null?e=new To:void 0,{points:i,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;e.moveTo(i[u],i[u+1]),e.lineTo(i[c],i[c+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n=2){const i=e==null?e=new To:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];e.moveTo(a+n,l),e.arc(a,l,n,0,Ptt)}return i&&i.value()}renderHull(e){const n=e==null?e=new To:void 0,{hull:i,points:r}=this,s=i[0]*2,o=i.length;e.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*i[a];e.lineTo(r[l],r[l+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new v_;return this.renderHull(e),e.value()}renderTriangle(e,n){const i=n==null?n=new To:void 0,{points:r,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,i=e.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new v_;return this.renderTriangle(e,n),n.value()}}function ztt(t,e,n,i){const r=t.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=t[o];s[o*2]=e.call(i,a,o,t),s[o*2+1]=n.call(i,a,o,t)}return s}function*Utt(t,e,n,i){let r=0;for(const s of t)yield e.call(i,s,r,t),yield n.call(i,s,r,t),++r}function b_(t){P.call(this,null,t)}b_.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const jtt=[-1e5,-1e5,1e5,1e5];G(b_,P,{transform(t,e){const n=t.as||"path",i=e.source;if(!i||!i.length)return e;let r=t.size;r=r?[0,0,r[0],r[1]]:(r=t.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:jtt;const s=this.value=x_.from(i,t.x,t.y).voronoi(r);for(let o=0,a=i.length;o<a;++o){const l=s.cellPolygon(o);i[o][n]=l?qtt(l):null}return e.reflow(t.modified()).modifies(n)}});function qtt(t){const e=t[0][0],n=t[0][1];let i=t.length-1;for(;t[i][0]===e&&t[i][1]===n;--i);return"M"+t.slice(0,i+1).join("L")+"Z"}var Htt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",voronoi:b_}),w_=Math.PI/180,vc=1<<11>>5,s0=1<<11;function Wtt(){var t=[256,256],e,n,i,r,s,o,a,l=_9,u=[],c=Math.random,f={};f.layout=function(){for(var p=h(Ta()),g=Qtt((t[0]>>5)*t[1]),m=null,y=u.length,_=-1,v=[],x=u.map(k=>({text:e(k),font:n(k),style:r(k),weight:s(k),rotate:o(k),size:~~(i(k)+1e-14),padding:a(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,b)=>b.size-k.size);++_<y;){var w=x[_];w.x=t[0]*(c()+.5)>>1,w.y=t[1]*(c()+.5)>>1,Vtt(p,w,x,_),w.hasText&&d(g,w,m)&&(v.push(w),m?Gtt(m,w):m=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=t[0]>>1,w.y-=t[1]>>1)}return v};function h(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(vc<<5)/g,p.height=s0/g;var m=p.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:g}}function d(p,g,m){for(var y=g.x,_=g.y,v=Math.sqrt(t[0]*t[0]+t[1]*t[1]),x=l(t),w=c()<.5?1:-1,k=-w,b,C,T;(b=x(k+=w))&&(C=~~b[0],T=~~b[1],!(Math.min(Math.abs(C),Math.abs(T))>=v));)if(g.x=y+C,g.y=_+T,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>t[0]||g.y+g.y1>t[1])&&(!m||!Ytt(g,p,t[0]))&&(!m||Ktt(g,m))){for(var M=g.sprite,S=g.width>>5,$=t[0]>>5,O=g.x-(S<<4),U=O&127,N=32-U,R=g.y1-g.y0,z=(g.y+g.y0)*$+(O>>5),q,J=0;J<R;J++){q=0;for(var yt=0;yt<=S;yt++)p[z+yt]|=q<<N|(yt<S?(q=M[J*S+yt])>>>U:0);z+=$}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(u=p,f):u},f.size=function(p){return arguments.length?(t=[+p[0],+p[1]],f):t},f.font=function(p){return arguments.length?(n=Do(p),f):n},f.fontStyle=function(p){return arguments.length?(r=Do(p),f):r},f.fontWeight=function(p){return arguments.length?(s=Do(p),f):s},f.rotate=function(p){return arguments.length?(o=Do(p),f):o},f.text=function(p){return arguments.length?(e=Do(p),f):e},f.spiral=function(p){return arguments.length?(l=Ztt[p]||p,f):l},f.fontSize=function(p){return arguments.length?(i=Do(p),f):i},f.padding=function(p){return arguments.length?(a=Do(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Vtt(t,e,n,i){if(!e.sprite){var r=t.context,s=t.ratio;r.clearRect(0,0,(vc<<5)/s,s0/s);var o=0,a=0,l=0,u=n.length,c,f,h,d,p;for(--i;++i<u;){if(e=n[i],r.save(),r.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font,c=r.measureText(e.text+"m").width*s,h=e.size<<1,e.rotate){var g=Math.sin(e.rotate*w_),m=Math.cos(e.rotate*w_),y=c*m,_=c*g,v=h*m,x=h*g;c=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,h=~~Math.max(Math.abs(_+v),Math.abs(_-v))}else c=c+31>>5<<5;if(h>l&&(l=h),o+c>=vc<<5&&(o=0,a+=l,l=0),a+h>=s0)break;r.translate((o+(c>>1))/s,(a+(h>>1))/s),e.rotate&&r.rotate(e.rotate*w_),r.fillText(e.text,0,0),e.padding&&(r.lineWidth=2*e.padding,r.strokeText(e.text,0,0)),r.restore(),e.width=c,e.height=h,e.xoff=o,e.yoff=a,e.x1=c>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var w=r.getImageData(0,0,(vc<<5)/s,s0/s).data,k=[];--i>=0;)if(e=n[i],!!e.hasText){for(c=e.width,f=c>>5,h=e.y1-e.y0,d=0;d<h*f;d++)k[d]=0;if(o=e.xoff,o==null)return;a=e.yoff;var b=0,C=-1;for(p=0;p<h;p++){for(d=0;d<c;d++){var T=f*p+(d>>5),M=w[(a+p)*(vc<<5)+(o+d)<<2]?1<<31-d%32:0;k[T]|=M,b|=M}b?C=p:(e.y0++,h--,p--,a++)}e.y1=e.y0+C,e.sprite=k.slice(0,(e.y1-e.y0)*f)}}}function Ytt(t,e,n){n>>=5;for(var i=t.sprite,r=t.width>>5,s=t.x-(r<<4),o=s&127,a=32-o,l=t.y1-t.y0,u=(t.y+t.y0)*n+(s>>5),c,f=0;f<l;f++){c=0;for(var h=0;h<=r;h++)if((c<<a|(h<r?(c=i[f*r+h])>>>o:0))&e[u+h])return!0;u+=n}return!1}function Gtt(t,e){var n=t[0],i=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>i.x&&(i.x=e.x+e.x1),e.y+e.y1>i.y&&(i.y=e.y+e.y1)}function Ktt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function _9(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Xtt(t){var e=4,n=e*t[0]/t[1],i=0,r=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:i+=n;break;case 1:r+=e;break;case 2:i-=n;break;default:r-=e;break}return[i,r]}}function Qtt(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Do(t){return typeof t=="function"?t:function(){return t}}var Ztt={archimedean:_9,rectangular:Xtt};const v9=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Jtt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function E_(t){P.call(this,Wtt(),t)}E_.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:v9}]};G(E_,P,{transform(t,e){t.size&&!(t.size[0]&&t.size[1])&&I("Wordcloud size dimensions must be non-zero.");function n(p){const g=t[p];return At(g)&&e.modified(g.fields)}const i=t.modified();if(!(i||e.changed(e.ADD_REM)||Jtt.some(n)))return;const r=e.materialize(e.SOURCE).source,s=this.value,o=t.as||v9;let a=t.fontSize||14,l;if(At(a)?l=t.fontSizeRange:a=Ge(a),l){const p=a,g=zt("sqrt")().domain(cr(r,p)).range(l);a=m=>g(p(m))}r.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(r).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(a).random(gr).layout(),c=s.size(),f=c[0]>>1,h=c[1]>>1,d=u.length;for(let p=0,g,m;p<d;++p)g=u[p],m=g.datum,m[o[0]]=g.x+f,m[o[1]]=g.y+h,m[o[2]]=g.font,m[o[3]]=g.size,m[o[4]]=g.style,m[o[5]]=g.weight,m[o[6]]=g.rotate;return e.reflow(i).modifies(o)}});var tet=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",wordcloud:E_});const eet=t=>new Uint8Array(t),net=t=>new Uint16Array(t),xc=t=>new Uint32Array(t);function iet(){let t=8,e=[],n=xc(0),i=o0(0,t),r=o0(0,t);return{data:()=>e,seen:()=>n=ret(n,e.length),add(s){for(let o=0,a=e.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,e.push(u)},remove(s,o){const a=e.length,l=Array(a-s),u=e;let c,f,h;for(f=0;!o[f]&&f<a;++f)l[f]=e[f],u[f]=f;for(h=f;f<a;++f)c=e[f],o[f]?u[f]=-1:(u[f]=h,i[h]=i[f],r[h]=r[f],l[h]=c,c._index=h++),i[f]=0;return e=l,u},size:()=>e.length,curr:()=>i,prev:()=>r,reset:s=>r[s]=i[s],all:()=>t<257?255:t<65537?65535:4294967295,set(s,o){i[s]|=o},clear(s,o){i[s]&=~o},resize(s,o){const a=i.length;(s>a||o>t)&&(t=Math.max(o,t),i=o0(s,t,i),r=o0(s,t))}}}function ret(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function o0(t,e,n){const i=(e<257?eet:e<65537?net:xc)(t);return n&&i.set(n),i}function x9(t,e,n){const i=1<<e;return{one:i,zero:~i,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(r,s){const o=this,a=o.bisect(o.range,r.value),l=r.index,u=a[0],c=a[1],f=l.length;let h;for(h=0;h<u;++h)s[l[h]]|=i;for(h=c;h<f;++h)s[l[h]]|=i;return o}}}function b9(){let t=xc(0),e=[],n=0;function i(a,l,u){if(!l.length)return[];const c=n,f=l.length,h=xc(f);let d=Array(f),p,g,m;for(m=0;m<f;++m)d[m]=a(l[m]),h[m]=m;if(d=set(d,h),c)p=e,g=t,e=Array(c+f),t=xc(c+f),oet(u,p,g,c,d,h,f,e,t);else{if(u>0)for(m=0;m<f;++m)h[m]+=u;e=d,t=h}return n=c+f,{index:h,value:d}}function r(a,l){const u=n;let c,f,h;for(f=0;!l[t[f]]&&f<u;++f);for(h=f;f<u;++f)l[c=t[f]]||(t[h]=c,e[h]=e[f],++h);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)t[l]=a[t[l]]}function o(a,l){let u;return l?u=l.length:(l=e,u=n),[XB(l,a[0],0,u),Vf(l,a[1],0,u)]}return{insert:i,remove:r,bisect:o,reindex:s,index:()=>t,size:()=>n}}function set(t,e){return t.sort.call(e,(n,i)=>{const r=t[n],s=t[i];return r<s?-1:r>s?1:0}),JB(t,e)}function oet(t,e,n,i,r,s,o,a,l){let u=0,c=0,f;for(f=0;u<i&&c<o;++f)e[u]<r[c]?(a[f]=e[u],l[f]=n[u++]):(a[f]=r[c],l[f]=s[c++]+t);for(;u<i;++u,++f)a[f]=e[u],l[f]=n[u];for(;c<o;++c,++f)a[f]=r[c],l[f]=s[c]+t}function k_(t){P.call(this,iet(),t),this._indices=null,this._dims=null}k_.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};G(k_,P,{transform(t,e){if(this._dims){var n=t.modified("fields")||t.fields.some(i=>e.modified(i.fields));return n?this.reinit(t,e):this.eval(t,e)}else return this.init(t,e)},init(t,e){const n=t.fields,i=t.query,r=this._indices={},s=this._dims=[],o=i.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=r[l]||(r[l]=b9()),s.push(x9(u,a,i[a]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),i=t.fields,r=t.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),f=n.rem=n.add,h=n.mod,d=r.length,p={};let g,m,y,_,v,x,w,k,b;if(u.set(l),e.rem.length&&(v=this.remove(t,e,n)),e.add.length&&a.add(e.add),e.mod.length)for(x={},_=e.mod,w=0,k=_.length;w<k;++w)x[_[w]._index]=1;for(w=0;w<d;++w)b=i[w],(!o[w]||t.modified("fields",w)||e.modified(b.fields))&&(y=b.fname,(g=p[y])||(s[y]=m=b9(),p[y]=g=m.insert(b,e.source,0)),o[w]=x9(m,w,r[w]).onAdd(g,l));for(w=0,k=a.data().length;w<k;++w)v[w]||(u[w]!==l[w]?f.push(w):x[w]&&l[w]!==c&&h.push(w));return a.mask=(1<<d)-1,n},eval(t,e){const n=e.materialize().fork(),i=this._dims.length;let r=0;return e.rem.length&&(this.remove(t,e,n),r|=(1<<i)-1),t.modified("query")&&!t.modified("fields")&&(r|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),r|=(1<<i)-1),e.mod.length&&(this.modify(e,n),r|=(1<<i)-1),this.value.mask=r,n},insert(t,e,n){const i=e.add,r=this.value,s=this._dims,o=this._indices,a=t.fields,l={},u=n.add,c=r.size()+i.length,f=s.length;let h=r.size(),d,p,g;r.resize(c,f),r.add(i);const m=r.curr(),y=r.prev(),_=r.all();for(d=0;d<f;++d)p=a[d].fname,g=l[p]||(l[p]=o[p].insert(a[d],i,h)),s[d].onAdd(g,m);for(;h<c;++h)y[h]=_,m[h]!==_&&u.push(h)},modify(t,e){const n=e.mod,i=this.value,r=i.curr(),s=i.all(),o=t.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,r[u]!==s&&n.push(u)},remove(t,e,n){const i=this._indices,r=this.value,s=r.curr(),o=r.prev(),a=r.all(),l={},u=n.rem,c=e.rem;let f,h,d,p;for(f=0,h=c.length;f<h;++f)d=c[f]._index,l[d]=1,o[d]=p=s[d],s[d]=a,p!==a&&u.push(d);for(d in i)i[d].remove(h,l);return this.reindex(e,h,l),l},reindex(t,e,n){const i=this._indices,r=this.value;t.runAfter(()=>{const s=r.remove(e,n);for(const o in i)i[o].reindex(s)})},update(t,e,n){const i=this._dims,r=t.query,s=e.stamp,o=i.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)t.modified("query",u)&&(l=u,++a);if(a===1)a=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)!t.modified("query",u)||(a|=i[u].one,this.incrementAll(i[u],r[u],s,n.add),n.rem=n.add);return a},incrementAll(t,e,n,i){const r=this.value,s=r.seen(),o=r.curr(),a=r.prev(),l=t.index(),u=t.bisect(t.range),c=t.bisect(e),f=c[0],h=c[1],d=u[0],p=u[1],g=t.one;let m,y,_;if(f<d)for(m=f,y=Math.min(d,h);m<y;++m)_=l[m],s[_]!==n&&(a[_]=o[_],s[_]=n,i.push(_)),o[_]^=g;else if(f>d)for(m=d,y=Math.min(f,p);m<y;++m)_=l[m],s[_]!==n&&(a[_]=o[_],s[_]=n,i.push(_)),o[_]^=g;if(h>p)for(m=Math.max(f,p),y=h;m<y;++m)_=l[m],s[_]!==n&&(a[_]=o[_],s[_]=n,i.push(_)),o[_]^=g;else if(h<p)for(m=Math.max(d,h),y=p;m<y;++m)_=l[m],s[_]!==n&&(a[_]=o[_],s[_]=n,i.push(_)),o[_]^=g;t.range=e.slice()},incrementOne(t,e,n,i){const r=this.value,s=r.curr(),o=t.index(),a=t.bisect(t.range),l=t.bisect(e),u=l[0],c=l[1],f=a[0],h=a[1],d=t.one;let p,g,m;if(u<f)for(p=u,g=Math.min(f,c);p<g;++p)m=o[p],s[m]^=d,n.push(m);else if(u>f)for(p=f,g=Math.min(u,h);p<g;++p)m=o[p],s[m]^=d,i.push(m);if(c>h)for(p=Math.max(u,h),g=c;p<g;++p)m=o[p],s[m]^=d,n.push(m);else if(c<h)for(p=Math.max(f,c),g=h;p<g;++p)m=o[p],s[m]^=d,i.push(m);t.range=e.slice()}});function A_(t){P.call(this,null,t)}A_.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};G(A_,P,{transform(t,e){const n=~(t.ignore||0),i=t.filter,r=i.mask;if((r&n)==0)return e.StopPropagation;const s=e.fork(e.ALL),o=i.data(),a=i.curr(),l=i.prev(),u=c=>a[c]&n?null:o[c];return s.filter(s.MOD,u),r&r-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^l[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^l[c]&n))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&n)===r?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});var aet=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",crossfilter:k_,resolvefilter:A_});const uet="RawCode",$o="Literal",cet="Property",fet="Identifier",het="ArrayExpression",det="BinaryExpression",w9="CallExpression",pet="ConditionalExpression",get="LogicalExpression",met="MemberExpression",yet="ObjectExpression",_et="UnaryExpression";function ki(t){this.type=t}ki.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=vet(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1};function vet(t){switch(t.type){case het:return t.elements;case det:case get:return[t.left,t.right];case w9:return[t.callee].concat(t.arguments);case pet:return[t.test,t.consequent,t.alternate];case met:return[t.object,t.property];case yet:return t.properties;case cet:return[t.key,t.value];case _et:return[t.argument];case fet:case $o:case uet:default:return[]}}var ir,nt,L,ze,Wt,a0=1,bc=2,Oo=3,bs=4,l0=5,No=6,xn=7,wc=8,xet=9;ir={};ir[a0]="Boolean";ir[bc]="<end>";ir[Oo]="Identifier";ir[bs]="Keyword";ir[l0]="Null";ir[No]="Numeric";ir[xn]="Punctuator";ir[wc]="String";ir[xet]="RegularExpression";var bet="ArrayExpression",wet="BinaryExpression",Eet="CallExpression",ket="ConditionalExpression",E9="Identifier",Aet="Literal",Cet="LogicalExpression",Met="MemberExpression",Tet="ObjectExpression",Det="Property",$et="UnaryExpression",Ee="Unexpected token %0",Oet="Unexpected number",Net="Unexpected string",Fet="Unexpected identifier",Pet="Unexpected reserved word",Ret="Unexpected end of input",C_="Invalid regular expression",M_="Invalid regular expression: missing /",k9="Octal literals are not allowed in strict mode.",Let="Duplicate data property in object literal not allowed in strict mode",Oe="ILLEGAL",Ec="Disabled.",Iet=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Bet=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function u0(t,e){if(!t)throw new Error("ASSERT: "+e)}function Tr(t){return t>=48&&t<=57}function S_(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function kc(t){return"01234567".indexOf(t)>=0}function zet(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Ac(t){return t===10||t===13||t===8232||t===8233}function Cc(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&Iet.test(String.fromCharCode(t))}function c0(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&Bet.test(String.fromCharCode(t))}const Uet={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function A9(){for(;L<ze;){const t=nt.charCodeAt(L);if(zet(t)||Ac(t))++L;else break}}function T_(t){var e,n,i,r=0;for(n=t==="u"?4:2,e=0;e<n;++e)L<ze&&S_(nt[L])?(i=nt[L++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):It({},Ee,Oe);return String.fromCharCode(r)}function jet(){var t,e,n,i;for(t=nt[L],e=0,t==="}"&&It({},Ee,Oe);L<ze&&(t=nt[L++],!!S_(t));)e=e*16+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||t!=="}")&&It({},Ee,Oe),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(n,i))}function C9(){var t,e;for(t=nt.charCodeAt(L++),e=String.fromCharCode(t),t===92&&(nt.charCodeAt(L)!==117&&It({},Ee,Oe),++L,t=T_("u"),(!t||t==="\\"||!Cc(t.charCodeAt(0)))&&It({},Ee,Oe),e=t);L<ze&&(t=nt.charCodeAt(L),!!c0(t));)++L,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),nt.charCodeAt(L)!==117&&It({},Ee,Oe),++L,t=T_("u"),(!t||t==="\\"||!c0(t.charCodeAt(0)))&&It({},Ee,Oe),e+=t);return e}function qet(){var t,e;for(t=L++;L<ze;){if(e=nt.charCodeAt(L),e===92)return L=t,C9();if(c0(e))++L;else break}return nt.slice(t,L)}function Het(){var t,e,n;return t=L,e=nt.charCodeAt(L)===92?C9():qet(),e.length===1?n=Oo:Uet.hasOwnProperty(e)?n=bs:e==="null"?n=l0:e==="true"||e==="false"?n=a0:n=Oo,{type:n,value:e,start:t,end:L}}function D_(){var t=L,e=nt.charCodeAt(L),n,i=nt[L],r,s,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++L,{type:xn,value:String.fromCharCode(e),start:t,end:L};default:if(n=nt.charCodeAt(L+1),n===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return L+=2,{type:xn,value:String.fromCharCode(e)+String.fromCharCode(n),start:t,end:L};case 33:case 61:return L+=2,nt.charCodeAt(L)===61&&++L,{type:xn,value:nt.slice(t,L),start:t,end:L}}}if(o=nt.substr(L,4),o===">>>=")return L+=4,{type:xn,value:o,start:t,end:L};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return L+=3,{type:xn,value:s,start:t,end:L};if(r=s.substr(0,2),i===r[1]&&"+-<>&|".indexOf(i)>=0||r==="=>")return L+=2,{type:xn,value:r,start:t,end:L};if(r==="//"&&It({},Ee,Oe),"<>=!+-*%&|^/".indexOf(i)>=0)return++L,{type:xn,value:i,start:t,end:L};It({},Ee,Oe)}function Wet(t){let e="";for(;L<ze&&S_(nt[L]);)e+=nt[L++];return e.length===0&&It({},Ee,Oe),Cc(nt.charCodeAt(L))&&It({},Ee,Oe),{type:No,value:parseInt("0x"+e,16),start:t,end:L}}function Vet(t){let e="0"+nt[L++];for(;L<ze&&kc(nt[L]);)e+=nt[L++];return(Cc(nt.charCodeAt(L))||Tr(nt.charCodeAt(L)))&&It({},Ee,Oe),{type:No,value:parseInt(e,8),octal:!0,start:t,end:L}}function M9(){var t,e,n;if(n=nt[L],u0(Tr(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),e=L,t="",n!=="."){if(t=nt[L++],n=nt[L],t==="0"){if(n==="x"||n==="X")return++L,Wet(e);if(kc(n))return Vet(e);n&&Tr(n.charCodeAt(0))&&It({},Ee,Oe)}for(;Tr(nt.charCodeAt(L));)t+=nt[L++];n=nt[L]}if(n==="."){for(t+=nt[L++];Tr(nt.charCodeAt(L));)t+=nt[L++];n=nt[L]}if(n==="e"||n==="E")if(t+=nt[L++],n=nt[L],(n==="+"||n==="-")&&(t+=nt[L++]),Tr(nt.charCodeAt(L)))for(;Tr(nt.charCodeAt(L));)t+=nt[L++];else It({},Ee,Oe);return Cc(nt.charCodeAt(L))&&It({},Ee,Oe),{type:No,value:parseFloat(t),start:e,end:L}}function Yet(){var t="",e,n,i,r,s=!1;for(e=nt[L],u0(e==="'"||e==='"',"String literal must starts with a quote"),n=L,++L;L<ze;)if(i=nt[L++],i===e){e="";break}else if(i==="\\")if(i=nt[L++],!i||!Ac(i.charCodeAt(0)))switch(i){case"u":case"x":nt[L]==="{"?(++L,t+=jet()):t+=T_(i);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:kc(i)?(r="01234567".indexOf(i),r!==0&&(s=!0),L<ze&&kc(nt[L])&&(s=!0,r=r*8+"01234567".indexOf(nt[L++]),"0123".indexOf(i)>=0&&L<ze&&kc(nt[L])&&(r=r*8+"01234567".indexOf(nt[L++]))),t+=String.fromCharCode(r)):t+=i;break}else i==="\r"&&nt[L]===`
`&&++L;else{if(Ac(i.charCodeAt(0)))break;t+=i}return e!==""&&It({},Ee,Oe),{type:wc,value:t,octal:s,start:n,end:L}}function Get(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";It({},C_)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{It({},C_)}try{return new RegExp(t,e)}catch{return null}}function Ket(){var t,e,n,i,r;for(t=nt[L],u0(t==="/","Regular expression literal must start with a slash"),e=nt[L++],n=!1,i=!1;L<ze;)if(t=nt[L++],e+=t,t==="\\")t=nt[L++],Ac(t.charCodeAt(0))&&It({},M_),e+=t;else if(Ac(t.charCodeAt(0)))It({},M_);else if(n)t==="]"&&(n=!1);else if(t==="/"){i=!0;break}else t==="["&&(n=!0);return i||It({},M_),r=e.substr(1,e.length-2),{value:r,literal:e}}function Xet(){var t,e,n;for(e="",n="";L<ze&&(t=nt[L],!!c0(t.charCodeAt(0)));)++L,t==="\\"&&L<ze?It({},Ee,Oe):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&It({},C_,n),{value:n,literal:e}}function Qet(){var t,e,n,i;return Wt=null,A9(),t=L,e=Ket(),n=Xet(),i=Get(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:L}}function Zet(t){return t.type===Oo||t.type===bs||t.type===a0||t.type===l0}function S9(){if(A9(),L>=ze)return{type:bc,start:L,end:L};const t=nt.charCodeAt(L);return Cc(t)?Het():t===40||t===41||t===59?D_():t===39||t===34?Yet():t===46?Tr(nt.charCodeAt(L+1))?M9():D_():Tr(t)?M9():D_()}function bn(){const t=Wt;return L=t.end,Wt=S9(),L=t.end,t}function T9(){const t=L;Wt=S9(),L=t}function Jet(t){const e=new ki(bet);return e.elements=t,e}function D9(t,e,n){const i=new ki(t==="||"||t==="&&"?Cet:wet);return i.operator=t,i.left=e,i.right=n,i}function tnt(t,e){const n=new ki(Eet);return n.callee=t,n.arguments=e,n}function ent(t,e,n){const i=new ki(ket);return i.test=t,i.consequent=e,i.alternate=n,i}function $_(t){const e=new ki(E9);return e.name=t,e}function Mc(t){const e=new ki(Aet);return e.value=t.value,e.raw=nt.slice(t.start,t.end),t.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=t.regex),e}function $9(t,e,n){const i=new ki(Met);return i.computed=t==="[",i.object=e,i.property=n,i.computed||(n.member=!0),i}function nnt(t){const e=new ki(Tet);return e.properties=t,e}function O9(t,e,n){const i=new ki(Det);return i.key=e,i.value=n,i.kind=t,i}function int(t,e){const n=new ki($et);return n.operator=t,n.argument=e,n.prefix=!0,n}function It(t,e){var n,i=Array.prototype.slice.call(arguments,2),r=e.replace(/%(\d)/g,(s,o)=>(u0(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=L,n.description=r,n}function f0(t){t.type===bc&&It(t,Ret),t.type===No&&It(t,Oet),t.type===wc&&It(t,Net),t.type===Oo&&It(t,Fet),t.type===bs&&It(t,Pet),It(t,Ee,t.value)}function Ue(t){const e=bn();(e.type!==xn||e.value!==t)&&f0(e)}function Jt(t){return Wt.type===xn&&Wt.value===t}function O_(t){return Wt.type===bs&&Wt.value===t}function rnt(){const t=[];for(L=Wt.start,Ue("[");!Jt("]");)Jt(",")?(bn(),t.push(null)):(t.push(Fo()),Jt("]")||Ue(","));return bn(),Jet(t)}function N9(){L=Wt.start;const t=bn();return t.type===wc||t.type===No?(t.octal&&It(t,k9),Mc(t)):$_(t.value)}function snt(){var t,e,n,i;if(L=Wt.start,t=Wt,t.type===Oo)return n=N9(),Ue(":"),i=Fo(),O9("init",n,i);if(t.type===bc||t.type===xn)f0(t);else return e=N9(),Ue(":"),i=Fo(),O9("init",e,i)}function ont(){var t=[],e,n,i,r={},s=String;for(L=Wt.start,Ue("{");!Jt("}");)e=snt(),e.key.type===E9?n=e.key.name:n=s(e.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?It({},Let):r[i]=!0,t.push(e),Jt("}")||Ue(",");return Ue("}"),nnt(t)}function ant(){Ue("(");const t=N_();return Ue(")"),t}const lnt={if:1};function unt(){var t,e,n;if(Jt("("))return ant();if(Jt("["))return rnt();if(Jt("{"))return ont();if(t=Wt.type,L=Wt.start,t===Oo||lnt[Wt.value])n=$_(bn().value);else if(t===wc||t===No)Wt.octal&&It(Wt,k9),n=Mc(bn());else{if(t===bs)throw new Error(Ec);t===a0?(e=bn(),e.value=e.value==="true",n=Mc(e)):t===l0?(e=bn(),e.value=null,n=Mc(e)):Jt("/")||Jt("/=")?(n=Mc(Qet()),T9()):f0(bn())}return n}function cnt(){const t=[];if(Ue("("),!Jt(")"))for(;L<ze&&(t.push(Fo()),!Jt(")"));)Ue(",");return Ue(")"),t}function fnt(){L=Wt.start;const t=bn();return Zet(t)||f0(t),$_(t.value)}function hnt(){return Ue("."),fnt()}function dnt(){Ue("[");const t=N_();return Ue("]"),t}function pnt(){var t,e,n;for(t=unt();;)if(Jt("."))n=hnt(),t=$9(".",t,n);else if(Jt("("))e=cnt(),t=tnt(t,e);else if(Jt("["))n=dnt(),t=$9("[",t,n);else break;return t}function F9(){const t=pnt();if(Wt.type===xn&&(Jt("++")||Jt("--")))throw new Error(Ec);return t}function h0(){var t,e;if(Wt.type!==xn&&Wt.type!==bs)e=F9();else{if(Jt("++")||Jt("--"))throw new Error(Ec);if(Jt("+")||Jt("-")||Jt("~")||Jt("!"))t=bn(),e=h0(),e=int(t.value,e);else{if(O_("delete")||O_("void")||O_("typeof"))throw new Error(Ec);e=F9()}}return e}function P9(t){let e=0;if(t.type!==xn&&t.type!==bs)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break}return e}function gnt(){var t,e,n,i,r,s,o,a,l,u;if(t=Wt,l=h0(),i=Wt,r=P9(i),r===0)return l;for(i.prec=r,bn(),e=[t,Wt],o=h0(),s=[l,i,o];(r=P9(Wt))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),n=D9(a,l,o),s.push(n);i=bn(),i.prec=r,s.push(i),e.push(Wt),n=h0(),s.push(n)}for(u=s.length-1,n=s[u],e.pop();u>1;)e.pop(),n=D9(s[u-1].value,s[u-2],n),u-=2;return n}function Fo(){var t,e,n;return t=gnt(),Jt("?")&&(bn(),e=Fo(),Ue(":"),n=Fo(),t=ent(t,e,n)),t}function N_(){const t=Fo();if(Jt(","))throw new Error(Ec);return t}function mnt(t){nt=t,L=0,ze=nt.length,Wt=null,T9();const e=N_();if(Wt.type!==bc)throw new Error("Unexpect token after expression.");return e}var R9={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function L9(t){function e(o,a,l,u){let c=t(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(t).join(",")+")")}function n(o,a,l){return u=>e(o,u,a,l)}const i="new Date",r="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&I("Missing arguments to clamp function."),o.length>3&&I("Too many arguments to clamp function.");const a=o.map(t);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&I("Missing arguments to if function."),o.length>3&&I("Too many arguments to if function.");const a=o.map(t);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function ynt(t){const e=t&&t.length-1;return e&&(t[0]==='"'&&t[e]==='"'||t[0]==="'"&&t[e]==="'")?t.slice(1,-1):t}function _nt(t){t=t||{};const e=t.allowed?zi(t.allowed):{},n=t.forbidden?zi(t.forbidden):{},i=t.constants||R9,r=(t.functions||L9)(f),s=t.globalvar,o=t.fieldvar,a=At(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function f(p){if(te(p))return p;const g=h[p.type];return g==null&&I("Unsupported type: "+p.type),g(p)}const h={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:gt(n,g)?I("Illegal identifier: "+g):gt(i,g)?i[g]:gt(e,g)?g:(l[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,m=f(p.object);g&&(c+=1);const y=f(p.property);return m===o&&(u[ynt(y)]=1),g&&(c-=1),m+(g?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&I("Illegal callee type: "+p.callee.type);const g=p.callee.name,m=p.arguments,y=gt(r,g)&&r[g];return y||I("Unrecognized function: "+g),At(y)?y(m):y+"("+m.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function d(p){const g={code:f(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},g}return d.functions=r,d.constants=i,d}function vnt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function xnt(t){let e=t,n=t;t.length===1&&(e=(o,a)=>t(o)-a,n=bnt(t));function i(o,a,l,u){for(l==null&&(l=0),u==null&&(u=o.length);l<u;){const c=l+u>>>1;n(o[c],a)<0?l=c+1:u=c}return l}function r(o,a,l,u){for(l==null&&(l=0),u==null&&(u=o.length);l<u;){const c=l+u>>>1;n(o[c],a)>0?u=c:l=c+1}return l}function s(o,a,l,u){l==null&&(l=0),u==null&&(u=o.length);const c=i(o,a,l,u-1);return c>l&&e(o[c-1],a)>-e(o[c],a)?c-1:c}return{left:i,center:s,right:r}}function bnt(t){return(e,n)=>vnt(t(e),n)}const F_="intersect",I9="union",wnt="vlMulti",Ent="vlPoint",B9="or",knt="and",Ant="_vgsid_",Cnt="E",Mnt="R",Snt="R-E",Tnt="R-LE",Dnt="R-RE",d0="index:unit";function z9(t,e){for(var n=e.fields,i=e.values,r=n.length,s=0,o,a;s<r;++s)if(a=n[s],a.getter=Ln.getter||Ln(a.field),o=a.getter(t),Xs(o)&&(o=Ye(o)),Xs(i[s])&&(i[s]=Ye(i[s])),Xs(i[s][0])&&(i[s]=i[s].map(Ye)),a.type===Cnt){if(lt(i[s])?i[s].indexOf(o)<0:o!==i[s])return!1}else if(a.type===Mnt){if(!Hl(o,i[s]))return!1}else if(a.type===Dnt){if(!Hl(o,i[s],!0,!1))return!1}else if(a.type===Snt){if(!Hl(o,i[s],!1,!1))return!1}else if(a.type===Tnt&&!Hl(o,i[s],!1,!0))return!1;return!0}function $nt(t,e,n){for(var i=this.context.data[t],r=i?i.values.value:[],s=i?i[d0]&&i[d0].value:void 0,o=n===F_,a=r.length,l=0,u,c,f,h,d;l<a;++l)if(u=r[l],s&&o){if(c=c||{},f=c[h=u.unit]||0,f===-1)continue;if(d=z9(e,u),c[h]=d?-1:++f,d&&s.size===1)return!0;if(!d&&f===s.get(h).count)return!1}else if(d=z9(e,u),o^d)return d;return a&&o}const P_=Ln(Ant),U9=xnt(P_),Ont=U9.left,Nnt=U9.right;function Fnt(t,e,n){const i=this.context.data[t],r=i?i.values.value:[],s=i?i[d0]&&i[d0].value:void 0,o=n===F_,a=P_(e),l=Ont(r,a);if(l===r.length||P_(r[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Nnt(r,a)-l<s.size)return!1}return!0}function Pnt(t,e){return t.map(n=>bt({values:e.fields.map(i=>(i.getter||(i.getter=Ln(i.field)))(n.datum))},e))}function Rnt(t,e,n,i){for(var r=this.context.data[t],s=r?r.values.value:[],o={},a={},l={},u,c,f,h,d,p,g,m,y,_=s.length,v=0,x,w;v<_;++v){for(u=s[v],h=u.unit,c=u.fields,f=u.values,x=0,w=c.length;x<w;++x)d=c[x],p=o[d.field]||(o[d.field]={}),g=p[h]||(p[h]=[]),l[d.field]=m=d.type.charAt(0),y=j9[m+"_union"],p[h]=y(g,pt(f[x]));n&&(g=a[h]||(a[h]=[]),g.push(pt(f).reduce((k,b,C)=>(k[c[C].field]=b,k),{})))}if(e=e||I9,Object.keys(o).forEach(k=>{o[k]=Object.keys(o[k]).map(b=>o[k][b]).reduce((b,C)=>b===void 0?C:j9[l[k]+"_"+e](b,C))}),s=Object.keys(a),n&&s.length){const k=i?Ent:wnt;o[k]=e===I9?{[B9]:s.reduce((b,C)=>(b.push(...a[C]),b),[])}:{[knt]:s.map(b=>({[B9]:a[b]}))}}return o}var j9={E_union:function(t,e){if(!t.length)return e;for(var n=0,i=e.length;n<i;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(n=>e.indexOf(n)>=0):e},R_union:function(t,e){var n=Ye(e[0]),i=Ye(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<i&&(t[1]=i),t):[n,i]},R_intersect:function(t,e){var n=Ye(e[0]),i=Ye(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?i<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>i&&(t[1]=i),t):[n,i]}};const Lnt=":",Int="@";function R_(t,e,n,i){e[0].type!==$o&&I("First argument to selection functions must be a string literal.");const r=e[0].value,s=e.length>=2&&Nt(e).value,o="unit",a=Int+o,l=Lnt+r;s===F_&&!gt(i,a)&&(i[a]=n.getData(r).indataRef(n,o)),gt(i,l)||(i[l]=n.getData(r).tuplesRef())}function q9(t){const e=this.context.data[t];return e?e.values.value:[]}function Bnt(t,e,n){const i=this.context.data[t]["index:"+e],r=i?i.value.get(n):void 0;return r&&r.count}function znt(t,e){const n=this.context.dataflow,i=this.context.data[t],r=i.input;return n.pulse(r,n.changeset().remove(gi).insert(e)),1}function Unt(t,e,n){if(t){const i=this.context.dataflow,r=t.mark.source;i.pulse(r,i.changeset().encode(t,e))}return n!==void 0?n:t}const Sc=t=>function(e,n){return this.context.dataflow.locale()[t](n)(e)},jnt=Sc("format"),H9=Sc("timeFormat"),qnt=Sc("utcFormat"),Hnt=Sc("timeParse"),Wnt=Sc("utcParse"),p0=new Date(2e3,0,1);function g0(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":(p0.setYear(2e3),p0.setMonth(t),p0.setDate(e),H9.call(this,p0,n))}function Vnt(t){return g0.call(this,t,1,"%B")}function Ynt(t){return g0.call(this,t,1,"%b")}function Gnt(t){return g0.call(this,0,2+t,"%A")}function Knt(t){return g0.call(this,0,2+t,"%a")}const Xnt=":",Qnt="@",L_="%",W9="$";function I_(t,e,n,i){e[0].type!==$o&&I("First argument to data functions must be a string literal.");const r=e[0].value,s=Xnt+r;if(!gt(s,i))try{i[s]=n.getData(r).tuplesRef()}catch{}}function Znt(t,e,n,i){e[0].type!==$o&&I("First argument to indata must be a string literal."),e[1].type!==$o&&I("Second argument to indata must be a string literal.");const r=e[0].value,s=e[1].value,o=Qnt+s;gt(o,i)||(i[o]=n.getData(r).indataRef(n,s))}function wn(t,e,n,i){if(e[0].type===$o)V9(n,i,e[0].value);else for(t in n.scales)V9(n,i,t)}function V9(t,e,n){const i=L_+n;if(!gt(e,i))try{e[i]=t.scaleRef(n)}catch{}}function Dr(t,e){let n;return At(t)?t:te(t)?(n=e.scales[t])&&n.value:void 0}function Jnt(t,e,n){e.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=wn,n._range=wn,n._scale=wn;const i=r=>"_["+(r.type===$o?ct(L_+r.value):ct(L_)+"+"+t(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${t(r[1])})`}}function B_(t,e){return function(n,i,r){if(n){const s=Dr(n,(r||this).context);return s&&s.path[t](i)}else return e(i)}}const tit=B_("area",_X),eit=B_("bounds",wX),nit=B_("centroid",SX);function iit(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function z_(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(i){t.warn(i)}return n[n.length-1]}function rit(){return z_(this.context.dataflow,"warn",arguments)}function sit(){return z_(this.context.dataflow,"info",arguments)}function oit(){return z_(this.context.dataflow,"debug",arguments)}function U_(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function j_(t){const e=rs(t),n=U_(e.r),i=U_(e.g),r=U_(e.b);return .2126*n+.7152*i+.0722*r}function ait(t,e){const n=j_(t),i=j_(e),r=Math.max(n,i),s=Math.min(n,i);return(r+.05)/(s+.05)}function lit(){const t=[].slice.call(arguments);return t.unshift({}),bt(...t)}function Y9(t,e){return t===e||t!==t&&e!==e?!0:lt(t)?lt(e)&&t.length===e.length?uit(t,e):!1:Mt(t)&&Mt(e)?G9(t,e):!1}function uit(t,e){for(let n=0,i=t.length;n<i;++n)if(!Y9(t[n],e[n]))return!1;return!0}function G9(t,e){for(const n in t)if(!Y9(t[n],e[n]))return!1;return!0}function K9(t){return e=>G9(t,e)}function cit(t,e,n,i,r,s){const o=this.context.dataflow,a=this.context.data[t],l=a.input,u=o.stamp();let c=a.changes,f,h;if(o._trigger===!1||!(l.value.length||e||i))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(f=n===!0?gi:lt(n)||l1(n)?n:K9(n),c.remove(f)),e&&c.insert(e),i&&(f=K9(i),l.value.some(f)?c.remove(f):c.insert(i)),r)for(h in s)c.modify(r,h,s[h]);return 1}function fit(t){const e=t.touches,n=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+i*i)}function hit(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const X9={};function dit(t,e){const n=X9[e]||(X9[e]=Ln(e));return lt(t)?t.map(n):n(t)}function q_(t){return lt(t)||ArrayBuffer.isView(t)?t:null}function H_(t){return q_(t)||(te(t)?t:null)}function pit(t,...e){return q_(t).join(...e)}function git(t,...e){return H_(t).indexOf(...e)}function mit(t,...e){return H_(t).lastIndexOf(...e)}function yit(t,...e){return H_(t).slice(...e)}function _it(t,e,n){return At(n)&&I("Function argument passed to replace."),String(t).replace(e,n)}function vit(t){return q_(t).slice().reverse()}function xit(t,e,n){return Dm(t||0,e||0,n||0)}function bit(t,e){const n=Dr(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function wit(t,e){const n=Dr(t,(e||this).context);return n?n.copy():void 0}function Eit(t,e){const n=Dr(t,(e||this).context);return n?n.domain():[]}function kit(t,e,n){const i=Dr(t,(n||this).context);return i?lt(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0}function Ait(t,e){const n=Dr(t,(e||this).context);return n&&n.range?n.range():[]}function Cit(t,e,n){const i=Dr(t,(n||this).context);return i?i(e):void 0}function Mit(t,e,n,i,r){t=Dr(t,(r||this).context);const s=xV(e,n);let o=t.domain(),a=o[0],l=Nt(o),u=gn;return l-a?u=q6(t,a,l):t=(t.interpolator?zt("sequential")().interpolator(t.interpolator()):zt("linear")().interpolate(t.interpolate()).range(t.range())).domain([a=0,l=1]),t.ticks&&(o=t.ticks(+i||15),a!==o[0]&&o.unshift(a),l!==Nt(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),t(c))),s}function Sit(t,e,n){const i=Dr(t,(n||this).context);return function(r){return i?i.path.context(r)(e):""}}function Tit(t){let e=null;return function(n){return n?Ph(n,e=e||qm(t)):t}}const Q9=t=>t.data;function Z9(t,e){const n=q9.call(e,t);return n.root&&n.root.lookup||{}}function Dit(t,e,n){const i=Z9(t,this),r=i[e],s=i[n];return r&&s?r.path(s).map(Q9):void 0}function $it(t,e){const n=Z9(t,this)[e];return n?n.ancestors().map(Q9):void 0}const J9=()=>typeof window!="undefined"&&window||null;function Oit(){const t=J9();return t?t.screen:{}}function Nit(){const t=J9();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function Fit(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function Pit(t,e,n){if(!t)return[];const[i,r]=t,s=new we().set(i[0],i[1],r[0],r[1]),o=n||this.context.dataflow.scenegraph().root;return XG(o,s,Rit(e))}function Rit(t){let e=null;if(t){const n=pt(t.marktype),i=pt(t.markname);e=r=>(!n.length||n.some(s=>r.marktype===s))&&(!i.length||i.some(s=>r.name===s))}return e}const Tc={random(){return gr()},cumulativeNormal:g1,cumulativeLogNormal:w5,cumulativeUniform:C5,densityNormal:y5,densityLogNormal:b5,densityUniform:A5,quantileNormal:m1,quantileLogNormal:E5,quantileUniform:M5,sampleNormal:p1,sampleLogNormal:x5,sampleUniform:k5,isArray:lt,isBoolean:CB,isDate:Xs,isDefined(t){return t!==void 0},isNumber:Wl,isObject:Mt,isRegExp:SB,isString:te,isTuple:l1,isValid(t){return t!=null&&t===t},toBoolean:I3,toDate:B3,toNumber:Ye,toString:z3,indexof:git,join:pit,lastindexof:mit,replace:_it,reverse:vit,slice:yit,flush:AB,lerp:TB,merge:lit,pad:NB,peek:Nt,pluck:dit,span:Wf,inrange:Hl,truncate:PB,rgb:rs,lab:xh,hcl:bh,hsl:_h,luminance:j_,contrast:ait,sequence:In,format:jnt,utcFormat:qnt,utcParse:Wnt,utcOffset:zz,utcSequence:jz,timeFormat:H9,timeParse:Hnt,timeOffset:Bz,timeSequence:Uz,timeUnitSpecifier:Ez,monthFormat:Vnt,monthAbbrevFormat:Ynt,dayFormat:Gnt,dayAbbrevFormat:Knt,quarter:mB,utcquarter:yB,week:Az,utcweek:Sz,dayofyear:kz,utcdayofyear:Mz,warn:rit,info:sit,debug:oit,extent:cr,inScope:iit,intersect:Pit,clampRange:_B,pinchDistance:fit,pinchAngle:hit,screen:Oit,containerSize:Fit,windowSize:Nit,bandspace:xit,setdata:znt,pathShape:Tit,panLinear:hB,panLog:dB,panPow:pB,panSymlog:gB,zoomLinear:O3,zoomLog:N3,zoomPow:_g,zoomSymlog:F3,encode:Unt,modify:cit},Lit=["view","item","group","xy","x","y"],Iit="event.vega.",tC="this.",W_={},eC={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${ct(W9+t)}]`,functions:Bit,constants:R9,visitors:W_},V_=_nt(eC);function Bit(t){const e=L9(t);Lit.forEach(n=>e[n]=Iit+n);for(const n in Tc)e[n]=tC+n;return bt(e,Jnt(t,Tc,W_)),e}function de(t,e,n){return arguments.length===1?Tc[t]:(Tc[t]=e,n&&(W_[t]=n),V_&&(V_.functions[t]=tC+t),this)}de("bandwidth",bit,wn);de("copy",wit,wn);de("domain",Eit,wn);de("range",Ait,wn);de("invert",kit,wn);de("scale",Cit,wn);de("gradient",Mit,wn);de("geoArea",tit,wn);de("geoBounds",eit,wn);de("geoCentroid",nit,wn);de("geoShape",Sit,wn);de("indata",Bnt,Znt);de("data",q9,I_);de("treePath",Dit,I_);de("treeAncestors",$it,I_);de("vlSelectionTest",$nt,R_);de("vlSelectionIdTest",Fnt,R_);de("vlSelectionResolve",Rnt,R_);de("vlSelectionTuples",Pnt);function rr(t,e){const n={};let i;try{t=te(t)?t:ct(t)+"",i=mnt(t)}catch{I("Expression parse error: "+t)}i.visit(s=>{if(s.type!==w9)return;const o=s.callee.name,a=eC.visitors[o];a&&a(o,s.arguments,e,n)});const r=V_(i);return r.globals.forEach(s=>{const o=W9+s;!gt(n,o)&&e.getSignal(s)&&(n[o]=e.signalRef(s))}),{$expr:bt({code:r.code},e.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function zit(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(i=>e.parseOperator(i)),n.forEach(i=>e.parseOperatorParameters(i)),(t.streams||[]).forEach(i=>e.parseStream(i)),(t.updates||[]).forEach(i=>e.parseUpdate(i)),e.resolve()}const Uit=zi(["rule"]),nC=zi(["group","image","rect"]);function jit(t,e){let n="";return Uit[e]||(t.x2&&(t.x?(nC[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(nC[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Y_(t){return(t+"").toLowerCase()}function qit(t){return Y_(t)==="operator"}function Hit(t){return Y_(t)==="collect"}function Dc(t,e,n){n[n.length-1]!==";"&&(n="return("+n+");");const i=Function(...e.concat(n));return t&&t.functions?i.bind(t.functions):i}function Wit(t,e,n,i){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,`
  : (u > v || v == null) && u != null ? `).concat(i,`
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? `).concat(n,`
  : v !== v && u === u ? `).concat(i," : ")}var Vit={operator:(t,e)=>Dc(t,["_"],e.code),parameter:(t,e)=>Dc(t,["datum","_"],e.code),event:(t,e)=>Dc(t,["event"],e.code),handler:(t,e)=>{const n="var datum=event.item&&event.item.datum;return ".concat(e.code,";");return Dc(t,["_","event"],n)},encode:(t,e)=>{const{marktype:n,channels:i}=e;let r="var o=item,datum=o.datum,m=0,$;";for(const s in i){const o="o["+ct(s)+"]";r+="$=".concat(i[s].code,";if(").concat(o,"!==$)").concat(o,"=$,m=1;")}return r+=jit(i,n),r+="return m;",Dc(t,["item","_"],r)},codegen:{get(t){const e="[".concat(t.map(ct).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator(t,e){let n;const i=(s,o)=>{const a=e[o];let l,u;return s.path?(l="a".concat(s.path),u="b".concat(s.path)):((n=n||{})["f"+o]=s,l="this.f".concat(o,"(a)"),u="this.f".concat(o,"(b)")),Wit(l,u,-a,a)},r=Function("a","b","var u, v; return "+t.map(i).join("")+"0;");return n?r.bind(n):r}}};function Yit(t){const e=this;qit(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type)}function Git(t){const e=this;if(t.params){const n=e.get(t.id);n||I("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}}function Kit(t,e){e=e||{};const n=this;for(const i in t){const r=t[i];e[i]=lt(r)?r.map(s=>iC(s,n,e)):iC(r,n,e)}return e}function iC(t,e,n){if(!t||!Mt(t))return t;for(let i=0,r=rC.length,s;i<r;++i)if(s=rC[i],gt(t,s.key))return s.parse(t,e,n);return t}var rC=[{key:"$ref",parse:Xit},{key:"$key",parse:Zit},{key:"$expr",parse:Qit},{key:"$field",parse:Jit},{key:"$encode",parse:ert},{key:"$compare",parse:trt},{key:"$context",parse:nrt},{key:"$subflow",parse:irt},{key:"$tupleid",parse:rrt}];function Xit(t,e){return e.get(t.$ref)||I("Operator not defined: "+t.$ref)}function Qit(t,e,n){t.$params&&e.parseParameters(t.$params,n);const i="e:"+t.$expr.code+"_"+t.$name;return e.fn[i]||(e.fn[i]=Rn(e.parameterExpression(t.$expr),t.$fields,t.$name))}function Zit(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=L3(t.$key,t.$flat,e.expr.codegen))}function Jit(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=Ln(t.$field,t.$name,e.expr.codegen))}function trt(t,e){const n="c:"+t.$compare+"_"+t.$order,i=pt(t.$compare).map(r=>r&&r.$tupleid?ut:r);return e.fn[n]||(e.fn[n]=P3(i,t.$order,e.expr.codegen))}function ert(t,e){const n=t.$encode,i={};for(const r in n){const s=n[r];i[r]=Rn(e.encodeExpression(s.$expr),s.$fields),i[r].output=s.$output}return i}function nrt(t,e){return e}function irt(t,e){const n=t.$subflow;return function(i,r,s){const o=e.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>e.detach(o),a}}function rrt(){return ut}function srt(t){var e=this,n=t.filter!=null?e.eventExpression(t.filter):void 0,i=t.stream!=null?e.get(t.stream):void 0,r;t.source?i=e.events(t.source,t.type,n):t.merge&&(r=t.merge.map(s=>e.get(s)),i=r[0].merge.apply(r[0],r.slice(1))),t.between&&(r=t.between.map(s=>e.get(s)),i=i.between(r[0],r[1])),t.filter&&(i=i.filter(n)),t.throttle!=null&&(i=i.throttle(+t.throttle)),t.debounce!=null&&(i=i.debounce(+t.debounce)),i==null&&I("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}function ort(t){var e=this,n=Mt(n=t.source)?n.$ref:n,i=e.get(n),r=null,s=t.update,o=void 0;i||I("Source not defined: "+t.source),r=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),s&&s.$expr&&(s.$params&&(o=e.parseParameters(s.$params)),s=e.handlerExpression(s.$expr)),e.update(t,i,r,s,o)}const art={skip:!0};function lrt(t){var e=this,n={};if(t.signals){var i=n.signals={};Object.keys(e.signals).forEach(s=>{const o=e.signals[s];t.signals(s,o)&&(i[s]=o.value)})}if(t.data){var r=n.data={};Object.keys(e.data).forEach(s=>{const o=e.data[s];t.data(s,o)&&(r[s]=o.input.value)})}return e.subcontext&&t.recurse!==!1&&(n.subcontext=e.subcontext.map(s=>s.getState(t))),n}function urt(t){var e=this,n=e.dataflow,i=t.data,r=t.signals;Object.keys(r||{}).forEach(s=>{n.update(e.signals[s],r[s],art)}),Object.keys(i||{}).forEach(s=>{n.pulse(e.data[s].input,n.changeset().remove(gi).insert(i[s]))}),(t.subcontext||[]).forEach((s,o)=>{const a=e.subcontext[o];a&&a.setState(s)})}function crt(t,e,n,i){return new sC(t,e,n,i)}function sC(t,e,n,i){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=i||Vit,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function oC(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}sC.prototype=oC.prototype={fork(){const t=new oC(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(n=>n!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,i=n.dataflow,r=t.value;if(n.set(t.id,e),Hit(t.type)&&r&&(r.$ingest?i.ingest(e,r.$ingest,r.$format):r.$request?i.preload(e,r.$request,r.$format):i.pulse(e,i.changeset().insert(r))),t.root&&(n.root=e),t.parent){let s=n.get(t.parent.$ref);s?(i.connect(s,[e]),e.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(t.parent.$ref),i.connect(s,[e]),e.targets().add(s)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const s in t.data){const o=n.data[s]||(n.data[s]={});t.data[s].forEach(a=>o[a]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[Y_(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,i,r){this.dataflow.on(e,n,i,r,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:zit,parseOperator:Yit,parseOperatorParameters:Git,parseParameters:Kit,parseStream:srt,parseUpdate:ort,getState:lrt,setState:urt};function frt(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),aC(e,t.description()))}function aC(t,e){t&&(e==null?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}function hrt(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}const G_="default";function drt(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:G_,item:null}));t.on(t.events("view","mousemove"),e,(n,i)=>{const r=e.value,s=r?te(r)?r:r.user:G_,o=i.item&&i.item.cursor||null;return r&&s===r.user&&o==r.item?r:{user:s,item:o}}),t.add(null,function(n){let i=n.cursor,r=this.value;return te(i)||(r=i.item,i=i.user),K_(t,i&&i!==G_?i:r||i),r},{cursor:e})}function K_(t,e){const n=t.globalCursor()?typeof document!="undefined"&&document.body:t.container();if(n)return e==null?n.style.removeProperty("cursor"):n.style.cursor=e}function m0(t,e){var n=t._runtime.data;return gt(n,e)||I("Unrecognized data set: "+e),n[e]}function prt(t,e){return arguments.length<2?m0(this,t).values.value:y0.call(this,t,ka().remove(gi).insert(e))}function y0(t,e){n5(e)||I("Second argument to changes must be a changeset.");const n=m0(this,t);return n.modified=!0,this.pulse(n.input,e)}function grt(t,e){return y0.call(this,t,ka().insert(e))}function mrt(t,e){return y0.call(this,t,ka().remove(e))}function lC(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function uC(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function _0(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function yrt(t){var e=_0(t),n=lC(t),i=uC(t);t._renderer.background(t.background()),t._renderer.resize(n,i,e),t._handler.origin(e),t._resizeListeners.forEach(r=>{try{r(n,i)}catch(s){t.error(s)}})}function _rt(t,e,n){var i=t._renderer,r=i&&i.canvas(),s,o,a;return r&&(a=_0(t),o=e.changedTouches?e.changedTouches[0]:e,s=yy(o,r),s[0]-=a[0],s[1]-=a[1]),e.dataflow=t,e.item=n,e.vega=vrt(t,n,s),e}function vrt(t,e,n){const i=e?e.mark.marktype==="group"?e:e.mark.group:null;function r(o){var a=i,l;if(o){for(l=e;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;te(o)&&(o=r(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ge(t),item:Ge(e||{}),group:r,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const cC="view",xrt="timer",brt="window",wrt={trap:!1};function Ert(t){const e=bt({defaults:{}},t),n=(i,r)=>{r.forEach(s=>{lt(i[s])&&(i[s]=zi(i[s]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}function fC(t,e,n,i){t._eventListeners.push({type:n,sources:pt(e),handler:i})}function krt(t,e){var n=t._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[e]:r?!r[e]:t.preventDefault()}function v0(t,e,n){const i=t._eventConfig&&t._eventConfig[e];return i===!1||Mt(i)&&!i[n]?(t.warn(`Blocked ${e} ${n} event listener.`),!1):!0}function Art(t,e,n){var i=this,r=new f1(n),s=function(u,c){i.runAsync(null,()=>{t===cC&&krt(i,e)&&u.preventDefault(),r.receive(_rt(i,u,c))})},o;if(t===xrt)v0(i,"timer",e)&&i.timer(s,e);else if(t===cC)v0(i,"view",e)&&i.addEventListener(e,s,wrt);else if(t===brt?v0(i,"window",e)&&typeof window!="undefined"&&(o=[window]):typeof document!="undefined"&&v0(i,"selector",e)&&(o=document.querySelectorAll(t)),!o)i.warn("Can not resolve event source: "+t);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(e,s);fC(i,o,e,s)}return r}function hC(t){return t.item}function dC(t){return t.item.mark.source}function pC(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function Crt(t,e){return t=[t||"hover"],e=[e||"update",t[0]],this.on(this.events("view","mouseover",hC),dC,pC(t)),this.on(this.events("view","mouseout",hC),dC,pC(e)),this}function Mrt(){var t=this._tooltip,e=this._timers,n=this._eventListeners,i,r,s;for(i=e.length;--i>=0;)e[i].stop();for(i=n.length;--i>=0;)for(s=n[i],r=s.sources.length;--r>=0;)s.sources[r].removeEventListener(s.type,s.handler);return t&&t.call(this,this._handler,null,null,null),this}function Hn(t,e,n){const i=document.createElement(t);for(const r in e)i.setAttribute(r,e[r]);return n!=null&&(i.textContent=n),i}const Srt="vega-bind",Trt="vega-bind-name",Drt="vega-bind-radio";function $rt(t,e,n){if(!e)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:o=>{o!=t.signal(i.signal)&&t.runAsync(null,()=>{r.source=!0,t.signal(i.signal,o)})}},i.debounce&&(r.update=R3(i.debounce,r.update))),(i.input==null&&i.element?Ort:Frt)(r,e,i,t),r.active||(t.on(t._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(t.signal(i.signal))}),r.active=!0),r}function Ort(t,e,n,i){const r=n.event||"input",s=()=>t.update(e.value);i.signal(n.signal,e.value),e.addEventListener(r,s),fC(i,e,r,s),t.set=o=>{e.value=o,e.dispatchEvent(Nrt(r))}}function Nrt(t){return typeof Event!="undefined"?new Event(t):{type:t}}function Frt(t,e,n,i){const r=i.signal(n.signal),s=Hn("div",{class:Srt}),o=n.input==="radio"?s:s.appendChild(Hn("label"));o.appendChild(Hn("span",{class:Trt},n.name||n.signal)),e.appendChild(s);let a=Prt;switch(n.input){case"checkbox":a=Rrt;break;case"select":a=Lrt;break;case"radio":a=Irt;break;case"range":a=Brt;break}a(t,o,n,r)}function Prt(t,e,n,i){const r=Hn("input");for(const s in n)s!=="signal"&&s!=="element"&&r.setAttribute(s==="input"?"type":s,n[s]);r.setAttribute("name",n.signal),r.value=i,e.appendChild(r),r.addEventListener("input",()=>t.update(r.value)),t.elements=[r],t.set=s=>r.value=s}function Rrt(t,e,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const s=Hn("input",r);e.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=o=>s.checked=!!o||null}function Lrt(t,e,n,i){const r=Hn("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};x0(o,i)&&(l.selected=!0),r.appendChild(Hn("option",l,(s[a]||o)+""))}),e.appendChild(r),r.addEventListener("change",()=>{t.update(n.options[r.selectedIndex])}),t.elements=[r],t.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(x0(n.options[a],o)){r.selectedIndex=a;return}}}function Irt(t,e,n,i){const r=Hn("span",{class:Drt}),s=n.labels||[];e.appendChild(r),t.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};x0(o,i)&&(l.checked=!0);const u=Hn("input",l);u.addEventListener("change",()=>t.update(o));const c=Hn("label",{},(s[a]||o)+"");return c.prepend(u),r.appendChild(c),u}),t.set=o=>{const a=t.elements,l=a.length;for(let u=0;u<l;++u)x0(a[u].value,o)&&(a[u].checked=!0)}}function Brt(t,e,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,s=n.min||Math.min(0,r,+i)||0,o=n.step||Vr(s,r,100),a=Hn("input",{type:"range",name:n.signal,min:s,max:r,step:o});a.value=i;const l=Hn("span",{},+i);e.appendChild(a),e.appendChild(l);const u=()=>{l.textContent=a.value,t.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),t.elements=[a],t.set=c=>{a.value=c,l.textContent=c}}function x0(t,e){return t===e||t+""==e+""}function gC(t,e,n,i,r,s){return e=e||new i(t.loader()),e.initialize(n,lC(t),uC(t),_0(t),r,s).background(t.background())}function X_(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function zrt(t,e,n,i){const r=new i(t.loader(),X_(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,_0(t),t);return e&&e.handlers().forEach(s=>{r.on(s.type,s.handler)}),r}function Urt(t,e){const n=this,i=n._renderType,r=n._eventConfig.bind,s=Ty(i);t=n._el=t?Q_(n,t,!0):null,frt(n),s||n.error("Unrecognized renderer type: "+i);const o=s.handler||id,a=t?s.renderer:s.headless;return n._renderer=a?gC(n,n._renderer,t,a):null,n._handler=zrt(n,n._handler,t,o),n._redraw=!0,t&&r!=="none"&&(e=e?n._elBind=Q_(n,e,!0):t.appendChild(Hn("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=Q_(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{$rt(n,l.element||e,l)})),n}function Q_(t,e,n){if(typeof e=="string")if(typeof document!="undefined"){if(e=document.querySelector(e),!e)return t.error("Signal bind element not found: "+e),null}else return t.error("DOM document instance not found."),null;if(e&&n)try{e.innerHTML=""}catch(i){e=null,t.error(i)}return e}const $c=t=>+t||0,jrt=t=>({top:t,bottom:t,left:t,right:t});function mC(t){return Mt(t)?{top:$c(t.top),bottom:$c(t.bottom),left:$c(t.left),right:$c(t.right)}:jrt($c(t))}async function Z_(t,e,n,i){const r=Ty(e),s=r&&r.headless;return s||I("Unrecognized renderer type: "+e),await t.runAsync(),gC(t,null,null,s,n,i).renderAsync(t._scenegraph.root)}async function qrt(t,e){t!==Eo.Canvas&&t!==Eo.SVG&&t!==Eo.PNG&&I("Unrecognized image type: "+t);const n=await Z_(this,t,e);return t===Eo.SVG?Hrt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Hrt(t,e){const n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}async function Wrt(t,e){return(await Z_(this,Eo.Canvas,t,e)).canvas()}async function Vrt(t){return(await Z_(this,Eo.SVG,t)).svg()}function Yrt(t,e,n){return crt(t,mu,Tc,n).parse(e)}function Grt(t){var e=this._runtime.scales;return gt(e,t)||I("Unrecognized scale or projection: "+t),e[t].value}var yC="width",_C="height",J_="padding",vC={skip:!0};function xC(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===J_?i.left+i.right:0)}function bC(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===J_?i.top+i.bottom:0)}function Krt(t){var e=t._signals,n=e[yC],i=e[_C],r=e[J_];function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,a=>{t._width=a.size,t._viewWidth=xC(t,a.size),s()},{size:n}),t._resizeHeight=t.add(null,a=>{t._height=a.size,t._viewHeight=bC(t,a.size),s()},{size:i});const o=t.add(null,s,{pad:r});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=i.rank+1,o.rank=r.rank+1}function Xrt(t,e,n,i,r,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(yC,n,vC),o._resizeWidth.skip(!0)),o.height()!==i&&(a=1,o.signal(_C,i,vC),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),(o._origin[0]!==r[0]||o._origin[1]!==r[1])&&(o._resize=1,o._origin=r),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function Qrt(t){return this._runtime.getState(t||{data:Zrt,signals:Jrt,recurse:!0})}function Zrt(t,e){return e.modified&&lt(e.input.value)&&t.indexOf("_:vega:_")}function Jrt(t,e){return!(t==="parent"||e instanceof mu.proxy)}function tst(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},e=>{e._trigger=!0}),this}function est(t,e){function n(i){t({timestamp:Date.now(),elapsed:i})}this._timers.push(TZ(n,e))}function nst(t,e,n,i){const r=t.element();r&&r.setAttribute("title",ist(i))}function ist(t){return t==null?"":lt(t)?wC(t):Mt(t)&&!Xs(t)?rst(t):t+""}function rst(t){return Object.keys(t).map(e=>{const n=t[e];return e+": "+(lt(n)?wC(n):EC(n))}).join(`
`)}function wC(t){return"["+t.map(EC).join(", ")+"]"}function EC(t){return lt(t)?"[\u2026]":Mt(t)&&!Xs(t)?"{\u2026}":t}function kC(t,e){const n=this;if(e=e||{},pu.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),e.logLevel!=null&&n.logLevel(e.logLevel),e.locale||t.locale){const s=bt({},t.locale,e.locale);n.locale(QU(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||Eo.Canvas,n._scenegraph=new BA;const i=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||nst,n._redraw=!0,n._handler=new id().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Ert(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=Yrt(n,t,e.expr);n._runtime=r,n._signals=r.signals,n._bind=(t.bindings||[]).map(s=>({state:null,param:bt({},s)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=xC(n,n._width),n._viewHeight=bC(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Krt(n),hrt(n),drt(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function b0(t,e){return gt(t._signals,e)?t._signals[e]:I("Unrecognized signal name: "+ct(e))}function AC(t,e){const n=(t._targets||[]).filter(i=>i._update&&i._update.handler===e);return n.length?n[0]:null}function CC(t,e,n,i){let r=AC(n,i);return r||(r=X_(t,()=>i(e,n.value)),r.handler=i,t.on(n,null,r)),t}function MC(t,e,n){const i=AC(e,n);return i&&e._targets.remove(i),t}G(kC,pu,{async evaluate(t,e,n){if(await pu.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,yrt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&nh(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=t!=null?t+"":null;return e!==this._desc&&aC(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const i=b0(this,t);return arguments.length===1?i.value:this.update(i,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",mC(t)):mC(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(Ty(t)||I("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(pu.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(b0(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Xrt,addEventListener(t,e,n){let i=e;return n&&n.trap===!1||(i=X_(this,e),i.raw=e),this._handler.on(t,i),this},removeEventListener(t,e){for(var n=this._handler.handlers(t),i=n.length,r,s;--i>=0;)if(s=n[i].type,r=n[i].handler,t===s&&(e===r||e===r.raw)){this._handler.off(s,r);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return CC(this,t,b0(this,t),e)},removeSignalListener(t,e){return MC(this,b0(this,t),e)},addDataListener(t,e){return CC(this,t,m0(this,t).values,e)},removeDataListener(t,e){return MC(this,m0(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=K_(this,null);this._globalCursor=!!t,e&&K_(this,e)}return this}else return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:est,events:Art,finalize:Mrt,hover:Crt,data:prt,change:y0,insert:grt,remove:mrt,scale:Grt,initialize:Urt,toImageURL:qrt,toCanvas:Wrt,toSVG:Vrt,getState:Qrt,setState:tst});const sst="view",w0="[",E0="]",SC="{",TC="}",ost=":",DC=",",ast="@",lst=">",ust=/[[\]{}]/,cst={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let $C,OC;function fst(t,e,n){return $C=e||sst,OC=n||cst,NC(t.trim()).map(tv)}function hst(t){return OC[t]}function Oc(t,e,n,i,r){const s=t.length;let o=0,a;for(;e<s;++e){if(a=t[e],!o&&a===n)return e;r&&r.indexOf(a)>=0?--o:i&&i.indexOf(a)>=0&&++o}return e}function NC(t){const e=[],n=t.length;let i=0,r=0;for(;r<n;)r=Oc(t,r,DC,w0+SC,E0+TC),e.push(t.substring(i,r).trim()),i=++r;if(e.length===0)throw"Empty event selector: "+t;return e}function tv(t){return t[0]==="["?dst(t):pst(t)}function dst(t){const e=t.length;let n=1,i;if(n=Oc(t,n,E0,w0,E0),n===e)throw"Empty between selector: "+t;if(i=NC(t.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+t;if(t=t.slice(n+1).trim(),t[0]!==lst)throw"Expected '>' after between selector: "+t;i=i.map(tv);const r=tv(t.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function pst(t){const e={source:$C},n=[];let i=[0,0],r=0,s=0,o=t.length,a=0,l,u;if(t[o-1]===TC){if(a=t.lastIndexOf(SC),a>=0){try{i=gst(t.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+t}t=t.slice(0,a).trim(),o=t.length}else throw"Unmatched right brace: "+t;a=0}if(!o)throw t;if(t[0]===ast&&(r=++a),l=Oc(t,a,ost),l<o&&(n.push(t.substring(s,l).trim()),s=a=++l),a=Oc(t,a,w0),a===o)n.push(t.substring(s,o).trim());else if(n.push(t.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+t;for(;a<o;){if(a=Oc(t,a,E0),a===o)throw"Unmatched left bracket: "+t;if(u.push(t.substring(s,a).trim()),a<o-1&&t[++a]!==w0)throw"Expected left bracket: "+t;s=++a}if(!(o=n.length)||ust.test(n[o-1]))throw"Invalid event selector: "+t;return o>1?(e.type=n[1],r?e.markname=n[0].slice(1):hst(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],e.type.slice(-1)==="!"&&(e.consume=!0,e.type=e.type.slice(0,-1)),u!=null&&(e.filter=u),i[0]&&(e.throttle=i[0]),i[1]&&(e.debounce=i[1]),e}function gst(t){const e=t.split(DC);if(!t.length||e.length>2)throw t;return e.map(n=>{const i=+n;if(i!==i)throw t;return i})}function mst(t){return Mt(t)?t:{type:t||"pad"}}const Nc=t=>+t||0,yst=t=>({top:t,bottom:t,left:t,right:t});function _st(t){return Mt(t)?t.signal?t:{top:Nc(t.top),bottom:Nc(t.bottom),left:Nc(t.left),right:Nc(t.right)}:yst(Nc(t))}const ke=t=>Mt(t)&&!lt(t)?bt({},t):{value:t};function FC(t,e,n,i){return n!=null?(Mt(n)&&!lt(n)||lt(n)&&n.length&&Mt(n[0])?t.update[e]=n:t[i||"enter"][e]={value:n},1):0}function Ne(t,e,n){for(const i in e)FC(t,i,e[i]);for(const i in n)FC(t,i,n[i],"update")}function rl(t,e,n){for(const i in e)n&&gt(n,i)||(t[i]=bt(t[i]||{},e[i]));return t}function sl(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const ev="mark",nv="frame",iv="scope",vst="axis",xst="axis-domain",bst="axis-grid",wst="axis-label",Est="axis-tick",kst="axis-title",Ast="legend",Cst="legend-band",Mst="legend-entry",Sst="legend-gradient",PC="legend-label",Tst="legend-symbol",Dst="legend-title",$st="title",Ost="title-text",Nst="title-subtitle";function Fst(t,e,n,i,r){const s={},o={};let a,l,u,c;l="lineBreak",e==="text"&&r[l]!=null&&!sl(l,t)&&rv(s,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===nv?r.group:n===ev?bt({},r.mark,r[e]):null;for(l in c)u=sl(l,t)||(l==="fill"||l==="stroke")&&(sl("fill",t)||sl("stroke",t)),u||rv(s,l,c[l]);pt(i).forEach(f=>{const h=r.style&&r.style[f];for(const d in h)sl(d,t)||rv(s,d,h[d])}),t=bt({},t);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return t.enter=bt(o,t.enter),a&&(t.update=bt(a,t.update)),t}function rv(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const RC=t=>te(t)?ct(t):t.signal?`(${t.signal})`:LC(t);function k0(t){if(t.gradient!=null)return Rst(t);let e=t.signal?`(${t.signal})`:t.color?Pst(t.color):t.field!=null?LC(t.field):t.value!==void 0?ct(t.value):void 0;return t.scale!=null&&(e=Lst(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${C0(t.exponent)})`),t.mult!=null&&(e+=`*${C0(t.mult)}`),t.offset!=null&&(e+=`+${C0(t.offset)}`),t.round&&(e=`round(${e})`),e}const A0=(t,e,n,i)=>`(${t}(${[e,n,i].map(k0).join(",")})+'')`;function Pst(t){return t.c?A0("hcl",t.h,t.c,t.l):t.h||t.s?A0("hsl",t.h,t.s,t.l):t.l||t.a?A0("lab",t.l,t.a,t.b):t.r||t.g||t.b?A0("rgb",t.r,t.g,t.b):null}function Rst(t){const e=[t.start,t.stop,t.count].map(n=>n==null?null:ct(n));for(;e.length&&Nt(e)==null;)e.pop();return e.unshift(RC(t.gradient)),`gradient(${e.join(",")})`}function C0(t){return Mt(t)?"("+k0(t)+")":t}function LC(t){return IC(Mt(t)?t:{datum:t})}function IC(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group}else t.datum?(e="datum",i=t.datum):I("Invalid field reference: "+ct(t));return t.signal||(i=te(i)?yg(i).map(ct).join("]["):IC(i)),e+"["+i+"]"}function Lst(t,e){const n=RC(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band==1?"":"*"+C0(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e}function Ist(t){let e="";return t.forEach(n=>{const i=k0(n);e+=n.test?`(${n.test})?${i}:`:i}),Nt(e)===":"&&(e+="null"),e}function BC(t,e,n,i,r,s){const o={};s=s||{},s.encoders={$encode:o},t=Fst(t,e,n,i,r.config);for(const a in t)o[a]=Bst(t[a],e,s,r);return s}function Bst(t,e,n,i){const r={},s={};for(const o in t)t[o]!=null&&(r[o]=Ust(zst(t[o]),i,n,s));return{$expr:{marktype:e,channels:r},$fields:Object.keys(s),$output:Object.keys(t)}}function zst(t){return lt(t)?Ist(t):k0(t)}function Ust(t,e,n,i){const r=rr(t,e);return r.$fields.forEach(s=>i[s]=1),bt(n,r.$params),r.$expr}const jst="outer",qst=["value","update","init","react","bind"];function zC(t,e){I(t+' for "outer" push: '+ct(e))}function UC(t,e){const n=t.name;if(t.push===jst)e.signals[n]||zC("No prior signal definition",n),qst.forEach(i=>{t[i]!==void 0&&zC("Invalid property ",i)});else{const i=e.addSignal(n,t.value);t.react===!1&&(i.react=!1),t.bind&&e.addBinding(n,t.bind)}}function sv(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i)}function M0(t,e,n,i){return new sv(t,e,n,i)}function S0(t,e){return M0("operator",t,e)}function at(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function Fc(t,e){return e?{$field:t,$name:e}:{$field:t}}const ov=Fc("key");function jC(t,e){return{$compare:t,$order:e}}function Hst(t,e){const n={$key:t};return e&&(n.$flat=!0),n}const Wst="ascending",Vst="descending";function Yst(t){return Mt(t)?(t.order===Vst?"-":"+")+T0(t.op,t.field):""}function T0(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const av="scope",lv="view";function pe(t){return t&&t.signal}function Gst(t){return t&&t.expr}function D0(t){if(pe(t))return!0;if(Mt(t)){for(const e in t)if(D0(t[e]))return!0}return!1}function Ai(t,e){return t!=null?t:e}function Po(t){return t&&t.signal||t}const qC="timer";function Pc(t,e){return(t.merge?Xst:t.stream?Qst:t.type?Zst:I("Invalid stream specification: "+ct(t)))(t,e)}function Kst(t){return t===av?lv:t||lv}function Xst(t,e){const n=t.merge.map(r=>Pc(r,e)),i=uv({merge:n},t,e);return e.addStream(i).id}function Qst(t,e){const n=Pc(t.stream,e),i=uv({stream:n},t,e);return e.addStream(i).id}function Zst(t,e){let n;t.type===qC?(n=e.event(qC,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(Kst(t.source),t.type);const i=uv({stream:n},t,e);return Object.keys(i).length===1?n:e.addStream(i).id}function uv(t,e,n){let i=e.between;return i&&(i.length!==2&&I('Stream "between" parameter must have 2 entries: '+ct(e)),t.between=[Pc(i[0],n),Pc(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push(Jst(e.marktype,e.markname,e.markrole)),e.source===av&&i.push("inScope(event.item)"),i.length&&(t.filter=rr("("+i.join(")&&(")+")",n).$expr),(i=e.throttle)!=null&&(t.throttle=+i),(i=e.debounce)!=null&&(t.debounce=+i),e.consume&&(t.consume=!0),t}function Jst(t,e,n){const i="event.item";return i+(t&&t!=="*"?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"")}const tot={code:"_.$value",ast:{type:"Identifier",value:"value"}};function eot(t,e,n){const i=t.encode,r={target:n};let s=t.events,o=t.update,a=[];s||I("Signal update missing events specification."),te(s)&&(s=fst(s,e.isSubscope()?av:lv)),s=pt(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[iot(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),i!=null&&(o&&I("Signal encode and update are mutually exclusive."),o="encode(item(),"+ct(i)+")"),r.update=te(o)?rr(o,e):o.expr!=null?rr(o.expr,e):o.value!=null?o.value:o.signal!=null?{$expr:tot,$params:{$value:e.signalRef(o.signal)}}:I("Invalid signal update specification."),t.force&&(r.options={force:!0}),a.forEach(l=>e.addUpdate(bt(not(l,e),r)))}function not(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):Pc(t,e)}}function iot(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}function rot(t,e){const n=e.getSignal(t.name);let i=t.update;t.init&&(i?I("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=rr(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(r=>eot(r,e,n.id))}const Vt=t=>(e,n,i)=>M0(t,n,e||void 0,i),HC=Vt("aggregate"),sot=Vt("axisticks"),WC=Vt("bound"),Ci=Vt("collect"),VC=Vt("compare"),oot=Vt("datajoin"),YC=Vt("encode"),aot=Vt("expression"),lot=Vt("facet"),uot=Vt("field"),cot=Vt("key"),fot=Vt("legendentries"),hot=Vt("load"),dot=Vt("mark"),pot=Vt("multiextent"),got=Vt("multivalues"),mot=Vt("overlap"),yot=Vt("params"),GC=Vt("prefacet"),_ot=Vt("projection"),vot=Vt("proxy"),xot=Vt("relay"),KC=Vt("render"),bot=Vt("scale"),Ro=Vt("sieve"),wot=Vt("sortitems"),XC=Vt("viewlayout"),Eot=Vt("values");let kot=0;const QC={min:"min",max:"max",count:"sum"};function Aot(t,e){const n=t.type||"linear";B6(n)||I("Unrecognized scale type: "+ct(n)),e.addScale(t.name,{type:n,domain:void 0})}function Cot(t,e){const n=e.getScale(t.name).params;let i;n.domain=ZC(t.domain,t,e),t.range!=null&&(n.range=tM(t,e,n)),t.interpolate!=null&&Rot(t.interpolate,n),t.nice!=null&&(n.nice=Pot(t.nice)),t.bins!=null&&(n.bins=Fot(t.bins,e));for(i in t)gt(n,i)||i==="name"||(n[i]=oi(t[i],e))}function oi(t,e){return Mt(t)?t.signal?e.signalRef(t.signal):I("Unsupported object: "+ct(t)):t}function $0(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>oi(n,e))}function O0(t){I("Can not find data set: "+ct(t))}function ZC(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&I("No scale domain defined for domainMin/domainMax to override.");return}return t.signal?n.signalRef(t.signal):(lt(t)?Mot:t.fields?Tot:Sot)(t,e,n)}function Mot(t,e,n){return t.map(i=>oi(i,n))}function Sot(t,e,n){const i=n.getData(t.data);return i||O0(t.data),La(e.type)?i.valuesRef(n,t.field,JC(t.sort,!1)):j6(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field)}function Tot(t,e,n){const i=t.data,r=t.fields.reduce((s,o)=>(o=te(o)?{data:i,field:o}:lt(o)||o.signal?Dot(o,n):o,s.push(o),s),[]);return(La(e.type)?$ot:j6(e.type)?Oot:Not)(t,n,r)}function Dot(t,e){const n="_:vega:_"+kot++,i=Ci({});if(lt(t))i.value={$ingest:t};else if(t.signal){const r="setdata("+ct(n)+","+t.signal+")";i.params.input=e.signalRef(r)}return e.addDataPipeline(n,[i,Ro({})]),{data:n,field:"data"}}function $ot(t,e,n){const i=JC(t.sort,!0);let r,s;const o=n.map(u=>{const c=e.getData(u.data);return c||O0(u.data),c.countsRef(e,u.field,i)}),a={groupby:ov,pulse:o};i&&(r=i.op||"count",s=i.field?T0(r,i.field):"count",a.ops=[QC[r]],a.fields=[e.fieldRef(s)],a.as=[s]),r=e.add(HC(a));const l=e.add(Ci({pulse:at(r)}));return s=e.add(Eot({field:ov,sort:e.sortRef(i),pulse:at(l)})),at(s)}function JC(t,e){return t&&(!t.field&&!t.op?Mt(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?I("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!QC[t.op]&&I("Multiple domain scales can not be sorted using "+t.op)),t}function Oot(t,e,n){const i=n.map(r=>{const s=e.getData(r.data);return s||O0(r.data),s.domainRef(e,r.field)});return at(e.add(got({values:i})))}function Not(t,e,n){const i=n.map(r=>{const s=e.getData(r.data);return s||O0(r.data),s.extentRef(e,r.field)});return at(e.add(pot({extents:i})))}function Fot(t,e){return t.signal||lt(t)?$0(t,e):e.objectProperty(t)}function Pot(t){return Mt(t)?{interval:oi(t.interval),step:oi(t.step)}:oi(t)}function Rot(t,e){e.interpolate=oi(t.type||t),t.gamma!=null&&(e.interpolateGamma=oi(t.gamma))}function tM(t,e,n){const i=e.config.range;let r=t.range;if(r.signal)return e.signalRef(r.signal);if(te(r)){if(i&&gt(i,r))return t=bt({},t,{range:i[r]}),tM(t,e,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=La(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:I("Unrecognized scale range value: "+ct(r))}else if(r.scheme){n.scheme=lt(r.scheme)?$0(r.scheme,e):oi(r.scheme,e),r.extent&&(n.schemeExtent=$0(r.extent,e)),r.count&&(n.schemeCount=oi(r.count,e));return}else if(r.step){n.rangeStep=oi(r.step,e);return}else{if(La(t.type)&&!lt(r))return ZC(r,t,e);lt(r)||I("Unsupported range type: "+ct(r))}return r.map(s=>(lt(s)?$0:oi)(s,e))}function Lot(t,e){const n=e.config.projection||{},i={};for(const r in t)r!=="name"&&(i[r]=cv(t[r],r,e));for(const r in n)i[r]==null&&(i[r]=cv(n[r],r,e));e.addProjection(t.name,i)}function cv(t,e,n){return lt(t)?t.map(i=>cv(i,e,n)):Mt(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:I("Unsupported parameter object: "+ct(t)):t}const Mi="top",ol="left",al="right",ws="bottom",eM="center",Iot="vertical",Bot="start",zot="middle",Uot="end",fv="index",hv="label",jot="offset",ll="perc",qot="perc2",ai="value",Rc="guide-label",dv="guide-title",Hot="group-title",Wot="group-subtitle",nM="symbol",N0="gradient",pv="discrete",gv="size",Vot="shape",Yot="fill",Got="stroke",Kot="strokeWidth",Xot="strokeDash",Qot="opacity",mv=[gv,Vot,Yot,Got,Kot,Xot,Qot],Lc={name:1,style:1,interactive:1},Pt={value:0},li={value:1},F0="group",iM="rect",yv="rule",Zot="symbol",Lo="text";function Ic(t){return t.type=F0,t.interactive=t.interactive||!1,t}function En(t,e){const n=(i,r)=>Ai(t[i],Ai(e[i],r));return n.isVertical=i=>Iot===Ai(t.direction,e.direction||(i?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>Ai(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>Ai(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>Ai(t.columns,Ai(e.columns,+n.isVertical(!0))),n}function rM(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function Jot(t,e,n){const i=e.config.style[n];return i&&i[t]}function P0(t,e,n){return`item.anchor === '${Bot}' ? ${t} : item.anchor === '${Uot}' ? ${e} : ${n}`}const _v=P0(ct(ol),ct(al),ct(eM));function tat(t){const e=t("tickBand");let n=t("tickOffset"),i,r;return e?e.signal?(i={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${e.signal}) === 'extent'`},Mt(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=t("bandPosition"),r=t("tickExtra")),{extra:r,band:i,offset:n}}function sM(t,e){return e?t?Mt(t)?Object.assign({},t,{offset:sM(t.offset,e)}):{value:t,offset:e}:e:t}function Wn(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=rl(t.encode,e,Lc)):t.interactive=!1,t}function eat(t,e,n,i){const r=En(t,n),s=r.isVertical(),o=r.gradientThickness(),a=r.gradientLength();let l,u,c,f,h;s?(u=[0,1],c=[0,0],f=o,h=a):(u=[0,0],c=[1,0],f=a,h=o);const d={enter:l={opacity:Pt,x:Pt,y:Pt,width:ke(f),height:ke(h)},update:bt({},l,{opacity:li,fill:{gradient:e,start:u,stop:c}}),exit:{opacity:Pt}};return Ne(d,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),Wn({type:iM,role:Sst,encode:d},i)}function nat(t,e,n,i,r){const s=En(t,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,f,h,d="";o?(u="y",f="y2",c="x",h="width",d="1-"):(u="x",f="x2",c="y",h="height");const p={opacity:Pt,fill:{scale:e,field:ai}};p[u]={signal:d+"datum."+ll,mult:l},p[c]=Pt,p[f]={signal:d+"datum."+qot,mult:l},p[h]=ke(a);const g={enter:p,update:bt({},p,{opacity:li}),exit:{opacity:Pt}};return Ne(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Wn({type:iM,role:Cst,key:ai,from:r,encode:g},i)}const iat=`datum.${ll}<=0?"${ol}":datum.${ll}>=1?"${al}":"${eM}"`,rat=`datum.${ll}<=0?"${ws}":datum.${ll}>=1?"${Mi}":"${zot}"`;function oM(t,e,n,i){const r=En(t,e),s=r.isVertical(),o=ke(r.gradientThickness()),a=r.gradientLength();let l=r("labelOverlap"),u,c,f,h,d="";const p={enter:u={opacity:Pt},update:c={opacity:li,text:{field:hv}},exit:{opacity:Pt}};return Ne(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Ai(t.labelLimit,e.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:rat},f="y",h="x",d="1-"):(u.align=c.align={signal:iat},u.baseline={value:"top"},f="x",h="y"),u[f]=c[f]={signal:d+"datum."+ll,mult:a},u[h]=c[h]=o,o.offset=Ai(t.labelOffset,e.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+fv}:void 0,Wn({type:Lo,role:PC,style:Rc,key:ai,from:i,encode:p,overlap:l},n)}function sat(t,e,n,i,r){const s=En(t,e),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},h=`(${r}) ? datum.${jot} : datum.${gv}`,d=u?ke(u):{field:gv},p=`datum.${fv}`,g=`max(1, ${r})`;let m,y,_,v,x;d.mult=.5,m={enter:y={opacity:Pt,x:{signal:h,mult:.5,offset:c},y:d},update:_={opacity:li,x:y.x,y:y.y},exit:{opacity:Pt}};let w=null,k=null;t.fill||(w=e.symbolBaseFillColor,k=e.symbolBaseStrokeColor),Ne(m,{fill:s("symbolFillColor",w),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",k),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),mv.forEach(M=>{t[M]&&(_[M]=y[M]={scale:t[M],field:ai})});const b=Wn({type:Zot,role:Tst,key:ai,from:f,clip:u?!0:void 0,encode:m},n.symbols),C=ke(c);C.offset=s("labelOffset"),m={enter:y={opacity:Pt,x:{signal:h,offset:C},y:d},update:_={opacity:li,text:{field:hv},x:y.x,y:y.y},exit:{opacity:Pt}},Ne(m,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const T=Wn({type:Lo,role:PC,style:Rc,key:ai,from:f,encode:m},n.labels);return m={enter:{noBound:{value:!u},width:Pt,height:u?ke(u):Pt,opacity:Pt},exit:{opacity:Pt},update:_={opacity:li,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(v=`ceil(item.mark.items.length / ${g})`,_.row.signal=`${p}%${v}`,_.column.signal=`floor(${p} / ${v})`,x={field:["row",p]}):(_.row.signal=`floor(${p} / ${g})`,_.column.signal=`${p} % ${g}`,x={field:p}),_.column.signal=`(${r})?${_.column.signal}:${p}`,i={facet:{data:i,name:"value",groupby:fv}},Ic({role:iv,from:i,encode:rl(m,o,Lc),marks:[b,T],name:l,interactive:a,sort:x})}function oat(t,e){const n=En(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const vv='item.orient === "left"',xv='item.orient === "right"',R0=`(${vv} || ${xv})`,aat=`datum.vgrad && ${R0}`,lat=P0('"top"','"bottom"','"middle"'),uat=P0('"right"','"left"','"center"'),cat=`datum.vgrad && ${xv} ? (${uat}) : (${R0} && !(datum.vgrad && ${vv})) ? "left" : ${_v}`,fat=`item._anchor || (${R0} ? "middle" : "start")`,hat=`${aat} ? (${vv} ? -90 : 90) : 0`,dat=`${R0} ? (datum.vgrad ? (${xv} ? "bottom" : "top") : ${lat}) : "top"`;function pat(t,e,n,i){const r=En(t,e),s={enter:{opacity:Pt},update:{opacity:li,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Pt}};return Ne(s,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:fat},angle:{signal:hat},align:{signal:cat},baseline:{signal:dat},text:t.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),Wn({type:Lo,role:Dst,style:dv,from:i,encode:s},n)}function gat(t,e){let n;return Mt(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+aM(t.path)+")":t.sphere&&(n="geoShape("+aM(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function aM(t){return Mt(t)&&t.signal?t.signal:ct(t)}function lM(t){const e=t.role||"";return!e.indexOf("axis")||!e.indexOf("legend")||!e.indexOf("title")?e:t.type===F0?iv:e||ev}function mat(t){return{marktype:t.type,name:t.name||void 0,role:t.role||lM(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function yat(t,e){return t&&t.signal?e.signalRef(t.signal):t!==!1}function bv(t,e){const n=iq(t.type);n||I("Unrecognized transform type: "+ct(t.type));const i=M0(n.type.toLowerCase(),null,uM(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i}function uM(t,e,n){const i={},r=t.params.length;for(let s=0;s<r;++s){const o=t.params[s];i[o.name]=_at(o,e,n)}return i}function _at(t,e,n){const i=t.type,r=e[t.name];if(i==="index")return vat(t,e,n);if(r===void 0){t.required&&I("Missing required "+ct(e.type)+" parameter: "+ct(t.name));return}else{if(i==="param")return xat(t,e,n);if(i==="projection")return n.projectionRef(e[t.name])}return t.array&&!pe(r)?r.map(s=>cM(t,s,n)):cM(t,r,n)}function cM(t,e,n){const i=t.type;if(pe(e))return hM(i)?I("Expression references can not be signals."):wv(i)?n.fieldRef(e):dM(i)?n.compareRef(e):n.signalRef(e.signal);{const r=t.expr||wv(i);return r&&bat(e)?n.exprRef(e.expr,e.as):r&&wat(e)?Fc(e.field,e.as):hM(i)?rr(e,n):Eat(i)?at(n.getData(e).values):wv(i)?Fc(e):dM(i)?n.compareRef(e):e}}function vat(t,e,n){return te(e.from)||I('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function xat(t,e,n){const i=e[t.name];return t.array?(lt(i)||I("Expected an array of sub-parameters. Instead: "+ct(i)),i.map(r=>fM(t,r,n))):fM(t,i,n)}function fM(t,e,n){const i=t.params.length;let r;for(let o=0;o<i;++o){r=t.params[o];for(const a in r.key)if(r.key[a]!==e[a]){r=null;break}if(r)break}r||I("Unsupported parameter: "+ct(e));const s=bt(uM(r,e,n),r.key);return at(n.add(yot(s)))}const bat=t=>t&&t.expr,wat=t=>t&&t.field,Eat=t=>t==="data",hM=t=>t==="expr",wv=t=>t==="field",dM=t=>t==="compare";function kat(t,e,n){let i,r,s,o,a;return t?(i=t.facet)&&(e||I("Only group marks can be faceted."),i.field!=null?o=a=L0(i,n):(t.data?a=at(n.getData(t.data).aggregate):(s=bv(bt({type:"aggregate",groupby:pt(i.groupby)},i.aggregate),n),s.params.key=n.keyRef(i.groupby),s.params.pulse=L0(i,n),o=a=at(n.add(s))),r=n.keyRef(i.groupby,!0))):o=at(n.add(Ci(null,[{}]))),o||(o=L0(t,n)),{key:r,pulse:o,parent:a}}function L0(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:at(e.getData(t.data).output)}function Io(t,e,n,i,r){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=r,this.index={}}Io.fromEntries=function(t,e){const n=e.length,i=e[n-1],r=e[n-2];let s=e[0],o=null,a=1;for(s&&s.type==="load"&&(s=e[1]),t.add(e[0]);a<n;++a)e[a].params.pulse=at(e[a-1]),t.add(e[a]),e[a].type==="aggregate"&&(o=e[a]);return new Io(t,s,r,i,o)};function pM(t){return te(t)?t:null}function gM(t,e,n){const i=T0(n.op,n.field);let r;if(e.ops){for(let s=0,o=e.as.length;s<o;++s)if(e.as[s]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function Bc(t,e,n,i,r,s,o){const a=e[n]||(e[n]={}),l=Yst(s);let u=pM(r),c,f;if(u!=null&&(t=e.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const h=s?{field:ov,pulse:e.countsRef(t,r,s)}:{field:t.fieldRef(r),pulse:at(e.output)};l&&(h.sort=t.sortRef(s)),f=t.add(M0(i,void 0,h)),o&&(e.index[r]=f),c=at(f),u!=null&&(a[u]=c)}return c}Io.prototype={countsRef(t,e,n){const i=this,r=i.counts||(i.counts={}),s=pM(e);let o,a,l;return s!=null&&(t=i.scope,o=r[s]),o?n&&n.field&&gM(t,o.agg.params,n):(l={groupby:t.fieldRef(e,"key"),pulse:at(i.output)},n&&n.field&&gM(t,l,n),a=t.add(HC(l)),o=t.add(Ci({pulse:at(a)})),o={agg:a,ref:at(o)},s!=null&&(r[s]=o)),o.ref},tuplesRef(){return at(this.values)},extentRef(t,e){return Bc(t,this,"extent","extent",e,!1)},domainRef(t,e){return Bc(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return Bc(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return Bc(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return Bc(t,this,"indata","tupleindex",e,!0,!0)}};function Aat(t,e,n){const i=t.from.facet,r=i.name,s=L0(i,e);let o;i.name||I("Facet must have a name: "+ct(i)),i.data||I("Facet must reference a data set: "+ct(i)),i.field?o=e.add(GC({field:e.fieldRef(i.field),pulse:s})):i.groupby?o=e.add(lot({key:e.keyRef(i.groupby),group:at(e.proxy(n.parent)),pulse:s})):I("Facet must specify groupby or field: "+ct(i));const a=e.fork(),l=a.add(Ci()),u=a.add(Ro({pulse:at(l)}));a.addData(r,new Io(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(t).toRuntime()}}function Cat(t,e,n){const i=e.add(GC({pulse:n.pulse})),r=e.fork();r.add(Ro()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(t).toRuntime()}}function mM(t,e,n){const i=t.remove,r=t.insert,s=t.toggle,o=t.modify,a=t.values,l=e.add(S0()),u="if("+t.trigger+',modify("'+n+'",'+[r,i,s,o,a].map(f=>f==null?"null":f).join(",")+"),0)",c=rr(u,e);l.update=c.$expr,l.params=c.$params}function I0(t,e){const n=lM(t),i=t.type===F0,r=t.from&&t.from.facet,s=t.overlap;let o=t.layout||n===iv||n===nv,a,l,u,c,f,h,d;const p=n===ev||o||r,g=kat(t.from,i,e);l=e.add(oot({key:g.key||(t.key?Fc(t.key):void 0),pulse:g.pulse,clean:!i}));const m=at(l);l=u=e.add(Ci({pulse:m})),l=e.add(dot({markdef:mat(t),interactive:yat(t.interactive,e),clip:gat(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:at(l)}));const y=at(l);l=c=e.add(YC(BC(t.encode,t.type,n,t.style,e,{mod:!1,pulse:y}))),l.params.parent=e.encode(),t.transform&&t.transform.forEach(k=>{const b=bv(k,e),C=b.metadata;(C.generates||C.changes)&&I("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),b.params.pulse=at(l),e.add(l=b)}),t.sort&&(l=e.add(wot({sort:e.compareRef(t.sort),pulse:at(l)})));const _=at(l);(r||o)&&(o=e.add(XC({layout:e.objectProperty(t.layout),legends:e.legends,mark:y,pulse:_})),h=at(o));const v=e.add(WC({mark:y,pulse:h||_}));d=at(v),i&&(p&&(a=e.operators,a.pop(),o&&a.pop()),e.pushState(_,h||d,m),r?Aat(t,e,g):p?Cat(t,e,g):e.parse(t),e.popState(),p&&(o&&a.push(o),a.push(v))),s&&(d=Mat(s,d,e));const x=e.add(KC({pulse:d})),w=e.add(Ro({pulse:at(x)},void 0,e.parent()));t.name!=null&&(f=t.name,e.addData(f,new Io(e,u,x,w)),t.on&&t.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&I("Marks only support modify triggers."),mM(k,e,f)}))}function Mat(t,e,n){const i=t.method,r=t.bound,s=t.separation,o={separation:pe(s)?n.signalRef(s.signal):s,method:pe(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(o.sort=n.compareRef({field:t.order})),r){const a=r.tolerance;o.boundTolerance=pe(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(r.scale),o.boundOrient=r.orient}return at(n.add(mot(o)))}function Sat(t,e){const n=e.config.legend,i=t.encode||{},r=En(t,n),s=i.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c=0,f,h,d;mv.forEach(v=>t[v]?(u[v]=t[v],c=c||t[v]):0),c||I("Missing valid scale for legend.");const p=Tat(t,e.scaleType(c)),g={title:t.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&r.isVertical()},m=at(e.add(Ci(null,[g]))),y={enter:{x:{value:0},y:{value:0}}},_=at(e.add(fot(h={type:p,scale:e.scaleRef(c),count:e.objectProperty(r("tickCount")),limit:e.property(r("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return p===N0?(d=[eat(t,c,n,i.gradient),oM(t,n,i.labels,_)],h.count=h.count||e.signalRef(`max(2,2*floor((${Po(r.gradientLength())})/100))`)):p===pv?d=[nat(t,c,n,i.gradient,_),oM(t,n,i.labels,_)]:(f=oat(t,n),d=[sat(t,n,i,_,Po(f.columns))],h.size=Oat(t,e,d[0].marks)),d=[Ic({role:Mst,from:m,encode:y,marks:d,layout:f,interactive:a})],g.title&&d.push(pat(t,n,i.title,m)),I0(Ic({role:Ast,from:m,encode:rl($at(r,t,n),s,Lc),marks:d,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:a,style:l}),e)}function Tat(t,e){let n=t.type||nM;return!t.type&&Dat(t)===1&&(t.fill||t.stroke)&&(n=Rm(e)?N0:Lm(e)?pv:nM),n!==N0?n:Lm(e)?pv:N0}function Dat(t){return mv.reduce((e,n)=>e+(t[n]?1:0),0)}function $at(t,e,n){const i={enter:{},update:{}};return Ne(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i}function Oat(t,e,n){const i=Po(yM("size",t,n)),r=Po(yM("strokeWidth",t,n)),s=Po(Nat(n[1].encode,e,Rc));return rr(`max(ceil(sqrt(${i})+${r}),${s})`,e)}function yM(t,e,n){return e[t]?`scale("${e[t]}",datum)`:rM(t,n[0].encode)}function Nat(t,e,n){return rM("fontSize",t)||Jot("fontSize",e,n)}const Fat=`item.orient==="${ol}"?-90:item.orient==="${al}"?90:0`;function Pat(t,e){t=te(t)?{text:t}:t;const n=En(t,e.config.title),i=t.encode||{},r=i.group||{},s=r.name||void 0,o=r.interactive,a=r.style,l=[],u={},c=at(e.add(Ci(null,[u])));return l.push(Iat(t,n,Rat(t),c)),t.subtitle&&l.push(Bat(t,n,i.subtitle,c)),I0(Ic({role:$st,from:c,encode:Lat(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),e)}function Rat(t){const e=t.encode;return e&&e.title||bt({name:t.name,interactive:t.interactive,style:t.style},e)}function Lat(t,e){const n={enter:{},update:{}};return Ne(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:_v},angle:{signal:Fat},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),rl(n,e,Lc)}function Iat(t,e,n,i){const r={value:0},s=t.text,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Ne(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),Wn({type:Lo,role:Ost,style:Hot,from:i,encode:o},n)}function Bat(t,e,n,i){const r={value:0},s=t.subtitle,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Ne(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),Wn({type:Lo,role:Nst,style:Wot,from:i,encode:o},n)}function zat(t,e){const n=[];t.transform&&t.transform.forEach(i=>{n.push(bv(i,e))}),t.on&&t.on.forEach(i=>{mM(i,e,t.name)}),e.addDataPipeline(t.name,Uat(t,e,n))}function Uat(t,e,n){const i=[];let r=null,s=!1,o=!1,a,l,u,c,f;for(t.values?pe(t.values)||D0(t.format)?(i.push(_M(e,t)),i.push(r=Bo())):i.push(r=Bo({$ingest:t.values,$format:t.format})):t.url?D0(t.url)||D0(t.format)?(i.push(_M(e,t)),i.push(r=Bo())):i.push(r=Bo({$request:t.url,$format:t.format})):t.source&&(r=a=pt(t.source).map(h=>at(e.getData(h).output)),i.push(null)),l=0,u=n.length;l<u;++l)c=n[l],f=c.metadata,!r&&!f.source&&i.push(r=Bo()),i.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?r=c:f.changes&&(r=null);return a&&(u=a.length-1,i[0]=xot({derive:s,pulse:u?a:a[0]}),(s||u)&&i.splice(1,0,Bo())),r||i.push(Bo()),i.push(Ro({})),i}function Bo(t){const e=Ci({},t);return e.metadata={source:!0},e}function _M(t,e){return hot({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const vM=t=>t===ws||t===Mi,B0=(t,e,n)=>pe(t)?Wat(t.signal,e,n):t===ol||t===Mi?e:n,Ae=(t,e,n)=>pe(t)?qat(t.signal,e,n):vM(t)?e:n,Si=(t,e,n)=>pe(t)?Hat(t.signal,e,n):vM(t)?n:e,xM=(t,e,n)=>pe(t)?Vat(t.signal,e,n):t===Mi?{value:e}:{value:n},jat=(t,e,n)=>pe(t)?Yat(t.signal,e,n):t===al?{value:e}:{value:n},qat=(t,e,n)=>bM(`${t} === '${Mi}' || ${t} === '${ws}'`,e,n),Hat=(t,e,n)=>bM(`${t} !== '${Mi}' && ${t} !== '${ws}'`,e,n),Wat=(t,e,n)=>Ev(`${t} === '${ol}' || ${t} === '${Mi}'`,e,n),Vat=(t,e,n)=>Ev(`${t} === '${Mi}'`,e,n),Yat=(t,e,n)=>Ev(`${t} === '${al}'`,e,n),bM=(t,e,n)=>(e=e!=null?ke(e):e,n=n!=null?ke(n):n,wM(e)&&wM(n)?(e=e?e.signal||ct(e.value):null,n=n?n.signal||ct(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[bt({test:t},e)].concat(n||[])),wM=t=>t==null||Object.keys(t).length===1,Ev=(t,e,n)=>({signal:`${t} ? (${ul(e)}) : (${ul(n)})`}),Gat=(t,e,n,i,r)=>({signal:(i!=null?`${t} === '${ol}' ? (${ul(i)}) : `:"")+(n!=null?`${t} === '${ws}' ? (${ul(n)}) : `:"")+(r!=null?`${t} === '${al}' ? (${ul(r)}) : `:"")+(e!=null?`${t} === '${Mi}' ? (${ul(e)}) : `:"")+"(null)"}),ul=t=>pe(t)?t.signal:t==null?null:ct(t),Kat=(t,e)=>e===0?0:pe(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},cl=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function fl(t,e,n,i){let r;if(e&&gt(e,t))return e[t];if(gt(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=t[5].toLowerCase()+t.slice(6)}return i[dv][r]}else if(t.startsWith("label")){switch(t){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=t[5].toLowerCase()+t.slice(6)}return i[Rc][r]}return null}function EM(t){const e={};for(const n of t)if(!!n)for(const i in n)e[i]=1;return Object.keys(e)}function Xat(t,e){var n=e.config,i=n.style,r=n.axis,s=e.scaleType(t.scale)==="band"&&n.axisBand,o=t.orient,a,l,u;if(pe(o)){const f=EM([n.axisX,n.axisY]),h=EM([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of f)a[u]=Ae(o,fl(u,n.axisX,r,i),fl(u,n.axisY,r,i));l={};for(u of h)l[u]=Gat(o.signal,fl(u,n.axisTop,r,i),fl(u,n.axisBottom,r,i),fl(u,n.axisLeft,r,i),fl(u,n.axisRight,r,i))}else a=o===Mi||o===ws?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?bt({},r,a,l,s):r}function Qat(t,e,n,i){const r=En(t,e),s=t.orient;let o,a;const l={enter:o={opacity:Pt},update:a={opacity:li},exit:{opacity:Pt}};Ne(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=kM(t,0),c=kM(t,1);return o.x=a.x=Ae(s,u,Pt),o.x2=a.x2=Ae(s,c),o.y=a.y=Si(s,u,Pt),o.y2=a.y2=Si(s,c),Wn({type:yv,role:xst,from:i,encode:l},n)}function kM(t,e){return{scale:t.scale,range:e}}function Zat(t,e,n,i,r){const s=En(t,e),o=t.orient,a=t.gridScale,l=B0(o,1,-1),u=Jat(t.offset,l);let c,f,h;const d={enter:c={opacity:Pt},update:h={opacity:li},exit:f={opacity:Pt}};Ne(d,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:t.scale,field:ai,band:r.band,extra:r.extra,offset:r.offset,round:s("tickRound")},g=Ae(o,{signal:"height"},{signal:"width"}),m=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:bt(g,{mult:l,offset:u});return c.x=h.x=Ae(o,p,m),c.y=h.y=Si(o,p,m),c.x2=h.x2=Si(o,y),c.y2=h.y2=Ae(o,y),f.x=Ae(o,p),f.y=Si(o,p),Wn({type:yv,role:bst,key:ai,from:i,encode:d},n)}function Jat(t,e){if(e!==1)if(!Mt(t))t=pe(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=bt({},t);for(;n.mult!=null;)if(Mt(n.mult))n=n.mult=bt({},n.mult);else return n.mult=pe(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e}return t}function tlt(t,e,n,i,r,s){const o=En(t,e),a=t.orient,l=B0(a,-1,1);let u,c,f;const h={enter:u={opacity:Pt},update:f={opacity:li},exit:c={opacity:Pt}};Ne(h,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const d=ke(r);d.mult=l;const p={scale:t.scale,field:ai,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=u.y=Ae(a,Pt,p),f.y2=u.y2=Ae(a,d),c.x=Ae(a,p),f.x=u.x=Si(a,Pt,p),f.x2=u.x2=Si(a,d),c.y=Si(a,p),Wn({type:yv,role:Est,key:ai,from:i,encode:h},n)}function kv(t,e,n,i,r){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+r+")"}}function elt(t,e,n,i,r,s){const o=En(t,e),a=t.orient,l=t.scale,u=B0(a,-1,1),c=Po(o("labelFlush")),f=Po(o("labelFlushOffset")),h=o("labelAlign"),d=o("labelBaseline");let p=c===0||!!c,g;const m=ke(r);m.mult=u,m.offset=ke(o("labelPadding")||0),m.offset.mult=u;const y={scale:l,field:ai,band:.5,offset:sM(s.offset,o("labelOffset"))},_=Ae(a,p?kv(l,c,'"left"','"right"','"center"'):{value:"center"},jat(a,"left","right")),v=Ae(a,xM(a,"bottom","top"),p?kv(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=kv(l,c,`-(${f})`,f,0);p=p&&f;const w={opacity:Pt,x:Ae(a,y,m),y:Si(a,y,m)},k={enter:w,update:g={opacity:li,text:{field:hv},x:w.x,y:w.y,align:_,baseline:v},exit:{opacity:Pt,x:w.x,y:w.y}};Ne(k,{dx:!h&&p?Ae(a,x):null,dy:!d&&p?Si(a,x):null}),Ne(k,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:h,baseline:d});const b=o("labelBound");let C=o("labelOverlap");return C=C||b?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:b?{scale:l,orient:a,tolerance:b}:null}:void 0,g.align!==_&&(g.align=cl(g.align,_)),g.baseline!==v&&(g.baseline=cl(g.baseline,v)),Wn({type:Lo,role:wst,style:Rc,key:ai,from:i,encode:k,overlap:C},n)}function nlt(t,e,n,i){const r=En(t,e),s=t.orient,o=B0(s,-1,1);let a,l;const u={enter:a={opacity:Pt,anchor:ke(r("titleAnchor",null)),align:{signal:_v}},update:l=bt({},a,{opacity:li,text:ke(t.title)}),exit:{opacity:Pt}},c={signal:`lerp(range("${t.scale}"), ${P0(0,1,.5)})`};return l.x=Ae(s,c),l.y=Si(s,c),a.angle=Ae(s,Pt,Kat(o,90)),a.baseline=Ae(s,xM(s,ws,Mi),{value:ws}),l.angle=a.angle,l.baseline=a.baseline,Ne(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),ilt(r,s,u,n),u.update.align=cl(u.update.align,a.align),u.update.angle=cl(u.update.angle,a.angle),u.update.baseline=cl(u.update.baseline,a.baseline),Wn({type:Lo,role:kst,style:dv,from:i,encode:u},n)}function ilt(t,e,n,i){const r=(a,l)=>a!=null?(n.update[l]=cl(ke(a),n.update[l]),!1):!sl(l,i),s=r(t("titleX"),"x"),o=r(t("titleY"),"y");n.enter.auto=o===s?ke(o):Ae(e,ke(o),ke(s))}function rlt(t,e){const n=Xat(t,e),i=t.encode||{},r=i.axis||{},s=r.name||void 0,o=r.interactive,a=r.style,l=En(t,n),u=tat(l),c={scale:t.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:t.title!=null},f=at(e.add(Ci({},[c]))),h=at(e.add(sot({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),d=[];let p;return c.grid&&d.push(Zat(t,n,i.grid,h,u)),c.ticks&&(p=l("tickSize"),d.push(tlt(t,n,i.ticks,h,p,u))),c.labels&&(p=c.ticks?p:0,d.push(elt(t,n,i.labels,h,p,u))),c.domain&&d.push(Qat(t,n,i.domain,f)),c.title&&d.push(nlt(t,n,i.title,f)),I0(Ic({role:vst,from:f,encode:rl(slt(l,t),r,Lc),marks:d,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),e)}function slt(t,e){const n={enter:{},update:{}};return Ne(n,{orient:t("orient"),offset:t("offset")||0,position:Ai(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function AM(t,e,n){const i=pt(t.signals),r=pt(t.scales);return n||i.forEach(s=>UC(s,e)),pt(t.projections).forEach(s=>Lot(s,e)),r.forEach(s=>Aot(s,e)),pt(t.data).forEach(s=>zat(s,e)),r.forEach(s=>Cot(s,e)),(n||i).forEach(s=>rot(s,e)),pt(t.axes).forEach(s=>rlt(s,e)),pt(t.marks).forEach(s=>I0(s,e)),pt(t.legends).forEach(s=>Sat(s,e)),t.title&&Pat(t.title,e),e.parseLambdas(),e}const olt=t=>rl({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function alt(t,e){const n=e.config,i=at(e.root=e.add(S0())),r=llt(t,n);r.forEach(u=>UC(u,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const s=e.add(Ci()),o=e.add(YC(BC(olt(t.encode),F0,nv,t.style,e,{pulse:at(s)}))),a=e.add(XC({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:at(o)}));e.operators.pop(),e.pushState(at(o),at(a),null),AM(t,e,r),e.operators.push(a);let l=e.add(WC({mark:i,pulse:at(a)}));return l=e.add(KC({pulse:at(l)})),l=e.add(Ro({pulse:at(l)})),e.addData("root",new Io(e,s,s,l)),e}function zc(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function llt(t,e){const n=o=>Ai(t[o],e[o]),i=[zc("background",n("background")),zc("autosize",mst(n("autosize"))),zc("padding",_st(n("padding"))),zc("width",n("width")||0),zc("height",n("height")||0)],r=i.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return pt(t.signals).forEach(o=>{gt(r,o.name)?o=bt(r[o.name],o):i.push(o),s[o.name]=o}),pt(e.signals).forEach(o=>{!gt(s,o.name)&&!gt(r,o.name)&&i.push(o)}),i}function CM(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function MM(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}CM.prototype=MM.prototype={parse(t){return AM(t,this)},fork(){return new MM(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof sv?at(t):t;return this.add(vot({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,r,s){let o,a;i&&(o=i.data||(i.data={}),a=o[r]||(o[r]=[]),a.push(s))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const i in e.index)n(e.index[i],t,"index:"+i)}return this},pushState(t,e,n){this._encode.push(at(this.add(Ro({pulse:t})))),this._parent.push(e),this._lookup.push(n?at(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Nt(this._parent)},encode(){return Nt(this._encode)},lookup(){return Nt(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if(te(t))return Fc(t,e);t.signal||I("Unsupported field reference: "+ct(t));const n=t.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};e&&(r.as=e),this.field[n]=i=at(this.add(uot(r)))}return i},compareRef(t){let e=!1;const n=s=>pe(s)?(e=!0,this.signalRef(s.signal)):Gst(s)?(e=!0,this.exprRef(s.expr)):s,i=pt(t.field).map(n),r=pt(t.order).map(n);return e?at(this.add(VC({fields:i,orders:r}))):jC(i,r)},keyRef(t,e){let n=!1;const i=s=>pe(s)?(n=!0,at(r[s.signal])):s,r=this.signals;return t=pt(t).map(i),n?at(this.add(cot({fields:t,flat:e}))):Hst(t,e)},sortRef(t){if(!t)return t;const e=T0(t.op,t.field),n=t.order||Wst;return n.signal?at(this.add(VC({fields:e,orders:this.signalRef(n.signal)}))):jC(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i}return this.events[n]},hasOwnSignal(t){return gt(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&I("Duplicate signal name: "+ct(t));const n=e instanceof sv?e:this.add(S0(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||I("Unrecognized signal name: "+ct(t)),this.signals[t]},signalRef(t){return this.signals[t]?at(this.signals[t]):(gt(this.lambdas,t)||(this.lambdas[t]=this.add(S0(null))),at(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const i=t[e],r=rr(i,this),s=this.lambdas[i];s.params=r.$params,s.update=r.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return!t||!Mt(t)?t:this.signalRef(t.signal||Av(t))},exprRef(t,e){const n={expr:rr(t,this)};return e&&(n.expr.$name=e),at(this.add(aot(n)))},addBinding(t,e){this.bindings||I("Nested signals do not support binding: "+ct(t)),this.bindings.push(bt({signal:t},e))},addScaleProj(t,e){gt(this.scales,t)&&I("Duplicate scale or projection name: "+ct(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,bot(e))},addProjection(t,e){this.addScaleProj(t,_ot(e))},getScale(t){return this.scales[t]||I("Unrecognized scale name: "+ct(t)),this.scales[t]},scaleRef(t){return at(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return gt(this.data,t)&&I("Duplicate data set name: "+ct(t)),this.data[t]=e},getData(t){return this.data[t]||I("Undefined data set name: "+ct(t)),this.data[t]},addDataPipeline(t,e){return gt(this.data,t)&&I("Duplicate data set name: "+ct(t)),this.addData(t,Io.fromEntries(this,e))}};function Av(t){return(lt(t)?ult:clt)(t)}function ult(t){const e=t.length;let n="[";for(let i=0;i<e;++i){const r=t[i];n+=(i>0?",":"")+(Mt(r)?r.signal||Av(r):ct(r))}return n+"]"}function clt(t){let e="{",n=0,i,r;for(i in t)r=t[i],e+=(++n>1?",":"")+ct(i)+":"+(Mt(r)?r.signal||Av(r):ct(r));return e+"}"}function flt(){const t="sans-serif",e=30,n=2,i="#4c78a8",r="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:n},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:t,fontSize:11},trail:{fill:i,size:n},style:{"guide-label":{fill:r,font:t,fontSize:10},"guide-title":{fill:r,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:t,fontSize:12},point:{size:e,strokeWidth:n,shape:"circle"},circle:{size:e,strokeWidth:n},square:{size:e,strokeWidth:n,shape:"square"},cell:{fill:"transparent",stroke:o}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function hlt(t,e,n){return Mt(t)||I("Input Vega specification must be an object."),e=cB(flt(),e,t.config),alt(t,new CM(e,n)).toRuntime()}bt(mu,hH,RK,pX,JQ,YZ,Att,XJ,Mtt,Htt,tet,aet);const dlt={data(){return{vegaView:{}}},name:"Graph",props:{fan:Object,graphid:{type:String,default:"fantune-vega-chart"}},mounted(){window.onresize=this.refresh,this.refresh()},updated(){this.refresh()},beforeUnmount(){this.vegaFinalize()},computed:{scales(){let t=this;return[new SI({domain:[t.Qmin,t.Qmax]}),new TI({domain:[t.Pmin,t.Pmax]}),new DI({domain:[t.\u03B7min,t.\u03B7max]}),new $I({domain:[t.Nvmin,t.Nvmax]})]},axes(){let t=this;return[new OI({title:`Q, ${t.QRescale.suffix} \u043C\xB3/\u0447`}),new NI,new FI,new PI({title:`N, ${t.NvRescale.suffix}`})]},data(){let t=this;return[new LI({values:t.\u03C6Array.map(function(e,n){return{Flow:t.QArray[n],FullPres:t.PvArray[n],StatPres:t.PsArray[n],\u03B7:t.\u03B7Array[n],\u03B7s:t.\u03B7sArray[n],Power:t.NvArray[n]}})})]},marks(){let t=this;return[new x3,new kI,new b3,new AI,new CI,new II({Q:t.QPoint}),new BI({Q:t.QPoint,Pv:t.PvPoint}),new zI({Q:t.QPoint,Ps:t.PsPoint}),new UI({Q:t.QPoint,\u03B7:t.\u03B7Point}),new jI({Q:t.QPoint,\u03B7s:t.\u03B7sPoint}),new qI({Q:t.QPoint,Nv:t.NvPoint}),new WI({Q:t.QPoint}),new VI({Pv:t.PvPoint}),new YI({Ps:t.PsPoint}),new GI({\u03B7:t.\u03B7Point}),new KI({\u03B7s:t.\u03B7sPoint}),new XI({Nv:t.NvPoint}),new QI({Q:t.QPoint,Pv:t.PvPoint}),new ZI({Q:t.QPoint,Ps:t.PsPoint}),new JI({Q:t.QPoint,\u03B7:t.\u03B7Point}),new tB({Q:t.QPoint,\u03B7s:t.\u03B7sPoint}),new eB({Q:t.QPoint,Nv:t.NvPoint})]},\u03C6Array(){return this.fan.graph.\u03C6Array},QArray(){return this.fan.graph.QArray.map(t=>t/this.QRescale.factor)},PvArray(){return this.fan.graph.PvArray},PsArray(){return this.fan.graph.PsArray},\u03B7Array(){return this.fan.graph.\u03B7Array},\u03B7sArray(){return this.fan.graph.\u03B7sArray},NvArray(){return this.fan.graph.NvArray.map(t=>t/this.NvRescale.factor)},MvArray(){return this.fan.graph.MvArray},Qmin(){return this.fan.graph.Qmin/this.QRescale.factor},Qmax(){return this.fan.graph.Qmax/this.QRescale.factor},Pmin(){return this.fan.graph.Pmin},Pmax(){return this.fan.graph.Pmax},\u03B7min(){return this.fan.graph.\u03B7min},\u03B7max(){return this.fan.graph.\u03B7max},Nvmin(){return this.fan.graph.Nvmin/this.NvRescale.factor},Nvmax(){return this.fan.graph.Nvmax/this.NvRescale.factor},QPoint(){return this.fan.graph.QPoint/this.QRescale.factor},PvPoint(){return this.fan.graph.PvPoint},PsPoint(){return this.fan.graph.PsPoint},\u03B7Point(){return this.fan.graph.\u03B7Point},\u03B7sPoint(){return this.fan.graph.\u03B7sPoint},NvPoint(){return this.fan.graph.NvPoint/this.NvRescale.factor},MvPoint(){return this.fan.graph.MvPoint},QRescaleMatrix(){return[{limit:0,factor:1,suffix:""},{limit:1e3,factor:1e3,suffix:"\xD7 1 000"},{limit:1e6,factor:1e6,suffix:"\xD7 1 000 000"}]},QRescale(){return this.QRescaleMatrix[this.QRescaleMatrix.map(t=>this.fan.graph.Qmax>=t.limit).lastIndexOf(!0)]},NvRescaleMatrix(){return[{limit:0,factor:.001,suffix:"\u0412\u0442"},{limit:1,factor:1,suffix:"\u043A\u0412\u0442"},{limit:1e3,factor:1e3,suffix:"\u041C\u0412\u0442"},,{limit:1e6,factor:1e6,suffix:"\u0413\u0412\u0442"},,]},NvRescale(){return this.NvRescaleMatrix[this.NvRescaleMatrix.map(t=>this.fan.graph.Nvmax>=t.limit).lastIndexOf(!0)]}},methods:{refresh(){var n;let t=this,e={version:5,width:-200+t.$el.parentElement.clientWidth,height:500,padding:"auto",legends:[],scales:t.scales,axes:t.axes,data:t.data,marks:t.marks};((n=this.fan)==null?void 0:n.graph)&&(this.vegaRender(e),this.$el.parentElement.oncontextmenu=this.saveSVG)},saveSVG(t){t.preventDefault();let e=new Blob([t.currentTarget.querySelector("svg").outerHTML],{type:"image/svg+xml"}),n=document.createElement("a");document.body.appendChild(n),n.style="display: none";let i=window.URL.createObjectURL(e);n.href=i,n.download=`${this.fan.scheme}_d${this.fan.Dmm.toFixed(0)}mm_${this.fan.depth==2?"TwinSide_":""}.svg`,n.click(),window.URL.revokeObjectURL(i)},vegaRender(t){return this.vegaView=new kC(hlt(t),{renderer:"svg",container:`#${this.graphid}`,hover:!0}),this.vegaView.runAsync()},vegaFinalize(){this.vegaView.finalize()}}},plt=["id"],glt={key:1,style:{display:"none"}},mlt=E("div",null," \u042D\u0442\u043E \u043D\u0435\u0432\u0438\u0434\u0438\u043C\u043E\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0433\u0440\u0430\u0444\u0438\u043A\u0430. \u041E\u043D\u043E \u043D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0434\u043B\u044F \u043E\u0431\u0435\u0441\u043F\u0435\u0447\u0435\u043D\u0438\u044F \u0440\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438 \u0441\u0438\u0441\u0442\u0435\u043C\u044B Vue.js, \u043F\u043E\u0441\u043A\u043E\u043B\u044C\u043A\u0443 \u0441\u0438\u0441\u0442\u0435\u043C\u0430 \u043D\u0435 \u0438\u043C\u0435\u0435\u0442 \u0441\u043E\u0432\u043C\u0435\u0441\u0442\u0438\u043C\u043E\u0441\u0442\u0438 \u0441 Vega.js. ",-1),ylt=E("div",null," \u041E\u0447\u0435\u043D\u044C \u0432\u0430\u0436\u043D\u043E, \u0447\u0442\u043E\u0431\u044B \u0432 \u044D\u0442\u043E\u043C \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0438 \u0431\u044B\u043B\u0438 \u0432\u0441\u0435 \u0447\u0438\u0441\u043B\u0430, \u043F\u0440\u0438 \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u0438 \u043A\u043E\u0442\u043E\u0440\u044B\u0445 \u0434\u043E\u043B\u0436\u0435\u043D \u0438\u0437\u043C\u0435\u043D\u044F\u0442\u044C\u0441\u044F \u0433\u0440\u0430\u0444\u0438\u043A. ",-1),_lt=E("div",null," \u0422\u043E \u0435\u0441\u0442\u044C, \u0435\u0441\u043B\u0438 \u0433\u0440\u0430\u0444\u0438\u043A \u0434\u043E\u043B\u0436\u0435\u043D \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C\u0441\u044F \u043F\u0440\u0438 \u043D\u0435\u043A\u043E\u0442\u043E\u0440\u043E\u043C \u0441\u043E\u0431\u044B\u0442\u0438\u0438, \u0442\u043E \u0432 \u044D\u0442\u043E\u043C \u0442\u0435\u043A\u0441\u0442\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u043F\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E, \u043A\u043E\u0442\u043E\u0440\u043E\u0435 \u043D\u0430\u0434\u0451\u0436\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u044F\u0435\u0442\u0441\u044F \u043F\u0440\u0438 \u0442\u043E\u043C \u0436\u0435 \u0441\u043E\u0431\u044B\u0442\u0438\u0438 ",-1),vlt=E("div",null," \u0422\u0430\u043A\u0436\u0435 \u043E\u0447\u0435\u043D\u044C \u0432\u0430\u0436\u043D\u043E, \u0447\u0442\u043E\u0431\u044B \u044D\u0442\u043E\u0442 \u0442\u0435\u043A\u0441\u0442 \u043F\u043E\u044F\u0432\u043B\u044F\u043B\u0441\u044F \u0438 \u0438\u0441\u0447\u0435\u0437\u0430\u043B \u0432\u043C\u0435\u0441\u0442\u0435 \u0441 \u0433\u0440\u0430\u0444\u0438\u043A\u043E\u043C. ",-1),xlt=E("h4",null,"\u0413\u0440\u0430\u0444\u0438\u043A \u0441\u0442\u0440\u043E\u0438\u0442 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u043C\u0430\u0441\u0441\u0438\u0432\u044B \u0447\u0438\u0441\u0435\u043B:",-1),blt=E("h4",null,"\u0413\u0440\u0430\u0444\u0438\u043A \u0432\u0438\u0434\u0438\u0442 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D\u044B \u0447\u0438\u0441\u0435\u043B:",-1),wlt=E("h4",null,"\u0413\u0440\u0430\u0444\u0438\u043A \u0441\u0442\u0440\u043E\u0438\u0442 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438:",-1);function Elt(t,e,n,i,r,s){var o,a;return tt(),it("div",null,[((o=n.fan)==null?void 0:o.graph)?(tt(),it("div",{key:0,id:n.graphid},null,8,plt)):hn("",!0),((a=n.fan)==null?void 0:a.graph)?(tt(),it("div",glt,[mlt,ylt,_lt,vlt,xlt,(tt(!0),it(Bt,null,Fe([{name:"\u0420\u0430\u0441\u0445\u043E\u0434",arr:s.QArray},{name:"\u0414\u0430\u0432\u043B. \u043F\u043E\u043B\u043D.",arr:s.PvArray},{name:"\u0414\u0430\u0432\u043B. \u0441\u0442\u0430\u0442.",arr:s.PsArray},{name:"\u041A\u041F\u0414 \u043F\u043E\u043B\u043D.",arr:s.\u03B7Array},{name:"\u041A\u041F\u0414 \u0441\u0442\u0430\u0442.",arr:s.\u03B7sArray},{name:"\u041C\u043E\u0449\u043D\u043E\u0441\u0442\u044C",arr:s.NvArray}],l=>(tt(),it("div",{key:l.name},xt(l.name)+": "+xt(l.arr.map(u=>u.toPrecision(4)).join(" | ")),1))),128)),blt,(tt(!0),it(Bt,null,Fe([{name:"\u0420\u0430\u0441\u0445\u043E\u0434",arr:[s.Qmin,s.Qmax]},{name:"\u0414\u0430\u0432\u043B.",arr:[s.Pmin,s.Pmax]},{name:"\u041A\u041F\u0414",arr:[s.\u03B7min,s.\u03B7max]},{name:"\u041C\u043E\u0449\u043D\u043E\u0441\u0442\u044C",arr:[s.Nvmin,s.Nvmax]}],l=>(tt(),it("div",{key:l.name},xt(l.name)+": \u043E\u0442 "+xt(l.arr[0])+" \u0434\u043E "+xt(l.arr[1]),1))),128)),wlt,(tt(!0),it(Bt,null,Fe([{name:"\u0420\u0430\u0441\u0445\u043E\u0434",pt:s.QPoint},{name:"\u0414\u0430\u0432\u043B. \u043F\u043E\u043B\u043D.",pt:s.PvPoint},{name:"\u0414\u0430\u0432\u043B. \u0441\u0442\u0430\u0442.",pt:s.PsPoint},{name:"\u041A\u041F\u0414 \u043F\u043E\u043B\u043D.",pt:s.\u03B7Point},{name:"\u041A\u041F\u0414 \u0441\u0442\u0430\u0442.",pt:s.\u03B7sPoint},{name:"\u041C\u043E\u0449\u043D\u043E\u0441\u0442\u044C",pt:s.NvPoint}],l=>(tt(),it("div",{key:l.name},xt(l.name)+": "+xt(l.pt),1))),128))])):hn("",!0)])}var klt=On(dlt,[["render",Elt]]);const Alt={name:"NoiseCell",props:{obj:{},valuename:{default:""},tofixed:{type:Number,default:12},edit:{type:Boolean,default:!1}},mounted(){this._oldText=this.text},computed:{text:{set(t){if(t==="-"){this.valueNumber=-Br.TOLERANCE;return}this.toNumber(t)!==this.toNumber(this._oldText)&&(this._oldText=t,this.valueNumber=this.toNumber(t))},get(){return+this.valueNumber==-Br.TOLERANCE?"-":this.toString(+this.valueNumber.toFixed(this.tofixed))}},valueNumber:{get(){return this.valuename===""?this.obj:this.obj[this.valuename]},set(t){this.valuename===""?this.obj=t:this.obj[this.valuename]=t}},isInvalid(){return isNaN(this.valueNumber)},isValid(){return!this.isInvalid}},methods:{toString(t){return t===void 0||isNaN(t)?"":t.toString().replace(".",",")},toNumber(t){return t===void 0||typeof t!="string"?NaN:+t.replace(",",".")}}},Clt={key:0},Mlt={key:1,class:"m-0 p-0"};function Slt(t,e,n,i,r,s){return n.obj?(tt(),it("div",Clt,[n.edit?Jo((tt(),it("input",{key:0,class:jo(["muffler-input m-0 p-0",{"is-invalid":s.isInvalid}]),size:"2","onUpdate:modelValue":e[0]||(e[0]=o=>s.text=o)},null,2)),[[fb,s.text]]):(tt(),it("span",Mlt,xt(s.text),1))])):hn("",!0)}var SM=On(Alt,[["render",Slt],["__scopeId","data-v-7129df3a"]]);function Tlt(t,e,n){if(!t||!e||t.length<=1||e.length<=1||t.length!=e.length)return;function i(r,s,o,a){let l=(o-a)/(r-s),u=o-l*r;return c=>l*c+u}for(let r=0;r<=t.length-1;r++){if(n===t[r])return e[r];if(r===0&&n<t[r])return i(t[r],t[r+1],e[r],e[r+1])(n);if(r===t.length-1)return i(t[r-1],t[r],e[r-1],e[r])(n);if(n>t[r]&&n<t[r+1])return i(t[r],t[r+1],e[r],e[r+1])(n)}}function Dlt(t,e,n){let i,r,s,o,a,l,u,c;if(t=Math.max(0,Math.min(360,t)),e=Math.max(0,Math.min(100,e)),n=Math.max(0,Math.min(100,n)),e/=100,n/=100,e==0)return i=r=s=n,[Math.round(i*255),Math.round(r*255),Math.round(s*255)];switch(t/=60,o=Math.floor(t),a=t-o,l=n*(1-e),u=n*(1-e*a),c=n*(1-e*(1-a)),o){case 0:i=n,r=c,s=l;break;case 1:i=u,r=n,s=l;break;case 2:i=l,r=n,s=c;break;case 3:i=l,r=u,s=n;break;case 4:i=c,r=l,s=n;break;default:i=n,r=l,s=u}return[Math.round(i*255),Math.round(r*255),Math.round(s*255)]}function $lt(t,e,n){let i=Dlt(t,e,n);return"#"+i.map(r=>r.toString(16)).join("")}function TM(t,e,n=!1,i=15,r=100){let s=[210,10];n&&s.reverse();let o=[Math.min.apply(null,e),Math.max.apply(null,e)],a=Tlt(o,s,t);return $lt(a,i,r)}const Olt={name:"NoiseTable",props:{noisefan:Object,freqs:Array},computed:{},methods:{colorValue:TM},components:{NoiseCell:SM}},Nlt={class:"table-fantune-header text-center"},Flt={rowspan:"2",scope:"col"},Plt=E("th",{rowspan:"2",scope:"col"},[E("div",null,"\u0432\u0441\u0435\u0433\u043E,"),E("div",null,"\u0434\u0411\u0410")],-1),Rlt=["colspan"],Llt=E("div",null,"\u0434\u0411, \u043F\u043E \u043E\u043A\u0442\u0430\u0432\u043D\u044B\u043C \u043F\u043E\u043B\u043E\u0441\u0430\u043C, \u0413\u0446",-1),Ilt=[Llt],Blt={scope:"row"},zlt={class:"text-center"};function Ult(t,e,n,i,r,s){const o=fn("NoiseCell");return tt(),it(Bt,null,[E("thead",Nlt,[E("tr",null,[E("th",Flt,[Mp(t.$slots,"default")]),Plt,E("th",{colspan:n.freqs.length,scope:"col"},Ilt,8,Rlt)]),E("tr",null,[(tt(!0),it(Bt,null,Fe(n.freqs,a=>(tt(),it("th",{scope:"col",key:a},[E("div",null,xt(a),1)]))),128))])]),E("tbody",null,[(tt(!0),it(Bt,null,Fe(n.noisefan,a=>(tt(),it("tr",{key:a.title},[E("th",Blt,[E("div",null,xt(a.title),1)]),E("td",zlt,[kt(o,{obj:a,valuename:"total",tofixed:0,edit:!1},null,8,["obj"])]),(tt(!0),it(Bt,null,Fe(a.octaves,(l,u)=>(tt(),it("td",{class:"text-center",style:Uo({background:s.colorValue(l,a.octaves,!1,15,100)}),key:u},[kt(o,{obj:a.octaves,valuename:u,tofixed:0,edit:!1},null,8,["obj","valuename"])],4))),128))]))),128))])],64)}var jlt=On(Olt,[["render",Ult]]);const qlt={name:"MufflerRow",props:{muffler:Object},computed:{dBArray(){return this.muffler.dBArray}},methods:{colorValue:TM},components:{NoiseCell:SM}},Hlt={scope:"row",rowspan:"2"},Wlt=E("td",{class:"text-center"},[E("div",null,"\u0434\u0411")],-1),Vlt=E("td",{class:"text-center"},[E("div",null,"\u03B1")],-1);function Ylt(t,e,n,i,r,s){const o=fn("NoiseCell");return tt(),it(Bt,null,[E("tr",null,[E("th",Hlt,[E("div",null,[Mp(t.$slots,"default")]),E("div",null,xt(n.muffler.name),1)]),Wlt,(tt(!0),it(Bt,null,Fe(n.muffler.freqs,(a,l)=>(tt(),it("td",{key:l,class:"text-center",style:Uo({background:s.colorValue(s.dBArray[l],s.dBArray,!0,15,100)})},[kt(o,{obj:n.muffler[a.toString()],valuename:"dB",tofixed:1,edit:!0},null,8,["obj"])],4))),128))]),E("tr",null,[Vlt,(tt(!0),it(Bt,null,Fe(n.muffler.freqs,(a,l)=>(tt(),it("td",{key:l,class:"text-center",style:Uo({background:s.colorValue(s.dBArray[l],s.dBArray,!0,15,100)})},[kt(o,{obj:n.muffler[a.toString()],valuename:"\u03B1",tofixed:3,edit:!0},null,8,["obj"])],4))),128))])],64)}var Glt=On(qlt,[["render",Ylt]]);const Cv=163;function Klt(t){return t=Math.abs(t),t<=Cv?1-1/Math.pow(10,t/10):1}function Xlt(t){if(t=Math.abs(t),t<=1){let e=10*Math.log10(1/(1-t));return e==1/0&&(e=Cv),e}else return Cv}class Qlt{constructor(){this.dB=0}get dB(){return this._dB}set dB(e){this._dB=Math.abs(e)}get \u03B1(){return Klt(this.dB)}set \u03B1(e){this.dB=Xlt(Math.abs(e))}}class Zlt{constructor({name:e="",dBArray:n=null,\u03B1Array:i=null}={}){this.name=e,this.freqs=Br.FREQS,this.freqs.forEach(r=>this[r.toString()]=new Qlt),Array.isArray(n)&&n.length?this.dBArray=n:this.\u03B1Array=i}get \u03B1Array(){return this.freqs.map(e=>this[e.toString()].\u03B1)}set \u03B1Array(e){Array.isArray(e)&&e.length?this.freqs.forEach((n,i)=>this[n.toString()].\u03B1=e[i]):this.freqs.forEach(n=>this[n.toString()].\u03B1=0)}get dBArray(){return this.freqs.map(e=>this[e.toString()].dB)}set dBArray(e){Array.isArray(e)&&e.length?this.freqs.forEach((n,i)=>this[n.toString()].dB=e[i]):this.freqs.forEach(n=>this[n.toString()].dB=0)}muffle(e){return e.map((n,i)=>n-this.dBArray[i])}}const kn={wired:"Wired Mat",wired_alu:"Wired Mat-Alu",wired_extra:"Wired Mat-Extra"};function An(t){return t.toString()+" kg/m\xB3"}function Cn(t){return t.toString()+" mm"}var Jlt=[{type:kn.wired,density:An(105),thickness:Cn(30),arr:[.03,.04,.5,.8,.85,.8,.85,.92]},{type:kn.wired_alu,density:An(105),thickness:Cn(30),arr:[.02,.07,.55,.8,.8,.75,.8,.84]},{type:kn.wired,density:An(80),thickness:Cn(50),arr:[.1,.18,.8,.95,.9,.85,.9,.95]},{type:kn.wired_alu,density:An(80),thickness:Cn(50),arr:[.2,.3,.65,.85,.8,.75,.6,.54]},{type:kn.wired_extra,density:An(80),thickness:Cn(50),arr:[.1,.2,.8,.9,.85,.85,.95,.97]},{type:kn.wired,density:An(105),thickness:Cn(50),arr:[.15,.25,.7,.85,.85,.8,.55,.51]},{type:kn.wired_alu,density:An(105),thickness:Cn(50),arr:[.15,.25,.7,.85,.85,.8,.55,.51]},{type:kn.wired_extra,density:An(105),thickness:Cn(50),arr:[.09,.17,.8,.85,.85,.85,.95,.99]},{type:kn.wired,density:An(80),thickness:Cn(100),arr:[.35,.51,.95,.95,.95,.9,.9,.96]},{type:kn.wired_alu,density:An(80),thickness:Cn(100),arr:[.55,.63,.75,.85,.85,.8,.55,.51]},{type:kn.wired_extra,density:An(80),thickness:Cn(100),arr:[.38,.64,.85,.9,.9,.85,.95,.98]},{type:kn.wired,density:An(105),thickness:Cn(100),arr:[.45,.56,.85,.95,.95,.9,.9,.9]},{type:kn.wired_alu,density:An(105),thickness:Cn(100),arr:[.5,.57,.8,.8,.9,.8,.55,.49]},{type:kn.wired_extra,density:An(105),thickness:Cn(100),arr:[.45,.59,.8,.85,.9,.9,.9,.93]}],tut="./index.assets/rockwool.0c628d03.svg";const eut={name:"Noise",props:{fan:Object,mufflers:Object,cookie:{type:String,default:""}},data(){return{rockwoolMate:null}},computed:{rockwoolLogo(){return tut},freqs(){return Br.FREQS},fanNoise(){return this.fan.noise},noisePoints(){return[{name:"inlet",titleNoise:"\u0432 \u0441\u0435\u0442\u044C \u043D\u0430 \u0432\u0445\u043E\u0434\u0435",titleMuffler:"\u043D\u0430 \u0432\u0445\u043E\u0434\u0435",power:"Lwin"},{name:"outlet",titleNoise:"\u0432 \u0441\u0435\u0442\u044C \u043D\u0430 \u0432\u044B\u0445\u043E\u0434\u0435",titleMuffler:"\u043D\u0430 \u0432\u044B\u0445\u043E\u0434\u0435",power:"Lwout"},{name:"case",titleNoise:"\u043E\u0442 \u043A\u043E\u0440\u043F\u0443\u0441\u0430",titleMuffler:"\u043D\u0430 \u043A\u043E\u0440\u043F\u0443\u0441\u0435",power:"Lwcase"}]},originalNoise(){let t=this;return this.noisePoints.map(function(e){return{name:e.name,title:e.titleNoise,total:t.fanNoise[`${e.power}Corr`],octaves:t.fanNoise[e.power]}})},reducedNoise(){let t=this.mufflers.muffle(this.fanNoise);return this.noisePoints.map(function(e){return{name:e.name,title:e.titleNoise,total:t[`${e.power}Corr`],octaves:t[e.power]}})},rockwoolMates(){return Jlt.map(function(t){return{name:`${t.type} \u25CF ${t.density} \u25CF ${t.thickness}`,\u03B1Array:t.arr}})},mufflersCookieName(){if(typeof this.cookie=="string"&&this.cookie!=="")return`${this.cookie}-mufflers`}},methods:{addMuffler(t="inlet",e={}){this.mufflers.hasOwnProperty(t)&&this.mufflers[t].push(new Zlt(e))},saveMufflersCookie(){if(this.mufflersCookieName){let t={inlet:this.mufflers.inlet.map(e=>e.dBArray),outlet:this.mufflers.outlet.map(e=>e.dBArray),case:this.mufflers.case.map(e=>e.dBArray)};localStorage.setItem(this.mufflersCookieName,JSON.stringify(t))}},loadMufflersCookie(){let t=this.mufflers;if(this.mufflersCookieName&&JSON.parse(localStorage.getItem(this.mufflersCookieName))!==null){let n=JSON.parse(localStorage.getItem(this.mufflersCookieName));this.noisePoints.forEach(i=>{t[i.name]=[],n[i.name].forEach(r=>{this.addMuffler(i.name,{dBArray:r})})})}}},mounted(){this.loadMufflersCookie()},updated(){this.saveMufflersCookie()},components:{NoiseTable:jlt,MufflerRow:Glt}},ui=t=>(RS("data-v-462a6e70"),t=t(),LS(),t),nut={class:"table-responsive"},iut={class:"table table-sm table-bordered table-fantune-noise"},rut=ui(()=>E("div",null,"\u0423\u0440\u043E\u0432\u043D\u0438 \u0437\u0432\u0443\u043A\u043E\u0432\u043E\u0439 \u043C\u043E\u0449\u043D\u043E\u0441\u0442\u0438",-1)),sut=ui(()=>E("div",null,"\u0431\u0435\u0437 \u0448\u0443\u043C\u043E\u0433\u043B\u0443\u0448\u0438\u0442\u0435\u043B\u0435\u0439",-1)),out={class:""},aut=["colspan"],lut={class:"container"},uut={class:"row justify-content-center"},cut={class:"col-xxl my-1"},fut={class:"input-group"},hut=ui(()=>E("span",{class:"input-group-text"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0433\u043B\u0443\u0448\u0438\u0442\u0435\u043B\u044C:",-1)),dut=ui(()=>E("i",{class:"fas fa-sign-in-alt"},null,-1)),put=Oi("\xA0\u0432\u0445\u043E\u0434 "),gut=[dut,put],mut=ui(()=>E("i",{class:"fas fa-sign-out-alt"},null,-1)),yut=Oi("\xA0\u0432\u044B\u0445\u043E\u0434 "),_ut=[mut,yut],vut=ui(()=>E("i",{class:"fas fa-square"},null,-1)),xut=Oi("\xA0\u043A\u043E\u0440\u043F\u0443\u0441 "),but=[vut,xut],wut={class:"col-xxl my-1"},Eut={class:"input-group"},kut={class:"input-group-text"},Aut=Oi("\u041C\u0430\u0442\xA0"),Cut=["src"],Mut=Oi("\xA0\u043D\u0430 \u043A\u043E\u0440\u043F\u0443\u0441:"),Sut=["value"],Tut=ui(()=>E("i",{class:"fas fa-plus"},null,-1)),Dut=Oi("\xA0\u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C "),$ut=[Tut,Dut],Out={key:0,class:"table-fantune-header text-center"},Nut=ui(()=>E("th",{rowspan:"2",colspan:"2",scope:"col"},"\u0413\u043B\u0443\u0448\u0438\u0442\u0435\u043B\u0438",-1)),Fut=["colspan"],Put=ui(()=>E("div",null,"\u0434\u0411, \u043F\u043E \u043E\u043A\u0442\u0430\u0432\u043D\u044B\u043C \u043F\u043E\u043B\u043E\u0441\u0430\u043C, \u0413\u0446",-1)),Rut=[Put],Lut=["onClick"],Iut=ui(()=>E("i",{class:"fas fa-trash-alt"},null,-1)),But=Oi("\xA0\u0423\u0434\u0430\u043B\u0438\u0442\u044C "),zut=[Iut,But],Uut=ui(()=>E("div",null,"\u0423\u0440\u043E\u0432\u043D\u0438 \u0437\u0432\u0443\u043A\u043E\u0432\u043E\u0439 \u043C\u043E\u0449\u043D\u043E\u0441\u0442\u0438",-1)),jut=ui(()=>E("div",null,"\u043F\u043E\u0441\u043B\u0435 \u0448\u0443\u043C\u043E\u0433\u043B\u0443\u0448\u0438\u0442\u0435\u043B\u0435\u0439",-1));function qut(t,e,n,i,r,s){const o=fn("NoiseTable"),a=fn("MufflerRow");return tt(),it("div",nut,[E("table",iut,[kt(o,{noisefan:s.originalNoise,freqs:s.freqs},{default:ae(()=>[rut,sut]),_:1},8,["noisefan","freqs"]),E("thead",null,[E("tr",out,[E("th",{colspan:s.freqs.length+2},[E("div",lut,[E("div",uut,[E("div",cut,[E("div",fut,[hut,E("button",{onClick:e[0]||(e[0]=l=>s.addMuffler("inlet")),type:"button",class:"btn btn-outline-primary"},gut),E("button",{onClick:e[1]||(e[1]=l=>s.addMuffler("outlet")),type:"button",class:"btn btn-outline-primary"},_ut),E("button",{onClick:e[2]||(e[2]=l=>s.addMuffler("case")),type:"button",class:"btn btn-outline-primary"},but)])]),E("div",wut,[E("div",Eut,[E("span",kut,[Aut,E("img",{src:s.rockwoolLogo,height:"20"},null,8,Cut),Mut]),Jo(E("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=l=>r.rockwoolMate=l)},[(tt(!0),it(Bt,null,Fe(s.rockwoolMates,l=>(tt(),it("option",{value:l,key:l},xt(l.name),9,Sut))),128))],512),[[fD,r.rockwoolMate]]),kt(dn,{appear:"",name:"fade-scale"},{default:ae(()=>[Jo(E("button",{onClick:e[4]||(e[4]=l=>s.addMuffler("case",r.rockwoolMate)),type:"button",class:"btn btn-outline-primary"},$ut,512),[[gb,r.rockwoolMate]])]),_:1})])])])])],8,aut)])]),kt(dn,{appear:"",name:"fade-scale"},{default:ae(()=>[n.mufflers.all.length?(tt(),it("thead",Out,[E("tr",null,[Nut,E("th",{colspan:s.freqs.length,scope:"col"},Rut,8,Fut)]),E("tr",null,[(tt(!0),it(Bt,null,Fe(s.freqs,l=>(tt(),it("th",{scope:"col",key:l},[E("div",null,xt(l),1)]))),128))])])):hn("",!0)]),_:1}),E("tbody",null,[(tt(!0),it(Bt,null,Fe(s.noisePoints,l=>(tt(),it(Bt,null,[n.mufflers[l.name].length?(tt(!0),it(Bt,{key:0},Fe(n.mufflers[l.name],(u,c)=>(tt(),$i(a,{muffler:u,key:c},{default:ae(()=>[Oi(xt(l.titleMuffler)+" ",1),E("button",{onClick:f=>n.mufflers[l.name].splice(c,1),type:"button",class:"btn btn-sm btn-outline-danger mx-1 p-1"},zut,8,Lut)]),_:2},1032,["muffler"]))),128)):hn("",!0)],64))),256))]),n.mufflers.all.length?(tt(),$i(o,{key:0,noisefan:s.reducedNoise,freqs:s.freqs},{default:ae(()=>[Uut,jut]),_:1},8,["noisefan","freqs"])):hn("",!0)])])}var Hut=On(eut,[["render",qut],["__scopeId","data-v-462a6e70"]]);const Wut=[-26.2,-16.1,-8.6,-3.2,0,1.2,1,-1.1];function Mv(t){let e=t.map((n,i)=>Math.pow(10,.1*(n+Wut[i]))).reduce((n,i)=>n+i);return 10*Math.log10(e)}class Vut{constructor(){this.inlet=[],this.outlet=[],this.case=[]}get all(){return[...this.inlet,...this.outlet,...this.case]}muffle(e){let n={freqs:e.freqs,Lwin:e.Lwin,Lwout:e.Lwout,Lwcase:e.Lwcase,get LwinCorr(){return Mv(this.Lwin)},get LwoutCorr(){return Mv(this.Lwout)},get LwcaseCorr(){return Mv(this.Lwcase)}};return this.inlet.forEach(i=>n.Lwin=i.muffle(n.Lwin)),this.outlet.forEach(i=>n.Lwout=i.muffle(n.Lwout)),this.case.forEach(i=>n.Lwcase=i.muffle(n.Lwcase)),n}}const Yut={name:"FanTune",props:{query:Object,result:Object,searching:Boolean,notFound:Boolean,connected:Boolean,online:Boolean},data(){return{mufflers:new Vut}},computed:{cookiePrefix(){return"fantune-vue-input-"}},methods:{onChangeInputParams(){this.$emit("changeInputParams")}},mounted(){},components:{PageCard:xD,PhysInput:dg,PhysOutput:pg,QueryForm:aP,ResultFanCard:_I,ResultIsAbsentCard:EI,Graph:klt,Noise:Hut}},Gut={class:"container-fluid"},Kut={class:"row"},Xut={class:"col-lg",ref:"selectionCol"},Qut={key:0},Zut={class:"col-lg-8"},Jut={class:"row"},tct={class:"col-lg"},ect={key:0,class:"bg-danger text-white rounded m-2 p-2 align-baseline"},nct=E("div",{class:"spinner-border align-middle text-white mx-2",role:"status"},null,-1),ict=E("div",{class:"d-inline align-middle mx-2"},"\u0421\u043E\u0435\u0434\u0438\u043D\u044F\u0435\u043C\u0441\u044F \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C...",-1),rct=[nct,ict],sct={key:0,class:"bg-danger text-white rounded m-2 p-2"},oct=E("div",{class:"spinner-border align-middle text-white mx-2",role:"status"},null,-1),act=E("div",{class:"d-inline align-middle mx-2"}," \u0421\u0435\u0440\u0432\u0435\u0440 \u043F\u044B\u0442\u0430\u0435\u0442\u0441\u044F \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u043E\u0441\u0442\u0443\u043F \u043A \u0431\u0430\u0437\u0435 \u0434\u0430\u043D\u043D\u044B\u0445... ",-1),lct=[oct,act];function uct(t,e,n,i,r,s){const o=fn("QueryForm"),a=fn("PageCard"),l=fn("ResultFanCard"),u=fn("ResultIsAbsentCard"),c=fn("Graph"),f=fn("Noise");return tt(),it("div",null,[E("div",Gut,[E("div",Kut,[E("div",Xut,[kt(dn,{appear:"",name:"fade-scale"},{default:ae(()=>[Jo(kt(a,{header:"\u041F\u043E\u0434\u0431\u043E\u0440:"},{default:ae(()=>[kt(o,{query:n.query,result:n.result,cookiePrefix:s.cookiePrefix,onChange:s.onChangeInputParams},null,8,["query","result","cookiePrefix","onChange"])]),_:1},512),[[gb,n.connected&&n.online]])]),_:1}),kt(dn,{appear:"",name:"fade-scale"},{default:ae(()=>[n.connected&&n.online?(tt(),it("div",Qut,[kt(dn,{appear:"",name:"fade-scale",mode:"out-in"},{default:ae(()=>{var h,d;return[((d=(h=n.result)==null?void 0:h.optimalFan)==null?void 0:d.scheme)||n.searching?(tt(),$i(a,{key:0,header:"\u041F\u043E\u0434\u043E\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0432\u0435\u043D\u0442\u0438\u043B\u044F\u0442\u043E\u0440:"},{default:ae(()=>{var p;return[kt(l,{fan:(p=n.result)==null?void 0:p.optimalFan},null,8,["fan"])]}),_:1})):(tt(),$i(a,{key:1},{default:ae(()=>[kt(u,{result:n.result},null,8,["result"])]),_:1}))]}),_:1})])):hn("",!0)]),_:1})],512),E("div",Zut,[kt(dn,{appear:"",name:"fade-scale"},{default:ae(()=>{var h,d;return[n.connected&&n.online&&((d=(h=n.result)==null?void 0:h.optimalFan)==null?void 0:d.graph)?(tt(),$i(a,{key:0,header:"\u0410\u044D\u0440\u043E\u0434\u0438\u043D\u0430\u043C\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:"},{default:ae(()=>{var p;return[kt(c,{fan:(p=n.result)==null?void 0:p.optimalFan,graphid:"fantune-vega-natural-chart"},null,8,["fan"])]}),_:1})):hn("",!0)]}),_:1})])]),E("div",Jut,[E("div",tct,[kt(dn,{appear:"",name:"fade-scale"},{default:ae(()=>{var h,d;return[n.connected&&n.online&&((d=(h=n.result)==null?void 0:h.optimalFan)==null?void 0:d.noise)?(tt(),$i(a,{key:0,header:"\u0428\u0443\u043C\u043E\u0432\u0430\u044F \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0430:"},{default:ae(()=>{var p;return[kt(f,{fan:(p=n.result)==null?void 0:p.optimalFan,mufflers:r.mufflers,cookie:`${s.cookiePrefix}noise`},null,8,["fan","mufflers","cookie"])]}),_:1})):hn("",!0)]}),_:1})])])]),kt(dn,{appear:"",name:"fade-scale"},{default:ae(()=>[n.connected?hn("",!0):(tt(),it("div",ect,rct))]),_:1}),kt(dn,{appear:"",name:"fade-scale"},{default:ae(()=>[n.connected&&!n.online?(tt(),it("div",sct,lct)):hn("",!0)]),_:1})])}var hct=On(Yut,[["render",uct]]);class dct{constructor(e=1500,n=20,i=13e3,r=1e3,s=1){this.n=e,this.t=n,this.Q=i,this.Pv=r,this.depth=s}get t(){return this._t}set t(e){e<Br.T0?this._t=Br.T0:this._t=e}get export(){let e={};return Object.keys(this).forEach(n=>{n==="_t"?e.t=this[n]:e[n]=this[n]}),e}}export{dct as F,On as _,hct as a,kt as b,it as c,E as d,fct as e,tt as o,fn as r,xt as t,gb as v,Jo as w};
